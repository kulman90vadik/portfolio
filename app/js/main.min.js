!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(_,t){"use strict";function m(t){return null!=t&&t===t.window}var e=[],i=Object.getPrototypeOf,s=e.slice,g=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},l=e.push,r=e.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,c=a.call(Object),y={},b=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},S=_.document,h={type:!0,src:!0,nonce:!0,noModule:!0};function x(t,e,i){var n,r,o=(i=i||S).createElement("script");if(o.text=t,e)for(n in h)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function f(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var u="3.6.0",M=function(t,e){return new M.fn.init(t,e)};function d(t){var e=!!t&&"length"in t&&t.length,i=f(t);return!b(t)&&!m(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}M.fn=M.prototype={jquery:u,constructor:M,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=M.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return M.each(this,t)},map:function(i){return this.pushStack(M.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},M.extend=M.fn.extend=function(){var t,e,i,n,r,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||b(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(M.isPlainObject(i)||(n=Array.isArray(i)))?(r=o[e],r=n&&!Array.isArray(r)?[]:n||M.isPlainObject(r)?r:{},n=!1,o[e]=M.extend(l,r,i)):void 0!==i&&(o[e]=i));return o},M.extend({expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==o.call(t))&&(!(t=i(t))||"function"==typeof(t=v.call(t,"constructor")&&t.constructor)&&a.call(t)===c)},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e,i){x(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(d(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){e=e||[];return null!=t&&(d(Object(t))?M.merge(e,"string"==typeof t?[t]:t):l.call(e,t)),e},inArray:function(t,e,i){return null==e?-1:r.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!=a&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,a=[];if(d(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(M.fn[Symbol.iterator]=e[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var p=function(i){function u(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function n(){_()}var t,d,x,o,r,p,f,m,w,l,c,_,S,a,M,g,s,h,v,T="sizzle"+ +new Date,y=i.document,E=0,b=0,C=lt(),A=lt(),P=lt(),L=lt(),R=function(t,e){return t===e&&(c=!0),0},O={}.hasOwnProperty,e=[],D=e.pop,I=e.push,k=e.push,N=e.slice,F=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",H="(?:\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",U="\\["+z+"*("+H+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+z+"*\\]",j=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",G=new RegExp(z+"+","g"),V=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),W=new RegExp("^"+z+"*,"+z+"*"),$=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),q=new RegExp(z+"|>"),X=new RegExp(j),Y=new RegExp("^"+H+"$"),Z={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,it=/[+~]/,nt=new RegExp("\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\([^\\r\\n\\f])","g"),rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=yt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{k.apply(e=N.call(y.childNodes),y.childNodes),e[y.childNodes.length].nodeType}catch(t){k={apply:e.length?function(t,e){I.apply(t,N.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(e,t,i,n){var r,o,a,s,l,c,h=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!n&&(_(t),t=t||S,M)){if(11!==u&&(s=et.exec(e)))if(c=s[1]){if(9===u){if(!(o=t.getElementById(c)))return i;if(o.id===c)return i.push(o),i}else if(h&&(o=h.getElementById(c))&&v(t,o)&&o.id===c)return i.push(o),i}else{if(s[2])return k.apply(i,t.getElementsByTagName(e)),i;if((c=s[3])&&d.getElementsByClassName&&t.getElementsByClassName)return k.apply(i,t.getElementsByClassName(c)),i}if(d.qsa&&!L[e+" "]&&(!g||!g.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(c=e,h=t,1===u&&(q.test(e)||$.test(e))){for((h=it.test(e)&&mt(t.parentNode)||t)===t&&d.scope||((a=t.getAttribute("id"))?a=a.replace(rt,ot):t.setAttribute("id",a=T)),r=(l=p(e)).length;r--;)l[r]=(a?"#"+a:":scope")+" "+vt(l[r]);c=l.join(",")}try{return k.apply(i,h.querySelectorAll(c)),i}catch(t){L(e,!0)}finally{a===T&&t.removeAttribute("id")}}}return m(e.replace(V,"$1"),t,i,n)}function lt(){var i=[];function n(t,e){return i.push(t+" ")>x.cacheLength&&delete n[i.shift()],n[t+" "]=e}return n}function ct(t){return t[T]=!0,t}function ht(t){var e=S.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&at(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ft(a){return ct(function(o){return o=+o,ct(function(t,e){for(var i,n=a([],t.length,o),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=st.support={},r=st.isXML=function(t){var e=t&&t.namespaceURI,t=t&&(t.ownerDocument||t).documentElement;return!J.test(e||t&&t.nodeName||"HTML")},_=st.setDocument=function(t){var e,t=t?t.ownerDocument||t:y;return t!=S&&9===t.nodeType&&t.documentElement&&(a=(S=t).documentElement,M=!r(S),y!=S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",n,!1):e.attachEvent&&e.attachEvent("onunload",n)),d.scope=ht(function(t){return a.appendChild(t).appendChild(S.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),d.attributes=ht(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=ht(function(t){return t.appendChild(S.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=tt.test(S.getElementsByClassName),d.getById=ht(function(t){return a.appendChild(t).id=T,!S.getElementsByName||!S.getElementsByName(T).length}),d.getById?(x.filter.ID=function(t){var e=t.replace(nt,u);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&M){t=e.getElementById(t);return t?[t]:[]}}):(x.filter.ID=function(t){var e=t.replace(nt,u);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&M){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),x.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},x.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&M)return e.getElementsByClassName(t)},s=[],g=[],(d.qsa=tt.test(S.querySelectorAll))&&(ht(function(t){var e;a.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+z+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+z+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+T+"-]").length||g.push("~="),(e=S.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+z+"*name"+z+"*="+z+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ht(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=S.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+z+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(d.matchesSelector=tt.test(h=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ht(function(t){d.disconnectedMatch=h.call(t,"*"),h.call(t,"[s!='']:x"),s.push("!=",j)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),e=tt.test(a.compareDocumentPosition),v=e||tt.test(a.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(i.contains?i.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},R=e?function(t,e){if(t===e)return c=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===i?t==S||t.ownerDocument==y&&v(y,t)?-1:e==S||e.ownerDocument==y&&v(y,e)?1:l?F(l,t)-F(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t==S?-1:e==S?1:r?-1:o?1:l?F(l,t)-F(l,e):0;if(r===o)return dt(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?dt(a[n],s[n]):a[n]==y?-1:s[n]==y?1:0}),S},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(_(t),d.matchesSelector&&M&&!L[e+" "]&&(!s||!s.test(e))&&(!g||!g.test(e)))try{var i=h.call(t,e);if(i||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){L(e,!0)}return 0<st(e,S,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=S&&_(t),v(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=S&&_(t);var i=x.attrHandle[e.toLowerCase()],i=i&&O.call(x.attrHandle,e.toLowerCase())?i(t,e,!M):void 0;return void 0!==i?i:d.attributes||!M?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},st.escape=function(t){return(t+"").replace(rt,ot)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],n=0,r=0;if(c=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(R),c){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return l=null,t},o=st.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(x=st.selectors={cacheLength:50,createPseudo:ct,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,u),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,u),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&X.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,u).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+z+")"+t+"("+z+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(t){t=st.attr(t,e);return null==t?"!="===i:!i||(t+="","="===i?t===n:"!="===i?t!==n:"^="===i?n&&0===t.indexOf(n):"*="===i?n&&-1<t.indexOf(n):"$="===i?n&&t.slice(-n.length)===n:"~="===i?-1<(" "+t.replace(G," ")+" ").indexOf(n):"|="===i&&(t===n||t.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,t,e,m,g){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,r,o,a,s,l,c=v!=y?"nextSibling":"previousSibling",h=t.parentNode,u=b&&t.nodeName.toLowerCase(),d=!i&&!b,p=!1;if(h){if(v){for(;c;){for(a=t;a=a[c];)if(b?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?h.firstChild:h.lastChild],y&&d){for(p=(s=(n=(r=(o=(a=h)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===E&&n[1])&&n[2],a=s&&h.childNodes[s];a=++s&&a&&a[c]||(p=s=0)||l.pop();)if(1===a.nodeType&&++p&&a===t){r[f]=[E,s,p];break}}else if(!1===(p=d?s=(n=(r=(o=(a=t)[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===E&&n[1]:p))for(;(a=++s&&a&&a[c]||(p=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++p||(d&&((r=(o=a[T]||(a[T]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[E,p]),a!==t)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(t,o){var e,a=x.pseudos[t]||x.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return a[T]?a(o):1<a.length?(e=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,e){for(var i,n=a(t,o),r=n.length;r--;)t[i=F(t,n[r])]=!(e[i]=n[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:ct(function(t){var n=[],r=[],s=f(t.replace(V,"$1"));return s[T]?ct(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,i){return n[0]=t,s(n,null,i,r),n[0]=null,!r.pop()}}),has:ct(function(e){return function(t){return 0<st(e,t).length}}),contains:ct(function(e){return e=e.replace(nt,u),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ct(function(i){return Y.test(i||"")||st.error("unsupported lang: "+i),i=i.replace(nt,u).toLowerCase(),function(t){var e;do{if(e=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,i){return[i<0?i+e:i]}),even:ft(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:ft(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:ft(function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t}),gt:ft(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})x.pseudos[t]=function(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}(t);function gt(){}function vt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function yt(a,t,e){var s=t.dir,l=t.next,c=l||s,h=e&&"parentNode"===c,u=b++;return t.first?function(t,e,i){for(;t=t[s];)if(1===t.nodeType||h)return a(t,e,i);return!1}:function(t,e,i){var n,r,o=[E,u];if(i){for(;t=t[s];)if((1===t.nodeType||h)&&a(t,e,i))return!0}else for(;t=t[s];)if(1===t.nodeType||h)if(n=(r=t[T]||(t[T]={}))[t.uniqueID]||(r[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[s]||t;else{if((r=n[c])&&r[0]===E&&r[1]===u)return o[2]=r[2];if((n[c]=o)[2]=a(t,e,i))return!0}return!1}}function bt(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function xt(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),c&&e.push(s)));return a}function wt(p,f,m,g,v,t){return g&&!g[T]&&(g=wt(g)),v&&!v[T]&&(v=wt(v,t)),ct(function(t,e,i,n){var r,o,a,s=[],l=[],c=e.length,h=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)st(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),u=!p||!t&&f?h:xt(h,s,p,i,n),d=m?v||(t?p:c||g)?[]:e:u;if(m&&m(u,d,i,n),g)for(r=xt(d,l),g(r,[],i,n),o=r.length;o--;)(a=r[o])&&(d[l[o]]=!(u[l[o]]=a));if(t){if(v||p){if(v){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(u[o]=a);v(null,d=[],r,n)}for(o=d.length;o--;)(a=d[o])&&-1<(r=v?F(t,a):s[o])&&(t[r]=!(e[r]=a))}}else d=xt(d===e?d.splice(c,d.length):d),v?v(null,e,d,n):k.apply(e,d)})}function _t(g,v){function t(t,e,i,n,r){var o,a,s,l=0,c="0",h=t&&[],u=[],d=w,p=t||b&&x.find.TAG("*",r),f=E+=null==d?1:Math.random()||.1,m=p.length;for(r&&(w=e==S||e||r);c!==m&&null!=(o=p[c]);c++){if(b&&o){for(a=0,e||o.ownerDocument==S||(_(o),i=!M);s=g[a++];)if(s(o,e||S,i)){n.push(o);break}r&&(E=f)}y&&((o=!s&&o)&&l--,t&&h.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(h,u,e,i);if(t){if(0<l)for(;c--;)h[c]||u[c]||(u[c]=D.call(n));u=xt(u)}k.apply(n,u),r&&!t&&0<u.length&&1<l+v.length&&st.uniqueSort(n)}return r&&(E=f,w=d),h}var y=0<v.length,b=0<g.length;return y?ct(t):t}return gt.prototype=x.filters=x.pseudos,x.setFilters=new gt,p=st.tokenize=function(t,e){var i,n,r,o,a,s,l,c=A[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],l=x.preFilter;a;){for(o in i&&!(n=W.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=$.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(V," ")}),a=a.slice(i.length)),x.filter)!(n=Z[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?st.error(t):A(t,s).slice(0)},f=st.compile=function(t,e){var i,n=[],r=[],o=P[t+" "];if(!o){for(i=(e=e||p(t)).length;i--;)((o=function t(e){for(var n,i,r,o=e.length,a=x.relative[e[0].type],s=a||x.relative[" "],l=a?1:0,c=yt(function(t){return t===n},s,!0),h=yt(function(t){return-1<F(n,t)},s,!0),u=[function(t,e,i){return i=!a&&(i||e!==w)||((n=e).nodeType?c:h)(t,e,i),n=null,i}];l<o;l++)if(i=x.relative[e[l].type])u=[yt(bt(u),i)];else{if((i=x.filter[e[l].type].apply(null,e[l].matches))[T]){for(r=++l;r<o&&!x.relative[e[r].type];r++);return wt(1<l&&bt(u),1<l&&vt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(V,"$1"),i,l<r&&t(e.slice(l,r)),r<o&&t(e=e.slice(r)),r<o&&vt(e))}u.push(i)}return bt(u)}(e[i]))[T]?n:r).push(o);(o=P(t,_t(r,n))).selector=t}return o},m=st.select=function(t,e,i,n){var r,o,a,s,l,c="function"==typeof t&&t,h=!n&&p(t=c.selector||t);if(i=i||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&M&&x.relative[o[1].type]){if(!(e=(x.find.ID(a.matches[0].replace(nt,u),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=Z.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((l=x.find[s])&&(n=l(a.matches[0].replace(nt,u),it.test(o[0].type)&&mt(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&vt(o)))return k.apply(i,n),i;break}}return(c||f(t,h))(n,e,!M,i,!e||it.test(t)&&mt(e.parentNode)||e),i},d.sortStable=T.split("").sort(R).join("")===T,d.detectDuplicates=!!c,_(),d.sortDetached=ht(function(t){return 1&t.compareDocumentPosition(S.createElement("fieldset"))}),ht(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&ht(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ht(function(t){return null==t.getAttribute("disabled")})||ut(B,function(t,e,i){if(!i)return!0===t[e]?e.toLowerCase():(e=t.getAttributeNode(e))&&e.specified?e.value:null}),st}(_);M.find=p,M.expr=p.selectors,M.expr[":"]=M.expr.pseudos,M.uniqueSort=M.unique=p.uniqueSort,M.text=p.getText,M.isXMLDoc=p.isXML,M.contains=p.contains,M.escapeSelector=p.escape;function w(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&M(t).is(i))break;n.push(t)}return n}function T(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}var E=M.expr.match.needsContext;function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,i,n){return b(i)?M.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?M.grep(t,function(t){return t===i!==n}):"string"!=typeof i?M.grep(t,function(t){return-1<r.call(i,t)!==n}):M.filter(i,t,n)}M.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?M.find.matchesSelector(n,t)?[n]:[]:M.find.matches(t,M.grep(e,function(t){return 1===t.nodeType}))},M.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(M(t).filter(function(){for(e=0;e<n;e++)if(M.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)M.find(t,r[e],i);return 1<n?M.uniqueSort(i):i},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&E.test(t)?M(t):t||[],!1).length}});var L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(M.fn.init=function(t,e,i){if(!t)return this;if(i=i||R,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):b(t)?void 0!==i.ready?i.ready(t):t(M):M.makeArray(t,this);if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!n[1]&&e)return(!e||e.jquery?e||i:this.constructor(e)).find(t);if(n[1]){if(e=e instanceof M?e[0]:e,M.merge(this,M.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),A.test(n[1])&&M.isPlainObject(e))for(var n in e)b(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(t=S.getElementById(n[2]))&&(this[0]=t,this.length=1),this}).prototype=M.fn;var R=M(S),O=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}M.fn.extend({has:function(t){var e=M(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(M.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],a="string"!=typeof t&&M(t);if(!E.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&M.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?M.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(M(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),M.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return w(t,"parentNode")},parentsUntil:function(t,e,i){return w(t,"parentNode",i)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return w(t,"nextSibling")},prevAll:function(t){return w(t,"previousSibling")},nextUntil:function(t,e,i){return w(t,"nextSibling",i)},prevUntil:function(t,e,i){return w(t,"previousSibling",i)},siblings:function(t){return T((t.parentNode||{}).firstChild,t)},children:function(t){return T(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),M.merge([],t.childNodes))}},function(n,r){M.fn[n]=function(t,e){var i=M.map(this,r,t);return(e="Until"!==n.slice(-5)?t:e)&&"string"==typeof e&&(i=M.filter(e,i)),1<this.length&&(D[n]||M.uniqueSort(i),O.test(n)&&i.reverse()),this.pushStack(i)}});var k=/[^\x20\t\r\n\f]+/g;function N(t){return t}function F(t){throw t}function B(t,e,i,n){var r;try{t&&b(r=t.promise)?r.call(t).done(e).fail(i):t&&b(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}M.Callbacks=function(n){var i;n="string"==typeof n?(i={},M.each(n.match(k)||[],function(t,e){i[e]=!0}),i):M.extend({},n);function r(){for(a=a||n.once,e=o=!0;l.length;c=-1)for(t=l.shift();++c<s.length;)!1===s[c].apply(t[0],t[1])&&n.stopOnFalse&&(c=s.length,t=!1);n.memory||(t=!1),o=!1,a&&(s=t?[]:"")}var o,t,e,a,s=[],l=[],c=-1,h={add:function(){return s&&(t&&!o&&(c=s.length-1,l.push(t)),function i(t){M.each(t,function(t,e){b(e)?n.unique&&h.has(e)||s.push(e):e&&e.length&&"string"!==f(e)&&i(e)})}(arguments),t&&!o&&r()),this},remove:function(){return M.each(arguments,function(t,e){for(var i;-1<(i=M.inArray(e,s,i));)s.splice(i,1),i<=c&&c--}),this},has:function(t){return t?-1<M.inArray(t,s):0<s.length},empty:function(){return s=s&&[],this},disable:function(){return a=l=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=l=[],t||o||(s=t=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),o||r()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!e}};return h},M.extend({Deferred:function(t){var o=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var r=arguments;return M.Deferred(function(n){M.each(o,function(t,e){var i=b(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=i&&i.apply(this,arguments);t&&b(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),r=null}).promise()},then:function(e,i,n){var l=0;function c(r,o,a,s){return function(){function t(){var t,e;if(!(r<l)){if((t=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,b(e)?s?e.call(t,c(l,o,N,s),c(l,o,F,s)):(l++,e.call(t,c(l,o,N,s),c(l,o,F,s),c(l,o,N,o.notifyWith))):(a!==N&&(i=void 0,n=[t]),(s||o.resolveWith)(i,n))}}var i=this,n=arguments,e=s?t:function(){try{t()}catch(t){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(a!==F&&(i=void 0,n=[t]),o.rejectWith(i,n))}};r?e():(M.Deferred.getStackHook&&(e.stackTrace=M.Deferred.getStackHook()),_.setTimeout(e))}}return M.Deferred(function(t){o[0][3].add(c(0,t,b(n)?n:N,t.notifyWith)),o[1][3].add(c(0,t,b(e)?e:N)),o[2][3].add(c(0,t,b(i)?i:F))}).promise()},promise:function(t){return null!=t?M.extend(t,a):a}},s={};return M.each(o,function(t,e){var i=e[2],n=e[5];a[e[1]]=i.add,n&&i.add(function(){r=n},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),i.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=i.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){function e(e){return function(t){r[e]=this,o[e]=1<arguments.length?s.call(arguments):t,--i||a.resolveWith(r,o)}}var i=arguments.length,n=i,r=Array(n),o=s.call(arguments),a=M.Deferred();if(i<=1&&(B(t,a.done(e(n)).resolve,a.reject,!i),"pending"===a.state()||b(o[n]&&o[n].then)))return a.then();for(;n--;)B(o[n],e(n),a.reject);return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(t,e){_.console&&_.console.warn&&t&&z.test(t.name)&&_.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},M.readyException=function(t){_.setTimeout(function(){throw t})};var H=M.Deferred();function U(){S.removeEventListener("DOMContentLoaded",U),_.removeEventListener("load",U),M.ready()}M.fn.ready=function(t){return H.then(t).catch(function(t){M.readyException(t)}),this},M.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--M.readyWait:M.isReady)||(M.isReady=!0)!==t&&0<--M.readyWait||H.resolveWith(S,[M])}}),M.ready.then=H.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?_.setTimeout(M.ready):(S.addEventListener("DOMContentLoaded",U),_.addEventListener("load",U));var j=function(t,e,i,n,r,o,a){var s=0,l=t.length,c=null==i;if("object"===f(i))for(s in r=!0,i)j(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,b(n)||(a=!0),e=c?a?(e.call(t,n),null):(c=e,function(t,e,i){return c.call(M(t),i)}):e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:c?e.call(t):l?e(t[0],i):o},G=/^-ms-/,V=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function $(t){return t.replace(G,"ms-").replace(V,W)}function q(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function X(){this.expando=M.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[$(e)]=i;else for(n in e)r[$(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][$(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map($):(e=$(e))in n?[e]:e.match(k)||[]).length;for(;i--;)delete n[e[i]]}void 0!==e&&!M.isEmptyObject(n)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!M.isEmptyObject(t)}};var Y=new X,Z=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Q(t,e,i){var n,r;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:J.test(r)?JSON.parse(r):r)}catch(t){}Z.set(t,e,i)}else i=void 0;return i}M.extend({hasData:function(t){return Z.hasData(t)||Y.hasData(t)},data:function(t,e,i){return Z.access(t,e,i)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,i){return Y.access(t,e,i)},_removeData:function(t,e){Y.remove(t,e)}}),M.fn.extend({data:function(i,t){var e,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){Z.set(this,i)}):j(this,function(t){var e;return o&&void 0===t?void 0!==(e=Z.get(o,i))||void 0!==(e=Q(o,i))?e:void 0:void this.each(function(){Z.set(this,i,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=Z.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(n=a[e].name).indexOf("data-")&&(n=$(n.slice(5)),Q(o,n,r[n]));Y.set(o,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),M.extend({queue:function(t,e,i){var n;if(t)return n=Y.get(t,e=(e||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=Y.access(t,e,M.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){var i=M.queue(t,e=e||"fx"),n=i.length,r=i.shift(),o=M._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,function(){M.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Y.get(t,i)||Y.access(t,i,{empty:M.Callbacks("once memory").add(function(){Y.remove(t,[e+"queue",i])})})}}),M.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?M.queue(this[0],e):void 0===i?this:this.each(function(){var t=M.queue(this,e,i);M._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&M.dequeue(this,e)})},dequeue:function(t){return this.each(function(){M.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function i(){--r||o.resolveWith(a,[a])}var n,r=1,o=M.Deferred(),a=this,s=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Y.get(a[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=S.documentElement,rt=function(t){return M.contains(t.ownerDocument,t)},ot={composed:!0};nt.getRootNode&&(rt=function(t){return M.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===M.css(t,"display")};function st(t,e,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return M.css(t,e,"")},l=s(),c=i&&i[3]||(M.cssNumber[e]?"":"px"),h=t.nodeType&&(M.cssNumber[e]||"px"!==c&&+l)&&et.exec(M.css(t,e));if(h&&h[3]!==c){for(c=c||h[3],h=+(l/=2)||1;a--;)M.style(t,e,h+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),h/=o;M.style(t,e,(h*=2)+c),i=i||[]}return i&&(h=+h||+l||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=r)),r}var lt={};function ct(t,e){for(var i,n,r,o,a,s=[],l=0,c=t.length;l<c;l++)(n=t[l]).style&&(i=n.style.display,e?("none"===i&&(s[l]=Y.get(n,"display")||null,s[l]||(n.style.display="")),""===n.style.display&&at(n)&&(s[l]=(a=o=void 0,o=(r=n).ownerDocument,a=r.nodeName,(r=lt[a])||(o=o.body.appendChild(o.createElement(a)),r=M.css(o,"display"),o.parentNode.removeChild(o),lt[a]=r="none"===r?"block":r)))):"none"!==i&&(s[l]="none",Y.set(n,"display",i)));for(l=0;l<c;l++)null!=s[l]&&(t[l].style.display=s[l]);return t}M.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?M(this).show():M(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,ut=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i;u=S.createDocumentFragment().appendChild(S.createElement("div")),(p=S.createElement("input")).setAttribute("type","radio"),p.setAttribute("checked","checked"),p.setAttribute("name","t"),u.appendChild(p),y.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,u.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!u.cloneNode(!0).lastChild.defaultValue,u.innerHTML="<option></option>",y.option=!!u.lastChild;var pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ft(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&C(t,e)?M.merge([t],i):i}function mt(t,e){for(var i=0,n=t.length;i<n;i++)Y.set(t[i],"globalEval",!e||Y.get(e[i],"globalEval"))}pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,y.option||(pt.optgroup=pt.option=[1,"<select multiple='multiple'>","</select>"]);var gt=/<|&#?\w+;/;function vt(t,e,i,n,r){for(var o,a,s,l,c,h=e.createDocumentFragment(),u=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===f(o))M.merge(u,o.nodeType?[o]:o);else if(gt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(ut.exec(o)||["",""])[1].toLowerCase(),s=pt[s]||pt._default,a.innerHTML=s[1]+M.htmlPrefilter(o)+s[2],c=s[0];c--;)a=a.lastChild;M.merge(u,a.childNodes),(a=h.firstChild).textContent=""}else u.push(e.createTextNode(o));for(h.textContent="",d=0;o=u[d++];)if(n&&-1<M.inArray(o,n))r&&r.push(o);else if(l=rt(o),a=ft(h.appendChild(o),"script"),l&&mt(a),i)for(c=0;o=a[c++];)dt.test(o.type||"")&&i.push(o);return h}var yt=/^([^.]*)(?:\.(.+)|)/;function bt(){return!0}function xt(){return!1}function wt(t,e){return t===function(){try{return S.activeElement}catch(t){}}()==("focus"===e)}function _t(t,e,i,n,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)_t(t,s,i,n,e[s],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=xt;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return M().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=M.guid++)),t.each(function(){M.event.add(this,e,r,n,i)})}function St(t,r,o){o?(Y.set(t,r,!1),M.event.add(t,r,{namespace:!1,handler:function(t){var e,i,n=Y.get(this,r);if(1&t.isTrigger&&this[r]){if(n.length)(M.event.special[r]||{}).delegateType&&t.stopPropagation();else if(n=s.call(arguments),Y.set(this,r,n),e=o(this,r),this[r](),n!==(i=Y.get(this,r))||e?Y.set(this,r,!1):i={},n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i&&i.value}else n.length&&(Y.set(this,r,{value:M.event.trigger(M.extend(n[0],M.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,r)&&M.event.add(t,r,bt)}M.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,c,h,u,d,p,f=Y.get(e);if(q(e))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&M.find.matchesSelector(nt,r),i.guid||(i.guid=M.guid++),(s=f.events)||(s=f.events=Object.create(null)),(a=f.handle)||(a=f.handle=function(t){return void 0!==M&&M.event.triggered!==t.type?M.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(k)||[""]).length;l--;)u=p=(c=yt.exec(t[l])||[])[1],d=(c[2]||"").split(".").sort(),u&&(h=M.event.special[u]||{},u=(r?h.delegateType:h.bindType)||u,h=M.event.special[u]||{},c=M.extend({type:u,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&M.expr.match.needsContext.test(r),namespace:d.join(".")},o),(p=s[u])||((p=s[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,d,a)||e.addEventListener&&e.addEventListener(u,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),M.event.global[u]=!0)},remove:function(t,e,i,n,r){var o,a,s,l,c,h,u,d,p,f,m,g=Y.hasData(t)&&Y.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(k)||[""]).length;c--;)if(p=m=(s=yt.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(u=M.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)h=d[o],!r&&m!==h.origType||i&&i.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||M.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)M.event.remove(t,p+e[c],i,n,!0);M.isEmptyObject(l)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,a=new Array(arguments.length),s=M.event.fix(t),l=(Y.get(this,"events")||Object.create(null))[s.type]||[],t=M.event.special[s.type]||{};for(a[0]=s,e=1;e<arguments.length;e++)a[e]=arguments[e];if(s.delegateTarget=this,!t.preDispatch||!1!==t.preDispatch.call(this,s)){for(o=M.event.handlers.call(this,s,l),e=0;(n=o[e++])&&!s.isPropagationStopped();)for(s.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(r=((M.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return t.postDispatch&&t.postDispatch.call(this,s),s.result}},handlers:function(t,e){var i,n,r,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?-1<M(r,this).index(c):M.find(r,this,null,[c]).length),a[r]&&o.push(n);o.length&&s.push({elem:c,handlers:o})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(M.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[M.expando]?t:new M.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return ht.test(t.type)&&t.click&&C(t,"input")&&St(t,"click",bt),!1},trigger:function(t){t=this||t;return ht.test(t.type)&&t.click&&C(t,"input")&&St(t,"click"),!0},_default:function(t){t=t.target;return ht.test(t.type)&&t.click&&C(t,"input")&&Y.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},M.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},M.Event=function(t,e){if(!(this instanceof M.Event))return new M.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?bt:xt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&M.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:xt,isPropagationStopped:xt,isImmediatePropagationStopped:xt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=bt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=bt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=bt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(t,e){M.event.special[t]={setup:function(){return St(this,t,wt),!1},trigger:function(){return St(this,t),!0},_default:function(){return!0},delegateType:e}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){M.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||M.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),M.fn.extend({on:function(t,e,i,n){return _t(this,t,e,i,n)},one:function(t,e,i,n){return _t(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,M(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=xt),this.each(function(){M.event.remove(this,t,i,e)});for(r in t)this.off(r,e,t[r]);return this}});var Mt=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ct(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&M(t).children("tbody")[0]||t}function At(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var i,n,r,o;if(1===e.nodeType){if(Y.hasData(t)&&(o=Y.get(t).events))for(r in Y.remove(e,"handle events"),o)for(i=0,n=o[r].length;i<n;i++)M.event.add(e,r,o[r][i]);Z.hasData(t)&&(t=Z.access(t),t=M.extend({},t),Z.set(e,t))}}function Rt(i,n,r,o){n=g(n);var t,e,a,s,l,c,h=0,u=i.length,d=u-1,p=n[0],f=b(p);if(f||1<u&&"string"==typeof p&&!y.checkClone&&Tt.test(p))return i.each(function(t){var e=i.eq(t);f&&(n[0]=p.call(this,t,e.html())),Rt(e,n,r,o)});if(u&&(e=(t=vt(n,i[0].ownerDocument,!1,i,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=M.map(ft(t,"script"),At)).length;h<u;h++)l=t,h!==d&&(l=M.clone(l,!0,!0),s&&M.merge(a,ft(l,"script"))),r.call(i[h],l,h);if(s)for(c=a[a.length-1].ownerDocument,M.map(a,Pt),h=0;h<s;h++)l=a[h],dt.test(l.type||"")&&!Y.access(l,"globalEval")&&M.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?M._evalUrl&&!l.noModule&&M._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):x(l.textContent.replace(Et,""),l,c))}return i}function Ot(t,e,i){for(var n,r=e?M.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||M.cleanData(ft(n)),n.parentNode&&(i&&rt(n)&&mt(ft(n,"script")),n.parentNode.removeChild(n));return t}M.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,a,s,l,c,h=t.cloneNode(!0),u=rt(t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||M.isXMLDoc(t)))for(a=ft(h),n=0,r=(o=ft(t)).length;n<r;n++)s=o[n],l=a[n],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ht.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(e)if(i)for(o=o||ft(t),a=a||ft(h),n=0,r=o.length;n<r;n++)Lt(o[n],a[n]);else Lt(t,h);return 0<(a=ft(h,"script")).length&&mt(a,!u&&ft(t,"script")),h},cleanData:function(t){for(var e,i,n,r=M.event.special,o=0;void 0!==(i=t[o]);o++)if(q(i)){if(e=i[Y.expando]){if(e.events)for(n in e.events)r[n]?M.event.remove(i,n):M.removeEvent(i,n,e.handle);i[Y.expando]=void 0}i[Z.expando]&&(i[Z.expando]=void 0)}}}),M.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return j(this,function(t){return void 0===t?M.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Rt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ct(this,t).appendChild(t)})},prepend:function(){return Rt(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Ct(this,t)).insertBefore(t,e.firstChild)})},before:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(M.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return M.clone(this,t,e)})},html:function(t){return j(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!pt[(ut.exec(t)||["",""])[1].toLowerCase()]){t=M.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(M.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return Rt(this,arguments,function(t){var e=this.parentNode;M.inArray(this,i)<0&&(M.cleanData(ft(this)),e&&e.replaceChild(t,this))},i)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){M.fn[t]=function(t){for(var e,i=[],n=M(t),r=n.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),M(n[o])[a](e),l.apply(i,e.get());return this.pushStack(i)}});function Dt(t,e,i){var n,r={};for(n in e)r[n]=t.style[n],t.style[n]=e[n];for(n in i=i.call(t),e)t.style[n]=r[n];return i}var It,kt,Nt,Ft,Bt,zt,Ht,Ut,jt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return(e=!e||!e.opener?_:e).getComputedStyle(t)},Vt=new RegExp(it.join("|"),"i");function Wt(){var t;Ut&&(Ht.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ut.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(Ht).appendChild(Ut),t=_.getComputedStyle(Ut),It="1%"!==t.top,zt=12===$t(t.marginLeft),Ut.style.right="60%",Ft=36===$t(t.right),kt=36===$t(t.width),Ut.style.position="absolute",Nt=12===$t(Ut.offsetWidth/3),nt.removeChild(Ht),Ut=null)}function $t(t){return Math.round(parseFloat(t))}function qt(t,e,i){var n,r,o=t.style;return(i=i||Gt(t))&&(""!==(r=i.getPropertyValue(e)||i[e])||rt(t)||(r=M.style(t,e)),!y.pixelBoxStyles()&&jt.test(r)&&Vt.test(e)&&(n=o.width,t=o.minWidth,e=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=i.width,o.width=n,o.minWidth=t,o.maxWidth=e)),void 0!==r?r+"":r}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Ht=S.createElement("div"),(Ut=S.createElement("div")).style&&(Ut.style.backgroundClip="content-box",Ut.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===Ut.style.backgroundClip,M.extend(y,{boxSizingReliable:function(){return Wt(),kt},pixelBoxStyles:function(){return Wt(),Ft},pixelPosition:function(){return Wt(),It},reliableMarginLeft:function(){return Wt(),zt},scrollboxSize:function(){return Wt(),Nt},reliableTrDimensions:function(){var t,e,i;return null==Bt&&(t=S.createElement("table"),e=S.createElement("tr"),i=S.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",nt.appendChild(t).appendChild(e).appendChild(i),i=_.getComputedStyle(e),Bt=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,nt.removeChild(t)),Bt}}));var Yt=["Webkit","Moz","ms"],Zt=S.createElement("div").style,Jt={};function Kt(t){var e=M.cssProps[t]||Jt[t];return e||(t in Zt?t:Jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Yt.length;i--;)if((t=Yt[i]+e)in Zt)return t}(t)||t)}var Qt=/^(none|table(?!-c[ea]).+)/,te=/^--/,ee={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"};function ne(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function re(t,e,i,n,r,o){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=M.css(t,i+it[a],!0,r)),n?("content"===i&&(l-=M.css(t,"padding"+it[a],!0,r)),"margin"!==i&&(l-=M.css(t,"border"+it[a]+"Width",!0,r))):(l+=M.css(t,"padding"+it[a],!0,r),"padding"!==i?l+=M.css(t,"border"+it[a]+"Width",!0,r):s+=M.css(t,"border"+it[a]+"Width",!0,r));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function oe(t,e,i){var n=Gt(t),r=(!y.boxSizingReliable()||i)&&"border-box"===M.css(t,"boxSizing",!1,n),o=r,a=qt(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(a)){if(!i)return a;a="auto"}return(!y.boxSizingReliable()&&r||!y.reliableTrDimensions()&&C(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===M.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===M.css(t,"boxSizing",!1,n),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+re(t,e,i||(r?"border":"content"),o,n,a)+"px"}function ae(t,e,i,n,r){return new ae.prototype.init(t,e,i,n,r)}M.extend({cssHooks:{opacity:{get:function(t,e){if(e){t=qt(t,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=$(e),l=te.test(e),c=t.style;if(l||(e=Kt(s)),a=M.cssHooks[e]||M.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:c[e];"string"===(o=typeof i)&&(r=et.exec(i))&&r[1]&&(i=st(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(M.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var r,o=$(e);return te.test(e)||(e=Kt(o)),"normal"===(r=void 0===(r=(o=M.cssHooks[e]||M.cssHooks[o])&&"get"in o?o.get(t,!0,i):r)?qt(t,e,n):r)&&e in ie&&(r=ie[e]),""===i||i?(e=parseFloat(r),!0===i||isFinite(e)?e||0:r):r}}),M.each(["height","width"],function(t,s){M.cssHooks[s]={get:function(t,e,i){if(e)return!Qt.test(M.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,s,i):Dt(t,ee,function(){return oe(t,s,i)})},set:function(t,e,i){var n,r=Gt(t),o=!y.scrollboxSize()&&"absolute"===r.position,a=(o||i)&&"border-box"===M.css(t,"boxSizing",!1,r),i=i?re(t,s,i,a,r):0;return a&&o&&(i-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-re(t,s,"border",!1,r)-.5)),i&&(n=et.exec(e))&&"px"!==(n[3]||"px")&&(t.style[s]=e,e=M.css(t,s)),ne(0,e,i)}}}),M.cssHooks.marginLeft=Xt(y.reliableMarginLeft,function(t,e){if(e)return(parseFloat(qt(t,"marginLeft"))||t.getBoundingClientRect().left-Dt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(r,o){M.cssHooks[r+o]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+it[e]+o]=n[e]||n[e-2]||n[0];return i}},"margin"!==r&&(M.cssHooks[r+o].set=ne)}),M.fn.extend({css:function(t,e){return j(this,function(t,e,i){var n,r,o={},a=0;if(Array.isArray(e)){for(n=Gt(t),r=e.length;a<r;a++)o[e[a]]=M.css(t,e[a],!1,n);return o}return void 0!==i?M.style(t,e,i):M.css(t,e)},t,e,1<arguments.length)}}),(M.Tween=ae).prototype={constructor:ae,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||M.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(M.cssNumber[i]?"":"px")},cur:function(){var t=ae.propHooks[this.prop];return(t&&t.get?t:ae.propHooks._default).get(this)},run:function(t){var e,i=ae.propHooks[this.prop];return this.options.duration?this.pos=e=M.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:ae.propHooks._default).set(this),this}},ae.prototype.init.prototype=ae.prototype,ae.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=M.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){M.fx.step[t.prop]?M.fx.step[t.prop](t):1!==t.elem.nodeType||!M.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:M.style(t.elem,t.prop,t.now+t.unit)}}},ae.propHooks.scrollTop=ae.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},M.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},M.fx=ae.prototype.init,M.fx.step={};var se,le,ce=/^(?:toggle|show|hide)$/,he=/queueHooks$/;function ue(){le&&(!1===S.hidden&&_.requestAnimationFrame?_.requestAnimationFrame(ue):_.setTimeout(ue,M.fx.interval),M.fx.tick())}function de(){return _.setTimeout(function(){se=void 0}),se=Date.now()}function pe(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=it[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function fe(t,e,i){for(var n,r=(me.tweeners[e]||[]).concat(me.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function me(r,t,e){var i,o,n=0,a=me.prefilters.length,s=M.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=se||de(),t=Math.max(0,c.startTime+c.duration-t),e=1-(t/c.duration||0),i=0,n=c.tweens.length;i<n;i++)c.tweens[i].run(e);return s.notifyWith(r,[c,e,t]),e<1&&n?t:(n||s.notifyWith(r,[c,1,0]),s.resolveWith(r,[c]),!1)},c=s.promise({elem:r,props:M.extend({},t),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},e),originalProperties:t,originalOptions:e,startTime:se||de(),duration:e.duration,tweens:[],createTween:function(t,e){t=M.Tween(r,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(t),t},stop:function(t){var e=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;e<i;e++)c.tweens[e].run(1);return t?(s.notifyWith(r,[c,1,0]),s.resolveWith(r,[c,t])):s.rejectWith(r,[c,t]),this}}),h=c.props;for(!function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=$(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=M.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(h,c.opts.specialEasing);n<a;n++)if(i=me.prefilters[n].call(c,r,h,c.opts))return b(i.stop)&&(M._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return M.map(h,fe,c),b(c.opts.start)&&c.opts.start.call(r,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),M.fx.timer(M.extend(l,{elem:r,anim:c,queue:c.opts.queue})),c}M.Animation=M.extend(me,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return st(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){for(var i,n=0,r=(t=b(t)?(e=t,["*"]):t.match(k)).length;n<r;n++)i=t[n],me.tweeners[i]=me.tweeners[i]||[],me.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,a,s,l,c,h="width"in e||"height"in e,u=this,d={},p=t.style,f=t.nodeType&&at(t),m=Y.get(t,"fxshow");for(n in i.queue||(null==(a=M._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,M.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[n],ce.test(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||M.style(t,n)}if((l=!M.isEmptyObject(e))||!M.isEmptyObject(d))for(n in h&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Y.get(t,"display")),"none"===(h=M.css(t,"display"))&&(c?h=c:(ct([t],!0),c=t.style.display||c,h=M.css(t,"display"),ct([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===M.css(t,"float")&&(l||(u.done(function(){p.display=c}),null==c&&(h=p.display,c="none"===h?"":h)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(f=m.hidden):m=Y.access(t,"fxshow",{display:c}),o&&(m.hidden=!f),f&&ct([t],!0),u.done(function(){for(n in f||ct([t]),Y.remove(t,"fxshow"),d)M.style(t,n,d[n])})),l=fe(f?m[n]:0,n,u),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?me.prefilters.unshift(t):me.prefilters.push(t)}}),M.speed=function(t,e,i){var n=t&&"object"==typeof t?M.extend({},t):{complete:i||!i&&e||b(t)&&t,duration:t,easing:i&&e||e&&!b(e)&&e};return M.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in M.fx.speeds?n.duration=M.fx.speeds[n.duration]:n.duration=M.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){b(n.old)&&n.old.call(this),n.queue&&M.dequeue(this,n.queue)},n},M.fn.extend({fadeTo:function(t,e,i,n){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var r=M.isEmptyObject(e),o=M.speed(t,i,n),n=function(){var t=me(this,M.extend({},e),o);(r||Y.get(this,"finish"))&&t.stop(!0)};return n.finish=n,r||!1===o.queue?this.each(n):this.queue(o.queue,n)},stop:function(r,t,o){function a(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=M.timers,n=Y.get(this);if(e)n[e]&&n[e].stop&&a(n[e]);else for(e in n)n[e]&&n[e].stop&&he.test(e)&&a(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(o),t=!1,i.splice(e,1));!t&&o||M.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Y.get(this),i=e[a+"queue"],n=e[a+"queueHooks"],r=M.timers,o=i?i.length:0;for(e.finish=!0,M.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),M.each(["toggle","show","hide"],function(t,n){var r=M.fn[n];M.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(pe(n,!0),t,e,i)}}),M.each({slideDown:pe("show"),slideUp:pe("hide"),slideToggle:pe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){M.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),M.timers=[],M.fx.tick=function(){var t,e=0,i=M.timers;for(se=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||M.fx.stop(),se=void 0},M.fx.timer=function(t){M.timers.push(t),M.fx.start()},M.fx.interval=13,M.fx.start=function(){le||(le=!0,ue())},M.fx.stop=function(){le=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(n,t){return n=M.fx&&M.fx.speeds[n]||n,this.queue(t=t||"fx",function(t,e){var i=_.setTimeout(t,n);e.stop=function(){_.clearTimeout(i)}})},u=S.createElement("input"),tt=S.createElement("select").appendChild(S.createElement("option")),u.type="checkbox",y.checkOn=""!==u.value,y.optSelected=tt.selected,(u=S.createElement("input")).value="t",u.type="radio",y.radioValue="t"===u.value;var ge,ve=M.expr.attrHandle;M.fn.extend({attr:function(t,e){return j(this,M.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){M.removeAttr(this,t)})}}),M.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?M.prop(t,e,i):(1===o&&M.isXMLDoc(t)||(r=M.attrHooks[e.toLowerCase()]||(M.expr.match.bool.test(e)?ge:void 0)),void 0!==i?null===i?void M.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):!(r&&"get"in r&&null!==(n=r.get(t,e)))&&null==(n=M.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!y.radioValue&&"radio"===e&&C(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(k);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),ge={set:function(t,e,i){return!1===e?M.removeAttr(t,i):t.setAttribute(i,i),i}},M.each(M.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ve[e]||M.find.attr;ve[e]=function(t,e,i){var n,r,o=e.toLowerCase();return i||(r=ve[o],ve[o]=n,n=null!=a(t,e,i)?o:null,ve[o]=r),n}});var ye=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;function xe(t){return(t.match(k)||[]).join(" ")}function we(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(k)||[]}M.fn.extend({prop:function(t,e){return j(this,M.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[M.propFix[t]||t]})}}),M.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&M.isXMLDoc(t)||(e=M.propFix[e]||e,r=M.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=M.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(M.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this}),M.fn.extend({addClass:function(e){var t,i,n,r,o,a,s=0;if(b(e))return this.each(function(t){M(this).addClass(e.call(this,t,we(this)))});if((t=_e(e)).length)for(;i=this[s++];)if(a=we(i),n=1===i.nodeType&&" "+xe(a)+" "){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a!==(a=xe(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,o,a,s=0;if(b(e))return this.each(function(t){M(this).removeClass(e.call(this,t,we(this)))});if(!arguments.length)return this.attr("class","");if((t=_e(e)).length)for(;i=this[s++];)if(a=we(i),n=1===i.nodeType&&" "+xe(a)+" "){for(o=0;r=t[o++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a!==(a=xe(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,e){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):b(r)?this.each(function(t){M(this).toggleClass(r.call(this,t,we(this),e),e)}):this.each(function(){var t,e,i,n;if(a)for(e=0,i=M(this),n=_e(r);t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==r&&"boolean"!=o||((t=we(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==r&&Y.get(this,"__className__")||""))})},hasClass:function(t){for(var e,i=0,n=" "+t+" ";e=this[i++];)if(1===e.nodeType&&-1<(" "+xe(we(e))+" ").indexOf(n))return!0;return!1}});var Se=/\r/g;M.fn.extend({val:function(e){var i,t,n,r=this[0];return arguments.length?(n=b(e),this.each(function(t){1===this.nodeType&&(null==(t=n?e.call(this,t,M(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=M.map(t,function(t){return null==t?"":t+""})),(i=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):r?(i=M.valHooks[r.type]||M.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(r,"value"))?t:"string"==typeof(t=r.value)?t.replace(Se,""):null==t?"":t:void 0}}),M.extend({valHooks:{option:{get:function(t){var e=M.find.attr(t,"value");return null!=e?e:xe(M.text(t))}},select:{get:function(t){for(var e,i=t.options,n=t.selectedIndex,r="select-one"===t.type,o=r?null:[],a=r?n+1:i.length,s=n<0?a:r?n:0;s<a;s++)if(((e=i[s]).selected||s===n)&&!e.disabled&&(!e.parentNode.disabled||!C(e.parentNode,"optgroup"))){if(e=M(e).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,o=M.makeArray(e),a=r.length;a--;)((n=r[a]).selected=-1<M.inArray(M.valHooks.option.get(n),o))&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<M.inArray(M(t).val(),e)}},y.checkOn||(M.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),y.focusin="onfocusin"in _;function Me(t){t.stopPropagation()}var Te=/^(?:focusinfocus|focusoutblur)$/;M.extend(M.event,{trigger:function(t,e,i,n){var r,o,a,s,l,c,h,u=[i||S],d=v.call(t,"type")?t.type:t,p=v.call(t,"namespace")?t.namespace.split("."):[],f=h=o=i=i||S;if(3!==i.nodeType&&8!==i.nodeType&&!Te.test(d+M.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),s=d.indexOf(":")<0&&"on"+d,(t=t[M.expando]?t:new M.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:M.makeArray(e,[t]),c=M.event.special[d]||{},n||!c.trigger||!1!==c.trigger.apply(i,e))){if(!n&&!c.noBubble&&!m(i)){for(a=c.delegateType||d,Te.test(a+d)||(f=f.parentNode);f;f=f.parentNode)u.push(f),o=f;o===(i.ownerDocument||S)&&u.push(o.defaultView||o.parentWindow||_)}for(r=0;(f=u[r++])&&!t.isPropagationStopped();)h=f,t.type=1<r?a:c.bindType||d,(l=(Y.get(f,"events")||Object.create(null))[t.type]&&Y.get(f,"handle"))&&l.apply(f,e),(l=s&&f[s])&&l.apply&&q(f)&&(t.result=l.apply(f,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),e)||!q(i)||s&&b(i[d])&&!m(i)&&((o=i[s])&&(i[s]=null),M.event.triggered=d,t.isPropagationStopped()&&h.addEventListener(d,Me),i[d](),t.isPropagationStopped()&&h.removeEventListener(d,Me),M.event.triggered=void 0,o&&(i[s]=o)),t.result}},simulate:function(t,e,i){t=M.extend(new M.Event,i,{type:t,isSimulated:!0});M.event.trigger(t,null,e)}}),M.fn.extend({trigger:function(t,e){return this.each(function(){M.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return M.event.trigger(t,e,i,!0)}}),y.focusin||M.each({focus:"focusin",blur:"focusout"},function(i,n){function r(t){M.event.simulate(n,t.target,M.event.fix(t))}M.event.special[n]={setup:function(){var t=this.ownerDocument||this.document||this,e=Y.access(t,n);e||t.addEventListener(i,r,!0),Y.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=Y.access(t,n)-1;e?Y.access(t,n,e):(t.removeEventListener(i,r,!0),Y.remove(t,n))}}});var Ee=_.location,Ce={guid:Date.now()},Ae=/\?/;M.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new _.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||M.error("Invalid XML: "+(i?M.map(i.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Pe=/\[\]$/,Le=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;M.param=function(t,e){function i(t,e){e=b(e)?e():e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var n,r=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!M.isPlainObject(t))M.each(t,function(){i(this.name,this.value)});else for(n in t)!function i(n,t,r,o){if(Array.isArray(t))M.each(t,function(t,e){r||Pe.test(n)?o(n,e):i(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,o)});else if(r||"object"!==f(t))o(n,t);else for(var e in t)i(n+"["+e+"]",t[e],r,o)}(n,t[n],e,i);return r.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=M.prop(this,"elements");return t?M.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!M(this).is(":disabled")&&Oe.test(this.nodeName)&&!Re.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var i=M(this).val();return null==i?null:Array.isArray(i)?M.map(i,function(t){return{name:e.name,value:t.replace(Le,"\r\n")}}):{name:e.name,value:i.replace(Le,"\r\n")}}).get()}});var De=/%20/g,Ie=/#.*$/,ke=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fe=/^(?:GET|HEAD)$/,Be=/^\/\//,ze={},He={},Ue="*/".concat("*"),je=S.createElement("a");function Ge(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(k)||[];if(b(e))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(e)):(o[i]=o[i]||[]).push(e)}}function Ve(e,n,r,o){var a={},s=e===He;function l(t){var i;return a[t]=!0,M.each(e[t]||[],function(t,e){e=e(n,r,o);return"string"!=typeof e||s||a[e]?s?!(i=e):void 0:(n.dataTypes.unshift(e),l(e),!1)}),i}return l(n.dataTypes[0])||!a["*"]&&l("*")}function We(t,e){var i,n,r=M.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n=n||{})[i]=e[i]);return n&&M.extend(!0,t,n),t}je.href=Ee.href,M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?We(We(t,M.ajaxSettings),e):We(M.ajaxSettings,t)},ajaxPrefilter:Ge(ze),ajaxTransport:Ge(He),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,c,h,i,u,d,p,n,r,f=M.ajaxSetup({},e=e||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?M(m):M.event,v=M.Deferred(),y=M.Callbacks("once memory"),b=f.statusCode||{},o={},a={},s="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(d){if(!i)for(i={};e=Ne.exec(h);)i[e[1].toLowerCase()+" "]=(i[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=i[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?h:null},setRequestHeader:function(t,e){return null==d&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,o[t]=e),this},overrideMimeType:function(t){return null==d&&(f.mimeType=t),this},statusCode:function(t){if(t)if(d)x.always(t[x.status]);else for(var e in t)b[e]=[b[e],t[e]];return this},abort:function(t){t=t||s;return l&&l.abort(t),w(0,t),this}};if(v.promise(x),f.url=((t||f.url||Ee.href)+"").replace(Be,Ee.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(k)||[""],null==f.crossDomain){r=S.createElement("a");try{r.href=f.url,r.href=r.href,f.crossDomain=je.protocol+"//"+je.host!=r.protocol+"//"+r.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=M.param(f.data,f.traditional)),Ve(ze,f,e,x),d)return x;for(n in(p=M.event&&f.global)&&0==M.active++&&M.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Fe.test(f.type),c=f.url.replace(Ie,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(De,"+")):(r=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(Ae.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(ke,"$1"),r=(Ae.test(c)?"&":"?")+"_="+Ce.guid+++r),f.url=c+r),f.ifModified&&(M.lastModified[c]&&x.setRequestHeader("If-Modified-Since",M.lastModified[c]),M.etag[c]&&x.setRequestHeader("If-None-Match",M.etag[c])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ue+"; q=0.01":""):f.accepts["*"]),f.headers)x.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(m,x,f)||d))return x.abort();if(s="abort",y.add(f.complete),x.done(f.success),x.fail(f.error),l=Ve(He,f,e,x)){if(x.readyState=1,p&&g.trigger("ajaxSend",[x,f]),d)return x;f.async&&0<f.timeout&&(u=_.setTimeout(function(){x.abort("timeout")},f.timeout));try{d=!1,l.send(o,w)}catch(t){if(d)throw t;w(-1,t)}}else w(-1,"No Transport");function w(t,e,i,n){var r,o,a,s=e;d||(d=!0,u&&_.clearTimeout(u),l=void 0,h=n||"",x.readyState=0<t?4:0,n=200<=t&&t<300||304===t,i&&(a=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(f,x,i)),!n&&-1<M.inArray("script",f.dataTypes)&&M.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),a=function(t,e,i,n){var r,o,a,s,l,c={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],h.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(f,a,x,n),n?(f.ifModified&&((i=x.getResponseHeader("Last-Modified"))&&(M.lastModified[c]=i),(i=x.getResponseHeader("etag"))&&(M.etag[c]=i)),204===t||"HEAD"===f.type?s="nocontent":304===t?s="notmodified":(s=a.state,r=a.data,n=!(o=a.error))):(o=s,!t&&s||(s="error",t<0&&(t=0))),x.status=t,x.statusText=(e||s)+"",n?v.resolveWith(m,[r,s,x]):v.rejectWith(m,[x,s,o]),x.statusCode(b),b=void 0,p&&g.trigger(n?"ajaxSuccess":"ajaxError",[x,f,n?r:o]),y.fireWith(m,[x,s]),p&&(g.trigger("ajaxComplete",[x,f]),--M.active||M.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return M.get(t,e,i,"json")},getScript:function(t,e){return M.get(t,void 0,e,"script")}}),M.each(["get","post"],function(t,r){M[r]=function(t,e,i,n){return b(e)&&(n=n||i,i=e,e=void 0),M.ajax(M.extend({url:t,type:r,dataType:n,data:e,success:i},M.isPlainObject(t)&&t))}}),M.ajaxPrefilter(function(t){for(var e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),M._evalUrl=function(t,e,i){return M.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){M.globalEval(t,e,i)}})},M.fn.extend({wrapAll:function(t){return this[0]&&(b(t)&&(t=t.call(this[0])),t=M(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return b(i)?this.each(function(t){M(this).wrapInner(i.call(this,t))}):this.each(function(){var t=M(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=b(e);return this.each(function(t){M(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(t){return!M.expr.pseudos.visible(t)},M.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},qe=M.ajaxSettings.xhr();y.cors=!!qe&&"withCredentials"in qe,y.ajax=qe=!!qe,M.ajaxTransport(function(r){var o,a;if(y.cors||qe&&!r.crossDomain)return{send:function(t,e){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);o=function(t){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e($e[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&_.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),M.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return M.globalEval(t),t}}}),M.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),M.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(t,e){n=M("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(t){n.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var Xe=[],Ye=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||M.expando+"_"+Ce.guid++;return this[t]=!0,t}}),M.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,o,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=b(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+n):!1!==t.jsonp&&(t.url+=(Ae.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||M.error(n+" was not called"),o[0]},t.dataTypes[0]="json",r=_[n],_[n]=function(){o=arguments},i.always(function(){void 0===r?M(_).removeProp(n):_[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(n)),o&&b(r)&&r(o[0]),o=r=void 0}),"script"}),y.createHTMLDocument=((u=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===u.childNodes.length),M.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(y.createHTMLDocument?((n=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(n)):e=S),n=!i&&[],(i=A.exec(t))?[e.createElement(i[1])]:(i=vt([t],e,n),n&&n.length&&M(n).remove(),M.merge([],i.childNodes)));var n},M.fn.load=function(t,e,i){var n,r,o,a=this,s=t.indexOf(" ");return-1<s&&(n=xe(t.slice(s)),t=t.slice(0,s)),b(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&M.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(n?M("<div>").append(M.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},M.expr.pseudos.animated=function(e){return M.grep(M.timers,function(t){return e===t.elem}).length},M.offset={setOffset:function(t,e,i){var n,r,o,a,s=M.css(t,"position"),l=M(t),c={};"static"===s&&(t.style.position="relative"),o=l.offset(),n=M.css(t,"top"),a=M.css(t,"left"),a=("absolute"===s||"fixed"===s)&&-1<(n+a).indexOf("auto")?(r=(s=l.position()).top,s.left):(r=parseFloat(n)||0,parseFloat(a)||0),null!=(e=b(e)?e.call(t,i,M.extend({},o)):e).top&&(c.top=e.top-o.top+r),null!=e.left&&(c.left=e.left-o.left+a),"using"in e?e.using.call(t,c):l.css(c)}},M.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){M.offset.setOffset(this,e,t)});var t,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===M.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===M.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=M(t).offset()).top+=M.css(t,"borderTopWidth",!0),r.left+=M.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-M.css(n,"marginTop",!0),left:e.left-r.left-M.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===M.css(t,"position");)t=t.offsetParent;return t||nt})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;M.fn[e]=function(t){return j(this,function(t,e,i){var n;return m(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i?n?n[r]:t[e]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):t[e]=i)},e,t,arguments.length)}}),M.each(["top","left"],function(t,i){M.cssHooks[i]=Xt(y.pixelPosition,function(t,e){if(e)return e=qt(t,i),jt.test(e)?M(t).position()[i]+"px":e})}),M.each({Height:"height",Width:"width"},function(a,s){M.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){M.fn[o]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return j(this,function(t,e,i){var n;return m(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+a],n["scroll"+a],t.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?M.css(t,e,r):M.style(t,e,i,r)},s,i?t:void 0,i)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){M.fn[e]=function(t){return this.on(e,t)}}),M.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){M.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}});var Ze=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;M.proxy=function(t,e){var i,n;if("string"==typeof e&&(n=t[e],e=t,t=n),b(t))return i=s.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||M.guid++,n},M.holdReady=function(t){t?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=C,M.isFunction=b,M.isWindow=m,M.camelCase=$,M.type=f,M.now=Date.now,M.isNumeric=function(t){var e=M.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},M.trim=function(t){return null==t?"":(t+"").replace(Ze,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return M});var Je=_.jQuery,Ke=_.$;return M.noConflict=function(t){return _.$===M&&(_.$=Ke),t&&_.jQuery===M&&(_.jQuery=Je),M},void 0===t&&(_.jQuery=_.$=M),M}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){"use strict";var n,a=window.Slick||{};n=0,(a=function(t,e){var i=this;i.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(t),appendDots:c(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return c('<button type="button" />').text(e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},i.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(i,i.initials),i.activeBreakpoint=null,i.animType=null,i.animProp=null,i.breakpoints=[],i.breakpointSettings=[],i.cssTransitions=!1,i.focussed=!1,i.interrupted=!1,i.hidden="hidden",i.paused=!0,i.positionProp=null,i.respondTo=null,i.rowCount=1,i.shouldClick=!0,i.$slider=c(t),i.$slidesCache=null,i.transformType=null,i.transitionType=null,i.visibilityChange="visibilitychange",i.windowWidth=0,i.windowTimer=null,t=c(t).data("slick")||{},i.options=c.extend({},i.defaults,e,t),i.currentSlide=i.options.initialSlide,i.originalSettings=i.options,void 0!==document.mozHidden?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange"),i.autoPlay=c.proxy(i.autoPlay,i),i.autoPlayClear=c.proxy(i.autoPlayClear,i),i.autoPlayIterator=c.proxy(i.autoPlayIterator,i),i.changeSlide=c.proxy(i.changeSlide,i),i.clickHandler=c.proxy(i.clickHandler,i),i.selectHandler=c.proxy(i.selectHandler,i),i.setPosition=c.proxy(i.setPosition,i),i.swipeHandler=c.proxy(i.swipeHandler,i),i.dragHandler=c.proxy(i.dragHandler,i),i.keyHandler=c.proxy(i.keyHandler,i),i.instanceUid=n++,i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,i.registerBreakpoints(),i.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},a.prototype.addSlide=a.prototype.slickAdd=function(t,e,i){var n=this;if("boolean"==typeof e)i=e,e=null;else if(e<0||e>=n.slideCount)return!1;n.unload(),"number"==typeof e?0===e&&0===n.$slides.length?c(t).appendTo(n.$slideTrack):i?c(t).insertBefore(n.$slides.eq(e)):c(t).insertAfter(n.$slides.eq(e)):!0===i?c(t).prependTo(n.$slideTrack):c(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,e){c(e).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},a.prototype.animateHeight=function(){var t,e=this;1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical&&(t=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.animate({height:t},e.options.speed))},a.prototype.animateSlide=function(t,e){var i={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,e):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,e):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),c({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(t){t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate("+t+"px, 0px)":i[n.animType]="translate(0px,"+t+"px)",n.$slideTrack.css(i)},complete:function(){e&&e.call()}})):(n.applyTransition(),t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate3d("+t+"px, 0px, 0px)":i[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),e&&setTimeout(function(){n.disableTransition(),e.call()},n.options.speed))},a.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t=t&&null!==t?c(t).not(this.$slider):t},a.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=c(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},a.prototype.applyTransition=function(t){var e=this,i={};!1===e.options.fade?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,(!1===e.options.fade?e.$slideTrack:e.$slides.eq(t)).css(i)},a.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},a.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},a.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},a.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=c(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=c(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},a.prototype.buildDots=function(){var t,e,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(i.$slider.addClass("slick-dotted"),e=c("<ul />").addClass(i.options.dotsClass),t=0;t<=i.getDotCount();t+=1)e.append(c("<li />").append(i.options.customPaging.call(this,i,t)));i.$dots=e.appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},a.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,e){c(e).attr("data-slick-index",t).data("originalStyling",c(e).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?c('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),c("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},a.prototype.buildRows=function(){var t,e,i,n=this,r=document.createDocumentFragment(),o=n.$slider.children();if(0<n.options.rows){for(i=n.options.slidesPerRow*n.options.rows,e=Math.ceil(o.length/i),t=0;t<e;t++){for(var a=document.createElement("div"),s=0;s<n.options.rows;s++){for(var l=document.createElement("div"),c=0;c<n.options.slidesPerRow;c++){var h=t*i+(s*n.options.slidesPerRow+c);o.get(h)&&l.appendChild(o.get(h))}a.appendChild(l)}r.appendChild(a)}n.$slider.empty().append(r),n.$slider.children().children().children().css({width:100/n.options.slidesPerRow+"%",display:"inline-block"})}},a.prototype.checkResponsive=function(t,e){var i,n,r,o=this,a=!1,s=o.$slider.width(),l=window.innerWidth||c(window).width();if("window"===o.respondTo?r=l:"slider"===o.respondTo?r=s:"min"===o.respondTo&&(r=Math.min(l,s)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(i in n=null,o.breakpoints)o.breakpoints.hasOwnProperty(i)&&(!1===o.originalSettings.mobileFirst?r<o.breakpoints[i]&&(n=o.breakpoints[i]):r>o.breakpoints[i]&&(n=o.breakpoints[i]));null!==n?null!==o.activeBreakpoint&&n===o.activeBreakpoint&&!e||(o.activeBreakpoint=n,"unslick"===o.breakpointSettings[n]?o.unslick(n):(o.options=c.extend({},o.originalSettings,o.breakpointSettings[n]),!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=n):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t),a=n),t||!1===a||o.$slider.trigger("breakpoint",[o,a])}},a.prototype.changeSlide=function(t,e){var i,n=this,r=c(t.currentTarget);switch(r.is("a")&&t.preventDefault(),r.is("li")||(r=r.closest("li")),i=n.slideCount%n.options.slidesToScroll!=0?0:(n.slideCount-n.currentSlide)%n.options.slidesToScroll,t.data.message){case"previous":o=0==i?n.options.slidesToScroll:n.options.slidesToShow-i,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide-o,!1,e);break;case"next":o=0==i?n.options.slidesToScroll:i,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide+o,!1,e);break;case"index":var o=0===t.data.index?0:t.data.index||r.index()*n.options.slidesToScroll;n.slideHandler(n.checkNavigable(o),!1,e),r.children().trigger("focus");break;default:return}},a.prototype.checkNavigable=function(t){var e=this.getNavigableIndexes(),i=0;if(t>e[e.length-1])t=e[e.length-1];else for(var n in e){if(t<e[n]){t=i;break}i=e[n]}return t},a.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(c("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",c.proxy(t.interrupt,t,!0)).off("mouseleave.slick",c.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),c(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().off("click.slick",t.selectHandler),c(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),c(window).off("resize.slick.slick-"+t.instanceUid,t.resize),c("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),c(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},a.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",c.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",c.proxy(t.interrupt,t,!1))},a.prototype.cleanUpRows=function(){var t;0<this.options.rows&&((t=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(t))},a.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},a.prototype.destroy=function(t){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),c(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){c(this).attr("style",c(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,t||e.$slider.trigger("destroy",[e])},a.prototype.disableTransition=function(t){var e={};e[this.transitionType]="",(!1===this.options.fade?this.$slideTrack:this.$slides.eq(t)).css(e)},a.prototype.fadeSlide=function(t,e){var i=this;!1===i.cssTransitions?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},a.prototype.fadeSlideOut=function(t){var e=this;!1===e.cssTransitions?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},a.prototype.filterSlides=a.prototype.slickFilter=function(t){var e=this;null!==t&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},a.prototype.focusHandler=function(){var i=this;i.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var e=c(this);setTimeout(function(){i.options.pauseOnFocus&&(i.focussed=e.is(":focus"),i.autoPlay())},0)})},a.prototype.getCurrent=a.prototype.slickCurrentSlide=function(){return this.currentSlide},a.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(!0===t.options.infinite)if(t.slideCount<=t.options.slidesToShow)++n;else for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)n=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else n=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return n-1},a.prototype.getLeft=function(t){var e,i,n=this,r=0;return n.slideOffset=0,e=n.$slides.first().outerHeight(!0),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,i=-1,!0===n.options.vertical&&!0===n.options.centerMode&&(2===n.options.slidesToShow?i=-1.5:1===n.options.slidesToShow&&(i=-2)),r=e*n.options.slidesToShow*i),n.slideCount%n.options.slidesToScroll!=0&&t+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(r=t>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(t-n.slideCount))*n.slideWidth*-1,(n.options.slidesToShow-(t-n.slideCount))*e*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,n.slideCount%n.options.slidesToScroll*e*-1))):t+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(t+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(t+n.options.slidesToShow-n.slideCount)*e),n.slideCount<=n.options.slidesToShow&&(r=n.slideOffset=0),!0===n.options.centerMode&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=!1===n.options.vertical?t*n.slideWidth*-1+n.slideOffset:t*e*-1+r,!0===n.options.variableWidth&&(r=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(t):n.$slideTrack.children(".slick-slide").eq(t+n.options.slidesToShow),e=!0===n.options.rtl?r[0]?-1*(n.$slideTrack.width()-r[0].offsetLeft-r.width()):0:r[0]?-1*r[0].offsetLeft:0,!0===n.options.centerMode&&(r=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(t):n.$slideTrack.children(".slick-slide").eq(t+n.options.slidesToShow+1),e=!0===n.options.rtl?r[0]?-1*(n.$slideTrack.width()-r[0].offsetLeft-r.width()):0:r[0]?-1*r[0].offsetLeft:0,e+=(n.$list.width()-r.outerWidth())/2)),e},a.prototype.getOption=a.prototype.slickGetOption=function(t){return this.options[t]},a.prototype.getNavigableIndexes=function(){for(var t=this,e=0,i=0,n=[],r=!1===t.options.infinite?t.slideCount:(e=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,2*t.slideCount);e<r;)n.push(e),e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return n},a.prototype.getSlick=function(){return this},a.prototype.getSlideCount=function(){var i,n=this,r=!0===n.options.centerMode?n.slideWidth*Math.floor(n.options.slidesToShow/2):0;return!0===n.options.swipeToSlide?(n.$slideTrack.find(".slick-slide").each(function(t,e){if(e.offsetLeft-r+c(e).outerWidth()/2>-1*n.swipeLeft)return i=e,!1}),Math.abs(c(i).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},a.prototype.goTo=a.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},a.prototype.init=function(t){var e=this;c(e.$slider).hasClass("slick-initialized")||(c(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),t&&e.$slider.trigger("init",[e]),!0===e.options.accessibility&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},a.prototype.initADA=function(){var i=this,n=Math.ceil(i.slideCount/i.options.slidesToShow),r=i.getNavigableIndexes().filter(function(t){return 0<=t&&t<i.slideCount});i.$slides.add(i.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==i.$dots&&(i.$slides.not(i.$slideTrack.find(".slick-cloned")).each(function(t){var e=r.indexOf(t);c(this).attr({role:"tabpanel",id:"slick-slide"+i.instanceUid+t,tabindex:-1}),-1!==e&&(e="slick-slide-control"+i.instanceUid+e,c("#"+e).length&&c(this).attr({"aria-describedby":e}))}),i.$dots.attr("role","tablist").find("li").each(function(t){var e=r[t];c(this).attr({role:"presentation"}),c(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+i.instanceUid+t,"aria-controls":"slick-slide"+i.instanceUid+e,"aria-label":t+1+" of "+n,"aria-selected":null,tabindex:"-1"})}).eq(i.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var t=i.currentSlide,e=t+i.options.slidesToShow;t<e;t++)i.options.focusOnChange?i.$slides.eq(t).attr({tabindex:"0"}):i.$slides.eq(t).removeAttr("tabindex");i.activateADA()},a.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},a.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&(c("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&c("li",t.$dots).on("mouseenter.slick",c.proxy(t.interrupt,t,!0)).on("mouseleave.slick",c.proxy(t.interrupt,t,!1))},a.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",c.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",c.proxy(t.interrupt,t,!1)))},a.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),c(document).on(t.visibilityChange,c.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),c(window).on("orientationchange.slick.slick-"+t.instanceUid,c.proxy(t.orientationChange,t)),c(window).on("resize.slick.slick-"+t.instanceUid,c.proxy(t.resize,t)),c("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),c(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),c(t.setPosition)},a.prototype.initUI=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},a.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},a.prototype.lazyLoad=function(){var t,e,i,o=this;function n(t){c("img[data-lazy]",t).each(function(){var t=c(this),e=c(this).attr("data-lazy"),i=c(this).attr("data-srcset"),n=c(this).attr("data-sizes")||o.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){t.animate({opacity:0},100,function(){i&&(t.attr("srcset",i),n&&t.attr("sizes",n)),t.attr("src",e).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,t,e])})},r.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,t,e])},r.src=e})}if(!0===o.options.centerMode?i=!0===o.options.infinite?(e=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(e=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),o.options.slidesToShow/2+1+2+o.currentSlide):(e=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,i=Math.ceil(e+o.options.slidesToShow),!0===o.options.fade&&(0<e&&e--,i<=o.slideCount&&i++)),t=o.$slider.find(".slick-slide").slice(e,i),"anticipated"===o.options.lazyLoad)for(var r=e-1,a=i,s=o.$slider.find(".slick-slide"),l=0;l<o.options.slidesToScroll;l++)r<0&&(r=o.slideCount-1),t=(t=t.add(s.eq(r))).add(s.eq(a)),r--,a++;n(t),o.slideCount<=o.options.slidesToShow?n(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?n(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&n(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},a.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},a.prototype.next=a.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},a.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},a.prototype.pause=a.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},a.prototype.play=a.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},a.prototype.postSlide=function(t){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.slideCount>e.options.slidesToShow&&e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&(e.initADA(),e.options.focusOnChange&&c(e.$slides.get(e.currentSlide)).attr("tabindex",0).focus()))},a.prototype.prev=a.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},a.prototype.preventDefault=function(t){t.preventDefault()},a.prototype.progressiveLazyLoad=function(t){t=t||1;var e,i,n,r,o=this,a=c("img[data-lazy]",o.$slider);a.length?(e=a.first(),i=e.attr("data-lazy"),n=e.attr("data-srcset"),r=e.attr("data-sizes")||o.$slider.attr("data-sizes"),(a=document.createElement("img")).onload=function(){n&&(e.attr("srcset",n),r&&e.attr("sizes",r)),e.attr("src",i).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===o.options.adaptiveHeight&&o.setPosition(),o.$slider.trigger("lazyLoaded",[o,e,i]),o.progressiveLazyLoad()},a.onerror=function(){t<3?setTimeout(function(){o.progressiveLazyLoad(t+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,e,i]),o.progressiveLazyLoad())},a.src=i):o.$slider.trigger("allImagesLoaded",[o])},a.prototype.refresh=function(t){var e=this,i=e.slideCount-e.options.slidesToShow;!e.options.infinite&&e.currentSlide>i&&(e.currentSlide=i),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),i=e.currentSlide,e.destroy(!0),c.extend(e,e.initials,{currentSlide:i}),e.init(),t||e.changeSlide({data:{message:"index",index:i}},!1)},a.prototype.registerBreakpoints=function(){var t,e,i,n=this,r=n.options.responsive||null;if("array"===c.type(r)&&r.length){for(t in n.respondTo=n.options.respondTo||"window",r)if(i=n.breakpoints.length-1,r.hasOwnProperty(t)){for(e=r[t].breakpoint;0<=i;)n.breakpoints[i]&&n.breakpoints[i]===e&&n.breakpoints.splice(i,1),i--;n.breakpoints.push(e),n.breakpointSettings[e]=r[t].settings}n.breakpoints.sort(function(t,e){return n.options.mobileFirst?t-e:e-t})}},a.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},a.prototype.resize=function(){var t=this;c(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=c(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},a.prototype.removeSlide=a.prototype.slickRemove=function(t,e,i){var n=this;if(t="boolean"==typeof t?!0===(e=t)?0:n.slideCount-1:!0===e?--t:t,n.slideCount<1||t<0||t>n.slideCount-1)return!1;n.unload(),(!0===i?n.$slideTrack.children():n.$slideTrack.children(this.options.slide).eq(t)).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},a.prototype.setCSS=function(t){var e,i,n=this,r={};!0===n.options.rtl&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",r[n.positionProp]=t,!1===n.transformsEnabled||(!(r={})===n.cssTransitions?r[n.animType]="translate("+e+", "+i+")":r[n.animType]="translate3d("+e+", "+i+", 0px)"),n.$slideTrack.css(r)},a.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},a.prototype.setFade=function(){var i,n=this;n.$slides.each(function(t,e){i=n.slideWidth*t*-1,!0===n.options.rtl?c(e).css({position:"relative",right:i,top:0,zIndex:n.options.zIndex-2,opacity:0}):c(e).css({position:"relative",left:i,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},a.prototype.setHeight=function(){var t,e=this;1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical&&(t=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.css("height",t))},a.prototype.setOption=a.prototype.slickSetOption=function(){var t,e,i,n,r,o=this,a=!1;if("object"===c.type(arguments[0])?(i=arguments[0],a=arguments[1],r="multiple"):"string"===c.type(arguments[0])&&(i=arguments[0],n=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===c.type(arguments[1])?r="responsive":void 0!==arguments[1]&&(r="single")),"single"===r)o.options[i]=n;else if("multiple"===r)c.each(i,function(t,e){o.options[t]=e});else if("responsive"===r)for(e in n)if("array"!==c.type(o.options.responsive))o.options.responsive=[n[e]];else{for(t=o.options.responsive.length-1;0<=t;)o.options.responsive[t].breakpoint===n[e].breakpoint&&o.options.responsive.splice(t,1),t--;o.options.responsive.push(n[e])}a&&(o.unload(),o.reinit())},a.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),!1===t.options.fade?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},a.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},a.prototype.setSlideClasses=function(t){var e,i,n,r=this,o=r.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");r.$slides.eq(t).addClass("slick-current"),!0===r.options.centerMode?(i=r.options.slidesToShow%2==0?1:0,n=Math.floor(r.options.slidesToShow/2),!0===r.options.infinite&&(n<=t&&t<=r.slideCount-1-n?r.$slides.slice(t-n+i,t+n+1).addClass("slick-active").attr("aria-hidden","false"):(e=r.options.slidesToShow+t,o.slice(e-n+1+i,e+n+2).addClass("slick-active").attr("aria-hidden","false")),0===t?o.eq(o.length-1-r.options.slidesToShow).addClass("slick-center"):t===r.slideCount-1&&o.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(t).addClass("slick-center")):0<=t&&t<=r.slideCount-r.options.slidesToShow?r.$slides.slice(t,t+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):o.length<=r.options.slidesToShow?o.addClass("slick-active").attr("aria-hidden","false"):(n=r.slideCount%r.options.slidesToShow,e=!0===r.options.infinite?r.options.slidesToShow+t:t,(r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-t<r.options.slidesToShow?o.slice(e-(r.options.slidesToShow-n),e+n):o.slice(e,e+r.options.slidesToShow)).addClass("slick-active").attr("aria-hidden","false")),"ondemand"!==r.options.lazyLoad&&"anticipated"!==r.options.lazyLoad||r.lazyLoad()},a.prototype.setupInfinite=function(){var t,e,i,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(e=null,n.slideCount>n.options.slidesToShow)){for(i=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;--t)c(n.$slides[e=t-1]).clone(!0).attr("id","").attr("data-slick-index",e-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;t<i+n.slideCount;t+=1)c(n.$slides[e=t]).clone(!0).attr("id","").attr("data-slick-index",e+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){c(this).attr("id","")})}},a.prototype.interrupt=function(t){t||this.autoPlay(),this.interrupted=t},a.prototype.selectHandler=function(t){t=c(t.target).is(".slick-slide")?c(t.target):c(t.target).parents(".slick-slide"),t=(t=parseInt(t.attr("data-slick-index")))||0;this.slideCount<=this.options.slidesToShow?this.slideHandler(t,!1,!0):this.slideHandler(t)},a.prototype.slideHandler=function(t,e,i){var n,r,o,a,s=this;if(e=e||!1,!(!0===s.animating&&!0===s.options.waitForAnimate||!0===s.options.fade&&s.currentSlide===t))if(!1===e&&s.asNavFor(t),o=s.getLeft(n=t),e=s.getLeft(s.currentSlide),s.currentLeft=null===s.swipeLeft?e:s.swipeLeft,!1===s.options.infinite&&!1===s.options.centerMode&&(t<0||t>s.getDotCount()*s.options.slidesToScroll))!1===s.options.fade&&(n=s.currentSlide,!0!==i&&s.slideCount>s.options.slidesToShow?s.animateSlide(e,function(){s.postSlide(n)}):s.postSlide(n));else if(!1===s.options.infinite&&!0===s.options.centerMode&&(t<0||t>s.slideCount-s.options.slidesToScroll))!1===s.options.fade&&(n=s.currentSlide,!0!==i&&s.slideCount>s.options.slidesToShow?s.animateSlide(e,function(){s.postSlide(n)}):s.postSlide(n));else{if(s.options.autoplay&&clearInterval(s.autoPlayTimer),r=n<0?s.slideCount%s.options.slidesToScroll!=0?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount+n:n>=s.slideCount?s.slideCount%s.options.slidesToScroll!=0?0:n-s.slideCount:n,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,r]),e=s.currentSlide,s.currentSlide=r,s.setSlideClasses(s.currentSlide),s.options.asNavFor&&(a=(a=s.getNavTarget()).slick("getSlick")).slideCount<=a.options.slidesToShow&&a.setSlideClasses(s.currentSlide),s.updateDots(),s.updateArrows(),!0===s.options.fade)return!0!==i?(s.fadeSlideOut(e),s.fadeSlide(r,function(){s.postSlide(r)})):s.postSlide(r),void s.animateHeight();!0!==i&&s.slideCount>s.options.slidesToShow?s.animateSlide(o,function(){s.postSlide(r)}):s.postSlide(r)}},a.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},a.prototype.swipeDirection=function(){var t=this,e=t.touchObject.startX-t.touchObject.curX,i=t.touchObject.startY-t.touchObject.curY,e=Math.atan2(i,e),e=Math.round(180*e/Math.PI);return(e=e<0?360-Math.abs(e):e)<=45&&0<=e||e<=360&&315<=e?!1===t.options.rtl?"left":"right":135<=e&&e<=225?!1===t.options.rtl?"right":"left":!0===t.options.verticalSwiping?35<=e&&e<=135?"down":"up":"vertical"},a.prototype.swipeEnd=function(t){var e,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1;if(n.interrupted=!1,n.shouldClick=!(10<n.touchObject.swipeLength),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(e),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},a.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},a.prototype.swipeMove=function(t){var e,i,n=this,r=void 0!==t.originalEvent?t.originalEvent.touches:null;return!(!n.dragging||n.scrolling||r&&1!==r.length)&&(e=n.getLeft(n.currentSlide),n.touchObject.curX=void 0!==r?r[0].pageX:t.clientX,n.touchObject.curY=void 0!==r?r[0].pageY:t.clientY,n.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(n.touchObject.curX-n.touchObject.startX,2))),i=Math.round(Math.sqrt(Math.pow(n.touchObject.curY-n.touchObject.startY,2))),!n.options.verticalSwiping&&!n.swiping&&4<i?!(n.scrolling=!0):(!0===n.options.verticalSwiping&&(n.touchObject.swipeLength=i),r=n.swipeDirection(),void 0!==t.originalEvent&&4<n.touchObject.swipeLength&&(n.swiping=!0,t.preventDefault()),i=(!1===n.options.rtl?1:-1)*(n.touchObject.curX>n.touchObject.startX?1:-1),!0===n.options.verticalSwiping&&(i=n.touchObject.curY>n.touchObject.startY?1:-1),t=n.touchObject.swipeLength,(n.touchObject.edgeHit=!1)===n.options.infinite&&(0===n.currentSlide&&"right"===r||n.currentSlide>=n.getDotCount()&&"left"===r)&&(t=n.touchObject.swipeLength*n.options.edgeFriction,n.touchObject.edgeHit=!0),!1===n.options.vertical?n.swipeLeft=e+t*i:n.swipeLeft=e+t*(n.$list.height()/n.listWidth)*i,!0===n.options.verticalSwiping&&(n.swipeLeft=e+t*i),!0!==n.options.fade&&!1!==n.options.touchMove&&(!0===n.animating?(n.swipeLeft=null,!1):void n.setCSS(n.swipeLeft))))},a.prototype.swipeStart=function(t){var e,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return!(i.touchObject={});void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,i.dragging=!0},a.prototype.unfilterSlides=a.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},a.prototype.unload=function(){var t=this;c(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},a.prototype.unslick=function(t){this.$slider.trigger("unslick",[this,t]),this.destroy()},a.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2);!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode||t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode)&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},a.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").end(),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},a.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},c.fn.slick=function(){for(var t,e=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e.length,o=0;o<r;o++)if("object"==typeof i||void 0===i?e[o].slick=new a(e[o],i):t=e[o].slick[i].apply(e[o].slick,n),void 0!==t)return t;return e}}),function(d){"use strict";var p=null,f=null;!function(){for(var r,o,a,s,t=["webkit","moz","o","ms"],e=d.document.createElement("div"),i=-1,i=0;i<t.length&&!d.requestAnimationFrame;i++)d.requestAnimationFrame=d[t[i]+"RequestAnimationFrame"];function n(){}void 0===e.nextElementSibling&&Object.defineProperty(d.Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t;){if(1===t.nodeType)return t;t=t.nextSibling}return null}}),(e=d.Element.prototype).matches=e.matches||e.machesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(t){return-1<Array.prototype.indexOf.call(this.parentElement.querySelectorAll(t),this)},Object.keys||(Object.keys=(r=Object.prototype.hasOwnProperty,o=[],a=!{toString:null}.propertyIsEnumerable("toString"),s=(o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){var e=[],i="",n=-1;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");for(i in t)r.call(t,i)&&e.push(i);if(a)for(n=0;n<s;n++)r.call(t,o[n])&&e.push(o[n]);return e})),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),"function"!=typeof Object.create&&(Object.create=function(t,e){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");n.prototype=t||{};var i=new n;return n.prototype=null,void 0!==e&&Object.defineProperties(i,e),null===t&&(i.__proto__=null),i}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,i,n,r;if(null===this)throw new TypeError;if(0==(r=(n=Object(this)).length>>>0))return-1;if(e=0,1<arguments.length&&((e=Number(arguments[1]))!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(0<e||-1)*Math.floor(Math.abs(e)))),r<=e)return-1;for(i=0<=e?e:Math.max(r-Math.abs(e),0);i<r;i++)if(i in n&&n[i]===t)return i;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){var e,i,n,r;if("function"!=typeof this)throw new TypeError;return e=Array.prototype.slice.call(arguments,1),n=function(){},r=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))},(i=this).prototype&&(n.prototype=this.prototype),r.prototype=new n,r}),d.Element.prototype.dispatchEvent||(d.Element.prototype.dispatchEvent=function(t){try{return this.fireEvent("on"+t.type,t)}catch(t){}})}(),(p=function(t,e,i){var n,r=null,o=!1,a=null,s=null,l=[],c="",h=[],u=-1,s=i||d.document;if((o=arguments[3])&&(o="boolean"==typeof o),"string"==typeof t)h=s.querySelectorAll(t);else if(t&&"object"==typeof t&&f.isElement(t,s))h=[t];else{if(!t||"object"!=typeof t||!t.length)throw new Error(p.messages.errorFactoryInvalidContainer());h=t}if(h.length<1)throw new Error(p.messages.errorFactoryContainerNotFound());for(u=0;(r=h[u])&&(!(0<u)||o);u++)r.id?c=r.id:(c="MixItUp"+f.randomHex(),r.id=c),p.instances[c]instanceof p.Mixer?(a=p.instances[c],(!e||e&&e.debug&&!1!==e.debug.showWarnings)&&console.warn(p.messages.warningFactoryPreexistingInstance())):((a=new p.Mixer).attach(r,s,c,e),p.instances[c]=a),n=new p.Facade(a),e&&e.debug&&e.debug.enable?l.push(a):l.push(n);return o?new p.Collection(l):l[0]}).use=function(t){p.Base.prototype.callActions.call(p,"beforeUse",arguments),"function"==typeof t&&"mixitup-extension"===t.TYPE?void 0===p.extensions[t.NAME]&&(t(p),p.extensions[t.NAME]=t):t.fn&&t.fn.jquery&&(p.libraries.$=t),p.Base.prototype.callActions.call(p,"afterUse",arguments)},p.instances={},p.extensions={},p.libraries={},f={hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=t.className?" "+e:e)},removeClass:function(t,e){this.hasClass(t,e)&&(e=new RegExp("(\\s|^)"+e+"(\\s|$)"),t.className=t.className.replace(e," ").trim())},extend:function(e,t,i,n){var r,o=[],a=-1;i=i||!1,n=n||!1;try{if(Array.isArray(t))for(a=0;a<t.length;a++)o.push(a);else t&&(o=Object.keys(t));for(a=0;a<o.length;a++)r=o[a],!i||"object"!=typeof t[r]||this.isElement(t[r])?e[r]=t[r]:(Array.isArray(t[r])?e[r]||(e[r]=[]):e[r]||(e[r]={}),this.extend(e[r],t[r],i,n))}catch(t){if(!n)throw t;this.handleExtendError(t,e)}return e},handleExtendError:function(t,e){var i,n=null,r="",o="",a="",s="",l=-1,c=-1;if(t instanceof TypeError&&(n=/property "?(\w*)"?[,:] object/i.exec(t.message))){for(s in r=n[1],e){for(c=0;c<r.length&&r.charAt(c)===s.charAt(c);)c++;l<c&&(l=c,a=s)}throw 1<l&&(o=p.messages.errorConfigInvalidPropertySuggestion({probableMatch:a})),i=p.messages.errorConfigInvalidProperty({erroneous:r,suggestion:o}),new TypeError(i)}throw t},template:function(n){for(var t,e=/\${([\w]*)}/g,r={};t=e.exec(n);)r[t[1]]=new RegExp("\\${"+t[1]+"}","g");return function(t){var e="",i=n;for(e in t=t||{},r)i=i.replace(r[e],void 0!==t[e]?t[e]:"");return i}},on:function(t,e,i,n){t&&(t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](d.event)},t.attachEvent("on"+e,t[e+i])))},off:function(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&(t.detachEvent("on"+e,t[e+i]),t[e+i]=null))},getCustomEvent:function(t,e,i){var n=null;return i=i||d.document,"function"==typeof d.CustomEvent?n=new d.CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):"function"==typeof i.createEvent?(n=i.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e):((n=i.createEventObject()).type=t,n.returnValue=!1,n.cancelBubble=!1,n.detail=e),n},getOriginalEvent:function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},index:function(t,e){for(var i=0;null!==(t=t.previousElementSibling);)e&&!t.matches(e)||++i;return i},camelCase:function(t){return t.toLowerCase().replace(/([_-][a-z])/g,function(t){return t.toUpperCase().replace(/[_-]/,"")})},pascalCase:function(t){return(t=this.camelCase(t)).charAt(0).toUpperCase()+t.slice(1)},dashCase:function(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()},isElement:function(t,e){return e=e||d.document,!!(d.HTMLElement&&t instanceof d.HTMLElement)||(!!(e.defaultView&&e.defaultView.HTMLElement&&t instanceof e.defaultView.HTMLElement)||null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)},createElement:function(t,e){var i=null,n=null,i=(e=e||d.document).createDocumentFragment();for((n=e.createElement("div")).innerHTML=t.trim();n.firstChild;)i.appendChild(n.firstChild);return i},removeWhitespace:function(t){for(var e;t&&"#text"===t.nodeName;)t=(e=t).previousSibling,e.parentElement&&e.parentElement.removeChild(e)},isEqualArray:function(t,e){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(t[i]!==e[i])return!1;return!0},deepEquals:function(t,e){if("object"==typeof t&&t&&"object"==typeof e&&e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!e.hasOwnProperty(i)||!this.deepEquals(t[i],e[i]))return!1}else if(t!==e)return!1;return!0},arrayShuffle:function(t){for(var e,i,n=t.slice(),r=n.length,o=r;o--;)e=~~(Math.random()*r),i=n[o],n[o]=n[e],n[e]=i;return n},arrayFromList:function(e){var i,n;try{return Array.prototype.slice.call(e)}catch(t){for(i=[],n=0;n<e.length;n++)i.push(e[n]);return i}},debounce:function(r,o,a){var s;return function(){var t=this,e=arguments,i=a&&!s,n=function(){s=null,a||r.apply(t,e)};clearTimeout(s),s=setTimeout(n,o),i&&r.apply(t,e)}},position:function(t){for(var e=0,i=0,n=t;t;)e-=t.scrollLeft,i-=t.scrollTop,t===n&&(e+=t.offsetLeft,i+=t.offsetTop,n=t.offsetParent),t=t.parentElement;return{x:e,y:i}},getHypotenuse:function(t,e){var i=(i=t.x-e.x)<0?-1*i:i,e=(e=t.y-e.y)<0?-1*e:e;return Math.sqrt(Math.pow(i,2)+Math.pow(e,2))},getIntersectionRatio:function(t,e){var i=t.width*t.height,n=Math.max(0,Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left));return Math.max(0,Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top))*n/i},closestParent:function(t,e,i,n){var r=t.parentNode;if(n=n||d.document,i&&t.matches(e))return t;for(;r&&r!=n.body;){if(r.matches&&r.matches(e))return r;if(!r.parentNode)return null;r=r.parentNode}return null},children:function(t,e,i){var n=[],r="";return i=i||d.doc,t&&(t.id||(r="Temp"+this.randomHexKey(),t.id=r),n=i.querySelectorAll("#"+t.id+" > "+e),r&&t.removeAttribute("id")),n},clean:function(t){for(var e=[],i=-1,i=0;i<t.length;i++)""!==t[i]&&e.push(t[i]);return e},defer:function(t){var e=null,i=null,n=null,i=new this.Deferred;return p.features.has.promises?i.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}):(n=d.jQuery||t.$)&&"function"==typeof n.Deferred?(e=n.Deferred(),i.promise=e.promise(),i.resolve=e.resolve,i.reject=e.reject):d.console&&console.warn(p.messages.warningNoPromiseImplementation()),i},all:function(t,e){var i=null;return p.features.has.promises?Promise.all(t):(i=d.jQuery||e.$)&&"function"==typeof i.when?i.when.apply(i,t).done(function(){return arguments}):(d.console&&console.warn(p.messages.warningNoPromiseImplementation()),[])},getPrefix:function(t,e,i){var n=-1,r="";if(f.dashCase(e)in t.style)return"";for(n=0;r=i[n];n++)if(r+e in t.style)return r.toLowerCase();return"unsupported"},randomHex:function(){return("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase()},getDocumentState:function(t){return t="object"==typeof t.body?t:d.document,{scrollTop:d.pageYOffset,scrollLeft:d.pageXOffset,docHeight:t.documentElement.scrollHeight,docWidth:t.documentElement.scrollWidth,viewportHeight:t.documentElement.clientHeight,viewportWidth:t.documentElement.clientWidth}},bind:function(t,e){return function(){return e.apply(t,arguments)}},isVisible:function(t){var e;return!!t.offsetParent||"fixed"===(e=d.getComputedStyle(t)).position&&"hidden"!==e.visibility&&"0"!==e.opacity},seal:function(t){"function"==typeof Object.seal&&Object.seal(t)},freeze:function(t){"function"==typeof Object.freeze&&Object.freeze(t)},compareVersions:function(t,e){for(var i,n,r=t.split("."),o=e.split("."),a=-1,a=0;a<r.length;a++){if(i=parseInt(r[a].replace(/[^\d.]/g,"")),(n=parseInt(o[a].replace(/[^\d.]/g,"")||0))<i)return!1;if(i<n)return!0}return!0},Deferred:function(){this.promise=null,this.resolve=null,this.reject=null,this.id=f.randomHex()},isEmptyObject:function(t){var e="";if("function"==typeof Object.keys)return 0===Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},getClassname:function(t,e,i){var n="";return(n+=t.block).length&&(n+=t.delineatorElement),n+=t["element"+this.pascalCase(e)],i?(n.length&&(n+=t.delineatorModifier),n+=i):n},getProperty:function(t,e){var i,n=e.split("."),r="",o=0;if(!e)return t;for(i=function(t){return t?t[r]:null};o<n.length;)r=n[o],t=i(t),o++;return void 0!==t?t:null}},p.h=f,p.Base=function(){},p.Base.prototype={constructor:p.Base,callActions:function(t,e){var i=this.constructor.actions[t],n="";if(i&&!f.isEmptyObject(i))for(n in i)i[n].apply(this,e)},callFilters:function(t,e,i){var n=this.constructor.filters[t],r=e,o="";if(!n||f.isEmptyObject(n))return r;for(o in i=i||[],n)(i=f.arrayFromList(i)).unshift(r),r=n[o].apply(this,i);return r}},p.BaseStatic=function(){this.actions={},this.filters={},this.extend=function(t){f.extend(this.prototype,t)},this.registerAction=function(t,e,i){(this.actions[t]=this.actions[t]||{})[e]=i},this.registerFilter=function(t,e,i){(this.filters[t]=this.filters[t]||{})[e]=i}},p.Features=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.boxSizingPrefix="",this.transformPrefix="",this.transitionPrefix="",this.boxSizingPrefix="",this.transformProp="",this.transformRule="",this.transitionProp="",this.perspectiveProp="",this.perspectiveOriginProp="",this.has=new p.Has,this.canary=null,this.BOX_SIZING_PROP="boxSizing",this.TRANSITION_PROP="transition",this.TRANSFORM_PROP="transform",this.PERSPECTIVE_PROP="perspective",this.PERSPECTIVE_ORIGIN_PROP="perspectiveOrigin",this.VENDORS=["Webkit","moz","O","ms"],this.TWEENABLE=["opacity","width","height","marginRight","marginBottom","x","y","scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],this.callActions("afterConstruct")},p.BaseStatic.call(p.Features),p.Features.prototype=Object.create(p.Base.prototype),f.extend(p.Features.prototype,{constructor:p.Features,init:function(){var t=this;t.callActions("beforeInit",arguments),t.canary=document.createElement("div"),t.setPrefixes(),t.runTests(),t.callActions("beforeInit",arguments)},runTests:function(){var t=this;t.callActions("beforeRunTests",arguments),t.has.promises="function"==typeof d.Promise,t.has.transitions="unsupported"!==t.transitionPrefix,t.callActions("afterRunTests",arguments),f.freeze(t.has)},setPrefixes:function(){var t=this;t.callActions("beforeSetPrefixes",arguments),t.transitionPrefix=f.getPrefix(t.canary,"Transition",t.VENDORS),t.transformPrefix=f.getPrefix(t.canary,"Transform",t.VENDORS),t.boxSizingPrefix=f.getPrefix(t.canary,"BoxSizing",t.VENDORS),t.boxSizingProp=t.boxSizingPrefix?t.boxSizingPrefix+f.pascalCase(t.BOX_SIZING_PROP):t.BOX_SIZING_PROP,t.transitionProp=t.transitionPrefix?t.transitionPrefix+f.pascalCase(t.TRANSITION_PROP):t.TRANSITION_PROP,t.transformProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.TRANSFORM_PROP):t.TRANSFORM_PROP,t.transformRule=t.transformPrefix?"-"+t.transformPrefix+"-"+t.TRANSFORM_PROP:t.TRANSFORM_PROP,t.perspectiveProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.PERSPECTIVE_PROP):t.PERSPECTIVE_PROP,t.perspectiveOriginProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.PERSPECTIVE_ORIGIN_PROP):t.PERSPECTIVE_ORIGIN_PROP,t.callActions("afterSetPrefixes",arguments)}}),p.Has=function(){this.transitions=!1,this.promises=!1,f.seal(this)},p.features=new p.Features,p.features.init(),p.ConfigAnimation=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.effects="fade scale",this.effectsIn="",this.effectsOut="",this.duration=600,this.easing="ease",this.applyPerspective=!0,this.perspectiveDistance="3000px",this.perspectiveOrigin="50% 50%",this.queue=!0,this.queueLimit=3,this.animateResizeContainer=!0,this.animateResizeTargets=!1,this.staggerSequence=null,this.reverseOut=!1,this.nudge=!0,this.clampHeight=!0,this.clampWidth=!0,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigAnimation),p.ConfigAnimation.prototype=Object.create(p.Base.prototype),p.ConfigAnimation.prototype.constructor=p.ConfigAnimation,p.ConfigBehavior=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.liveSort=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigBehavior),p.ConfigBehavior.prototype=Object.create(p.Base.prototype),p.ConfigBehavior.prototype.constructor=p.ConfigBehavior,p.ConfigCallbacks=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.onMixStart=null,this.onMixBusy=null,this.onMixEnd=null,this.onMixFail=null,this.onMixClick=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigCallbacks),p.ConfigCallbacks.prototype=Object.create(p.Base.prototype),p.ConfigCallbacks.prototype.constructor=p.ConfigCallbacks,p.ConfigControls=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.live=!1,this.scope="global",this.toggleLogic="or",this.toggleDefault="all",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigControls),p.ConfigControls.prototype=Object.create(p.Base.prototype),p.ConfigControls.prototype.constructor=p.ConfigControls,p.ConfigClassNames=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.block="mixitup",this.elementContainer="container",this.elementFilter="control",this.elementSort="control",this.elementMultimix="control",this.elementToggle="control",this.modifierActive="active",this.modifierDisabled="disabled",this.modifierFailed="failed",this.delineatorElement="-",this.delineatorModifier="-",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigClassNames),p.ConfigClassNames.prototype=Object.create(p.Base.prototype),p.ConfigClassNames.prototype.constructor=p.ConfigClassNames,p.ConfigData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.uidKey="",this.dirtyCheck=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigData),p.ConfigData.prototype=Object.create(p.Base.prototype),p.ConfigData.prototype.constructor=p.ConfigData,p.ConfigDebug=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!1,this.showWarnings=!0,this.fauxAsync=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigDebug),p.ConfigDebug.prototype=Object.create(p.Base.prototype),p.ConfigDebug.prototype.constructor=p.ConfigDebug,p.ConfigLayout=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.allowNestedTargets=!0,this.containerClassName="",this.siblingBefore=null,this.siblingAfter=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigLayout),p.ConfigLayout.prototype=Object.create(p.Base.prototype),p.ConfigLayout.prototype.constructor=p.ConfigLayout,p.ConfigLoad=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.filter="all",this.sort="default:asc",this.dataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigLoad),p.ConfigLoad.prototype=Object.create(p.Base.prototype),p.ConfigLoad.prototype.constructor=p.ConfigLoad,p.ConfigSelectors=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.target=".mix",this.control="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigSelectors),p.ConfigSelectors.prototype=Object.create(p.Base.prototype),p.ConfigSelectors.prototype.constructor=p.ConfigSelectors,p.ConfigRender=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.target=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigRender),p.ConfigRender.prototype=Object.create(p.Base.prototype),p.ConfigRender.prototype.constructor=p.ConfigRender,p.ConfigTemplates=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigTemplates),p.ConfigTemplates.prototype=Object.create(p.Base.prototype),p.ConfigTemplates.prototype.constructor=p.ConfigTemplates,p.Config=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.animation=new p.ConfigAnimation,this.behavior=new p.ConfigBehavior,this.callbacks=new p.ConfigCallbacks,this.controls=new p.ConfigControls,this.classNames=new p.ConfigClassNames,this.data=new p.ConfigData,this.debug=new p.ConfigDebug,this.layout=new p.ConfigLayout,this.load=new p.ConfigLoad,this.selectors=new p.ConfigSelectors,this.render=new p.ConfigRender,this.templates=new p.ConfigTemplates,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Config),p.Config.prototype=Object.create(p.Base.prototype),p.Config.prototype.constructor=p.Config,p.MixerDom=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.document=null,this.body=null,this.container=null,this.parent=null,this.targets=[],this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.MixerDom),p.MixerDom.prototype=Object.create(p.Base.prototype),p.MixerDom.prototype.constructor=p.MixerDom,p.UiClassNames=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.base="",this.active="",this.disabled="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.UiClassNames),p.UiClassNames.prototype=Object.create(p.Base.prototype),p.UiClassNames.prototype.constructor=p.UiClassNames,p.CommandDataset=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.dataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandDataset),p.CommandDataset.prototype=Object.create(p.Base.prototype),p.CommandDataset.prototype.constructor=p.CommandDataset,p.CommandMultimix=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.filter=null,this.sort=null,this.insert=null,this.remove=null,this.changeLayout=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandMultimix),p.CommandMultimix.prototype=Object.create(p.Base.prototype),p.CommandMultimix.prototype.constructor=p.CommandMultimix,p.CommandFilter=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.selector="",this.collection=null,this.action="show",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandFilter),p.CommandFilter.prototype=Object.create(p.Base.prototype),p.CommandFilter.prototype.constructor=p.CommandFilter,p.CommandSort=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.sortString="",this.attribute="",this.order="asc",this.collection=null,this.next=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandSort),p.CommandSort.prototype=Object.create(p.Base.prototype),p.CommandSort.prototype.constructor=p.CommandSort,p.CommandInsert=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.index=0,this.collection=[],this.position="before",this.sibling=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandInsert),p.CommandInsert.prototype=Object.create(p.Base.prototype),p.CommandInsert.prototype.constructor=p.CommandInsert,p.CommandRemove=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.targets=[],this.collection=[],this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandRemove),p.CommandRemove.prototype=Object.create(p.Base.prototype),p.CommandRemove.prototype.constructor=p.CommandRemove,p.CommandChangeLayout=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.containerClassName="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandChangeLayout),p.CommandChangeLayout.prototype=Object.create(p.Base.prototype),p.CommandChangeLayout.prototype.constructor=p.CommandChangeLayout,p.ControlDefinition=function(t,e,i,n){p.Base.call(this),this.callActions("beforeConstruct"),this.type=t,this.selector=e,this.live=i||!1,this.parent=n||"",this.callActions("afterConstruct"),f.freeze(this),f.seal(this)},p.BaseStatic.call(p.ControlDefinition),p.ControlDefinition.prototype=Object.create(p.Base.prototype),p.ControlDefinition.prototype.constructor=p.ControlDefinition,p.controlDefinitions=[],p.controlDefinitions.push(new p.ControlDefinition("multimix","[data-filter][data-sort]")),p.controlDefinitions.push(new p.ControlDefinition("filter","[data-filter]")),p.controlDefinitions.push(new p.ControlDefinition("sort","[data-sort]")),p.controlDefinitions.push(new p.ControlDefinition("toggle","[data-toggle]")),p.Control=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.selector="",this.bound=[],this.pending=-1,this.type="",this.status="inactive",this.filter="",this.sort="",this.canDisable=!1,this.handler=null,this.classNames=new p.UiClassNames,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Control),p.Control.prototype=Object.create(p.Base.prototype),f.extend(p.Control.prototype,{constructor:p.Control,init:function(t,e,i){var n=this;if(this.callActions("beforeInit",arguments),n.el=t,n.type=e,n.selector=i,n.selector)n.status="live";else switch(n.canDisable="boolean"==typeof n.el.disable,n.type){case"filter":n.filter=n.el.getAttribute("data-filter");break;case"toggle":n.filter=n.el.getAttribute("data-toggle");break;case"sort":n.sort=n.el.getAttribute("data-sort");break;case"multimix":n.filter=n.el.getAttribute("data-filter"),n.sort=n.el.getAttribute("data-sort")}n.bindClick(),p.controls.push(n),this.callActions("afterInit",arguments)},isBound:function(t){var e;return this.callActions("beforeIsBound",arguments),e=-1<this.bound.indexOf(t),this.callFilters("afterIsBound",e,arguments)},addBinding:function(t){this.callActions("beforeAddBinding",arguments),this.isBound()||this.bound.push(t),this.callActions("afterAddBinding",arguments)},removeBinding:function(t){var e=this,i=-1;this.callActions("beforeRemoveBinding",arguments),-1<(i=e.bound.indexOf(t))&&e.bound.splice(i,1),e.bound.length<1&&(e.unbindClick(),i=p.controls.indexOf(e),p.controls.splice(i,1),"active"===e.status&&e.renderStatus(e.el,"inactive")),this.callActions("afterRemoveBinding",arguments)},bindClick:function(){var e=this;this.callActions("beforeBindClick",arguments),e.handler=function(t){e.handleClick(t)},f.on(e.el,"click",e.handler),this.callActions("afterBindClick",arguments)},unbindClick:function(){this.callActions("beforeUnbindClick",arguments),f.off(this.el,"click",this.handler),this.handler=null,this.callActions("afterUnbindClick",arguments)},handleClick:function(t){var e,i=this,n=null,r=null,o=!1,a={},s=[],l=-1;if(this.callActions("beforeHandleClick",arguments),this.pending=0,r=i.bound[0],n=i.selector?f.closestParent(t.target,r.config.selectors.control+i.selector,!0,r.dom.document):i.el){switch(i.type){case"filter":a.filter=i.filter||n.getAttribute("data-filter");break;case"sort":a.sort=i.sort||n.getAttribute("data-sort");break;case"multimix":a.filter=i.filter||n.getAttribute("data-filter"),a.sort=i.sort||n.getAttribute("data-sort");break;case"toggle":a.filter=i.filter||n.getAttribute("data-toggle"),o="live"===i.status?f.hasClass(n,i.classNames.active):"active"===i.status}for(l=0;l<i.bound.length;l++)e=new p.CommandMultimix,f.extend(e,a),s.push(e);for(s=i.callFilters("commandsHandleClick",s,arguments),i.pending=i.bound.length,l=0;r=i.bound[l];l++)(a=s[l])&&(r.lastClicked||(r.lastClicked=n),p.events.fire("mixClick",r.dom.container,{state:r.state,instance:r,originalEvent:t,control:r.lastClicked},r.dom.document),"function"==typeof r.config.callbacks.onMixClick&&!1===r.config.callbacks.onMixClick.call(r.lastClicked,r.state,t,r)||("toggle"===i.type?o?r.toggleOff(a.filter):r.toggleOn(a.filter):r.multimix(a)));this.callActions("afterHandleClick",arguments)}else i.callActions("afterHandleClick",arguments)},update:function(t,e){var i=this,n=new p.CommandMultimix;i.callActions("beforeUpdate",arguments),i.pending--,i.pending=Math.max(0,i.pending),0<i.pending||("live"===i.status?i.updateLive(t,e):(n.sort=i.sort,n.filter=i.filter,i.callFilters("actionsUpdate",n,arguments),i.parseStatusChange(i.el,t,n,e)),i.callActions("afterUpdate",arguments))},updateLive:function(t,e){var i,n=this,r=null,o=null,a=-1;if(n.callActions("beforeUpdateLive",arguments),n.el){for(i=n.el.querySelectorAll(n.selector),a=0;o=i[a];a++){switch(r=new p.CommandMultimix,n.type){case"filter":r.filter=o.getAttribute("data-filter");break;case"sort":r.sort=o.getAttribute("data-sort");break;case"multimix":r.filter=o.getAttribute("data-filter"),r.sort=o.getAttribute("data-sort");break;case"toggle":r.filter=o.getAttribute("data-toggle")}r=n.callFilters("actionsUpdateLive",r,arguments),n.parseStatusChange(o,t,r,e)}n.callActions("afterUpdateLive",arguments)}},parseStatusChange:function(t,e,i,n){var r=this,o="",a=-1;switch(r.callActions("beforeParseStatusChange",arguments),r.type){case"filter":e.filter===i.filter?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"multimix":e.sort===i.sort&&e.filter===i.filter?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"sort":e.sort.match(/:asc/g)&&(o=e.sort.replace(/:asc/g,"")),e.sort===i.sort||o===i.sort?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"toggle":for(n.length<1&&r.renderStatus(t,"inactive"),e.filter===i.filter&&r.renderStatus(t,"active"),a=0;a<n.length;a++){if(n[a]===i.filter){r.renderStatus(t,"active");break}r.renderStatus(t,"inactive")}}r.callActions("afterParseStatusChange",arguments)},renderStatus:function(t,e){var i=this;switch(i.callActions("beforeRenderStatus",arguments),e){case"active":f.addClass(t,i.classNames.active),f.removeClass(t,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"inactive":f.removeClass(t,i.classNames.active),f.removeClass(t,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"disabled":i.canDisable&&(i.el.disabled=!0),f.addClass(t,i.classNames.disabled),f.removeClass(t,i.classNames.active)}"live"!==i.status&&(i.status=e),i.callActions("afterRenderStatus",arguments)}}),p.controls=[],p.StyleData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.x=0,this.y=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.marginRight=0,this.marginBottom=0,this.opacity=0,this.scale=new p.TransformData,this.translateX=new p.TransformData,this.translateY=new p.TransformData,this.translateZ=new p.TransformData,this.rotateX=new p.TransformData,this.rotateY=new p.TransformData,this.rotateZ=new p.TransformData,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.StyleData),p.StyleData.prototype=Object.create(p.Base.prototype),p.StyleData.prototype.constructor=p.StyleData,p.TransformData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.value=0,this.unit="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TransformData),p.TransformData.prototype=Object.create(p.Base.prototype),p.TransformData.prototype.constructor=p.TransformData,p.TransformDefaults=function(){p.StyleData.apply(this),this.callActions("beforeConstruct"),this.scale.value=.01,this.scale.unit="",this.translateX.value=20,this.translateX.unit="px",this.translateY.value=20,this.translateY.unit="px",this.translateZ.value=20,this.translateZ.unit="px",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateY.value=90,this.rotateY.unit="deg",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateZ.value=180,this.rotateZ.unit="deg",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TransformDefaults),p.TransformDefaults.prototype=Object.create(p.StyleData.prototype),p.TransformDefaults.prototype.constructor=p.TransformDefaults,p.transformDefaults=new p.TransformDefaults,p.EventDetail=function(){this.state=null,this.futureState=null,this.instance=null,this.originalEvent=null},p.Events=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.mixStart=null,this.mixBusy=null,this.mixEnd=null,this.mixFail=null,this.mixClick=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Events),p.Events.prototype=Object.create(p.Base.prototype),p.Events.prototype.constructor=p.Events,p.Events.prototype.fire=function(t,e,i,n){var r,o=new p.EventDetail;if(this.callActions("beforeFire",arguments),void 0===this[t])throw new Error('Event type "'+t+'" not found.');o.state=new p.State,f.extend(o.state,i.state),i.futureState&&(o.futureState=new p.State,f.extend(o.futureState,i.futureState)),o.instance=i.instance,i.originalEvent&&(o.originalEvent=i.originalEvent),r=f.getCustomEvent(t,o,n),this.callFilters("eventFire",r,arguments),e.dispatchEvent(r)},p.events=new p.Events,p.QueueItem=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.args=[],this.instruction=null,this.triggerElement=null,this.deferred=null,this.isToggling=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.QueueItem),p.QueueItem.prototype=Object.create(p.Base.prototype),p.QueueItem.prototype.constructor=p.QueueItem,p.Mixer=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.config=new p.Config,this.id="",this.isBusy=!1,this.isToggling=!1,this.incPadding=!0,this.controls=[],this.targets=[],this.origOrder=[],this.cache={},this.toggleArray=[],this.targetsMoved=0,this.targetsImmovable=0,this.targetsBound=0,this.targetsDone=0,this.staggerDuration=0,this.effectsIn=null,this.effectsOut=null,this.transformIn=[],this.transformOut=[],this.queue=[],this.state=null,this.lastOperation=null,this.lastClicked=null,this.userCallback=null,this.userDeferred=null,this.dom=new p.MixerDom,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Mixer),p.Mixer.prototype=Object.create(p.Base.prototype),f.extend(p.Mixer.prototype,{constructor:p.Mixer,attach:function(t,e,i,n){var r=this,o=null,a=-1;for(r.callActions("beforeAttach",arguments),r.id=i,n&&f.extend(r.config,n,!0,!0),r.sanitizeConfig(),r.cacheDom(t,e),r.config.layout.containerClassName&&f.addClass(r.dom.container,r.config.layout.containerClassName),p.features.has.transitions||(r.config.animation.enable=!1),void 0===d.console&&(r.config.debug.showWarnings=!1),r.config.data.uidKey&&(r.config.controls.enable=!1),r.indexTargets(),r.state=r.getInitialState(),a=0;o=r.lastOperation.toHide[a];a++)o.hide();r.config.controls.enable&&(r.initControls(),r.buildToggleArray(null,r.state),r.updateControls({filter:r.state.activeFilter,sort:r.state.activeSort})),r.parseEffects(),r.callActions("afterAttach",arguments)},sanitizeConfig:function(){var t=this;t.callActions("beforeSanitizeConfig",arguments),t.config.controls.scope=t.config.controls.scope.toLowerCase().trim(),t.config.controls.toggleLogic=t.config.controls.toggleLogic.toLowerCase().trim(),t.config.controls.toggleDefault=t.config.controls.toggleDefault.toLowerCase().trim(),t.config.animation.effects=t.config.animation.effects.trim(),t.callActions("afterSanitizeConfig",arguments)},getInitialState:function(){var t=this,e=new p.State,i=new p.Operation;if(t.callActions("beforeGetInitialState",arguments),e.activeContainerClassName=t.config.layout.containerClassName,t.config.load.dataset){if(!t.config.data.uidKey||"string"!=typeof t.config.data.uidKey)throw new TypeError(p.messages.errorConfigDataUidKeyNotSet());i.startDataset=i.newDataset=e.activeDataset=t.config.load.dataset.slice(),i.startContainerClassName=i.newContainerClassName=e.activeContainerClassName,i.show=t.targets.slice(),e=t.callFilters("stateGetInitialState",e,arguments)}else e.activeFilter=t.parseFilterArgs([t.config.load.filter]).command,e.activeSort=t.parseSortArgs([t.config.load.sort]).command,e.totalTargets=t.targets.length,(e=t.callFilters("stateGetInitialState",e,arguments)).activeSort.collection||e.activeSort.attribute||"random"===e.activeSort.order||"desc"===e.activeSort.order?(i.newSort=e.activeSort,t.sortOperation(i),t.printSort(!1,i),t.targets=i.newOrder):i.startOrder=i.newOrder=t.targets,i.startFilter=i.newFilter=e.activeFilter,i.startSort=i.newSort=e.activeSort,i.startContainerClassName=i.newContainerClassName=e.activeContainerClassName,"all"===i.newFilter.selector?i.newFilter.selector=t.config.selectors.target:"none"===i.newFilter.selector&&(i.newFilter.selector="");return i=t.callFilters("operationGetInitialState",i,[e]),(t.lastOperation=i).newFilter&&t.filterOperation(i),e=t.buildState(i)},cacheDom:function(t,e){var i=this;i.callActions("beforeCacheDom",arguments),i.dom.document=e,i.dom.body=i.dom.document.querySelector("body"),i.dom.container=t,i.dom.parent=t,i.callActions("afterCacheDom",arguments)},indexTargets:function(){var t,e,i=this,n=null,r=-1;if(i.callActions("beforeIndexTargets",arguments),i.dom.targets=i.config.layout.allowNestedTargets?i.dom.container.querySelectorAll(i.config.selectors.target):f.children(i.dom.container,i.config.selectors.target,i.dom.document),i.dom.targets=f.arrayFromList(i.dom.targets),i.targets=[],(e=i.config.load.dataset)&&e.length!==i.dom.targets.length)throw new Error(p.messages.errorDatasetPrerenderedMismatch());if(i.dom.targets.length){for(r=0;t=i.dom.targets[r];r++)(n=new p.Target).init(t,i,e?e[r]:void 0),n.isInDom=!0,i.targets.push(n);i.dom.parent=i.dom.targets[0].parentElement===i.dom.container?i.dom.container:i.dom.targets[0].parentElement}i.origOrder=i.targets,i.callActions("afterIndexTargets",arguments)},initControls:function(){var t,e,i=this,n=null,r=null,o=null,a=null,s=-1,l=-1;switch(i.callActions("beforeInitControls",arguments),i.config.controls.scope){case"local":r=i.dom.container;break;case"global":r=i.dom.document;break;default:throw new Error(p.messages.errorConfigInvalidControlsScope())}for(s=0;t=p.controlDefinitions[s];s++)if(i.config.controls.live||t.live){if(t.parent){if(!(o=i.dom[t.parent])||o.length<0)continue;"number"!=typeof o.length&&(o=[o])}else o=[r];for(l=0;n=o[l];l++)a=i.getControl(n,t.type,t.selector),i.controls.push(a)}else for(e=r.querySelectorAll(i.config.selectors.control+t.selector),l=0;n=e[l];l++)(a=i.getControl(n,t.type,""))&&i.controls.push(a);i.callActions("afterInitControls",arguments)},getControl:function(t,e,i){var n=this,r=null,o=-1;if(n.callActions("beforeGetControl",arguments),!i)for(o=0;r=p.controls[o];o++){if(r.el===t&&r.isBound(n))return n.callFilters("controlGetControl",null,arguments);if(r.el===t&&r.type===e&&r.selector===i)return r.addBinding(n),n.callFilters("controlGetControl",r,arguments)}return(r=new p.Control).init(t,e,i),r.classNames.base=f.getClassname(n.config.classNames,e),r.classNames.active=f.getClassname(n.config.classNames,e,n.config.classNames.modifierActive),r.classNames.disabled=f.getClassname(n.config.classNames,e,n.config.classNames.modifierDisabled),r.addBinding(n),n.callFilters("controlGetControl",r,arguments)},getToggleSelector:function(){var t=this,e="or"===t.config.controls.toggleLogic?", ":"",i="";return t.callActions("beforeGetToggleSelector",arguments),t.toggleArray=f.clean(t.toggleArray),""===(i=t.toggleArray.join(e))&&(i=t.config.controls.toggleDefault),t.callFilters("selectorGetToggleSelector",i,arguments)},buildToggleArray:function(t,e){var i=this,n="";if(i.callActions("beforeBuildToggleArray",arguments),t&&t.filter)n=t.filter.selector.replace(/\s/g,"");else{if(!e)return;n=e.activeFilter.selector.replace(/\s/g,"")}n!==i.config.selectors.target&&"all"!==n||(n=""),"or"===i.config.controls.toggleLogic?i.toggleArray=n.split(","):i.toggleArray=i.splitCompoundSelector(n),i.toggleArray=f.clean(i.toggleArray),i.callActions("afterBuildToggleArray",arguments)},splitCompoundSelector:function(t){var e=t.split(/([\.\[])/g),i=[],n="",r=-1;for(""===e[0]&&e.shift(),r=0;r<e.length;r++)r%2==0&&(n=""),n+=e[r],r%2!=0&&i.push(n);return i},updateControls:function(t){var e=this,i=null,n=new p.CommandMultimix,r=-1;for(e.callActions("beforeUpdateControls",arguments),t.filter?n.filter=t.filter.selector:n.filter=e.state.activeFilter.selector,t.sort?n.sort=e.buildSortString(t.sort):n.sort=e.buildSortString(e.state.activeSort),n.filter===e.config.selectors.target&&(n.filter="all"),""===n.filter&&(n.filter="none"),f.freeze(n),r=0;i=e.controls[r];r++)i.update(n,e.toggleArray);e.callActions("afterUpdateControls",arguments)},buildSortString:function(t){var e="";return e+=t.sortString,t.next&&(e+=" "+this.buildSortString(t.next)),e},insertTargets:function(t,e){var i,n=this,r=-1,o=null,a=null,s=null,l=-1;if(n.callActions("beforeInsertTargets",arguments),void 0===t.index&&(t.index=0),i=n.getNextSibling(t.index,t.sibling,t.position),o=n.dom.document.createDocumentFragment(),r=i?f.index(i,n.config.selectors.target):n.targets.length,t.collection){for(l=0;s=t.collection[l];l++){if(-1<n.dom.targets.indexOf(s))throw new Error(p.messages.errorInsertPreexistingElement());s.style.display="none",o.appendChild(s),o.appendChild(n.dom.document.createTextNode(" ")),f.isElement(s,n.dom.document)&&s.matches(n.config.selectors.target)&&((a=new p.Target).init(s,n),a.isInDom=!0,n.targets.splice(r,0,a),r++)}n.dom.parent.insertBefore(o,i)}e.startOrder=n.origOrder=n.targets,n.callActions("afterInsertTargets",arguments)},getNextSibling:function(t,e,i){var n=this,r=null;return t=Math.max(t,0),e&&"before"===i?r=e:e&&"after"===i?r=e.nextElementSibling||null:0<n.targets.length&&void 0!==t?r=t<n.targets.length||!n.targets.length?n.targets[t].dom.el:n.targets[n.targets.length-1].dom.el.nextElementSibling:0===n.targets.length&&0<n.dom.parent.children.length&&(n.config.layout.siblingAfter?r=n.config.layout.siblingAfter:n.config.layout.siblingBefore?r=n.config.layout.siblingBefore.nextElementSibling:n.dom.parent.children[0]),n.callFilters("elementGetNextSibling",r,arguments)},filterOperation:function(t){var e,i,n=!1,r=null,o=-1;for(this.callActions("beforeFilterOperation",arguments),i=t.newFilter.action,o=0;r=t.newOrder[o];o++)n=t.newFilter.collection?-1<t.newFilter.collection.indexOf(r.dom.el):""!==t.newFilter.selector&&r.dom.el.matches(t.newFilter.selector),this.evaluateHideShow(n,r,i,t);if(t.toRemove.length)for(o=0;r=t.show[o];o++)-1<t.toRemove.indexOf(r)&&(t.show.splice(o,1),-1<(e=t.toShow.indexOf(r))&&t.toShow.splice(e,1),t.toHide.push(r),t.hide.push(r),o--);t.matching=t.show.slice(),0===t.show.length&&""!==t.newFilter.selector&&0!==this.targets.length&&(t.hasFailed=!0),this.callActions("afterFilterOperation",arguments)},evaluateHideShow:function(t,e,i,n){var r=Array.prototype.slice.call(arguments,1),o=this.callFilters("testResultEvaluateHideShow",t,r);this.callActions("beforeEvaluateHideShow",arguments),!0===o&&"show"===i||!1===o&&"hide"===i?(n.show.push(e),e.isShown||n.toShow.push(e)):(n.hide.push(e),e.isShown&&n.toHide.push(e)),this.callActions("afterEvaluateHideShow",arguments)},sortOperation:function(i){var t,n=this,e=[],r=null,o=-1;if(n.callActions("beforeSortOperation",arguments),i.startOrder=n.targets,i.newSort.collection){for(e=[],o=0;t=i.newSort.collection[o];o++){if(n.dom.targets.indexOf(t)<0)throw new Error(p.messages.errorSortNonExistentElement());(r=new p.Target).init(t,n),r.isInDom=!0,e.push(r)}i.newOrder=e}else"random"===i.newSort.order?i.newOrder=f.arrayShuffle(i.startOrder):""===i.newSort.attribute?(i.newOrder=n.origOrder.slice(),"desc"===i.newSort.order&&i.newOrder.reverse()):(i.newOrder=i.startOrder.slice(),i.newOrder.sort(function(t,e){return n.compare(t,e,i.newSort)}));f.isEqualArray(i.newOrder,i.startOrder)&&(i.willSort=!1),n.callActions("afterSortOperation",arguments)},compare:function(t,e,i){var n=i.order,r=this.getAttributeValue(t,i.attribute),o=this.getAttributeValue(e,i.attribute),o=isNaN(+r)||isNaN(+o)?(r=r.toLowerCase(),o.toLowerCase()):(r=+r,+o);return r<o?"asc"===n?-1:1:o<r?"asc"===n?1:-1:r===o&&i.next?this.compare(t,e,i.next):0},getAttributeValue:function(t,e){var i="";return null===(i=t.dom.el.getAttribute("data-"+e))&&this.config.debug.showWarnings&&console.warn(p.messages.warningInconsistentSortingAttributes({attribute:"data-"+e})),this.callFilters("valueGetAttributeValue",i||0,arguments)},printSort:function(t,e){var i=this,n=t?e.newOrder:e.startOrder,r=t?e.startOrder:e.newOrder,t=n.length?n[n.length-1].dom.el.nextElementSibling:null,o=d.document.createDocumentFragment(),e=null,a=null,s=null,l=-1;for(i.callActions("beforePrintSort",arguments),l=0;a=n[l];l++)"absolute"!==(s=a.dom.el).style.position&&(f.removeWhitespace(s.previousSibling),s.parentElement.removeChild(s));for((e=t?t.previousSibling:i.dom.parent.lastChild)&&"#text"===e.nodeName&&f.removeWhitespace(e),l=0;a=r[l];l++)s=a.dom.el,f.isElement(o.lastChild)&&o.appendChild(d.document.createTextNode(" ")),o.appendChild(s);i.dom.parent.firstChild&&i.dom.parent.firstChild!==t&&o.insertBefore(d.document.createTextNode(" "),o.childNodes[0]),t?(o.appendChild(d.document.createTextNode(" ")),i.dom.parent.insertBefore(o,t)):i.dom.parent.appendChild(o),i.callActions("afterPrintSort",arguments)},parseSortString:function(t,e){for(var i,n=t.split(" "),r=e,o=-1,o=0;o<n.length;o++){switch(i=n[o].split(":"),r.sortString=n[o],r.attribute=f.dashCase(i[0]),r.order=i[1]||"asc",r.attribute){case"default":r.attribute="";break;case"random":r.attribute="",r.order="random"}if(!r.attribute||"random"===r.order)break;o<n.length-1&&(r.next=new p.CommandSort,f.freeze(r),r=r.next)}return this.callFilters("commandsParseSort",e,arguments)},parseEffects:function(){var t=this,e="",i=t.config.animation.effectsIn||t.config.animation.effects,n=t.config.animation.effectsOut||t.config.animation.effects;for(e in t.callActions("beforeParseEffects",arguments),t.effectsIn=new p.StyleData,t.effectsOut=new p.StyleData,t.transformIn=[],t.transformOut=[],t.effectsIn.opacity=t.effectsOut.opacity=1,t.parseEffect("fade",i,t.effectsIn,t.transformIn),t.parseEffect("fade",n,t.effectsOut,t.transformOut,!0),p.transformDefaults)p.transformDefaults[e]instanceof p.TransformData&&(t.parseEffect(e,i,t.effectsIn,t.transformIn),t.parseEffect(e,n,t.effectsOut,t.transformOut,!0));t.parseEffect("stagger",i,t.effectsIn,t.transformIn),t.parseEffect("stagger",n,t.effectsOut,t.transformOut,!0),t.callActions("afterParseEffects",arguments)},parseEffect:function(t,e,i,n,r){var o,a,s,l=this,c="",h=["%","px","em","rem","vh","vw","deg"],u=-1;if(l.callActions("beforeParseEffect",arguments),"string"!=typeof e)throw new TypeError(p.messages.errorConfigInvalidAnimationEffects());if(e.indexOf(t)<0)"stagger"===t&&(l.staggerDuration=0);else{switch(-1<(o=e.indexOf(t+"("))&&(a=e.substring(o),c=/\(([^)]+)\)/.exec(a)[1]),t){case"fade":i.opacity=c?parseFloat(c):0;break;case"stagger":l.staggerDuration=c?parseFloat(c):100;break;default:if(r&&l.config.animation.reverseOut&&"scale"!==t?i[t].value=-1*(c?parseFloat(c):p.transformDefaults[t].value):i[t].value=c?parseFloat(c):p.transformDefaults[t].value,c){for(u=0;s=h[u];u++)if(-1<c.indexOf(s)){i[t].unit=s;break}}else i[t].unit=p.transformDefaults[t].unit;n.push(t+"("+i[t].value+i[t].unit+")")}l.callActions("afterParseEffect",arguments)}},buildState:function(t){var e=this,i=new p.State,n=null,r=-1;for(e.callActions("beforeBuildState",arguments),r=0;n=e.targets[r];r++)(!t.toRemove.length||t.toRemove.indexOf(n)<0)&&i.targets.push(n.dom.el);for(r=0;n=t.matching[r];r++)i.matching.push(n.dom.el);for(r=0;n=t.show[r];r++)i.show.push(n.dom.el);for(r=0;n=t.hide[r];r++)(!t.toRemove.length||t.toRemove.indexOf(n)<0)&&i.hide.push(n.dom.el);return i.id=e.id,i.container=e.dom.container,i.activeFilter=t.newFilter,i.activeSort=t.newSort,i.activeDataset=t.newDataset,i.activeContainerClassName=t.newContainerClassName,i.hasFailed=t.hasFailed,i.totalTargets=e.targets.length,i.totalShow=t.show.length,i.totalHide=t.hide.length,i.totalMatching=t.matching.length,i.triggerElement=t.triggerElement,e.callFilters("stateBuildState",i,arguments)},goMix:function(t,e){var i=this,n=null;return i.callActions("beforeGoMix",arguments),i.config.animation.duration&&i.config.animation.effects&&f.isVisible(i.dom.container)||(t=!1),e.toShow.length||e.toHide.length||e.willSort||e.willChangeLayout||(t=!1),e.startState.show.length||e.show.length||(t=!1),p.events.fire("mixStart",i.dom.container,{state:e.startState,futureState:e.newState,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixStart&&i.config.callbacks.onMixStart.call(i.dom.container,e.startState,e.newState,i),f.removeClass(i.dom.container,f.getClassname(i.config.classNames,"container",i.config.classNames.modifierFailed)),n=i.userDeferred||(i.userDeferred=f.defer(p.libraries)),i.isBusy=!0,t&&p.features.has.transitions?(d.pageYOffset!==e.docState.scrollTop&&d.scrollTo(e.docState.scrollLeft,e.docState.scrollTop),i.config.animation.applyPerspective&&(i.dom.parent.style[p.features.perspectiveProp]=i.config.animation.perspectiveDistance,i.dom.parent.style[p.features.perspectiveOriginProp]=i.config.animation.perspectiveOrigin),i.config.animation.animateResizeContainer&&e.startHeight!==e.newHeight&&e.viewportDeltaY!==e.startHeight-e.newHeight&&(i.dom.parent.style.height=e.startHeight+"px"),i.config.animation.animateResizeContainer&&e.startWidth!==e.newWidth&&e.viewportDeltaX!==e.startWidth-e.newWidth&&(i.dom.parent.style.width=e.startWidth+"px"),e.startHeight===e.newHeight&&(i.dom.parent.style.height=e.startHeight+"px"),e.startWidth===e.newWidth&&(i.dom.parent.style.width=e.startWidth+"px"),e.startHeight===e.newHeight&&e.startWidth===e.newWidth&&(i.dom.parent.style.overflow="hidden"),requestAnimationFrame(function(){i.moveTargets(e)})):i.config.debug.fauxAsync?setTimeout(function(){i.cleanUp(e)},i.config.animation.duration):i.cleanUp(e),i.callFilters("promiseGoMix",n.promise,arguments)},getStartMixData:function(t){var e=this,i=d.getComputedStyle(e.dom.parent),n=e.dom.parent.getBoundingClientRect(),r=null,o={},a=-1,s=i[p.features.boxSizingProp];for(e.incPadding="border-box"===s,e.callActions("beforeGetStartMixData",arguments),a=0;r=t.show[a];a++)o=r.getPosData(),t.showPosData[a]={startPosData:o};for(a=0;r=t.toHide[a];a++)o=r.getPosData(),t.toHidePosData[a]={startPosData:o};t.startX=n.left,t.startY=n.top,t.startHeight=e.incPadding?n.height:n.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTop)-parseFloat(i.borderBottom),t.startWidth=e.incPadding?n.width:n.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeft)-parseFloat(i.borderRight),e.callActions("afterGetStartMixData",arguments)},setInter:function(t){var e=this,i=null,n=-1;for(e.callActions("beforeSetInter",arguments),e.config.animation.clampHeight&&(e.dom.parent.style.height=t.startHeight+"px",e.dom.parent.style.overflow="hidden"),e.config.animation.clampWidth&&(e.dom.parent.style.width=t.startWidth+"px",e.dom.parent.style.overflow="hidden"),n=0;i=t.toShow[n];n++)i.show();t.willChangeLayout&&(f.removeClass(e.dom.container,t.startContainerClassName),f.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterSetInter",arguments)},getInterMixData:function(t){var e=null,i=-1;for(this.callActions("beforeGetInterMixData",arguments),i=0;e=t.show[i];i++)t.showPosData[i].interPosData=e.getPosData();for(i=0;e=t.toHide[i];i++)t.toHidePosData[i].interPosData=e.getPosData();this.callActions("afterGetInterMixData",arguments)},setFinal:function(t){var e=null,i=-1;for(this.callActions("beforeSetFinal",arguments),t.willSort&&this.printSort(!1,t),i=0;e=t.toHide[i];i++)e.hide();this.callActions("afterSetFinal",arguments)},getFinalMixData:function(t){var e,i=this,n=null,r=null,o=-1;for(i.callActions("beforeGetFinalMixData",arguments),o=0;r=t.show[o];o++)t.showPosData[o].finalPosData=r.getPosData();for(o=0;r=t.toHide[o];o++)t.toHidePosData[o].finalPosData=r.getPosData();for((i.config.animation.clampHeight||i.config.animation.clampWidth)&&(i.dom.parent.style.height=i.dom.parent.style.width=i.dom.parent.style.overflow=""),i.incPadding||(n=d.getComputedStyle(i.dom.parent)),e=i.dom.parent.getBoundingClientRect(),t.newX=e.left,t.newY=e.top,t.newHeight=i.incPadding?e.height:e.height-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderTop)-parseFloat(n.borderBottom),t.newWidth=i.incPadding?e.width:e.width-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderLeft)-parseFloat(n.borderRight),t.viewportDeltaX=t.docState.viewportWidth-this.dom.document.documentElement.clientWidth,t.viewportDeltaY=t.docState.viewportHeight-this.dom.document.documentElement.clientHeight,t.willSort&&i.printSort(!0,t),o=0;r=t.toShow[o];o++)r.hide();for(o=0;r=t.toHide[o];o++)r.show();t.willChangeLayout&&(f.removeClass(i.dom.container,t.newContainerClassName),f.addClass(i.dom.container,i.config.layout.containerClassName)),i.callActions("afterGetFinalMixData",arguments)},getTweenData:function(t){var e=this,i=null,n=null,r=Object.getOwnPropertyNames(e.effectsIn),o="",a=null,s=-1,l=-1,c=-1,h=-1;for(e.callActions("beforeGetTweenData",arguments),c=0;i=t.show[c];c++)for((n=t.showPosData[c]).posIn=new p.StyleData,n.posOut=new p.StyleData,n.tweenData=new p.StyleData,i.isShown?(n.posIn.x=n.startPosData.x-n.interPosData.x,n.posIn.y=n.startPosData.y-n.interPosData.y):n.posIn.x=n.posIn.y=0,n.posOut.x=n.finalPosData.x-n.interPosData.x,n.posOut.y=n.finalPosData.y-n.interPosData.y,n.posIn.opacity=i.isShown?1:e.effectsIn.opacity,n.posOut.opacity=1,n.tweenData.opacity=n.posOut.opacity-n.posIn.opacity,i.isShown||e.config.animation.nudge||(n.posIn.x=n.posOut.x,n.posIn.y=n.posOut.y),n.tweenData.x=n.posOut.x-n.posIn.x,n.tweenData.y=n.posOut.y-n.posIn.y,e.config.animation.animateResizeTargets&&(n.posIn.width=n.startPosData.width,n.posIn.height=n.startPosData.height,s=(n.startPosData.width||n.finalPosData.width)-n.interPosData.width,n.posIn.marginRight=n.startPosData.marginRight-s,l=(n.startPosData.height||n.finalPosData.height)-n.interPosData.height,n.posIn.marginBottom=n.startPosData.marginBottom-l,n.posOut.width=n.finalPosData.width,n.posOut.height=n.finalPosData.height,s=(n.finalPosData.width||n.startPosData.width)-n.interPosData.width,n.posOut.marginRight=n.finalPosData.marginRight-s,l=(n.finalPosData.height||n.startPosData.height)-n.interPosData.height,n.posOut.marginBottom=n.finalPosData.marginBottom-l,n.tweenData.width=n.posOut.width-n.posIn.width,n.tweenData.height=n.posOut.height-n.posIn.height,n.tweenData.marginRight=n.posOut.marginRight-n.posIn.marginRight,n.tweenData.marginBottom=n.posOut.marginBottom-n.posIn.marginBottom),h=0;o=r[h];h++)(a=e.effectsIn[o])instanceof p.TransformData&&a.value&&(n.posIn[o].value=a.value,n.posOut[o].value=0,n.tweenData[o].value=n.posOut[o].value-n.posIn[o].value,n.posIn[o].unit=n.posOut[o].unit=n.tweenData[o].unit=a.unit);for(c=0;i=t.toHide[c];c++)for((n=t.toHidePosData[c]).posIn=new p.StyleData,n.posOut=new p.StyleData,n.tweenData=new p.StyleData,n.posIn.x=i.isShown?n.startPosData.x-n.interPosData.x:0,n.posIn.y=i.isShown?n.startPosData.y-n.interPosData.y:0,n.posOut.x=e.config.animation.nudge?0:n.posIn.x,n.posOut.y=e.config.animation.nudge?0:n.posIn.y,n.tweenData.x=n.posOut.x-n.posIn.x,n.tweenData.y=n.posOut.y-n.posIn.y,e.config.animation.animateResizeTargets&&(n.posIn.width=n.startPosData.width,n.posIn.height=n.startPosData.height,s=n.startPosData.width-n.interPosData.width,n.posIn.marginRight=n.startPosData.marginRight-s,l=n.startPosData.height-n.interPosData.height,n.posIn.marginBottom=n.startPosData.marginBottom-l),n.posIn.opacity=1,n.posOut.opacity=e.effectsOut.opacity,n.tweenData.opacity=n.posOut.opacity-n.posIn.opacity,h=0;o=r[h];h++)(a=e.effectsOut[o])instanceof p.TransformData&&a.value&&(n.posIn[o].value=0,n.posOut[o].value=a.value,n.tweenData[o].value=n.posOut[o].value-n.posIn[o].value,n.posIn[o].unit=n.posOut[o].unit=n.tweenData[o].unit=a.unit);e.callActions("afterGetTweenData",arguments)},moveTargets:function(t){var e=this,i=null,n=null,r=null,o="",a=!1,s=-1,l=-1,c=e.checkProgress.bind(e);for(e.callActions("beforeMoveTargets",arguments),l=0;i=t.show[l];l++)n=new p.IMoveData,r=t.showPosData[l],o=i.isShown?"none":"show",(a=e.willTransition(o,t.hasEffect,r.posIn,r.posOut))&&s++,i.show(),n.posIn=r.posIn,n.posOut=r.posOut,n.statusChange=o,n.staggerIndex=s,n.operation=t,n.callback=a?c:null,i.move(n);for(l=0;i=t.toHide[l];l++)r=t.toHidePosData[l],n=new p.IMoveData,a=e.willTransition(o="hide",r.posIn,r.posOut),n.posIn=r.posIn,n.posOut=r.posOut,n.statusChange=o,n.staggerIndex=l,n.operation=t,n.callback=a?c:null,i.move(n);e.config.animation.animateResizeContainer&&(e.dom.parent.style[p.features.transitionProp]="height "+e.config.animation.duration+"ms ease, width "+e.config.animation.duration+"ms ease ",requestAnimationFrame(function(){t.startHeight!==t.newHeight&&t.viewportDeltaY!==t.startHeight-t.newHeight&&(e.dom.parent.style.height=t.newHeight+"px"),t.startWidth!==t.newWidth&&t.viewportDeltaX!==t.startWidth-t.newWidth&&(e.dom.parent.style.width=t.newWidth+"px")})),t.willChangeLayout&&(f.removeClass(e.dom.container,e.config.layout.ContainerClassName),f.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterMoveTargets",arguments)},hasEffect:function(){var t,e,i=["scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],n=!1,r=-1;if(1!==this.effectsIn.opacity)return this.callFilters("resultHasEffect",!0,arguments);for(r=0;t=i[r];r++)if(0!==("undefined"!==(e=this.effectsIn[t]).value?e.value:e)){n=!0;break}return this.callFilters("resultHasEffect",n,arguments)},willTransition:function(t,e,i,n){var r=!1,r=!!f.isVisible(this.dom.container)&&(!!("none"!==t&&e||i.x!==n.x||i.y!==n.y)||!!this.config.animation.animateResizeTargets&&(i.width!==n.width||i.height!==n.height||i.marginRight!==n.marginRight||i.marginTop!==n.marginTop));return this.callFilters("resultWillTransition",r,arguments)},checkProgress:function(t){this.targetsDone++,this.targetsBound===this.targetsDone&&this.cleanUp(t)},cleanUp:function(t){var e,i,n=this,r=null,o=null,a=-1;for(n.callActions("beforeCleanUp",arguments),a=n.targetsMoved=n.targetsImmovable=n.targetsBound=n.targetsDone=0;r=t.show[a];a++)r.cleanUp(),r.show();for(a=0;r=t.toHide[a];a++)r.cleanUp(),r.hide();if(t.willSort&&n.printSort(!1,t),n.dom.parent.style[p.features.transitionProp]=n.dom.parent.style.height=n.dom.parent.style.width=n.dom.parent.style.overflow=n.dom.parent.style[p.features.perspectiveProp]=n.dom.parent.style[p.features.perspectiveOriginProp]="",t.willChangeLayout&&(f.removeClass(n.dom.container,t.startContainerClassName),f.addClass(n.dom.container,t.newContainerClassName)),t.toRemove.length){for(a=0;r=n.targets[a];a++)-1<t.toRemove.indexOf(r)&&((e=r.dom.el.previousSibling)&&"#text"===e.nodeName&&(o=r.dom.el.nextSibling)&&"#text"===o.nodeName&&f.removeWhitespace(e),t.willSort||n.dom.parent.removeChild(r.dom.el),n.targets.splice(a,1),r.isInDom=!1,a--);n.origOrder=n.targets}t.willSort&&(n.targets=t.newOrder),n.state=t.newState,n.lastOperation=t,n.dom.targets=n.state.targets,p.events.fire("mixEnd",n.dom.container,{state:n.state,instance:n},n.dom.document),"function"==typeof n.config.callbacks.onMixEnd&&n.config.callbacks.onMixEnd.call(n.dom.container,n.state,n),t.hasFailed&&(p.events.fire("mixFail",n.dom.container,{state:n.state,instance:n},n.dom.document),"function"==typeof n.config.callbacks.onMixFail&&n.config.callbacks.onMixFail.call(n.dom.container,n.state,n),f.addClass(n.dom.container,f.getClassname(n.config.classNames,"container",n.config.classNames.modifierFailed))),"function"==typeof n.userCallback&&n.userCallback.call(n.dom.container,n.state,n),"function"==typeof n.userDeferred.resolve&&n.userDeferred.resolve(n.state),n.userCallback=null,n.userDeferred=null,n.lastClicked=null,n.isToggling=!1,n.isBusy=!1,n.queue.length&&(n.callActions("beforeReadQueueCleanUp",arguments),i=n.queue.shift(),n.userDeferred=i.deferred,n.isToggling=i.isToggling,n.lastClicked=i.triggerElement,(i.instruction.command instanceof p.CommandMultimix?n.multimix:n.dataset).apply(n,i.args)),n.callActions("afterCleanUp",arguments)},parseMultimixArgs:function(t){var e,i=this,n=new p.UserInstruction,r=-1;for(n.animate=i.config.animation.enable,n.command=new p.CommandMultimix,r=0;r<t.length;r++)null!==(e=t[r])&&("object"==typeof e?f.extend(n.command,e):"boolean"==typeof e?n.animate=e:"function"==typeof e&&(n.callback=e));return!n.command.insert||n.command.insert instanceof p.CommandInsert||(n.command.insert=i.parseInsertArgs([n.command.insert]).command),!n.command.remove||n.command.remove instanceof p.CommandRemove||(n.command.remove=i.parseRemoveArgs([n.command.remove]).command),!n.command.filter||n.command.filter instanceof p.CommandFilter||(n.command.filter=i.parseFilterArgs([n.command.filter]).command),!n.command.sort||n.command.sort instanceof p.CommandSort||(n.command.sort=i.parseSortArgs([n.command.sort]).command),!n.command.changeLayout||n.command.changeLayout instanceof p.CommandChangeLayout||(n.command.changeLayout=i.parseChangeLayoutArgs([n.command.changeLayout]).command),n=i.callFilters("instructionParseMultimixArgs",n,arguments),f.freeze(n),n},parseFilterArgs:function(t){var e,i=new p.UserInstruction,n=-1;for(i.animate=this.config.animation.enable,i.command=new p.CommandFilter,n=0;n<t.length;n++)"string"==typeof(e=t[n])?i.command.selector=e:null===e?i.command.collection=[]:"object"==typeof e&&f.isElement(e,this.dom.document)?i.command.collection=[e]:"object"==typeof e&&void 0!==e.length?i.command.collection=f.arrayFromList(e):"object"==typeof e?f.extend(i.command,e):"boolean"==typeof e?i.animate=e:"function"==typeof e&&(i.callback=e);if(i.command.selector&&i.command.collection)throw new Error(p.messages.errorFilterInvalidArguments());return i=this.callFilters("instructionParseFilterArgs",i,arguments),f.freeze(i),i},parseSortArgs:function(t){var e,i=new p.UserInstruction,n="",r=-1;for(i.animate=this.config.animation.enable,i.command=new p.CommandSort,r=0;r<t.length;r++)if(null!==(e=t[r]))switch(typeof e){case"string":n=e;break;case"object":e.length&&(i.command.collection=f.arrayFromList(e));break;case"boolean":i.animate=e;break;case"function":i.callback=e}return n&&(i.command=this.parseSortString(n,i.command)),i=this.callFilters("instructionParseSortArgs",i,arguments),f.freeze(i),i},parseInsertArgs:function(t){var e,i=new p.UserInstruction,n=-1;for(i.animate=this.config.animation.enable,i.command=new p.CommandInsert,n=0;n<t.length;n++)null!==(e=t[n])&&("number"==typeof e?i.command.index=e:"string"==typeof e&&-1<["before","after"].indexOf(e)?i.command.position=e:"string"==typeof e?i.command.collection=f.arrayFromList(f.createElement(e).childNodes):"object"==typeof e&&f.isElement(e,this.dom.document)?i.command.collection.length?i.command.sibling=e:i.command.collection=[e]:"object"==typeof e&&e.length?i.command.collection.length?i.command.sibling=e[0]:i.command.collection=e:"object"==typeof e&&e.childNodes&&e.childNodes.length?i.command.collection.length?i.command.sibling=e.childNodes[0]:i.command.collection=f.arrayFromList(e.childNodes):"object"==typeof e?f.extend(i.command,e):"boolean"==typeof e?i.animate=e:"function"==typeof e&&(i.callback=e));if(i.command.index&&i.command.sibling)throw new Error(p.messages.errorInsertInvalidArguments());return!i.command.collection.length&&this.config.debug.showWarnings&&console.warn(p.messages.warningInsertNoElements()),i=this.callFilters("instructionParseInsertArgs",i,arguments),f.freeze(i),i},parseRemoveArgs:function(t){var e,i,n=this,r=new p.UserInstruction,o=-1;for(r.animate=n.config.animation.enable,r.command=new p.CommandRemove,o=0;o<t.length;o++)if(null!==(i=t[o]))switch(typeof i){case"number":n.targets[i]&&(r.command.targets[0]=n.targets[i]);break;case"string":r.command.collection=f.arrayFromList(n.dom.parent.querySelectorAll(i));break;case"object":i&&i.length?r.command.collection=i:f.isElement(i,n.dom.document)?r.command.collection=[i]:f.extend(r.command,i);break;case"boolean":r.animate=i;break;case"function":r.callback=i}if(r.command.collection.length)for(o=0;e=n.targets[o];o++)-1<r.command.collection.indexOf(e.dom.el)&&r.command.targets.push(e);return!r.command.targets.length&&n.config.debug.showWarnings&&console.warn(p.messages.warningRemoveNoElements()),f.freeze(r),r},parseDatasetArgs:function(t){var e,i=new p.UserInstruction,n=-1;for(i.animate=this.config.animation.enable,i.command=new p.CommandDataset,n=0;n<t.length;n++)if(null!==(e=t[n]))switch(typeof e){case"object":Array.isArray(e)||"number"==typeof e.length?i.command.dataset=e:f.extend(i.command,e);break;case"boolean":i.animate=e;break;case"function":i.callback=e}return f.freeze(i),i},parseChangeLayoutArgs:function(t){var e,i=new p.UserInstruction,n=-1;for(i.animate=this.config.animation.enable,i.command=new p.CommandChangeLayout,n=0;n<t.length;n++)if(null!==(e=t[n]))switch(typeof e){case"string":i.command.containerClassName=e;break;case"object":f.extend(i.command,e);break;case"boolean":i.animate=e;break;case"function":i.callback=e}return f.freeze(i),i},queueMix:function(t){var e,i=this,n=null;return i.callActions("beforeQueueMix",arguments),n=f.defer(p.libraries),i.config.animation.queue&&i.queue.length<i.config.animation.queueLimit?(t.deferred=n,i.queue.push(t),i.config.controls.enable&&(i.isToggling?(i.buildToggleArray(t.instruction.command),e=i.getToggleSelector(),i.updateControls({filter:{selector:e}})):i.updateControls(t.instruction.command))):(i.config.debug.showWarnings&&console.warn(p.messages.warningMultimixInstanceQueueFull()),n.resolve(i.state),p.events.fire("mixBusy",i.dom.container,{state:i.state,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixBusy&&i.config.callbacks.onMixBusy.call(i.dom.container,i.state,i)),i.callFilters("promiseQueueMix",n.promise,arguments)},getDataOperation:function(t){var e=this,i=new p.Operation,n=[],i=e.callFilters("operationUnmappedGetDataOperation",i,arguments);if(e.dom.targets.length&&!(n=e.state.activeDataset||[]).length)throw new Error(p.messages.errorDatasetNotSet());return i.id=f.randomHex(),i.startState=e.state,i.startDataset=n,i.newDataset=t.slice(),e.diffDatasets(i),i.startOrder=e.targets,i.newOrder=i.show,e.config.animation.enable&&(e.getStartMixData(i),e.setInter(i),i.docState=f.getDocumentState(e.dom.document),e.getInterMixData(i),e.setFinal(i),e.getFinalMixData(i),e.parseEffects(),i.hasEffect=e.hasEffect(),e.getTweenData(i)),e.targets=i.show.slice(),i.newState=e.buildState(i),Array.prototype.push.apply(e.targets,i.toRemove),i=e.callFilters("operationMappedGetDataOperation",i,arguments)},diffDatasets:function(t){var e=this,i=[],n=[],r=[],o=null,a=null,s=null,l=null,c=null,h={},u="",d=-1;for(e.callActions("beforeDiffDatasets",arguments),d=0;o=t.newDataset[d];d++){if(void 0===(u=o[e.config.data.uidKey])||u.toString().length<1)throw new TypeError(p.messages.errorDatasetInvalidUidKey({uidKey:e.config.data.uidKey}));if(h[u])throw new Error(p.messages.errorDatasetDuplicateUid({uid:u}));h[u]=!0,(a=e.cache[u])instanceof p.Target?(e.config.data.dirtyCheck&&!f.deepEquals(o,a.data)&&(s=a.render(o),a.data=o,s!==a.dom.el&&(a.isInDom&&(a.unbindEvents(),e.dom.parent.replaceChild(s,a.dom.el)),a.isShown||(s.style.display="none"),a.dom.el=s,a.isInDom&&a.bindEvents())),s=a.dom.el):((a=new p.Target).init(null,e,o),a.hide()),a.isInDom?(c=a.dom.el.nextElementSibling,n.push(u),l&&(l.lastElementChild&&l.appendChild(e.dom.document.createTextNode(" ")),e.insertDatasetFrag(l,a.dom.el,r),l=null)):((l=l||e.dom.document.createDocumentFragment()).lastElementChild&&l.appendChild(e.dom.document.createTextNode(" ")),l.appendChild(a.dom.el),a.isInDom=!0,a.unbindEvents(),a.bindEvents(),a.hide(),t.toShow.push(a),r.push(a)),t.show.push(a)}for(l&&((c=c||e.config.layout.siblingAfter)&&l.appendChild(e.dom.document.createTextNode(" ")),e.insertDatasetFrag(l,c,r)),d=0;o=t.startDataset[d];d++)u=o[e.config.data.uidKey],a=e.cache[u],t.show.indexOf(a)<0?(t.hide.push(a),t.toHide.push(a),t.toRemove.push(a)):i.push(u);f.isEqualArray(i,n)||(t.willSort=!0),e.callActions("afterDiffDatasets",arguments)},insertDatasetFrag:function(t,e,i){var n=e?f.arrayFromList(this.dom.parent.children).indexOf(e):this.targets.length;for(this.dom.parent.insertBefore(t,e);i.length;)this.targets.splice(n,0,i.shift()),n++},willSort:function(t,e){var i=!1,i=!!(this.config.behavior.liveSort||"random"===t.order||t.attribute!==e.attribute||t.order!==e.order||t.collection!==e.collection||null===t.next&&e.next||t.next&&null===e.next)||!(!t.next||!e.next)&&this.willSort(t.next,e.next);return this.callFilters("resultWillSort",i,arguments)},show:function(){return this.filter("all")},hide:function(){return this.filter("none")},isMixing:function(){return this.isBusy},filter:function(){var t=this.parseFilterArgs(arguments);return this.multimix({filter:t.command},t.animate,t.callback)},toggleOn:function(){var t,e=this,i=e.parseFilterArgs(arguments),n=i.command.selector;return e.isToggling=!0,e.toggleArray.indexOf(n)<0&&e.toggleArray.push(n),t=e.getToggleSelector(),e.multimix({filter:t},i.animate,i.callback)},toggleOff:function(){var t=this,e=t.parseFilterArgs(arguments),i=e.command.selector,n=t.toggleArray.indexOf(i);return t.isToggling=!0,-1<n&&t.toggleArray.splice(n,1),i=t.getToggleSelector(),t.multimix({filter:i},e.animate,e.callback)},sort:function(){var t=this.parseSortArgs(arguments);return this.multimix({sort:t.command},t.animate,t.callback)},changeLayout:function(){var t=this.parseChangeLayoutArgs(arguments);return this.multimix({changeLayout:t.command},t.animate,t.callback)},dataset:function(){var t,e,i=this,n=i.parseDatasetArgs(arguments),r=null;return i.callActions("beforeDataset",arguments),i.isBusy?((r=new p.QueueItem).args=arguments,r.instruction=n,i.queueMix(r)):(n.callback&&(i.userCallback=n.callback),e=n.animate^i.config.animation.enable?n.animate:i.config.animation.enable,t=i.getDataOperation(n.command.dataset),i.goMix(e,t))},multimix:function(){var t,e,i=this,n=null,r=i.parseMultimixArgs(arguments);return i.callActions("beforeMultimix",arguments),i.isBusy?((n=new p.QueueItem).args=arguments,n.instruction=r,n.triggerElement=i.lastClicked,n.isToggling=i.isToggling,i.queueMix(n)):(t=i.getOperation(r.command),i.config.controls.enable&&(r.command.filter&&!i.isToggling&&(i.toggleArray.length=0,i.buildToggleArray(t.command)),i.queue.length<1&&i.updateControls(t.command)),r.callback&&(i.userCallback=r.callback),e=r.animate^i.config.animation.enable?r.animate:i.config.animation.enable,i.callFilters("operationMultimix",t,arguments),i.goMix(e,t))},getOperation:function(t){var e=this,i=t.sort,n=t.filter,r=t.changeLayout,o=t.remove,a=t.insert,s=new p.Operation;return(s=e.callFilters("operationUnmappedGetOperation",s,arguments)).id=f.randomHex(),s.command=t,s.startState=e.state,s.triggerElement=e.lastClicked,e.isBusy?(e.config.debug.showWarnings&&console.warn(p.messages.warningGetOperationInstanceBusy()),null):(a&&e.insertTargets(a,s),o&&(s.toRemove=o.targets),s.startSort=s.newSort=s.startState.activeSort,s.startOrder=s.newOrder=e.targets,i&&(s.startSort=s.startState.activeSort,s.newSort=i,s.willSort=e.willSort(i,s.startState.activeSort),s.willSort&&e.sortOperation(s)),s.startFilter=s.startState.activeFilter,s.newFilter=n||f.extend(new p.CommandFilter,s.startFilter),"all"===s.newFilter.selector?s.newFilter.selector=e.config.selectors.target:"none"===s.newFilter.selector&&(s.newFilter.selector=""),e.filterOperation(s),s.startContainerClassName=s.startState.activeContainerClassName,r?(s.newContainerClassName=r.containerClassName,s.newContainerClassName!==s.startContainerClassName&&(s.willChangeLayout=!0)):s.newContainerClassName=s.startContainerClassName,e.config.animation.enable&&(e.getStartMixData(s),e.setInter(s),s.docState=f.getDocumentState(e.dom.document),e.getInterMixData(s),e.setFinal(s),e.getFinalMixData(s),e.parseEffects(),s.hasEffect=e.hasEffect(),e.getTweenData(s)),s.willSort&&(e.targets=s.newOrder),s.newState=e.buildState(s),e.callFilters("operationMappedGetOperation",s,arguments))},tween:function(t,e){var i,n=null,r=null,o=-1;for(e=Math.min(e,1),e=Math.max(e,0),o=0;n=t.show[o];o++)r=t.showPosData[o],n.applyTween(r,e);for(o=0;n=t.hide[o];o++)n.isShown&&n.hide(),-1<(i=t.toHide.indexOf(n))&&(r=t.toHidePosData[i],n.isShown||n.show(),n.applyTween(r,e))},insert:function(){var t=this.parseInsertArgs(arguments);return this.multimix({insert:t.command},t.animate,t.callback)},insertBefore:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"before",t.command.sibling,t.animate,t.callback)},insertAfter:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"after",t.command.sibling,t.animate,t.callback)},prepend:function(){var t=this.parseInsertArgs(arguments);return this.insert(0,t.command.collection,t.animate,t.callback)},append:function(){var t=this.parseInsertArgs(arguments);return this.insert(this.state.totalTargets,t.command.collection,t.animate,t.callback)},remove:function(){var t=this.parseRemoveArgs(arguments);return this.multimix({remove:t.command},t.animate,t.callback)},getConfig:function(t){var e=null,e=t?f.getProperty(this.config,t):this.config;return this.callFilters("valueGetConfig",e,arguments)},configure:function(t){this.callActions("beforeConfigure",arguments),f.extend(this.config,t,!0,!0),this.callActions("afterConfigure",arguments)},getState:function(){var t=new p.State;return f.extend(t,this.state),f.freeze(t),this.callFilters("stateGetState",t,arguments)},forceRefresh:function(){this.indexTargets()},forceRender:function(){var t=this,e=null,i=null,n="";for(n in t.cache)(i=(e=t.cache[n]).render(e.data))!==e.dom.el&&(e.isInDom&&(e.unbindEvents(),t.dom.parent.replaceChild(i,e.dom.el)),e.isShown||(i.style.display="none"),e.dom.el=i,e.isInDom&&e.bindEvents());t.state=t.buildState(t.lastOperation)},destroy:function(t){var e=this,i=null,n=null,r=0;for(e.callActions("beforeDestroy",arguments),r=0;i=e.controls[r];r++)i.removeBinding(e);for(r=0;n=e.targets[r];r++)t&&n.show(),n.unbindEvents();e.dom.container.id.match(/^MixItUp/)&&e.dom.container.removeAttribute("id"),delete p.instances[e.id],e.callActions("afterDestroy",arguments)}}),p.IMoveData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.posIn=null,this.posOut=null,this.operation=null,this.callback=null,this.statusChange="",this.duration=-1,this.staggerIndex=-1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.IMoveData),p.IMoveData.prototype=Object.create(p.Base.prototype),p.IMoveData.prototype.constructor=p.IMoveData,p.TargetDom=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TargetDom),p.TargetDom.prototype=Object.create(p.Base.prototype),p.TargetDom.prototype.constructor=p.TargetDom,p.Target=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.sortString="",this.mixer=null,this.callback=null,this.isShown=!1,this.isBound=!1,this.isExcluded=!1,this.isInDom=!1,this.handler=null,this.operation=null,this.data=null,this.dom=new p.TargetDom,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Target),p.Target.prototype=Object.create(p.Base.prototype),f.extend(p.Target.prototype,{constructor:p.Target,init:function(t,e,i){var n=this,r="";if(n.callActions("beforeInit",arguments),n.mixer=e,t=t||n.render(i),n.cacheDom(t),n.bindEvents(),"none"!==n.dom.el.style.display&&(n.isShown=!0),i&&e.config.data.uidKey){if(void 0===(r=i[e.config.data.uidKey])||r.toString().length<1)throw new TypeError(p.messages.errorDatasetInvalidUidKey({uidKey:e.config.data.uidKey}));n.id=r,n.data=i,e.cache[r]=n}n.callActions("afterInit",arguments)},render:function(t){var e,i=null,n=null,r=null;if(this.callActions("beforeRender",arguments),"function"!=typeof(i=this.callFilters("renderRender",this.mixer.config.render.target,arguments)))throw new TypeError(p.messages.errorDatasetRendererNotSet());return(e=i(t))&&"object"==typeof e&&f.isElement(e)?n=e:"string"==typeof e&&((r=document.createElement("div")).innerHTML=e,n=r.firstElementChild),this.callFilters("elRender",n,arguments)},cacheDom:function(t){this.callActions("beforeCacheDom",arguments),this.dom.el=t,this.callActions("afterCacheDom",arguments)},getSortString:function(t){t=this.dom.el.getAttribute("data-"+t)||"";this.callActions("beforeGetSortString",arguments),t=isNaN(+t)?t.toLowerCase():+t,this.sortString=t,this.callActions("afterGetSortString",arguments)},show:function(){var t=this;t.callActions("beforeShow",arguments),t.isShown||(t.dom.el.style.display="",t.isShown=!0),t.callActions("afterShow",arguments)},hide:function(){var t=this;t.callActions("beforeHide",arguments),t.isShown&&(t.dom.el.style.display="none",t.isShown=!1),t.callActions("afterHide",arguments)},move:function(t){var e=this;e.callActions("beforeMove",arguments),e.isExcluded||e.mixer.targetsMoved++,e.applyStylesIn(t),requestAnimationFrame(function(){e.applyStylesOut(t)}),e.callActions("afterMove",arguments)},applyTween:function(t,e){var i,n,r=this,o=t.posIn,a=[],s=new p.StyleData,l=-1;for(r.callActions("beforeApplyTween",arguments),s.x=o.x,s.y=o.y,0===e?r.hide():r.isShown||r.show(),l=0;i=p.features.TWEENABLE[l];l++)n=t.tweenData[i],"x"===i?n&&(s.x=o.x+n*e):"y"===i?n&&(s.y=o.y+n*e):n instanceof p.TransformData?n.value&&(s[i].value=o[i].value+n.value*e,s[i].unit=n.unit,a.push(i+"("+s[i].value+n.unit+")")):n&&(s[i]=o[i]+n*e,r.dom.el.style[i]=s[i]);(s.x||s.y)&&a.unshift("translate("+s.x+"px, "+s.y+"px)"),a.length&&(r.dom.el.style[p.features.transformProp]=a.join(" ")),r.callActions("afterApplyTween",arguments)},applyStylesIn:function(t){var e=this,i=t.posIn,n=1!==e.mixer.effectsIn.opacity,r=[];e.callActions("beforeApplyStylesIn",arguments),r.push("translate("+i.x+"px, "+i.y+"px)"),e.mixer.config.animation.animateResizeTargets&&("show"!==t.statusChange&&(e.dom.el.style.width=i.width+"px",e.dom.el.style.height=i.height+"px"),e.dom.el.style.marginRight=i.marginRight+"px",e.dom.el.style.marginBottom=i.marginBottom+"px"),n&&(e.dom.el.style.opacity=i.opacity),"show"===t.statusChange&&(r=r.concat(e.mixer.transformIn)),e.dom.el.style[p.features.transformProp]=r.join(" "),e.callActions("afterApplyStylesIn",arguments)},applyStylesOut:function(t){var e=this,i=[],n=[],r=e.mixer.config.animation.animateResizeTargets,o=void 0!==e.mixer.effectsIn.opacity;if(e.callActions("beforeApplyStylesOut",arguments),i.push(e.writeTransitionRule(p.features.transformRule,t.staggerIndex)),"none"!==t.statusChange&&i.push(e.writeTransitionRule("opacity",t.staggerIndex,t.duration)),r&&(i.push(e.writeTransitionRule("width",t.staggerIndex,t.duration)),i.push(e.writeTransitionRule("height",t.staggerIndex,t.duration)),i.push(e.writeTransitionRule("margin",t.staggerIndex,t.duration))),!t.callback)return e.mixer.targetsImmovable++,void(e.mixer.targetsMoved===e.mixer.targetsImmovable&&e.mixer.cleanUp(t.operation));switch(e.operation=t.operation,e.callback=t.callback,e.isExcluded||e.mixer.targetsBound++,e.isBound=!0,e.applyTransition(i),r&&0<t.posOut.width&&0<t.posOut.height&&(e.dom.el.style.width=t.posOut.width+"px",e.dom.el.style.height=t.posOut.height+"px",e.dom.el.style.marginRight=t.posOut.marginRight+"px",e.dom.el.style.marginBottom=t.posOut.marginBottom+"px"),e.mixer.config.animation.nudge||"hide"!==t.statusChange||n.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),t.statusChange){case"hide":o&&(e.dom.el.style.opacity=e.mixer.effectsOut.opacity),n=n.concat(e.mixer.transformOut);break;case"show":o&&(e.dom.el.style.opacity=1)}(e.mixer.config.animation.nudge||!e.mixer.config.animation.nudge&&"hide"!==t.statusChange)&&n.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),e.dom.el.style[p.features.transformProp]=n.join(" "),e.callActions("afterApplyStylesOut",arguments)},writeTransitionRule:function(t,e,i){var n=this.getDelay(e),e="",e=t+" "+(0<i?i:this.mixer.config.animation.duration)+"ms "+n+"ms "+("opacity"===t?"linear":this.mixer.config.animation.easing);return this.callFilters("ruleWriteTransitionRule",e,arguments)},getDelay:function(t){var e,i=this;return"function"==typeof i.mixer.config.animation.staggerSequence&&(t=i.mixer.config.animation.staggerSequence.call(i,t,i.state)),e=i.mixer.staggerDuration?t*i.mixer.staggerDuration:0,i.callFilters("delayGetDelay",e,arguments)},applyTransition:function(t){t=t.join(", ");this.callActions("beforeApplyTransition",arguments),this.dom.el.style[p.features.transitionProp]=t,this.callActions("afterApplyTransition",arguments)},handleTransitionEnd:function(t){var e=this,i=t.propertyName,n=e.mixer.config.animation.animateResizeTargets;e.callActions("beforeHandleTransitionEnd",arguments),e.isBound&&t.target.matches(e.mixer.config.selectors.target)&&(-1<i.indexOf("transform")||-1<i.indexOf("opacity")||n&&-1<i.indexOf("height")||n&&-1<i.indexOf("width")||n&&-1<i.indexOf("margin"))&&(e.callback.call(e,e.operation),e.isBound=!1,e.callback=null,e.operation=null),e.callActions("afterHandleTransitionEnd",arguments)},eventBus:function(t){switch(this.callActions("beforeEventBus",arguments),t.type){case"webkitTransitionEnd":case"transitionend":this.handleTransitionEnd(t)}this.callActions("afterEventBus",arguments)},unbindEvents:function(){var t=this;t.callActions("beforeUnbindEvents",arguments),f.off(t.dom.el,"webkitTransitionEnd",t.handler),f.off(t.dom.el,"transitionend",t.handler),t.callActions("afterUnbindEvents",arguments)},bindEvents:function(){var t,e=this;e.callActions("beforeBindEvents",arguments),t="webkit"===p.features.transitionPrefix?"webkitTransitionEnd":"transitionend",e.handler=function(t){return e.eventBus(t)},f.on(e.dom.el,t,e.handler),e.callActions("afterBindEvents",arguments)},getPosData:function(t){var e,i,n=this,r=new p.StyleData;return n.callActions("beforeGetPosData",arguments),r.x=n.dom.el.offsetLeft,r.y=n.dom.el.offsetTop,(n.mixer.config.animation.animateResizeTargets||t)&&(i=n.dom.el.getBoundingClientRect(),r.top=i.top,r.right=i.right,r.bottom=i.bottom,r.left=i.left,r.width=i.width,r.height=i.height),n.mixer.config.animation.animateResizeTargets&&(e=d.getComputedStyle(n.dom.el),r.marginBottom=parseFloat(e.marginBottom),r.marginRight=parseFloat(e.marginRight)),n.callFilters("posDataGetPosData",r,arguments)},cleanUp:function(){var t=this;t.callActions("beforeCleanUp",arguments),t.dom.el.style[p.features.transformProp]="",t.dom.el.style[p.features.transitionProp]="",t.dom.el.style.opacity="",t.mixer.config.animation.animateResizeTargets&&(t.dom.el.style.width="",t.dom.el.style.height="",t.dom.el.style.marginRight="",t.dom.el.style.marginBottom=""),t.callActions("afterCleanUp",arguments)}}),p.Collection=function(t){var e,i=-1;for(this.callActions("beforeConstruct"),i=0;e=t[i];i++)this[i]=e;this.length=t.length,this.callActions("afterConstruct"),f.freeze(this)},p.BaseStatic.call(p.Collection),p.Collection.prototype=Object.create(p.Base.prototype),f.extend(p.Collection.prototype,{constructor:p.Collection,mixitup:function(t){var e=null,i=Array.prototype.slice.call(arguments),n=[],r=-1;for(this.callActions("beforeMixitup"),i.shift(),r=0;e=this[r];r++)n.push(e[t].apply(e,i));return this.callFilters("promiseMixitup",f.all(n,p.libraries),arguments)}}),p.Operation=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.args=[],this.command=null,this.showPosData=[],this.toHidePosData=[],this.startState=null,this.newState=null,this.docState=null,this.willSort=!1,this.willChangeLayout=!1,this.hasEffect=!1,this.hasFailed=!1,this.triggerElement=null,this.show=[],this.hide=[],this.matching=[],this.toShow=[],this.toHide=[],this.toMove=[],this.toRemove=[],this.startOrder=[],this.newOrder=[],this.startSort=null,this.newSort=null,this.startFilter=null,this.newFilter=null,this.startDataset=null,this.newDataset=null,this.viewportDeltaX=0,this.viewportDeltaY=0,this.startX=0,this.startY=0,this.startHeight=0,this.startWidth=0,this.newX=0,this.newY=0,this.newHeight=0,this.newWidth=0,this.startContainerClassName="",this.startDisplay="",this.newContainerClassName="",this.newDisplay="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Operation),p.Operation.prototype=Object.create(p.Base.prototype),p.Operation.prototype.constructor=p.Operation,p.State=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.activeFilter=null,this.activeSort=null,this.activeContainerClassName="",this.container=null,this.targets=[],this.hide=[],this.show=[],this.matching=[],this.totalTargets=-1,this.totalShow=-1,this.totalHide=-1,this.totalMatching=-1,this.hasFailed=!1,this.triggerElement=null,this.activeDataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.State),p.State.prototype=Object.create(p.Base.prototype),p.State.prototype.constructor=p.State,p.UserInstruction=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.command={},this.animate=!1,this.callback=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.UserInstruction),p.UserInstruction.prototype=Object.create(p.Base.prototype),p.UserInstruction.prototype.constructor=p.UserInstruction,p.Messages=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.ERROR_FACTORY_INVALID_CONTAINER="[MixItUp] An invalid selector or element reference was passed to the mixitup factory function",this.ERROR_FACTORY_CONTAINER_NOT_FOUND="[MixItUp] The provided selector yielded no container element",this.ERROR_CONFIG_INVALID_ANIMATION_EFFECTS="[MixItUp] Invalid value for `animation.effects`",this.ERROR_CONFIG_INVALID_CONTROLS_SCOPE="[MixItUp] Invalid value for `controls.scope`",this.ERROR_CONFIG_INVALID_PROPERTY='[MixitUp] Invalid configuration object property "${erroneous}"${suggestion}',this.ERROR_CONFIG_INVALID_PROPERTY_SUGGESTION='. Did you mean "${probableMatch}"?',this.ERROR_CONFIG_DATA_UID_KEY_NOT_SET="[MixItUp] To use the dataset API, a UID key must be specified using `data.uidKey`",this.ERROR_DATASET_INVALID_UID_KEY='[MixItUp] The specified UID key "${uidKey}" is not present on one or more dataset items',this.ERROR_DATASET_DUPLICATE_UID='[MixItUp] The UID "${uid}" was found on two or more dataset items. UIDs must be unique.',this.ERROR_INSERT_INVALID_ARGUMENTS="[MixItUp] Please provider either an index or a sibling and position to insert, not both",this.ERROR_INSERT_PREEXISTING_ELEMENT="[MixItUp] An element to be inserted already exists in the container",this.ERROR_FILTER_INVALID_ARGUMENTS="[MixItUp] Please provide either a selector or collection `.filter()`, not both",this.ERROR_DATASET_NOT_SET="[MixItUp] To use the dataset API with pre-rendered targets, a starting dataset must be set using `load.dataset`",this.ERROR_DATASET_PRERENDERED_MISMATCH="[MixItUp] `load.dataset` does not match pre-rendered targets",this.ERROR_DATASET_RENDERER_NOT_SET="[MixItUp] To insert an element via the dataset API, a target renderer function must be provided to `render.target`",this.ERROR_SORT_NON_EXISTENT_ELEMENT="[MixItUp] An element to be sorted does not already exist in the container",this.WARNING_FACTORY_PREEXISTING_INSTANCE="[MixItUp] WARNING: This element already has an active MixItUp instance. The provided configuration object will be ignored. If you wish to perform additional methods on this instance, please create a reference.",this.WARNING_INSERT_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.insert()`",this.WARNING_REMOVE_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.remove()`",this.WARNING_MULTIMIX_INSTANCE_QUEUE_FULL="[MixItUp] WARNING: An operation was requested but the MixItUp instance was busy. The operation was rejected because the queue is full or queuing is disabled.",this.WARNING_GET_OPERATION_INSTANCE_BUSY="[MixItUp] WARNING: Operations can be be created while the MixItUp instance is busy.",this.WARNING_NO_PROMISE_IMPLEMENTATION="[MixItUp] WARNING: No Promise implementations could be found. If you wish to use promises with MixItUp please install an ES6 Promise polyfill.",this.WARNING_INCONSISTENT_SORTING_ATTRIBUTES='[MixItUp] WARNING: The requested sorting data attribute "${attribute}" was not present on one or more target elements which may product unexpected sort output',this.callActions("afterConstruct"),this.compileTemplates(),f.seal(this)},p.BaseStatic.call(p.Messages),p.Messages.prototype=Object.create(p.Base.prototype),p.Messages.prototype.constructor=p.Messages,p.Messages.prototype.compileTemplates=function(){var t,e="";for(e in this)"string"==typeof(t=this[e])&&(this[f.camelCase(e)]=f.template(t))},p.messages=new p.Messages,p.Facade=function(t){p.Base.call(this),this.callActions("beforeConstruct",arguments),this.configure=t.configure.bind(t),this.show=t.show.bind(t),this.hide=t.hide.bind(t),this.filter=t.filter.bind(t),this.toggleOn=t.toggleOn.bind(t),this.toggleOff=t.toggleOff.bind(t),this.sort=t.sort.bind(t),this.changeLayout=t.changeLayout.bind(t),this.multimix=t.multimix.bind(t),this.dataset=t.dataset.bind(t),this.tween=t.tween.bind(t),this.insert=t.insert.bind(t),this.insertBefore=t.insertBefore.bind(t),this.insertAfter=t.insertAfter.bind(t),this.prepend=t.prepend.bind(t),this.append=t.append.bind(t),this.remove=t.remove.bind(t),this.destroy=t.destroy.bind(t),this.forceRefresh=t.forceRefresh.bind(t),this.forceRender=t.forceRender.bind(t),this.isMixing=t.isMixing.bind(t),this.getOperation=t.getOperation.bind(t),this.getConfig=t.getConfig.bind(t),this.getState=t.getState.bind(t),this.callActions("afterConstruct",arguments),f.freeze(this),f.seal(this)},p.BaseStatic.call(p.Facade),p.Facade.prototype=Object.create(p.Base.prototype),p.Facade.prototype.constructor=p.Facade,"object"==typeof exports&&"object"==typeof module?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):void 0!==d.mixitup&&"function"==typeof d.mixitup||(d.mixitup=p),p.BaseStatic.call(p.constructor),p.NAME="mixitup",p.CORE_VERSION="3.3.1"}(window),function(l,a,f,m){"use strict";var r,o,s,h,e,c,d,u,n,t,i,p,g;function v(t,e){var i,n,r,o=[],a=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},i=(e=t&&t.data?u(t.data.options,e):e).$target||f(t.currentTarget).trigger("blur"),(r=f.fancybox.getInstance())&&r.$trigger&&r.$trigger.is(i)||(o=e.selector?f(e.selector):(n=i.attr("data-fancybox")||"")?(o=t.data?t.data.items:[]).length?o.filter('[data-fancybox="'+n+'"]'):f('[data-fancybox="'+n+'"]'):[i],a=f(o).index(i),(r=f.fancybox.open(o,e,a=a<0?0:a)).$trigger=i))}l.console=l.console||{info:function(t){}},f&&(f.fn.fancybox?console.info("fancyBox already initialized"):(t={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeClose:f.noop,afterClose:f.noop,onActivate:f.noop,onDeactivate:f.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},r=f(l),o=f(a),s=0,h=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||function(t){return l.setTimeout(t,1e3/60)},e=l.cancelAnimationFrame||l.webkitCancelAnimationFrame||l.mozCancelAnimationFrame||l.oCancelAnimationFrame||function(t){l.clearTimeout(t)},c=function(){var t,e=a.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(e.style[t]!==m)return i[t];return"transitionend"}(),d=function(t){return t&&t.length&&t[0].offsetHeight},u=function(t,e){var i=f.extend(!0,{},t,e);return f.each(e,function(t,e){f.isArray(e)&&(i[t]=e)}),i},n=function(t,e,i){var n=this;n.opts=u({index:i},f.fancybox.defaults),f.isPlainObject(e)&&(n.opts=u(n.opts,e)),f.fancybox.isMobile&&(n.opts=u(n.opts,n.opts.mobile)),n.id=n.opts.id||++s,n.currIndex=parseInt(n.opts.index,10)||0,n.prevIndex=null,n.prevPos=null,n.currPos=0,n.firstRun=!0,n.group=[],n.slides={},n.addContent(t),n.group.length&&n.init()},f.extend(n.prototype,{init:function(){var e,i,n=this,r=n.group[n.currIndex].opts;r.closeExisting&&f.fancybox.close(!0),f("body").addClass("fancybox-active"),!f.fancybox.getInstance()&&!1!==r.hideScrollbar&&!f.fancybox.isMobile&&a.body.scrollHeight>l.innerHeight&&(f("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(l.innerWidth-a.documentElement.clientWidth)+"px;}</style>"),f("body").addClass("compensate-for-scrollbar")),i="",f.each(r.buttons,function(t,e){i+=r.btnTpl[e]||""}),e=f(n.translate(n,r.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",r.btnTpl.arrowLeft+r.btnTpl.arrowRight))).attr("id","fancybox-container-"+n.id).addClass(r.baseClass).data("FancyBox",n).appendTo(r.parentEl),n.$refs={container:e},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){n.$refs[t]=e.find(".fancybox-"+t)}),n.trigger("onInit"),n.activate(),n.jumpTo(n.currIndex)},translate:function(t,e){var i=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return i[e]===m?t:i[e]})},addContent:function(t){var s=this,t=f.makeArray(t);f.each(t,function(t,e){var i,n,r,o={},a={};f.isPlainObject(e)?a=(o=e).opts||e:"object"===f.type(e)&&f(e).length?(a=(n=f(e)).data()||{},(a=f.extend(!0,{},a,a.options)).$orig=n,o.src=s.opts.src||a.src||n.attr("href"),o.type||o.src||(o.type="inline",o.src=e)):o={type:"html",src:e+""},o.opts=f.extend(!0,{},s.opts,a),f.isArray(a.buttons)&&(o.opts.buttons=a.buttons),f.fancybox.isMobile&&o.opts.mobile&&(o.opts=u(o.opts,o.opts.mobile)),i=o.type||o.opts.type,n=o.src||"",!i&&n&&((a=n.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="video",o.opts.video.format||(o.opts.video.format="video/"+("ogv"===a[1]?"ogg":a[1]))):n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":n.match(/\.(pdf)((\?|#).*)?$/i)?o=f.extend(!0,o,{contentType:"pdf",opts:{iframe:{preload:!(i="iframe")}}}):"#"===n.charAt(0)&&(i="inline")),i?o.type=i:s.trigger("objectNeedsType",o),o.contentType||(o.contentType=-1<f.inArray(o.type,["html","inline","ajax"])?"html":o.type),o.index=s.group.length,"auto"==o.opts.smallBtn&&(o.opts.smallBtn=-1<f.inArray(o.type,["html","inline","ajax"])),"auto"===o.opts.toolbar&&(o.opts.toolbar=!o.opts.smallBtn),o.$thumb=o.opts.$thumb||null,o.opts.$trigger&&o.index===s.opts.index&&(o.$thumb=o.opts.$trigger.find("img:first"),o.$thumb.length&&(o.opts.$orig=o.opts.$trigger)),o.$thumb&&o.$thumb.length||!o.opts.$orig||(o.$thumb=o.opts.$orig.find("img:first")),o.$thumb&&!o.$thumb.length&&(o.$thumb=null),o.thumb=o.opts.thumb||(o.$thumb?o.$thumb[0].src:null),"function"===f.type(o.opts.caption)&&(o.opts.caption=o.opts.caption.apply(e,[s,o])),"function"===f.type(s.opts.caption)&&(o.opts.caption=s.opts.caption.apply(e,[s,o])),o.opts.caption instanceof f||(o.opts.caption=o.opts.caption===m?"":o.opts.caption+""),"ajax"===o.type&&1<(r=n.split(/\s+/,2)).length&&(o.src=r.shift(),o.opts.filter=r.shift()),o.opts.modal&&(o.opts=f.extend(!0,o.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),s.group.push(o)}),Object.keys(s.slides).length&&(s.updateControls(),(t=s.Thumbs)&&t.isActive&&(t.create(),t.focus()))},addEvents:function(){var n=this;n.removeEvents(),n.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),n.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),n.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),n.next()}).on("click.fb","[data-fancybox-zoom]",function(t){n[n.isScaledDown()?"scaleToActual":"scaleToFit"]()}),r.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(n.requestId&&e(n.requestId),n.requestId=h(function(){n.update(t)})):(n.current&&"iframe"===n.current.type&&n.$refs.stage.hide(),setTimeout(function(){n.$refs.stage.show(),n.update(t)},f.fancybox.isMobile?600:250))}),o.on("keydown.fb",function(t){var e=(f.fancybox?f.fancybox.getInstance():null).current,i=t.keyCode||t.which;if(9!=i){if(!(!e.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||f(t.target).is("input,textarea,video,audio,select")))return 8===i||27===i?(t.preventDefault(),void n.close(t)):37===i||38===i?(t.preventDefault(),void n.previous()):39===i||40===i?(t.preventDefault(),void n.next()):void n.trigger("afterKeydown",t,i)}else e.opts.trapFocus&&n.focus(t)}),n.group[n.currIndex].opts.idleTime&&(n.idleSecondsCounter=0,o.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){n.idleSecondsCounter=0,n.isIdle&&n.showControls(),n.isIdle=!1}),n.idleInterval=l.setInterval(function(){n.idleSecondsCounter++,n.idleSecondsCounter>=n.group[n.currIndex].opts.idleTime&&!n.isDragging&&(n.isIdle=!0,n.idleSecondsCounter=0,n.hideControls())},1e3))},removeEvents:function(){r.off("orientationchange.fb resize.fb"),o.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),this.idleInterval&&(l.clearInterval(this.idleInterval),this.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,n){var e,i,r,o,a,s,l,c,h=this,u=h.group.length;if(!(h.isDragging||h.isClosing||h.isAnimating&&h.firstRun))return t=parseInt(t,10),!(!(i=(h.current||h).opts.loop)&&(t<0||u<=t))&&(e=h.firstRun=!Object.keys(h.slides).length,o=h.current,h.prevIndex=h.currIndex,h.prevPos=h.currPos,r=h.createSlide(t),1<u&&((i||r.index<u-1)&&h.createSlide(t+1),(i||0<r.index)&&h.createSlide(t-1)),h.current=r,h.currIndex=r.index,h.currPos=r.pos,h.trigger("beforeShow",e),h.updateControls(),r.forcedDuration=m,f.isNumeric(n)?r.forcedDuration=n:n=r.opts[e?"animationDuration":"transitionDuration"],n=parseInt(n,10),t=h.isMoved(r),r.$slide.addClass("fancybox-slide--current"),e?(r.opts.animationEffect&&n&&h.$refs.container.css("transition-duration",n+"ms"),h.$refs.container.addClass("fancybox-is-open").trigger("focus"),h.loadSlide(r)):(a=f.fancybox.getTranslate(o.$slide),s=f.fancybox.getTranslate(h.$refs.stage),f.each(h.slides,function(t,e){f.fancybox.stop(e.$slide,!0)}),o.pos!==r.pos&&(o.isComplete=!1),o.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),t?(c=a.left-(o.pos*a.width+o.pos*o.opts.gutter),f.each(h.slides,function(t,e){e.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var i=e.pos*a.width+e.pos*e.opts.gutter;f.fancybox.setTranslate(e.$slide,{top:0,left:i-s.left+c}),e.pos!==r.pos&&e.$slide.addClass("fancybox-slide--"+(e.pos>r.pos?"next":"previous")),d(e.$slide),f.fancybox.animate(e.$slide,{top:0,left:(e.pos-r.pos)*a.width+(e.pos-r.pos)*e.opts.gutter},n,function(){e.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),e.pos===h.currPos&&h.complete()})})):n&&r.opts.transitionEffect&&(l="fancybox-animated fancybox-fx-"+r.opts.transitionEffect,o.$slide.addClass("fancybox-slide--"+(o.pos>r.pos?"next":"previous")),f.fancybox.animate(o.$slide,l,n,function(){o.$slide.removeClass(l).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),r.isLoaded?h.revealContent(r):h.loadSlide(r)),void h.preload("image"))},createSlide:function(t){var e,i=this,n=t%i.group.length;return n=n<0?i.group.length+n:n,!i.slides[t]&&i.group[n]&&(e=f('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=f.extend(!0,{},i.group[n],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,i){var n,r,o,a,s=this,l=s.current,c=l.$content,h=f.fancybox.getTranslate(l.$slide).width,u=f.fancybox.getTranslate(l.$slide).height,d=l.width,p=l.height;s.isAnimating||s.isMoved()||!c||"image"!=l.type||!l.isLoaded||l.hasError||(s.isAnimating=!0,f.fancybox.stop(c),t=t===m?.5*h:t,e=e===m?.5*u:e,(n=f.fancybox.getTranslate(c)).top-=f.fancybox.getTranslate(l.$slide).top,n.left-=f.fancybox.getTranslate(l.$slide).left,o=d/n.width,a=p/n.height,r=.5*h-.5*d,l=.5*u-.5*p,h<d&&(r=0<(r=n.left*o-(t*o-t))?0:r)<h-d&&(r=h-d),u<p&&(l=0<(l=n.top*a-(e*a-e))?0:l)<u-p&&(l=u-p),s.updateCursor(d,p),f.fancybox.animate(c,{top:l,left:r,scaleX:o,scaleY:a},i||366,function(){s.isAnimating=!1}),s.SlideShow&&s.SlideShow.isActive&&s.SlideShow.stop())},scaleToFit:function(t){var e=this,i=e.current,n=i.$content;e.isAnimating||e.isMoved()||!n||"image"!=i.type||!i.isLoaded||i.hasError||(e.isAnimating=!0,f.fancybox.stop(n),i=e.getFitPos(i),e.updateCursor(i.width,i.height),f.fancybox.animate(n,{top:i.top,left:i.left,scaleX:i.width/n.width(),scaleY:i.height/n.height()},t||366,function(){e.isAnimating=!1}))},getFitPos:function(t){var e,i,n=t.$content,r=t.$slide,o=t.width||t.opts.width,a=t.height||t.opts.height,s={};return!!(t.isLoaded&&n&&n.length)&&(e=f.fancybox.getTranslate(this.$refs.stage).width,i=f.fancybox.getTranslate(this.$refs.stage).height,e-=parseFloat(r.css("paddingLeft"))+parseFloat(r.css("paddingRight"))+parseFloat(n.css("marginLeft"))+parseFloat(n.css("marginRight")),i-=parseFloat(r.css("paddingTop"))+parseFloat(r.css("paddingBottom"))+parseFloat(n.css("marginTop"))+parseFloat(n.css("marginBottom")),o&&a||(o=e,a=i),e-.5<(o*=n=Math.min(1,e/o,i/a))&&(o=e),i-.5<(a*=n)&&(a=i),"image"===t.type?(s.top=Math.floor(.5*(i-a))+parseFloat(r.css("paddingTop")),s.left=Math.floor(.5*(e-o))+parseFloat(r.css("paddingLeft"))):"video"===t.contentType&&(o/(t=t.opts.width&&t.opts.height?o/a:t.opts.ratio||16/9)<a?a=o/t:a*t<o&&(o=a*t)),s.width=o,s.height=a,s)},update:function(i){var n=this;f.each(n.slides,function(t,e){n.updateSlide(e,i)})},updateSlide:function(t,e){var i=this,n=t&&t.$content,r=t.width||t.opts.width,o=t.height||t.opts.height,a=t.$slide;i.adjustCaption(t),n&&(r||o||"video"===t.contentType)&&!t.hasError&&(f.fancybox.stop(n),f.fancybox.setTranslate(n,i.getFitPos(t)),t.pos===i.currPos&&(i.isAnimating=!1,i.updateCursor())),i.adjustLayout(t),a.length&&(a.trigger("refresh"),t.pos===i.currPos&&i.$refs.toolbar.add(i.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",a.get(0).scrollHeight>a.get(0).clientHeight)),i.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,i=e.current,n=i.$slide;!e.isClosing&&i&&(n.siblings().css({transform:"",opacity:""}),n.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),f.fancybox.animate(n,{top:0,left:0,opacity:1},t===m?0:t,function(){n.css({transform:"",opacity:""}),i.isComplete||e.complete()},!1))},isMoved:function(t){var e,i=t||this.current;return!!i&&(e=f.fancybox.getTranslate(this.$refs.stage),t=f.fancybox.getTranslate(i.$slide),!i.$slide.hasClass("fancybox-animated")&&(.5<Math.abs(t.top-e.top)||.5<Math.abs(t.left-e.left)))},updateCursor:function(t,e){var i=this,n=i.current,r=i.$refs.container;n&&!i.isClosing&&i.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),e=!!(t=i.canPan(t,e))||i.isZoomable(),r.toggleClass("fancybox-is-zoomable",e),f("[data-fancybox-zoom]").prop("disabled",!e),t?r.addClass("fancybox-can-pan"):e&&("zoom"===n.opts.clickContent||f.isFunction(n.opts.clickContent)&&"zoom"==n.opts.clickContent(n))?r.addClass("fancybox-can-zoomIn"):n.opts.touch&&(n.opts.touch.vertical||1<i.group.length)&&"video"!==n.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this.current;if(e&&!this.isClosing&&"image"===e.type&&!e.hasError){if(!e.isLoaded)return!0;if((t=this.getFitPos(e))&&(e.width>t.width||e.height>t.height))return!0}return!1},isScaledDown:function(t,e){var i=!1,n=this.current,r=n.$content;return t!==m&&e!==m?i=t<n.width&&e<n.height:r&&(i=(i=f.fancybox.getTranslate(r)).width<n.width&&i.height<n.height),i},canPan:function(t,e){var i=this.current,n=null,r=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(r=this.getFitPos(i),t!==m&&e!==m?n={width:t,height:e}:i.isComplete&&(n=f.fancybox.getTranslate(i.$content)),n&&r&&(r=1.5<Math.abs(n.width-r.width)||1.5<Math.abs(n.height-r.height))),r},loadSlide:function(i){var t,e,n,r=this;if(!i.isLoading&&!i.isLoaded){if(!(i.isLoading=!0)===r.trigger("beforeLoad",i))return i.isLoading=!1;switch(t=i.type,(e=i.$slide).off("refresh").trigger("onReset").addClass(i.opts.slideClass),t){case"image":r.setImage(i);break;case"iframe":r.setIframe(i);break;case"html":r.setContent(i,i.src||i.content);break;case"video":r.setContent(i,i.opts.video.tpl.replace(/\{\{src\}\}/gi,i.src).replace("{{format}}",i.opts.videoFormat||i.opts.video.format||"").replace("{{poster}}",i.thumb||""));break;case"inline":f(i.src).length?r.setContent(i,f(i.src)):r.setError(i);break;case"ajax":r.showLoading(i),n=f.ajax(f.extend({},i.opts.ajax.settings,{url:i.src,success:function(t,e){"success"===e&&r.setContent(i,t)},error:function(t,e){t&&"abort"!==e&&r.setError(i)}})),e.one("onReset",function(){n.abort()});break;default:r.setError(i)}return!0}},setImage:function(e){var t,i=this;setTimeout(function(){var t=e.$image;i.isClosing||!e.isLoading||t&&t.length&&t[0].complete||e.hasError||i.showLoading(e)},50),i.checkSrcset(e),e.$content=f('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&e.thumb&&(e.width=e.opts.width,e.height=e.opts.height,(t=a.createElement("img")).onerror=function(){f(this).remove(),e.$ghost=null},t.onload=function(){i.afterLoad(e)},e.$ghost=f(t).addClass("fancybox-image").appendTo(e.$content).attr("src",e.thumb)),i.setBigImage(e)},checkSrcset:function(t){var e,i,n,r,o=t.opts.srcset||t.opts.image.srcset;if(o){n=l.devicePixelRatio||1,r=l.innerWidth*n,(i=o.split(",").map(function(t){var n={};return t.trim().split(/\s+/).forEach(function(t,e){var i=parseInt(t.substring(0,t.length-1),10);if(0===e)return n.url=t;i&&(n.value=i,n.postfix=t[t.length-1])}),n})).sort(function(t,e){return t.value-e.value});for(var a=0;a<i.length;a++){var s=i[a];if("w"===s.postfix&&s.value>=r||"x"===s.postfix&&s.value>=n){e=s;break}}(e=!e&&i.length?i[i.length-1]:e)&&(t.src=e.url,t.width&&t.height&&"w"==e.postfix&&(t.height=t.width/t.height*e.value,t.width=e.value),t.opts.srcset=o)}},setBigImage:function(e){var i=this,t=a.createElement("img"),n=f(t);e.$image=n.one("error",function(){i.setError(e)}).one("load",function(){var t;e.$ghost||(i.resolveImageSlideSize(e,this.naturalWidth,this.naturalHeight),i.afterLoad(e)),i.isClosing||(e.opts.srcset&&((t=e.opts.sizes)&&"auto"!==t||(t=(1<e.width/e.height&&1<r.width()/r.height()?"100":Math.round(e.width/e.height*100))+"vw"),n.attr("sizes",t).attr("srcset",e.opts.srcset)),e.$ghost&&setTimeout(function(){e.$ghost&&!i.isClosing&&e.$ghost.hide()},Math.min(300,Math.max(1e3,e.height/1600))),i.hideLoading(e))}).addClass("fancybox-image").attr("src",e.src).appendTo(e.$content),(t.complete||"complete"==t.readyState)&&n.naturalWidth&&n.naturalHeight?n.trigger("load"):t.error&&n.trigger("error")},resolveImageSlideSize:function(t,e,i){var n=parseInt(t.opts.width,10),r=parseInt(t.opts.height,10);t.width=e,t.height=i,0<n&&(t.width=n,t.height=Math.floor(n*i/e)),0<r&&(t.width=Math.floor(r*e/i),t.height=r)},setIframe:function(r){var o,e=this,a=r.opts.iframe,s=r.$slide;r.$content=f('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(s),s.addClass("fancybox-slide--"+r.contentType),r.$iframe=o=f(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(r.$content),a.preload?(e.showLoading(r),o.on("load.fb error.fb",function(t){this.isReady=1,r.$slide.trigger("refresh"),e.afterLoad(r)}),s.on("refresh.fb",function(){var t,e=r.$content,i=a.css.width,n=a.css.height;if(1===o[0].isReady){try{t=o.contents().find("body")}catch(t){}t&&t.length&&t.children().length&&(s.css("overflow","visible"),e.css({width:"100%","max-width":"100%",height:"9999px"}),i===m&&(i=Math.ceil(Math.max(t[0].clientWidth,t.outerWidth(!0)))),e.css("width",i||"").css("max-width",""),n===m&&(n=Math.ceil(Math.max(t[0].clientHeight,t.outerHeight(!0)))),e.css("height",n||""),s.css("overflow","auto")),e.removeClass("fancybox-is-hidden")}})):e.afterLoad(r),o.attr("src",r.src),s.one("onReset",function(){try{f(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}f(this).off("refresh.fb").empty(),r.isLoaded=!1,r.isRevealed=!1})},setContent:function(t,e){var i;this.isClosing||(this.hideLoading(t),t.$content&&f.fancybox.stop(t.$content),t.$slide.empty(),(i=e)&&i.hasOwnProperty&&i instanceof f&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=f("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===f.type(e)&&(e=f("<div>").append(f.trim(e)).contents()),t.opts.filter&&(e=f("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){f(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(f(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),f(e).appendTo(t.$slide),f(e).is("video,audio")&&(f(e).addClass("fancybox-video"),f(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||f(e).attr("width"),t.opts.height=t.opts.height||f(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){(t=t||this.current)&&!t.$spinner&&(t.$spinner=f(this.translate(this,this.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){(t=t||this.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=f(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&f('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.adjustCaption(t),e.adjustLayout(t),t.pos===e.currPos&&e.updateCursor(),e.revealContent(t))},adjustCaption:function(t){var e=this,i=t||e.current,n=i.opts.caption,r=i.opts.preventCaptionOverlap,o=e.$refs.caption,t=!1;o.toggleClass("fancybox-caption--separate",r),r&&n&&n.length&&(i.pos!==e.currPos?((o=o.clone().appendTo(o.parent())).children().eq(0).empty().html(n),t=o.outerHeight(!0),o.empty().remove()):e.$caption&&(t=e.$caption.outerHeight(!0)),i.$slide.css("padding-bottom",t||""))},adjustLayout:function(t){var e,i,n,r=t||this.current;r.isLoaded&&!0!==r.opts.disableLayoutFix&&(r.$content.css("margin-bottom",""),r.$content.outerHeight()>r.$slide.height()+.5&&(i=r.$slide[0].style["padding-bottom"],n=r.$slide.css("padding-bottom"),0<parseFloat(n)&&(t=r.$slide[0].scrollHeight,r.$slide.css("padding-bottom",0),Math.abs(t-r.$slide[0].scrollHeight)<1&&(e=n),r.$slide.css("padding-bottom",i))),r.$content.css("margin-bottom",e))},revealContent:function(t){var e,i,n,r,o=this,a=t.$slide,s=!1,l=!1,c=o.isMoved(t),h=t.isRevealed;return t.isRevealed=!0,e=t.opts[o.firstRun?"animationEffect":"transitionEffect"],n=t.opts[o.firstRun?"animationDuration":"transitionDuration"],n=parseInt(t.forcedDuration===m?n:t.forcedDuration,10),"zoom"===(e=c||t.pos!==o.currPos||!n?!1:e)&&(t.pos===o.currPos&&n&&"image"===t.type&&!t.hasError&&(l=o.getThumbPos(t))?s=o.getFitPos(t):e="fade"),"zoom"===e?(o.isAnimating=!0,s.scaleX=s.width/l.width,s.scaleY=s.height/l.height,(r="auto"==(r=t.opts.zoomOpacity)?.1<Math.abs(t.width/t.height-l.width/l.height):r)&&(l.opacity=.1,s.opacity=1),f.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),d(t.$content),void f.fancybox.animate(t.$content,s,n,function(){o.isAnimating=!1,o.complete()})):(o.updateSlide(t),e?(f.fancybox.stop(a),i="fancybox-slide--"+(t.pos>=o.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,a.addClass(i).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),d(a),"image"!==t.type&&t.$content.hide().show(0),void f.fancybox.animate(a,"fancybox-slide--current",n,function(){a.removeClass(i).css({transform:"",opacity:""}),t.pos===o.currPos&&o.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),h||!c||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===o.currPos&&o.complete())))},getThumbPos:function(t){var e,i,n,r,o=t.$thumb;return!!(o&&(n=o[0])&&n.ownerDocument===a&&(f(".fancybox-container").css("pointer-events","none"),r={x:n.getBoundingClientRect().left+n.offsetWidth/2,y:n.getBoundingClientRect().top+n.offsetHeight/2},n=a.elementFromPoint(r.x,r.y)===n,f(".fancybox-container").css("pointer-events",""),n))&&(i=f.fancybox.getTranslate(o),t=parseFloat(o.css("border-top-width")||0),r=parseFloat(o.css("border-right-width")||0),n=parseFloat(o.css("border-bottom-width")||0),o=parseFloat(o.css("border-left-width")||0),e={top:i.top+t,left:i.left+o,width:i.width-r-o,height:i.height-t-n,scaleX:1,scaleY:1},0<i.width&&0<i.height&&e)},complete:function(){var t,i=this,e=i.current,n={};!i.isMoved()&&e.isLoaded&&(e.isComplete||(e.isComplete=!0,e.$slide.siblings().trigger("onReset"),i.preload("inline"),d(e.$slide),e.$slide.addClass("fancybox-slide--complete"),f.each(i.slides,function(t,e){e.pos>=i.currPos-1&&e.pos<=i.currPos+1?n[e.pos]=e:e&&(f.fancybox.stop(e.$slide),e.$slide.off().remove())}),i.slides=n),i.isAnimating=!1,i.updateCursor(),i.trigger("afterShow"),e.opts.video.autoStart&&e.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),i.next()}),e.opts.autoFocus&&"html"===e.contentType&&((t=e.$content.find("input[autofocus]:enabled:visible:first")).length?t.trigger("focus"):i.focus(null,!0)),e.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,i,n=this;n.group.length<2||(i=n.slides[n.currPos+1],(e=n.slides[n.currPos-1])&&e.type===t&&n.loadSlide(e),i&&i.type===t&&n.loadSlide(i))},focus:function(t,e){var i=this,n=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");i.isClosing||((e=(e=!t&&i.current&&i.current.isComplete?i.current.$slide.find("*:visible"+(e?":not(.fancybox-close-small)":"")):i.$refs.container.find("*:visible")).filter(n).filter(function(){return"hidden"!==f(this).css("visibility")&&!f(this).hasClass("disabled")})).length?(n=e.index(a.activeElement),t&&t.shiftKey?(n<0||0==n)&&(t.preventDefault(),e.eq(e.length-1).trigger("focus")):(n<0||n==e.length-1)&&(t&&t.preventDefault(),e.eq(0).trigger("focus"))):i.$refs.container.trigger("focus"))},activate:function(){var e=this;f(".fancybox-container").each(function(){var t=f(this).data("FancyBox");t&&t.id!==e.id&&!t.isClosing&&(t.trigger("onDeactivate"),t.removeEvents(),t.isVisible=!1)}),e.isVisible=!0,(e.current||e.isIdle)&&(e.update(),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(t,e){function i(){l.cleanUp(t)}var n,r,o,a,s,l=this,c=l.current;return!l.isClosing&&(!(l.isClosing=!0)===l.trigger("beforeClose",t)?(l.isClosing=!1,h(function(){l.update()}),!1):(l.removeEvents(),o=c.$content,n=c.opts.animationEffect,r=f.isNumeric(e)?e:n?c.opts.animationDuration:0,c.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?f.fancybox.stop(c.$slide):n=!1,c.$slide.siblings().trigger("onReset").remove(),r&&l.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",r+"ms"),l.hideLoading(c),l.hideControls(!0),l.updateCursor(),"zoom"===(n=!("zoom"!==n||o&&r&&"image"===c.type&&!l.isMoved()&&!c.hasError&&(s=l.getThumbPos(c)))?"fade":n)?(f.fancybox.stop(o),e={top:(a=f.fancybox.getTranslate(o)).top,left:a.left,scaleX:a.width/s.width,scaleY:a.height/s.height,width:s.width,height:s.height},(a="auto"==(a=c.opts.zoomOpacity)?.1<Math.abs(c.width/c.height-s.width/s.height):a)&&(s.opacity=0),f.fancybox.setTranslate(o,e),d(o),f.fancybox.animate(o,s,r,i)):n&&r?f.fancybox.animate(c.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+n,r,i):!0===t?setTimeout(i,r):i(),!0))},cleanUp:function(t){var e,i=this,n=i.current.opts.$orig;i.current.$slide.trigger("onReset"),i.$refs.container.empty().remove(),i.trigger("afterClose",t),i.current.opts.backFocus&&(n=n&&n.length&&n.is(":visible")?n:i.$trigger)&&n.length&&(e=l.scrollX,t=l.scrollY,n.trigger("focus"),f("html, body").scrollTop(t).scrollLeft(e)),i.current=null,(i=f.fancybox.getInstance())?i.activate():(f("body").removeClass("fancybox-active compensate-for-scrollbar"),f("#fancybox-style-noscroll").remove())},trigger:function(t,e){var i,n=Array.prototype.slice.call(arguments,1),r=this,e=e&&e.opts?e:r.current;if(e?n.unshift(e):e=r,n.unshift(r),!1===(i=f.isFunction(e.opts[t])?e.opts[t].apply(e,n):i))return i;("afterClose"!==t&&r.$refs?r.$refs.container:o).trigger(t+".fb",n)},updateControls:function(){var t=this,e=t.current,i=e.index,n=t.$refs.container,r=t.$refs.caption,o=e.opts.caption;e.$slide.trigger("refresh"),o&&o.length?(t.$caption=r).children().eq(0).html(o):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),n.find("[data-fancybox-count]").html(t.group.length),n.find("[data-fancybox-index]").html(i+1),n.find("[data-fancybox-prev]").prop("disabled",!e.opts.loop&&i<=0),n.find("[data-fancybox-next]").prop("disabled",!e.opts.loop&&i>=t.group.length-1),"image"===e.type?n.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",e.opts.image.src||e.src).show():e.opts.toolbar&&n.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),f(a.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=["infobar","toolbar","nav"];!t&&this.current.opts.preventCaptionOverlap||e.push("caption"),this.$refs.container.removeClass(e.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this,e=(t.current||t).opts,i=t.$refs.container;t.hasHiddenControls=!1,t.idleSecondsCounter=0,i.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&1<t.group.length)).toggleClass("fancybox-show-caption",!!t.$caption).toggleClass("fancybox-show-nav",!!(e.arrows&&1<t.group.length)).toggleClass("fancybox-is-modal",!!e.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),f.fancybox={version:"3.5.7",defaults:t,getInstance:function(t){var e=f('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof n&&("string"===f.type(t)?e[t].apply(e,i):"function"===f.type(t)&&t.apply(e,i),e)},open:function(t,e,i){return new n(t,e,i)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),o.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:(t=a.createElement("div"),l.getComputedStyle&&l.getComputedStyle(t)&&l.getComputedStyle(t).getPropertyValue("transform")&&!(a.documentMode&&a.documentMode<11)),getTranslate:function(t){var e;return!(!t||!t.length)&&{top:(e=t[0].getBoundingClientRect()).top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))}},setTranslate:function(t,e){var i="",n={};if(t&&e)return e.left===m&&e.top===m||(i=(e.left===m?t.position():e).left+"px, "+(e.top===m?t.position():e).top+"px",i=this.use3d?"translate3d("+i+", 0px)":"translate("+i+")"),e.scaleX!==m&&e.scaleY!==m?i+=" scale("+e.scaleX+", "+e.scaleY+")":e.scaleX!==m&&(i+=" scaleX("+e.scaleX+")"),i.length&&(n.transform=i),e.opacity!==m&&(n.opacity=e.opacity),e.width!==m&&(n.width=e.width),e.height!==m&&(n.height=e.height),t.css(n)},animate:function(e,i,n,r,o){var a,s=this;f.isFunction(n)&&(r=n,n=null),s.stop(e),a=s.getTranslate(e),e.on(c,function(t){t&&t.originalEvent&&(!e.is(t.originalEvent.target)||"z-index"==t.originalEvent.propertyName)||(s.stop(e),f.isNumeric(n)&&e.css("transition-duration",""),f.isPlainObject(i)?i.scaleX!==m&&i.scaleY!==m&&s.setTranslate(e,{top:i.top,left:i.left,width:a.width*i.scaleX,height:a.height*i.scaleY,scaleX:1,scaleY:1}):!0!==o&&e.removeClass(i),f.isFunction(r)&&r(t))}),f.isNumeric(n)&&e.css("transition-duration",n+"ms"),f.isPlainObject(i)?(i.scaleX!==m&&i.scaleY!==m&&(delete i.width,delete i.height,e.parent().hasClass("fancybox-slide--image")&&e.parent().addClass("fancybox-is-scaling")),f.fancybox.setTranslate(e,i)):e.addClass(i),e.data("timer",setTimeout(function(){e.trigger(c)},n+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(c),t.off(c).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},f.fn.fancybox=function(t){var e;return(e=(t=t||{}).selector||!1)?f("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},v):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},v),this},o.on("click.fb-start","[data-fancybox]",v),o.on("click.fb-start","[data-fancybox-trigger]",function(t){f('[data-fancybox="'+f(this).attr("data-fancybox-trigger")+'"]').eq(f(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:f(this)})}),i=".fancybox-button",p="fancybox-focus",g=null,o.on("mousedown mouseup focus blur",i,function(t){switch(t.type){case"mousedown":g=f(this);break;case"mouseup":g=null;break;case"focusin":f(i).removeClass(p),f(this).is(g)||f(this).is("[disabled]")||f(this).addClass(p);break;case"focusout":f(i).removeClass(p)}})))}(window,document,jQuery),function(p){"use strict";function f(i,t,e){if(i)return"object"===p.type(e=e||"")&&(e=p.param(e,!0)),p.each(t,function(t,e){i=i.replace("$"+t,e||"")}),e.length&&(i+=(0<i.indexOf("?")?"&":"?")+e),i}var n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&0<t[12].indexOf("layer=c")?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};p(document).on("objectNeedsType.fb",function(t,e,r){var o,a,s,l,c,h,u=r.src||"",d=!1,i=p.extend(!0,{},n,r.opts.media);p.each(i,function(t,e){if(a=u.match(e.matcher)){if(d=e.type,h=t,c={},e.paramPlace&&a[e.paramPlace]){l=(l="?"==(l=a[e.paramPlace])[0]?l.substring(1):l).split("&");for(var i=0;i<l.length;++i){var n=l[i].split("=",2);2==n.length&&(c[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}}return s=p.extend(!0,{},e.params,r.opts[t],c),u="function"===p.type(e.url)?e.url.call(this,a,s,r):f(e.url,a,s),o="function"===p.type(e.thumb)?e.thumb.call(this,a,s,r):f(e.thumb,a),"youtube"===t?u=u.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,i,n){return"&start="+((i?60*parseInt(i,10):0)+parseInt(n,10))}):"vimeo"===t&&(u=u.replace("&%23","#")),!1}}),d?(r.opts.thumb||r.opts.$thumb&&r.opts.$thumb.length||(r.opts.thumb=o),"iframe"===d&&(r.opts=p.extend(!0,r.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),p.extend(r,{type:d,src:u,origSrc:r.src,contentSource:h,contentType:"image"===d?"image":"gmap_place"==h||"gmap_search"==h?"map":"video"})):u&&(r.type=r.opts.defaultType)});var r={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,i=this;this[t].loaded?setTimeout(function(){i.done(t)}):this[t].loading||(this[t].loading=!0,(e=document.createElement("script")).type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){i[t].loaded=!0,i.done(t)}:e.onload=function(){i[t].loaded=!0,i.done(t)},document.body.appendChild(e))},done:function(t){var e,i;"youtube"===t&&delete window.onYouTubeIframeAPIReady,(e=p.fancybox.getInstance())&&(i=e.current.$content.find("iframe"),"youtube"===t&&void 0!==YT&&YT?new YT.Player(i.attr("id"),{events:{onStateChange:function(t){0==t.data&&e.next()}}}):"vimeo"===t&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(i).on("ended",function(){e.next()}))}};p(document).on({"afterShow.fb":function(t,e,i){1<e.group.length&&("youtube"===i.contentSource||"vimeo"===i.contentSource)&&r.load(i.contentSource)}})}(jQuery),function(h,l,u){"use strict";function d(t){var e,i=[];for(e in t=(t=t.originalEvent||t||h.e).touches&&t.touches.length?t.touches:t.changedTouches&&t.changedTouches.length?t.changedTouches:[t])t[e].pageX?i.push({x:t[e].pageX,y:t[e].pageY}):t[e].clientX&&i.push({x:t[e].clientX,y:t[e].clientY});return i}function p(t,e,i){return e&&t?"x"===i?t.x-e.x:"y"===i?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function c(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||u.isFunction(t.get(0).onclick)||t.data("selectable"))return 1;for(var e=0,i=t[0].attributes,n=i.length;e<n;e++)if("data-fancybox-"===i[e].nodeName.substr(0,14))return 1}function f(t){for(var e,i,n,r=!1;e=t.get(0),i=n=i=void 0,i=h.getComputedStyle(e)["overflow-y"],n=h.getComputedStyle(e)["overflow-x"],i=("scroll"===i||"auto"===i)&&e.scrollHeight>e.clientHeight,e=("scroll"===n||"auto"===n)&&e.scrollWidth>e.clientWidth,!(r=i||e)&&(t=t.parent()).length&&!t.hasClass("fancybox-stage")&&!t.is("body"););return r}function i(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",u.proxy(e,"ontouchstart"))}var m=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||function(t){return h.setTimeout(t,1e3/60)},g=h.cancelAnimationFrame||h.webkitCancelAnimationFrame||h.mozCancelAnimationFrame||h.oCancelAnimationFrame||function(t){h.clearTimeout(t)};i.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),u(l).off(".fb.touch"),t.requestId&&(g(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},i.prototype.ontouchstart=function(t){var e=this,i=u(t.target),n=e.instance,r=n.current,o=r.$slide,a=r.$content,s="touchstart"==t.type;if(s&&e.$container.off("mousedown.fb.touch"),(!t.originalEvent||2!=t.originalEvent.button)&&o.length&&i.length&&!c(i)&&!c(i.parent())&&(i.is("img")||!(t.originalEvent.clientX>i[0].clientWidth+i.offset().left))){if(!r||n.isAnimating||r.$slide.hasClass("fancybox-animated"))return t.stopPropagation(),void t.preventDefault();e.realPoints=e.startPoints=d(t),e.startPoints.length&&(r.touch&&t.stopPropagation(),e.startEvent=t,e.canTap=!0,e.$target=i,e.$content=a,e.opts=r.opts.touch,e.isPanning=!1,e.isSwiping=!1,e.isZooming=!1,e.isScrolling=!1,e.canPan=n.canPan(),e.startTime=(new Date).getTime(),e.distanceX=e.distanceY=e.distance=0,e.canvasWidth=Math.round(o[0].clientWidth),e.canvasHeight=Math.round(o[0].clientHeight),e.contentLastPos=null,e.contentStartPos=u.fancybox.getTranslate(e.$content)||{top:0,left:0},e.sliderStartPos=u.fancybox.getTranslate(o),e.stagePos=u.fancybox.getTranslate(n.$refs.stage),e.sliderStartPos.top-=e.stagePos.top,e.sliderStartPos.left-=e.stagePos.left,e.contentStartPos.top-=e.stagePos.top,e.contentStartPos.left-=e.stagePos.left,u(l).off(".fb.touch").on(s?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",u.proxy(e,"ontouchend")).on(s?"touchmove.fb.touch":"mousemove.fb.touch",u.proxy(e,"ontouchmove")),u.fancybox.isMobile&&l.addEventListener("scroll",e.onscroll,!0),((e.opts||e.canPan)&&(i.is(e.$stage)||e.$stage.find(i).length)||(i.is(".fancybox-image")&&t.preventDefault(),u.fancybox.isMobile&&i.parents(".fancybox-caption").length))&&(e.isScrollable=f(i)||f(i.parent()),u.fancybox.isMobile&&e.isScrollable||t.preventDefault(),1!==e.startPoints.length&&!r.hasError||(e.canPan?(u.fancybox.stop(e.$content),e.isPanning=!0):e.isSwiping=!0,e.$container.addClass("fancybox-is-grabbing")),2===e.startPoints.length&&"image"===r.type&&(r.isLoaded||r.$ghost)&&(e.canTap=!1,e.isSwiping=!1,e.isPanning=!1,e.isZooming=!0,u.fancybox.stop(e.$content),e.centerPointStartX=.5*(e.startPoints[0].x+e.startPoints[1].x)-u(h).scrollLeft(),e.centerPointStartY=.5*(e.startPoints[0].y+e.startPoints[1].y)-u(h).scrollTop(),e.percentageOfImageAtPinchPointX=(e.centerPointStartX-e.contentStartPos.left)/e.contentStartPos.width,e.percentageOfImageAtPinchPointY=(e.centerPointStartY-e.contentStartPos.top)/e.contentStartPos.height,e.startDistanceBetweenFingers=p(e.startPoints[0],e.startPoints[1]))))}},i.prototype.onscroll=function(t){this.isScrolling=!0,l.removeEventListener("scroll",this.onscroll,!0)},i.prototype.ontouchmove=function(t){var e=this;void 0===t.originalEvent.buttons||0!==t.originalEvent.buttons?e.isScrolling?e.canTap=!1:(e.newPoints=d(t),(e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=p(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=p(e.newPoints[0],e.startPoints[0],"y"),e.distance=p(e.newPoints[0],e.startPoints[0]),0<e.distance&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))):e.ontouchend(t)},i.prototype.onSwipe=function(t){var r=this,o=r.instance,e=r.isSwiping,i=r.sliderStartPos.left||0;if(!0!==e)"x"==e&&(0<r.distanceX&&(r.instance.group.length<2||0===r.instance.current.index&&!r.instance.current.opts.loop)?i+=Math.pow(r.distanceX,.8):r.distanceX<0&&(r.instance.group.length<2||r.instance.current.index===r.instance.group.length-1&&!r.instance.current.opts.loop)?i-=Math.pow(-r.distanceX,.8):i+=r.distanceX),r.sliderLastPos={top:"x"==e?0:r.sliderStartPos.top+r.distanceY,left:i},r.requestId&&(g(r.requestId),r.requestId=null),r.requestId=m(function(){r.sliderLastPos&&(u.each(r.instance.slides,function(t,e){var i=e.pos-r.instance.currPos;u.fancybox.setTranslate(e.$slide,{top:r.sliderLastPos.top,left:r.sliderLastPos.left+i*r.canvasWidth+i*e.opts.gutter})}),r.$container.addClass("fancybox-is-sliding"))});else if(10<Math.abs(r.distance)){if(r.canTap=!1,o.group.length<2&&r.opts.vertical?r.isSwiping="y":o.isDragging||!1===r.opts.vertical||"auto"===r.opts.vertical&&800<u(h).width()?r.isSwiping="x":(i=Math.abs(180*Math.atan2(r.distanceY,r.distanceX)/Math.PI),r.isSwiping=45<i&&i<135?"y":"x"),"y"===r.isSwiping&&u.fancybox.isMobile&&r.isScrollable)return void(r.isScrolling=!0);o.isDragging=r.isSwiping,r.startPoints=r.newPoints,u.each(o.slides,function(t,e){var i,n;u.fancybox.stop(e.$slide),i=u.fancybox.getTranslate(e.$slide),n=u.fancybox.getTranslate(o.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===o.current.pos&&(r.sliderStartPos.top=i.top-n.top,r.sliderStartPos.left=i.left-n.left),u.fancybox.setTranslate(e.$slide,{top:i.top-n.top,left:i.left-n.left})}),o.SlideShow&&o.SlideShow.isActive&&o.SlideShow.stop()}},i.prototype.onPan=function(){var t=this;p(t.newPoints[0],t.realPoints[0])<(u.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&g(t.requestId),t.requestId=m(function(){u.fancybox.setTranslate(t.$content,t.contentLastPos)}))},i.prototype.limitMovement=function(){var t=this,e=t.canvasWidth,i=t.canvasHeight,n=t.distanceX,r=t.distanceY,o=t.contentStartPos,a=o.left,s=o.top,l=o.width,c=o.height,h=e<l?a+n:a,u=s+r,t=Math.max(0,.5*e-.5*l),o=Math.max(0,.5*i-.5*c),l=Math.min(e-l,.5*e-.5*l),c=Math.min(i-c,.5*i-.5*c);return 0<n&&t<h&&(h=t-1+Math.pow(-t+a+n,.8)||0),n<0&&h<l&&(h=l+1-Math.pow(l-a-n,.8)||0),0<r&&o<u&&(u=o-1+Math.pow(-o+s+r,.8)||0),{top:u=r<0&&u<c?c+1-Math.pow(c-s-r,.8)||0:u,left:h}},i.prototype.limitPosition=function(t,e,i,n){var r=this.canvasWidth,o=this.canvasHeight;return t=r<i?(t=0<t?0:t)<r-i?r-i:t:Math.max(0,r/2-i/2),{top:e=o<n?(e=0<e?0:e)<o-n?o-n:e:Math.max(0,o/2-n/2),left:t}},i.prototype.onZoom=function(){var t=this,e=t.contentStartPos,i=e.width,n=e.height,r=e.left,o=e.top,a=p(t.newPoints[0],t.newPoints[1])/t.startDistanceBetweenFingers,s=Math.floor(i*a),l=Math.floor(n*a),c=(i-s)*t.percentageOfImageAtPinchPointX,e=(n-l)*t.percentageOfImageAtPinchPointY,i=(t.newPoints[0].x+t.newPoints[1].x)/2-u(h).scrollLeft(),n=(t.newPoints[0].y+t.newPoints[1].y)/2-u(h).scrollTop(),i=i-t.centerPointStartX,a={top:o+(e+(n-t.centerPointStartY)),left:r+(c+i),scaleX:a,scaleY:a};t.canTap=!1,t.newWidth=s,t.newHeight=l,t.contentLastPos=a,t.requestId&&g(t.requestId),t.requestId=m(function(){u.fancybox.setTranslate(t.$content,t.contentLastPos)})},i.prototype.ontouchend=function(t){var e=this,i=e.isSwiping,n=e.isPanning,r=e.isZooming,o=e.isScrolling;if(e.endPoints=d(t),e.dMs=Math.max((new Date).getTime()-e.startTime,1),e.$container.removeClass("fancybox-is-grabbing"),u(l).off(".fb.touch"),l.removeEventListener("scroll",e.onscroll,!0),e.requestId&&(g(e.requestId),e.requestId=null),e.isSwiping=!1,e.isPanning=!1,e.isZooming=!1,e.isScrolling=!1,e.instance.isDragging=!1,e.canTap)return e.onTap(t);e.speed=100,e.velocityX=e.distanceX/e.dMs*.5,e.velocityY=e.distanceY/e.dMs*.5,n?e.endPanning():r?e.endZooming():e.endSwiping(i,o)},i.prototype.endSwiping=function(t,e){var i=this,n=!1,r=i.instance.group.length,o=Math.abs(i.distanceX),o="x"==t&&1<r&&(130<i.dMs&&10<o||50<o);i.sliderLastPos=null,"y"==t&&!e&&50<Math.abs(i.distanceY)?(u.fancybox.animate(i.instance.current.$slide,{top:i.sliderStartPos.top+i.distanceY+150*i.velocityY,opacity:0},200),n=i.instance.close(!0,250)):o&&0<i.distanceX?n=i.instance.previous(300):o&&i.distanceX<0&&(n=i.instance.next(300)),!1!==n||"x"!=t&&"y"!=t||i.instance.centerSlide(200),i.$container.removeClass("fancybox-is-sliding")},i.prototype.endPanning=function(){var t,e,i=this;i.contentLastPos&&(e=!1===i.opts.momentum||350<i.dMs?(t=i.contentLastPos.left,i.contentLastPos.top):(t=i.contentLastPos.left+500*i.velocityX,i.contentLastPos.top+500*i.velocityY),(e=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height)).width=i.contentStartPos.width,e.height=i.contentStartPos.height,u.fancybox.animate(i.$content,e,366))},i.prototype.endZooming=function(){var t,e,i=this,n=i.instance.current,r=i.newWidth,o=i.newHeight;i.contentLastPos&&(t=i.contentLastPos.left,e=i.contentLastPos.top,u.fancybox.setTranslate(i.$content,{top:e,left:t,width:r,height:o,scaleX:1,scaleY:1}),r<i.canvasWidth&&o<i.canvasHeight?i.instance.scaleToFit(150):r>n.width||o>n.height?i.instance.scaleToActual(i.centerPointStartX,i.centerPointStartY,150):(o=i.limitPosition(t,e,r,o),u.fancybox.animate(i.$content,o,150)))},i.prototype.onTap=function(e){function t(t){if(t=a.opts[t],t=u.isFunction(t)?t.apply(o,[a,e]):t)switch(t){case"close":o.close(n.startEvent);break;case"toggleControls":o.toggleControls();break;case"next":o.next();break;case"nextOrClose":1<o.group.length?o.next():o.close(n.startEvent);break;case"zoom":"image"==a.type&&(a.isLoaded||a.$ghost)&&(o.canPan()?o.scaleToFit():o.isScaledDown()?o.scaleToActual(l,c):o.group.length<2&&o.close(n.startEvent))}}var i,n=this,r=u(e.target),o=n.instance,a=o.current,s=e&&d(e)||n.startPoints,l=s[0]?s[0].x-u(h).scrollLeft()-n.stagePos.left:0,c=s[0]?s[0].y-u(h).scrollTop()-n.stagePos.top:0;if((!e.originalEvent||2!=e.originalEvent.button)&&(r.is("img")||!(l>r[0].clientWidth+r.offset().left))){if(r.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))i="Outside";else if(r.is(".fancybox-slide"))i="Slide";else{if(!o.current.$content||!o.current.$content.find(r).addBack().filter(r).length)return;i="Content"}if(n.tapped){if(clearTimeout(n.tapped),n.tapped=null,50<Math.abs(l-n.tapX)||50<Math.abs(c-n.tapY))return this;t("dblclick"+i)}else n.tapX=l,n.tapY=c,a.opts["dblclick"+i]&&a.opts["dblclick"+i]!==a.opts["click"+i]?n.tapped=setTimeout(function(){n.tapped=null,o.isAnimating||t("click"+i)},500):t("click"+i);return this}},u(l).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new i(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(o,a){"use strict";a.extend(!0,a.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});function i(t){this.instance=t,this.init()}a.extend(i.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,e=t.instance,i=e.group[e.currIndex].opts.slideShow;t.$button=e.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),e.group.length<2||!i?t.$button.hide():i.progress&&(t.$progress=a('<div class="fancybox-progress"></div>').appendTo(e.$refs.inner))},set:function(t){var e=this,i=e.instance,n=i.current;n&&(!0===t||n.opts.loop||i.currIndex<i.group.length-1)?e.isActive&&"video"!==n.contentType&&(e.$progress&&a.fancybox.animate(e.$progress.show(),{scaleX:1},n.opts.slideShow.speed),e.timer=setTimeout(function(){i.current.opts.loop||i.current.index!=i.group.length-1?i.next():i.jumpTo(0)},n.opts.slideShow.speed)):(e.stop(),i.idleSecondsCounter=0,i.showControls())},clear:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&this.$progress.removeAttr("style").hide()},start:function(){var t=this,e=t.instance.current;e&&(t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.isActive=!0,e.isComplete&&t.set(!0),t.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1,t.instance.trigger("onSlideShowChange",!1),t.$progress&&t.$progress.removeAttr("style").hide()},toggle:function(){this.isActive?this.stop():this.start()}}),a(o).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new i(e))},"beforeShow.fb":function(t,e,i,n){e=e&&e.SlideShow;n?e&&i.opts.slideShow.autoStart&&e.start():e&&e.isActive&&e.clear()},"afterShow.fb":function(t,e,i){e=e&&e.SlideShow;e&&e.isActive&&e.set()},"afterKeydown.fb":function(t,e,i,n,r){e=e&&e.SlideShow;!e||!i.opts.slideShow||80!==r&&32!==r||a(o.activeElement).is("button,a,input")||(n.preventDefault(),e.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){e=e&&e.SlideShow;e&&e.stop()}}),a(o).on("visibilitychange",function(){var t=a.fancybox.getInstance(),t=t&&t.SlideShow;t&&t.isActive&&(o.hidden?t.clear():t.set())})}(document,jQuery),function(o,i){"use strict";var n,r=function(){for(var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],e={},i=0;i<t.length;i++){var n=t[i];if(n&&n[1]in o){for(var r=0;r<n.length;r++)e[t[0][r]]=n[r];return e}}return!1}();r&&(i.extend(!0,i.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!(n={request:function(t){(t=t||o.documentElement)[r.requestFullscreen](t.ALLOW_KEYBOARD_INPUT)},exit:function(){o[r.exitFullscreen]()},toggle:function(t){t=t||o.documentElement,this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(o[r.fullscreenElement])},enabled:function(){return Boolean(o[r.fullscreenEnabled])}})}}),i(o).on(r.fullscreenchange,function(){var t=n.isFullscreen(),e=i.fancybox.getInstance();e&&(e.current&&"image"===e.current.type&&e.isAnimating&&(e.isAnimating=!1,e.update(!0,!0,0),e.isComplete||e.complete()),e.trigger("onFullscreenChange",t),e.$refs.container.toggleClass("fancybox-is-fullscreen",t),e.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})),i(o).on({"onInit.fb":function(t,e){r?e&&e.group[e.currIndex].opts.fullScreen?(e.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),n.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&n.request(),e.FullScreen=n):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(t,e,i,n,r){e&&e.FullScreen&&70===r&&(n.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&n.exit()}})}(document,jQuery),function(t,o){"use strict";var a="fancybox-thumbs",s=a+"-active";o.fancybox.defaults=o.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},o.fancybox.defaults);function n(t){this.init(t)}o.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,i=t.group,n=0;e.instance=t,e.opts=i[t.currIndex].opts.thumbs,(t.Thumbs=e).$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var r=0,o=i.length;r<o&&(i[r].thumb&&n++,!(1<n));r++);1<n&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var i,t=this,e=t.instance,n=t.opts.parentEl,r=[];t.$grid||(t.$grid=o('<div class="'+a+" "+a+"-"+t.opts.axis+'"></div>').appendTo(e.$refs.container.find(n).addBack().filter(n)),t.$grid.on("click","a",function(){e.jumpTo(o(this).attr("data-index"))})),t.$list||(t.$list=o('<div class="'+a+'__list">').appendTo(t.$grid)),o.each(e.group,function(t,e){(i=e.thumb)||"image"!==e.type||(i=e.src),r.push('<a href="javascript:;" tabindex="0" data-index="'+t+'"'+(i&&i.length?' style="background-image:url('+i+')"':'class="fancybox-thumbs-missing"')+"></a>")}),t.$list[0].innerHTML=r.join(""),"x"===t.opts.axis&&t.$list.width(parseInt(t.$grid.css("padding-right"),10)+e.group.length*t.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,i,n=this.$list,r=this.$grid;this.instance.current&&(i=(e=n.children().removeClass(s).filter('[data-index="'+this.instance.current.index+'"]').addClass(s)).position(),"y"===this.opts.axis&&(i.top<0||i.top>n.height()-e.outerHeight())?n.stop().animate({scrollTop:n.scrollTop()+i.top},t):"x"===this.opts.axis&&(i.left<r.scrollLeft()||i.left>r.scrollLeft()+(r.width()-e.outerWidth()))&&n.parent().stop().animate({scrollLeft:i.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),o(t).on({"onInit.fb":function(t,e){var i;e&&!e.Thumbs&&(i=new n(e)).isActive&&!0===i.opts.autoStart&&i.show()},"beforeShow.fb":function(t,e,i,n){e=e&&e.Thumbs;e&&e.isVisible&&e.focus(n?0:250)},"afterKeydown.fb":function(t,e,i,n,r){e=e&&e.Thumbs;e&&e.isActive&&71===r&&(n.preventDefault(),e.toggle())},"beforeClose.fb":function(t,e){e=e&&e.Thumbs;e&&e.isVisible&&!1!==e.opts.hideOnClose&&e.$grid.hide()}})}(document,jQuery),function(t,r){"use strict";r.extend(!0,r.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),r(t).on("click","[data-fancybox-share]",function(){var t,e,i=r.fancybox.getInstance(),n=i.current||null;n&&("function"===r.type(n.opts.share.url)&&(t=n.opts.share.url.apply(n,[i,n])),t=n.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===n.type?encodeURIComponent(n.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,(e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]}))).replace(/\{\{descr\}\}/g,i.$caption?encodeURIComponent(i.$caption.text()):""),r.fancybox.open({src:i.translate(i,t),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){i.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(o,a,n){"use strict";function r(){var t=o.location.hash.substr(1),e=t.split("-"),i=1<e.length&&/^\+?\d+$/.test(e[e.length-1])&&parseInt(e.pop(-1),10)||1;return{hash:t,index:i<1?1:i,gallery:e.join("-")}}function e(t){""!==t.gallery&&n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function s(t){return!!t&&(""!==(t=(t=(t.current||t).opts).hash||(t.$orig?t.$orig.data("fancybox")||t.$orig.data("fancybox-trigger"):""))&&t)}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),n(function(){!1!==n.fancybox.defaults.hash&&(n(a).on({"onInit.fb":function(t,e){var i,n;!1!==e.group[e.currIndex].opts.hash&&(i=r(),(n=s(e))&&i.gallery&&n==i.gallery&&(e.currIndex=i.index-1))},"beforeShow.fb":function(t,e,i,n){var r;i&&!1!==i.opts.hash&&(r=s(e))&&(e.currentHash=r+(1<e.group.length?"-"+(i.index+1):""),o.location.hash!=="#"+e.currentHash&&(n&&!e.origHash&&(e.origHash=o.location.hash),e.hashTimer&&clearTimeout(e.hashTimer),e.hashTimer=setTimeout(function(){"replaceState"in o.history?(o.history[n?"pushState":"replaceState"]({},a.title,o.location.pathname+o.location.search+"#"+e.currentHash),n&&(e.hasCreatedHistory=!0)):o.location.hash=e.currentHash,e.hashTimer=null},300)))},"beforeClose.fb":function(t,e,i){i&&!1!==i.opts.hash&&(clearTimeout(e.hashTimer),e.currentHash&&e.hasCreatedHistory?o.history.back():e.currentHash&&("replaceState"in o.history?o.history.replaceState({},a.title,o.location.pathname+o.location.search+(e.origHash||"")):o.location.hash=e.origHash),e.currentHash=null)}}),n(o).on("hashchange.fb",function(){var t=r(),i=null;n.each(n(".fancybox-container").get().reverse(),function(t,e){e=n(e).data("FancyBox");if(e&&e.currentHash)return i=e,!1}),i?i.currentHash===t.gallery+"-"+t.index||1===t.index&&i.currentHash==t.gallery||(i.currentHash=null,i.close()):""!==t.gallery&&e(t)}),setTimeout(function(){n.fancybox.getInstance()||e(r())},50))})}(window,document,jQuery),function(t,e){"use strict";var r=(new Date).getTime();e(t).on({"onInit.fb":function(t,n,e){n.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var e=n.current,i=(new Date).getTime();n.group.length<2||!1===e.opts.wheel||"auto"===e.opts.wheel&&"image"!==e.type||(t.preventDefault(),t.stopPropagation(),e.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-r<250||(r=i,n[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery),function(e){"undefined"!=typeof jQuery&&jQuery||"function"!=typeof define||!define.amd?"undefined"!=typeof jQuery&&jQuery||"object"!=typeof exports?e(jQuery,document,window,navigator):e(require("jquery"),document,window,navigator):define(["jquery"],function(t){return e(t,document,window,navigator)})}(function(a,s,l,t,c){"use strict";var e,i=0,n=(e=t.userAgent,t=/msie\s\d+/i,0<e.search(t)&&t.exec(e).toString().split(" ")[1]<9&&(a("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(i){var n=this,r=[].slice;if("function"!=typeof n)throw new TypeError;var o=r.call(arguments,1),a=function(){if(this instanceof a){var t=function(){};t.prototype=n.prototype;var e=new t,t=n.apply(e,o.concat(r.call(arguments)));return Object(t)===t?t:e}return n.apply(i,o.concat(r.call(arguments)))};return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0==r)return-1;e=+e||0;if(r<=(e=Math.abs(e)===1/0?0:e))return-1;for(i=Math.max(0<=e?e:r-Math.abs(e),0);i<r;){if(i in n&&n[i]===t)return i;i++}return-1});function r(t,e,i){this.VERSION="2.3.1",this.input=t,this.plugin_count=i,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,e=e||{},this.$cache={win:a(l),body:a(s.body),input:a(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var n,r,o=this.$cache.input,i=o.prop("value"),t={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" â ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};for(r in"INPUT"!==o[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",o[0]),(n={skin:o.data("skin"),type:o.data("type"),min:o.data("min"),max:o.data("max"),from:o.data("from"),to:o.data("to"),step:o.data("step"),min_interval:o.data("minInterval"),max_interval:o.data("maxInterval"),drag_interval:o.data("dragInterval"),values:o.data("values"),from_fixed:o.data("fromFixed"),from_min:o.data("fromMin"),from_max:o.data("fromMax"),from_shadow:o.data("fromShadow"),to_fixed:o.data("toFixed"),to_min:o.data("toMin"),to_max:o.data("toMax"),to_shadow:o.data("toShadow"),prettify_enabled:o.data("prettifyEnabled"),prettify_separator:o.data("prettifySeparator"),force_edges:o.data("forceEdges"),keyboard:o.data("keyboard"),grid:o.data("grid"),grid_margin:o.data("gridMargin"),grid_num:o.data("gridNum"),grid_snap:o.data("gridSnap"),hide_min_max:o.data("hideMinMax"),hide_from_to:o.data("hideFromTo"),prefix:o.data("prefix"),postfix:o.data("postfix"),max_postfix:o.data("maxPostfix"),decorate_both:o.data("decorateBoth"),values_separator:o.data("valuesSeparator"),input_values_separator:o.data("inputValuesSeparator"),disable:o.data("disable"),block:o.data("block"),extra_classes:o.data("extraClasses")}).values=n.values&&n.values.split(","),n)n.hasOwnProperty(r)&&(n[r]!==c&&""!==n[r]||delete n[r]);i!==c&&""!==i&&((i=i.split(n.input_values_separator||e.input_values_separator||";"))[0]&&i[0]==+i[0]&&(i[0]=+i[0]),i[1]&&i[1]==+i[1]&&(i[1]=+i[1]),e&&e.values&&e.values.length?(t.from=i[0]&&e.values.indexOf(i[0]),t.to=i[1]&&e.values.indexOf(i[1])):(t.from=i[0]&&+i[0],t.to=i[1]&&+i[1])),a.extend(t,e),a.extend(t,n),this.options=t,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}r.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,n=this.options.to;t<i&&n===e?this.$cache.s_from.addClass("type_last"):n<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),n&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),n&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(t){var e,i;this.target||(i=(e="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,i+=e.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:i}))},pointerMove:function(t){this.dragging&&(t=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX,this.coords.x_pointer=t-this.coords.x_gap,this.calc())},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,n&&a("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(a.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&this.setTempMinInterval(),t=t||(this.target||"from"),this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),n&&a("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer,i=(this.options.max-this.options.min)/100,i=this.options.step/i;t?e+=i:e-=i,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");var t,e;this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(t=this._prettify(this.options.min),e=this._prettify(this.options.max),this.result.min_pretty=t,this.result.max_pretty=e,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(e,this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var e=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,e=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(e)),this.target){case"base":var i=(this.options.max-this.options.min)/100,n=(this.result.from-this.options.min)/i,r=(this.result.to-this.options.min)/i;this.coords.p_single_real=this.toFixed(n),this.coords.p_from_real=this.toFixed(n),this.coords.p_to_real=this.toFixed(r),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var o=this.convertToRealPercent(e),i=this.result.from_percent,n=this.result.to_percent-i,r=n/2,i=o-r,r=o+r;100<(r=i<0?(i=0)+n:r)&&(i=(r=100)-n),this.coords.p_from_real=this.calcWithStep(i),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(r),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,e=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return e<0?e=0:t<e&&(e=t),e},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2<=t?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%")),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){var t,e,i,n,r,o;this.options&&(t=this.options.values.length,e=this.options.p_values,this.options.hide_from_to||("single"===this.options.type?(n=t?this.decorate(e[this.result.from]):(o=this._prettify(this.result.from),this.decorate(o,this.result.from)),this.$cache.single.html(n),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"):(o=t?(this.options.decorate_both?(n=this.decorate(e[this.result.from]),n+=this.options.values_separator,n+=this.decorate(e[this.result.to])):n=this.decorate(e[this.result.from]+this.options.values_separator+e[this.result.to]),r=this.decorate(e[this.result.from]),this.decorate(e[this.result.to])):(o=this._prettify(this.result.from),i=this._prettify(this.result.to),this.options.decorate_both?(n=this.decorate(o,this.result.from),n+=this.options.values_separator,n+=this.decorate(i,this.result.to)):n=this.decorate(o+this.options.values_separator+i,this.result.to),r=this.decorate(o,this.result.from),this.decorate(i,this.result.to)),this.$cache.single.html(n),this.$cache.from.html(r),this.$cache.to.html(o),this.calcLabels(),i=Math.min(this.labels.p_single_left,this.labels.p_from_left),n=this.labels.p_single_left+this.labels.p_single_fake,r=this.labels.p_to_left+this.labels.p_to_fake,o=Math.max(n,r),this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",o=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",r):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(n,r))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),i<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",o>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible")))},drawShadow:function(){var t,e,i=this.options,n=this.$cache,r="number"==typeof i.from_min&&!isNaN(i.from_min),o="number"==typeof i.from_max&&!isNaN(i.from_max),a="number"==typeof i.to_min&&!isNaN(i.to_min),s="number"==typeof i.to_max&&!isNaN(i.to_max);"single"===i.type?i.from_shadow&&(r||o)?(t=this.convertToPercent(r?i.from_min:i.min),e=this.convertToPercent(o?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_single[0].style.display="block",n.shad_single[0].style.left=t+"%",n.shad_single[0].style.width=e+"%"):n.shad_single[0].style.display="none":(i.from_shadow&&(r||o)?(t=this.convertToPercent(r?i.from_min:i.min),e=this.convertToPercent(o?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_from[0].style.display="block",n.shad_from[0].style.left=t+"%",n.shad_from[0].style.width=e+"%"):n.shad_from[0].style.display="none",i.to_shadow&&(a||s)?(a=this.convertToPercent(a?i.to_min:i.min),i=this.convertToPercent(s?i.to_max:i.max)-a,a=this.toFixed(a-this.coords.p_handle/100*a),i=this.toFixed(i-this.coords.p_handle/100*i),a+=this.coords.p_handle/2,n.shad_to[0].style.display="block",n.shad_to[0].style.left=a+"%",n.shad_to[0].style.width=i+"%"):n.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,e){var i=this.options.max-this.options.min;return i?(t=e?t:t-this.options.min,this.toFixed(t/(i/100))):(this.no_diapason=!0,0)},convertToValue:function(t){var e,i,n=this.options.min,r=this.options.max,o=n.toString().split(".")[1],a=r.toString().split(".")[1],s=0,l=0;if(0===t)return this.options.min;if(100===t)return this.options.max;o&&(s=e=o.length),a&&(s=i=a.length),e&&i&&(s=i<=e?e:i),n<0&&(n=+(n+(l=Math.abs(n))).toFixed(s),r=+(r+l).toFixed(s));t=(r-n)/100*t+n,n=this.options.step.toString().split(".")[1],t=n?+t.toFixed(n.length):(t/=this.options.step,+(t*=this.options.step).toFixed(0));return l&&(t-=l),(t=n?+t.toFixed(n.length):this.toFixed(t))<this.options.min?t=this.options.min:t>this.options.max&&(t=this.options.max),t},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<e&&(e=100),this.toFixed(e=100===t?100:e)},checkMinInterval:function(t,e,i){var n,r=this.options;return r.min_interval?(n=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-n<r.min_interval&&(n=e-r.min_interval):n-e<r.min_interval&&(n=e+r.min_interval),this.convertToPercent(n)):t},checkMaxInterval:function(t,e,i){var n,r=this.options;return r.max_interval?(n=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-n>r.max_interval&&(n=e-r.max_interval):n-e>r.max_interval&&(n=e+r.max_interval),this.convertToPercent(n)):t},checkDiapason:function(t,e,i){var n=this.convertToValue(t),t=this.options;return"number"!=typeof e&&(e=t.min),"number"!=typeof i&&(i=t.max),this.convertToPercent(n=i<(n=n<e?e:n)?i:n)},toFixed:function(t){return+(t=t.toFixed(20))},_prettify:function(t){return this.options.prettify_enabled?(this.options.prettify&&"function"==typeof this.options.prettify?this.options:this).prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges&&(t<0?t=0:100-e<t&&(t=100-e)),this.toFixed(t)},validate:function(){var t,e,i=this.options,n=this.result,r=i.values,o=r.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),o)for(i.p_values=[],i.min=0,i.max=o-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<o;e++)t=+r[e],t=isNaN(t)?r[e]:(r[e]=t,this._prettify(t)),i.p_values.push(t);"number"==typeof i.from&&!isNaN(i.from)||(i.from=i.min),"number"==typeof i.to&&!isNaN(i.to)||(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),this.update_check.from&&(this.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),this.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),n&&(n.min!==i.min&&(n.min=i.min),n.max!==i.max&&(n.max=i.max),(n.from<n.min||n.from>n.max)&&(n.from=i.from),(n.to<n.min||n.to>n.max)&&(n.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",n=this.options;return n.prefix&&(i+=n.prefix),i+=t,n.max_postfix&&(n.values.length&&t===n.p_values[n.max]||e===n.max)&&(i+=n.max_postfix,n.postfix&&(i+=" ")),n.postfix&&(i+=n.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,n,r,o,a=this.options,s=a.max-a.min,l=a.grid_num,c=0,h=4,u="";for(this.calcGridMargin(),a.grid_snap&&(l=s/a.step),i=this.toFixed(100/(l=50<l?50:l)),4<l&&(h=3),7<l&&(h=2),14<l&&(h=1),28<l&&(h=0),t=0;t<l+1;t++){for(n=h,100<(c=this.toFixed(i*t))&&(c=100),r=((this.coords.big[t]=c)-i*(t-1))/(n+1),e=1;e<=n&&0!==c;e++)u+='<span class="irs-grid-pol small" style="left: '+this.toFixed(c-r*e)+'%"></span>';u+='<span class="irs-grid-pol" style="left: '+c+'%"></span>',o=this.convertToValue(c),u+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+c+'%">'+(o=a.values.length?a.p_values[o]:this._prettify(o))+"</span>"}this.coords.big_num=Math.ceil(l+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(u),this.cacheGridLabels()}},cacheGridLabels:function(){for(var t,e=this.coords.big_num,i=0;i<e;i++)t=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){for(var t,e=[],i=[],n=this.coords.big_num,r=0;r<n;r++)this.coords.big_w[r]=this.$cache.grid_labels[r].outerWidth(!1),this.coords.big_p[r]=this.toFixed(this.coords.big_w[r]/this.coords.w_rs*100),this.coords.big_x[r]=this.toFixed(this.coords.big_p[r]/2),e[r]=this.toFixed(this.coords.big[r]-this.coords.big_x[r]),i[r]=this.toFixed(e[r]+this.coords.big_p[r]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,i[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),i[n-1]>100+this.coords.grid_gap&&(i[n-1]=100+this.coords.grid_gap,e[n-1]=this.toFixed(i[n-1]-this.coords.big_p[n-1]),this.coords.big_x[n-1]=this.toFixed(this.coords.big_p[n-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,i),this.calcGridCollision(4,e,i),r=0;r<n;r++)t=this.$cache.grid_labels[r][0],this.coords.big_x[r]!==Number.POSITIVE_INFINITY&&(t.style.marginLeft=-this.coords.big_x[r]+"%")},calcGridCollision:function(t,e,i){for(var n,r,o=this.coords.big_num,a=0;a<o&&!(o<=(n=a+t/2));a+=t)r=this.$cache.grid_labels[n][0],i[a]<=e[n]?r.style.visibility="visible":r.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=a.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),a.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},a.fn.ionRangeSlider=function(t){return this.each(function(){a.data(this,"ionRangeSlider")||a.data(this,"ionRangeSlider",new r(this,t,i++))})},function(){for(var o=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!l.requestAnimationFrame;++e)l.requestAnimationFrame=l[t[e]+"RequestAnimationFrame"],l.cancelAnimationFrame=l[t[e]+"CancelAnimationFrame"]||l[t[e]+"CancelRequestAnimationFrame"];l.requestAnimationFrame||(l.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-o)),r=l.setTimeout(function(){t(i+n)},n);return o=i+n,r}),l.cancelAnimationFrame||(l.cancelAnimationFrame=function(t){clearTimeout(t)})}()}),function(j){"use strict";var G='<?xml version="1.0" encoding="utf-8"?><svg version="1.1"xmlns="http://www.w3.org/2000/svg"viewBox="0 12.705 512 486.59"x="0px" y="0px"xml:space="preserve"><polygon points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/></svg>',s={starWidth:"32px",normalFill:"gray",ratedFill:"#f39c12",numStars:5,maxValue:5,precision:1,rating:0,fullStar:!1,halfStar:!1,readOnly:!1,spacing:"0px",rtl:!1,multiColor:null,onInit:null,onChange:null,onSet:null,starSvg:null},V={startColor:"#c0392b",endColor:"#f1c40f"};function W(t,e,i){return t===e?t=e:t===i&&(t=i),t}function $(t){return void 0!==t}var e=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,q=function(t){if(!e.test(t))return null;t=e.exec(t);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}};function X(t,e,i){e=i/100*(e-t);return e=1===(e=Math.round(t+e).toString(16)).length?"0"+e:e}function Y(r,l){this.node=r.get(0);var i=this;r.empty().addClass("jq-ry-container");var c,e,h,u,d,t,n=j("<div/>").addClass("jq-ry-group-wrapper").appendTo(r),p=j("<div/>").addClass("jq-ry-normal-group").addClass("jq-ry-group").appendTo(n),o=j("<div/>").addClass("jq-ry-rated-group").addClass("jq-ry-group").appendTo(n),f=0,a=l.rating,s=!1;function m(t){$(t)||(t=l.rating);var e=(a=t)/c,t=e*h;1<e&&(t+=(Math.ceil(e)-1)*d),w(l.ratedFill),(t=l.rtl?100-t:t)<0?t=0:100<t&&(t=100),o.css("width",t+"%")}function g(){t=e*l.numStars+u*(l.numStars-1),h=e/t*100,d=u/t*100,r.width(t),m()}function v(t){t=l.starWidth=t;return e=window.parseFloat(l.starWidth.replace("px","")),p.find("svg").attr({width:l.starWidth,height:t}),o.find("svg").attr({width:l.starWidth,height:t}),g(),r}function y(t){return l.spacing=t,u=parseFloat(l.spacing.replace("px","")),p.find("svg:not(:first-child)").css({"margin-left":t}),o.find("svg:not(:first-child)").css({"margin-left":t}),g(),r}function b(t){return l.normalFill=t,(l.rtl?o:p).find("svg").attr({fill:l.normalFill}),r}var x=l.ratedFill;function w(t){var e,i;return l.multiColor?(e=(a-f)/l.maxValue*100,t=function(t,e,i){if(!t||!e)return null;i=$(i)?i:0,t=q(t),e=q(e);var n=X(t.r,e.r,i),r=X(t.b,e.b,i);return"#"+n+X(t.g,e.g,i)+r}((i=l.multiColor||{}).startColor||V.startColor,i.endColor||V.endColor,e)):x=t,l.ratedFill=t,(l.rtl?p:o).find("svg").attr({fill:l.ratedFill}),r}function _(t){l.rtl=t=!!t,b(l.normalFill),m()}function S(t){l.multiColor=t,w(t||x)}function M(t){l.numStars=t,c=l.maxValue/l.numStars,p.empty(),o.empty();for(var e=0;e<l.numStars;e++)p.append(j(l.starSvg||G)),o.append(j(l.starSvg||G));return v(l.starWidth),b(l.normalFill),y(l.spacing),m(),r}function T(t){return l.maxValue=t,c=l.maxValue/l.numStars,l.rating>t&&R(t),m(),r}function E(t){return l.precision=t,R(l.rating),r}function C(t){return l.halfStar=t,r}function A(t){return l.fullStar=t,r}function P(t){var e=p.offset().left,i=e+p.width(),n=l.maxValue,r=t.pageX,o=0;if(r<e)o=f;else if(i<r)o=n;else{var a=(r-e)/(i-e);if(0<u)for(var s=a*=100;0<s;)h<s?(o+=c,s-=h+d):(o+=s/h*c,s=0);else o=a*l.maxValue;r=(t=o)%c,i=c/2,e=l.halfStar,((a=l.fullStar)||e)&&(a||e&&i<r?t+=c-r:(t-=r,0<r&&(t+=i))),o=t}return l.rtl&&(o=n-o),parseFloat(o)}function L(t){return l.readOnly=t,r.attr("readonly",!0),U(),t||(r.removeAttr("readonly"),r.on("mousemove",k).on("mouseenter",k).on("mouseleave",N).on("click",F).on("rateyo.init",B).on("rateyo.change",z).on("rateyo.set",H)),r}function R(t){var e=t,t=l.maxValue;return"string"==typeof e&&("%"===e[e.length-1]&&(e=e.substr(0,e.length-1),T(t=100)),e=parseFloat(e)),function(t,e,i){if(!(e<=t&&t<=i))throw Error("Invalid Rating, expected value between "+e+" and "+i)}(e,f,t),e=parseFloat(e.toFixed(l.precision)),W(parseFloat(e),f,t),l.rating=e,m(),s&&r.trigger("rateyo.set",{rating:e}),r}function O(t){return l.onInit=t,r}function D(t){return l.onSet=t,r}function I(t){return l.onChange=t,r}function k(t){var e=P(t).toFixed(l.precision),t=l.maxValue;m(e=W(parseFloat(e),f,t)),r.trigger("rateyo.change",{rating:e})}function N(){var t,e;e=!1,t=navigator.userAgent||navigator.vendor||window.opera,(e=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))||e)||(m(),r.trigger("rateyo.change",{rating:l.rating}))}function F(t){t=P(t).toFixed(l.precision),t=parseFloat(t);i.rating(t)}function B(t,e){l.onInit&&"function"==typeof l.onInit&&l.onInit.apply(this,[e.rating,i])}function z(t,e){l.onChange&&"function"==typeof l.onChange&&l.onChange.apply(this,[e.rating,i])}function H(t,e){l.onSet&&"function"==typeof l.onSet&&l.onSet.apply(this,[e.rating,i])}function U(){r.off("mousemove",k).off("mouseenter",k).off("mouseleave",N).off("click",F).off("rateyo.init",B).off("rateyo.change",z).off("rateyo.set",H)}this.rating=function(t){return $(t)?(R(t),r):l.rating},this.destroy=function(){var i,n;return l.readOnly||U(),Y.prototype.collection=(i=r.get(0),n=this.collection,j.each(n,function(t){if(i===this.node){var e=n.slice(0,t),t=n.slice(t+1,n.length);return n=e.concat(t),!1}}),n),r.removeClass("jq-ry-container").children().remove(),r},this.method=function(t){if(!t)throw Error("Method name not specified!");if(!$(this[t]))throw Error("Method "+t+" doesn't exist!");var e=Array.prototype.slice.apply(arguments,[]).slice(1);return this[t].apply(this,e)},this.option=function(t,e){if(!$(t))return l;var i;switch(t){case"starWidth":i=v;break;case"numStars":i=M;break;case"normalFill":i=b;break;case"ratedFill":i=w;break;case"multiColor":i=S;break;case"maxValue":i=T;break;case"precision":i=E;break;case"rating":i=R;break;case"halfStar":i=C;break;case"fullStar":i=A;break;case"readOnly":i=L;break;case"spacing":i=y;break;case"rtl":i=_;break;case"onInit":i=O;break;case"onSet":i=D;break;case"onChange":i=I;break;default:throw Error("No such option as "+t)}return $(e)?i(e):l[t]},M(l.numStars),L(l.readOnly),l.rtl&&_(l.rtl),this.collection.push(this),this.rating(l.rating,!0),s=!0,r.trigger("rateyo.init",{rating:l.rating})}function l(t,e){var i;return j.each(e,function(){if(t===this.node)return i=this,!1}),i}Y.prototype.collection=[],window.RateYo=Y,j.fn.rateYo=function(){return function(e){var r=Y.prototype.collection,t=j(this);if(0===t.length)return t;var i=Array.prototype.slice.apply(arguments,[]);if(0===i.length)e=i[0]={};else{if(1!==i.length||"object"!=typeof i[0]){if(1<=i.length&&"string"==typeof i[0]){var n=i[0],o=i.slice(1),a=[];return j.each(t,function(t,e){var i=l(e,r);if(!i)throw Error("Trying to set options before even initialization");e=i[n];if(!e)throw Error("Method "+n+" does not exist!");i=e.apply(i,o);a.push(i)}),a=1===a.length?a[0]:a}throw Error("Invalid Arguments")}e=i[0]}return e=j.extend({},s,e),j.each(t,function(){var t=l(this,r);if(t)return t;var t=j(this),i={},n=j.extend({},e);return j.each(t.data(),function(t,e){0===t.indexOf("rateyo")&&(t=(t=t.replace(/^rateyo/,""))[0].toLowerCase()+t.slice(1),i[t]=e,delete n[t])}),new Y(j(this),j.extend({},i,n))})}.apply(this,Array.prototype.slice.apply(arguments,[]))}}(window.jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t($||require("jquery")):t(jQuery)}(function(D){"use strict";var r="styler",i={idSuffix:"-styler",filePlaceholder:"Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð²ÑÐ±ÑÐ°Ð½",fileBrowse:"ÐÐ±Ð·Ð¾Ñ...",fileNumber:"ÐÑÐ±ÑÐ°Ð½Ð¾ ÑÐ°Ð¹Ð»Ð¾Ð²: %s",selectPlaceholder:"ÐÑÐ±ÐµÑÐ¸ÑÐµ...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Ð¡Ð¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾",selectSearchPlaceholder:"ÐÐ¾Ð¸ÑÐº...",selectVisibleOptions:0,selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function o(t,e){this.element=t,this.options=D.extend({},i,e);e=this.options.locale;void 0!==this.options.locales[e]&&D.extend(this.options,this.options.locales[e]),this.init()}function I(t){var e,i;D(t.target).parents().hasClass("jq-selectbox")||"OPTION"==t.target.nodeName||D("div.jq-selectbox.opened").length&&(e=D("div.jq-selectbox.opened"),i=D("div.jq-selectbox__search input",e),t=D("div.jq-selectbox__dropdown",e),e.find("select").data("_"+r).options.onSelectClosed.call(e),i.length&&i.val("").keyup(),t.hide().find("li.sel").addClass("selected"),e.removeClass("focused opened dropup dropdown"))}o.prototype={init:function(){var t,e,i,n,r,P=D(this.element),L=this.options,R=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),o=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));function O(){void 0!==P.attr("id")&&""!==P.attr("id")&&(this.id=P.attr("id")+L.idSuffix),this.title=P.attr("title"),this.classes=P.attr("class"),this.data=P.data()}P.is(":checkbox")?((t=function(){var t=new O,e=D('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e).prependTo(e),P.is(":checked")&&e.addClass("checked"),P.is(":disabled")&&e.addClass("disabled"),e.click(function(t){t.preventDefault(),P.triggerHandler("click"),e.is(".disabled")||(P.is(":checked")?(P.prop("checked",!1),e.removeClass("checked")):(P.prop("checked",!0),e.addClass("checked")),P.focus().change())}),P.closest("label").add('label[for="'+P.attr("id")+'"]').on("click.styler",function(t){D(t.target).is("a")||D(t.target).closest(e).length||(e.triggerHandler("click"),t.preventDefault())}),P.on("change.styler",function(){P.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).on("keydown.styler",function(t){32==t.which&&e.click()}).on("focus.styler",function(){e.is(".disabled")||e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")})})(),P.on("refresh",function(){P.closest("label").add('label[for="'+P.attr("id")+'"]').off(".styler"),P.off(".styler").parent().before(P).remove(),t()})):P.is(":radio")?((e=function(){var t=new O,e=D('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e).prependTo(e),P.is(":checked")&&e.addClass("checked"),P.is(":disabled")&&e.addClass("disabled"),D.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return D(this).find(t).length===t.length})},D.fn.commonParent=function(){return D(this).commonParents().first()},e.click(function(t){t.preventDefault(),P.triggerHandler("click"),e.is(".disabled")||((t=D('input[name="'+P.attr("name")+'"]')).commonParent().find(t).prop("checked",!1).parent().removeClass("checked"),P.prop("checked",!0).parent().addClass("checked"),P.focus().change())}),P.closest("label").add('label[for="'+P.attr("id")+'"]').on("click.styler",function(t){D(t.target).is("a")||D(t.target).closest(e).length||(e.triggerHandler("click"),t.preventDefault())}),P.on("change.styler",function(){P.parent().addClass("checked")}).on("focus.styler",function(){e.is(".disabled")||e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")})})(),P.on("refresh",function(){P.closest("label").add('label[for="'+P.attr("id")+'"]').off(".styler"),P.off(".styler").parent().before(P).remove(),e()})):P.is(":file")?((i=function(){var t=new O,n=P.data("placeholder");void 0===n&&(n=L.filePlaceholder);var e=P.data("browse");void 0!==e&&""!==e||(e=L.fileBrowse);var r=D('<div class="jq-file"><div class="jq-file__name">'+n+'</div><div class="jq-file__browse">'+e+"</div></div>").attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(r).appendTo(r),P.is(":disabled")&&r.addClass("disabled");var t=P.val(),o=D("div.jq-file__name",r);t&&o.text(t.replace(/.+[\\\/]/,"")),P.on("change.styler",function(){var t,e,i=P.val();P.is("[multiple]")&&(i="",0<(t=P[0].files.length)&&(i=e=(e=void 0===(e=P.data("number"))?L.fileNumber:e).replace("%s",t))),o.text(i.replace(/.+[\\\/]/,"")),""===i?(o.text(n),r.removeClass("changed")):r.addClass("changed")}).on("focus.styler",function(){r.addClass("focused")}).on("blur.styler",function(){r.removeClass("focused")}).on("click.styler",function(){r.removeClass("focused")})})(),P.on("refresh",function(){P.off(".styler").parent().before(P).remove(),i()})):P.is('input[type="number"]')?((n=function(){var t=new O,e=D('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e).prependTo(e).wrap('<div class="jq-number__field"></div>'),P.is(":disabled")&&e.addClass("disabled");var o,a,i=null,n=null;void 0!==P.attr("min")&&(o=P.attr("min")),void 0!==P.attr("max")&&(a=P.attr("max"));function r(t){var e,i=P.val();D.isNumeric(i)||(i=0,P.val("0")),t.is(".minus")?e=Number(i)-s:t.is(".plus")&&(e=Number(i)+s);var n=(s.toString().split(".")[1]||[]).length;if(0<n){for(var r="1";r.length<=n;)r+="0";e=Math.round(e*r)/r}D.isNumeric(o)&&D.isNumeric(a)?o<=e&&e<=a&&P.val(e):D.isNumeric(o)&&!D.isNumeric(a)?o<=e&&P.val(e):(D.isNumeric(o)||!D.isNumeric(a)||e<=a)&&P.val(e)}var s=void 0!==P.attr("step")&&D.isNumeric(P.attr("step"))?Number(P.attr("step")):Number(1);e.is(".disabled")||(e.on("mousedown","div.jq-number__spin",function(){var t=D(this);r(t),i=setTimeout(function(){n=setInterval(function(){r(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(i),clearInterval(n)}).on("mouseup","div.jq-number__spin",function(){P.change().trigger("input")}),P.on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}))})(),P.on("refresh",function(){P.off(".styler").closest(".jq-number").before(P).remove(),n()})):P.is("select")?((r=function(){function T(e){var i,n,r=e.prop("scrollHeight")-e.outerHeight();e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(t){i=t.originalEvent.detail<0||0<t.originalEvent.wheelDelta?1:-1,n=e.scrollTop(),(r<=n&&i<0||n<=0&&0<i)&&(t.stopPropagation(),t.preventDefault())})}var E=D("option",P),C="";function A(){for(var t=0;t<E.length;t++){var e=E.eq(t),i="",n="",r="",o="",a="",s="",l="",c="",h="";e.prop("selected")&&(n="selected sel"),e.is(":disabled")&&(n="disabled"),e.is(":selected:disabled")&&(n="selected sel disabled"),void 0!==e.attr("id")&&""!==e.attr("id")&&(o=' id="'+e.attr("id")+L.idSuffix+'"'),void 0!==e.attr("title")&&""!==E.attr("title")&&(a=' title="'+e.attr("title")+'"'),void 0!==e.attr("class")&&(l=" "+e.attr("class"),h=' data-jqfs-class="'+e.attr("class")+'"');var u,d=e.data();for(u in d)""!==d[u]&&(s+=" data-"+u+'="'+d[u]+'"');i="<li"+h+s+(r=n+l!==""?' class="'+n+l+'"':r)+a+o+">"+e.html()+"</li>",e.parent().is("optgroup")&&(i="<li"+h+s+' class="'+n+l+" option"+(c=void 0!==e.parent().attr("class")?" "+e.parent().attr("class"):c)+'"'+a+o+">"+e.html()+"</li>",e.is(":first-child")&&(i='<li class="optgroup'+c+'">'+e.parent().attr("label")+"</li>"+i)),C+=i}}function t(){var t=new O,e="",i=P.data("placeholder"),n=P.data("search"),r=P.data("search-limit"),o=P.data("search-not-found"),a=P.data("search-placeholder"),s=P.data("smart-positioning");void 0===i&&(i=L.selectPlaceholder),void 0!==n&&""!==n||(n=L.selectSearch),void 0!==r&&""!==r||(r=L.selectSearchLimit),void 0!==o&&""!==o||(o=L.selectSearchNotFound),void 0===a&&(a=L.selectSearchPlaceholder),void 0!==s&&""!==s||(s=L.selectSmartPositioning);var l=D('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(l).prependTo(l);var c=0<(c=l.css("z-index"))?c:1,h=D("div.jq-selectbox__select",l),u=D("div.jq-selectbox__select-text",l),t=E.filter(":selected");A();var d=D('<div class="jq-selectbox__dropdown">'+(e=n?'<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+a+'"></div><div class="jq-selectbox__not-found">'+o+"</div>":e)+"<ul>"+C+"</ul></div>");l.append(d);var p=D("ul",d),f=D("li",d),m=D("input",d),g=D("div.jq-selectbox__not-found",d).hide();f.length<r&&m.parent().hide(),""===E.first().text()&&E.first().is(":selected")&&!1!==i?u.text(i).addClass("placeholder"):u.text(t.text());var v=0,y=0;f.css({display:"inline-block"}),f.each(function(){var t=D(this);t.innerWidth()>v&&(v=t.innerWidth(),y=t.width())}),f.css({display:""}),u.is(".placeholder")&&u.width()>v?u.width(u.width()):(b=(S=l.clone().appendTo("body").width("auto")).outerWidth(),S.remove(),b==l.outerWidth()&&u.width(y)),v>l.width()&&d.width(v),""===E.first().text()&&""!==P.data("placeholder")&&f.first().hide();var b,x=l.outerHeight(!0),w=m.parent().outerHeight(!0)||0,_=p.css("max-height"),S=f.filter(".selected");S.length<1&&f.first().addClass("selected sel"),void 0===f.data("li-height")&&(b=f.outerHeight(),!1!==i&&(b=f.eq(1).outerHeight()),f.data("li-height",b));var M=d.css("top");"auto"==d.css("left")&&d.css({left:0}),"auto"==d.css("top")&&(d.css({top:x}),M=x),d.hide(),S.length&&(E.first().text()!=t.text()&&l.addClass("changed"),l.data("jqfs-class",S.data("jqfs-class")),l.addClass(S.data("jqfs-class"))),P.is(":disabled")?l.addClass("disabled"):(h.click(function(){var e,i,n,r,t,o,a;D("div.jq-selectbox").filter(".opened").length&&L.onSelectClosed.call(D("div.jq-selectbox").filter(".opened")),P.focus(),R||(e=D(window),i=f.data("li-height"),n=l.offset().top,r=e.height()-x-(n-e.scrollTop()),void 0!==(a=P.data("visible-options"))&&""!==a||(a=L.selectVisibleOptions),t=5*i,o=i*a,0<a&&a<6&&(t=o),0===a&&(o="auto"),a=function(){d.height("auto").css({bottom:"auto",top:M});function t(){p.css("max-height",Math.floor((r-20-w)/i)*i)}t(),p.css("max-height",o),"none"!=_&&p.css("max-height",_),r<d.outerHeight()+20&&t()},!0===s||1===s?t+w+20<r?(a(),l.removeClass("dropup").addClass("dropdown")):(function(){d.height("auto").css({top:"auto",bottom:M});function t(){p.css("max-height",Math.floor((n-e.scrollTop()-20-w)/i)*i)}t(),p.css("max-height",o),"none"!=_&&p.css("max-height",_),n-e.scrollTop()-20<d.outerHeight()+20&&t()}(),l.removeClass("dropdown").addClass("dropup")):!1===s||0===s?t+w+20<r&&(a(),l.removeClass("dropup").addClass("dropdown")):(d.height("auto").css({bottom:"auto",top:M}),p.css("max-height",o),"none"!=_&&p.css("max-height",_)),l.offset().left+d.outerWidth()>e.width()&&d.css({left:"auto",right:0}),D("div.jqselect").css({zIndex:c-1}).removeClass("opened"),l.css({zIndex:c}),d.is(":hidden")?(D("div.jq-selectbox__dropdown:visible").hide(),d.show(),l.addClass("opened focused"),L.onSelectOpened.call(l)):(d.hide(),l.removeClass("opened dropup dropdown"),D("div.jq-selectbox").filter(".opened").length&&L.onSelectClosed.call(l)),m.length&&(m.val("").keyup(),g.hide(),m.keyup(function(){var t=D(this).val();f.each(function(){D(this).html().match(new RegExp(".*?"+t+".*?","i"))?D(this).show():D(this).hide()}),""===E.first().text()&&""!==P.data("placeholder")&&f.first().hide(),f.filter(":visible").length<1?g.show():g.hide()})),f.filter(".selected").length&&(""===P.val()?p.scrollTop(0):(p.innerHeight()/i%2!=0&&(i/=2),p.scrollTop(p.scrollTop()+f.filter(".selected").position().top-p.innerHeight()/2+i))),T(p))}),f.hover(function(){D(this).siblings().removeClass("selected")}),f.filter(".selected").text(),f.filter(":not(.disabled):not(.optgroup)").click(function(){P.focus();var t,e=D(this),i=e.text();e.is(".selected")||(t=e.index(),t-=e.prevAll(".optgroup").length,e.addClass("selected sel").siblings().removeClass("selected sel"),E.prop("selected",!1).eq(t).prop("selected",!0),u.text(i),l.data("jqfs-class")&&l.removeClass(l.data("jqfs-class")),l.data("jqfs-class",e.data("jqfs-class")),l.addClass(e.data("jqfs-class")),P.change()),d.hide(),l.removeClass("opened dropup dropdown"),L.onSelectClosed.call(l)}),d.mouseout(function(){D("li.sel",d).addClass("selected")}),P.on("change.styler",function(){u.text(E.filter(":selected").text()).removeClass("placeholder"),f.removeClass("selected sel").not(".optgroup").eq(P[0].selectedIndex).addClass("selected sel"),E.first().text()!=f.filter(".selected").text()?l.addClass("changed"):l.removeClass("changed")}).on("focus.styler",function(){l.addClass("focused"),D("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){l.removeClass("focused")}).on("keydown.styler keyup.styler",function(t){var e=f.data("li-height");""===P.val()?u.text(i).addClass("placeholder"):u.text(E.filter(":selected").text()),f.removeClass("selected sel").not(".optgroup").eq(P[0].selectedIndex).addClass("selected sel"),38!=t.which&&37!=t.which&&33!=t.which&&36!=t.which||(""===P.val()?p.scrollTop(0):p.scrollTop(p.scrollTop()+f.filter(".selected").position().top)),40!=t.which&&39!=t.which&&34!=t.which&&35!=t.which||p.scrollTop(p.scrollTop()+f.filter(".selected").position().top-p.innerHeight()+e),13==t.which&&(t.preventDefault(),d.hide(),l.removeClass("opened dropup dropdown"),L.onSelectClosed.call(l))}).on("keydown.styler",function(t){32==t.which&&(t.preventDefault(),h.click())}),I.registered||(D(document).on("click",I),I.registered=!0))}P.is("[multiple]")?o||R||function(){var t=new O,e=D('<div class="jq-select-multiple jqselect"></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e),A(),e.append("<ul>"+C+"</ul>");var i=D("ul",e),r=D("li",e),n=P.attr("size"),t=i.outerHeight(),o=r.outerHeight();void 0!==n&&0<n?i.css({height:o*n}):i.css({height:4*o}),t>e.height()&&(i.css("overflowY","scroll"),T(i),r.filter(".selected").length&&i.scrollTop(i.scrollTop()+r.filter(".selected").position().top)),P.prependTo(e),P.is(":disabled")?(e.addClass("disabled"),E.each(function(){D(this).is(":selected")&&r.eq(D(this).index()).addClass("selected")})):(r.filter(":not(.disabled):not(.optgroup)").click(function(t){P.focus();var e,i,n=D(this);t.ctrlKey||t.metaKey||n.addClass("selected"),t.shiftKey||n.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||n.siblings().removeClass("selected first"),(t.ctrlKey||t.metaKey)&&(n.is(".selected")?n.removeClass("selected first"):n.addClass("selected first"),n.siblings().removeClass("first")),t.shiftKey&&(i=e=!1,n.siblings().removeClass("selected").siblings(".first").addClass("selected"),n.prevAll().each(function(){D(this).is(".first")&&(e=!0)}),n.nextAll().each(function(){D(this).is(".first")&&(i=!0)}),e&&n.prevAll().each(function(){return!D(this).is(".selected")&&void D(this).not(".disabled, .optgroup").addClass("selected")}),i&&n.nextAll().each(function(){return!D(this).is(".selected")&&void D(this).not(".disabled, .optgroup").addClass("selected")}),1==r.filter(".selected").length&&n.addClass("first")),E.prop("selected",!1),r.filter(".selected").each(function(){var t=D(this),e=t.index();t.is(".option")&&(e-=t.prevAll(".optgroup").length),E.eq(e).prop("selected",!0)}),P.change()}),E.each(function(t){D(this).data("optionIndex",t)}),P.on("change.styler",function(){r.removeClass("selected");var e=[];E.filter(":selected").each(function(){e.push(D(this).data("optionIndex"))}),r.not(".optgroup").filter(function(t){return-1<D.inArray(t,e)}).addClass("selected")}).on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}),t>e.height()&&P.on("keydown.styler",function(t){38!=t.which&&37!=t.which&&33!=t.which||i.scrollTop(i.scrollTop()+r.filter(".selected").position().top-o),40!=t.which&&39!=t.which&&34!=t.which||i.scrollTop(i.scrollTop()+r.filter(".selected:last").position().top-i.innerHeight()+2*o)}))}():t()})(),P.on("refresh",function(){P.off(".styler").parent().before(P).remove(),r()})):P.is(":reset")&&P.on("click",function(){setTimeout(function(){P.closest("form").find("input, select").trigger("refresh")},1)})},destroy:function(){var t=D(this.element);t.is(":checkbox")||t.is(":radio")?(t.removeData("_"+r).off(".styler refresh").removeAttr("style").parent().before(t).remove(),t.closest("label").add('label[for="'+t.attr("id")+'"]').off(".styler")):t.is('input[type="number"]')?t.removeData("_"+r).off(".styler refresh").closest(".jq-number").before(t).remove():(t.is(":file")||t.is("select"))&&t.removeData("_"+r).off(".styler refresh").removeAttr("style").parent().before(t).remove()}},D.fn[r]=function(e){var i,n=arguments;return void 0===e||"object"==typeof e?(this.each(function(){D.data(this,"_"+r)||D.data(this,"_"+r,new o(this,e))}).promise().done(function(){var t=D(this[0]).data("_"+r);t&&t.options.onFormStyled.call()}),this):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=D.data(this,"_"+r);t instanceof o&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(n,1)))}),void 0!==i?i:this):void 0},I.registered=!1}),function(t,e){"function"==typeof define&&define.amd?define(["module","exports"],e):"undefined"!=typeof exports?e(module,exports):(e(e={exports:{}},e.exports),t.WOW=e.exports)}(this,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){return 0<=e.indexOf(t)}function a(t,e,i){null!=t.addEventListener?t.addEventListener(e,i,!1):null!=t.attachEvent?t.attachEvent("on"+e,i):t[e]=i}function s(t,e,i){null!=t.removeEventListener?t.removeEventListener(e,i,!1):null!=t.detachEvent?t.detachEvent("on"+e,i):delete t[e]}var l=window.WeakMap||window.MozWeakMap||(n(c,[{key:"get",value:function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]===t)return this.values[e]}},{key:"set",value:function(t,e){for(var i=0;i<this.keys.length;i++)if(this.keys[i]===t)return this.values[i]=e,this;return this.keys.push(t),this.values.push(e),this}}]),c);function c(){i(this,c),this.keys=[],this.values=[]}var h=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver||(n(u,[{key:"observe",value:function(){}}]),u.notSupported=!0,u);function u(){i(this,u),"undefined"!=typeof console&&null!==console&&(console.warn("MutationObserver is not supported by your browser."),console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content."))}var d=window.getComputedStyle||function(i){var n=/(\-([a-z]){1})/g;return{getPropertyValue:function(t){n.test(t="float"===t?"styleFloat":t)&&t.replace(n,function(t,e){return e.toUpperCase()});var e=i.currentStyle;return(null!=e?e[t]:void 0)||null}}},n=(n(p,[{key:"init",value:function(){this.element=window.document.documentElement,o(document.readyState,["interactive","complete"])?this.start():a(document,"DOMContentLoaded",this.start),this.finished=[]}},{key:"start",value:function(){var o=this;if(this.stopped=!1,this.boxes=[].slice.call(this.element.querySelectorAll("."+this.config.boxClass)),this.all=this.boxes.slice(0),this.boxes.length)if(this.disabled())this.resetStyle();else for(var t=0;t<this.boxes.length;t++){var e=this.boxes[t];this.applyStyle(e,!0)}this.disabled()||(a(this.config.scrollContainer||window,"scroll",this.scrollHandler),a(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live&&new h(function(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.addedNodes.length;n++){var r=i.addedNodes[n];o.doSync(r)}}).observe(document.body,{childList:!0,subtree:!0})}},{key:"stop",value:function(){this.stopped=!0,s(this.config.scrollContainer||window,"scroll",this.scrollHandler),s(window,"resize",this.scrollHandler),null!=this.interval&&clearInterval(this.interval)}},{key:"sync",value:function(){h.notSupported&&this.doSync(this.element)}},{key:"doSync",value:function(t){if(1===(t=null==t?this.element:t).nodeType)for(var e=(t=t.parentNode||t).querySelectorAll("."+this.config.boxClass),i=0;i<e.length;i++){var n=e[i];o(n,this.all)||(this.boxes.push(n),this.all.push(n),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(n,!0),this.scrolled=!0)}}},{key:"show",value:function(t){var e,i;return this.applyStyle(t),t.className=t.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(t),e=t,i=this.wowEvent,null!=e.dispatchEvent?e.dispatchEvent(i):i in(null!=e)?e[i]():"on"+i in(null!=e)&&e["on"+i](),a(t,"animationend",this.resetAnimation),a(t,"oanimationend",this.resetAnimation),a(t,"webkitAnimationEnd",this.resetAnimation),a(t,"MSAnimationEnd",this.resetAnimation),t}},{key:"applyStyle",value:function(t,e){var i=this,n=t.getAttribute("data-wow-duration"),r=t.getAttribute("data-wow-delay"),o=t.getAttribute("data-wow-iteration");return this.animate(function(){return i.customStyle(t,e,n,r,o)})}},{key:"resetStyle",value:function(){for(var t=0;t<this.boxes.length;t++)this.boxes[t].style.visibility="visible"}},{key:"resetAnimation",value:function(t){0<=t.type.toLowerCase().indexOf("animationend")&&((t=t.target||t.srcElement).className=t.className.replace(this.config.animateClass,"").trim())}},{key:"customStyle",value:function(t,e,i,n,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",i&&this.vendorSet(t.style,{animationDuration:i}),n&&this.vendorSet(t.style,{animationDelay:n}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t}},{key:"vendorSet",value:function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t[""+i]=n;for(var r=0;r<this.vendors.length;r++)t[""+this.vendors[r]+i.charAt(0).toUpperCase()+i.substr(1)]=n}}},{key:"vendorCSS",value:function(t,e){for(var i=d(t),n=i.getPropertyCSSValue(e),r=0;r<this.vendors.length;r++)var o=this.vendors[r],n=n||i.getPropertyCSSValue("-"+o+"-"+e);return n}},{key:"animationName",value:function(e){var i=void 0;try{i=this.vendorCSS(e,"animation-name").cssText}catch(t){i=d(e).getPropertyValue("animation-name")}return"none"===i?"":i}},{key:"cacheAnimationName",value:function(t){return this.animationNameCache.set(t,this.animationName(t))}},{key:"cachedAnimationName",value:function(t){return this.animationNameCache.get(t)}},{key:"scrollHandler",value:function(){this.scrolled=!0}},{key:"scrollCallback",value:function(){if(this.scrolled){this.scrolled=!1;for(var t=[],e=0;e<this.boxes.length;e++){var i=this.boxes[e];i&&(this.isVisible(i)?this.show(i):t.push(i))}this.boxes=t,this.boxes.length||this.config.live||this.stop()}}},{key:"offsetTop",value:function(t){for(;void 0===t.offsetTop;)t=t.parentNode;for(var e=t.offsetTop;t.offsetParent;)e+=(t=t.offsetParent).offsetTop;return e}},{key:"isVisible",value:function(t){var e=t.getAttribute("data-wow-offset")||this.config.offset,i=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,n=i+Math.min(this.element.clientHeight,"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight)-e,e=this.offsetTop(t),t=e+t.clientHeight;return e<=n&&i<=t}},{key:"disabled",value:function(){return!this.config.mobile&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}]),p);function p(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,p),this.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},this.animate="requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()},this.vendors=["moz","webkit"],this.start=this.start.bind(this),this.resetAnimation=this.resetAnimation.bind(this),this.scrollHandler=this.scrollHandler.bind(this),this.scrollCallback=this.scrollCallback.bind(this),this.scrolled=!0,this.config=function(t,e){for(var i in e){var n;null==t[i]&&(n=e[i],t[i]=n)}return t}(t,this.defaults),null!=t.scrollContainer&&(this.config.scrollContainer=document.querySelector(t.scrollContainer)),this.animationNameCache=new l,this.wowEvent=function(t,e,i,n){var r=!(arguments.length<=1||void 0===e)&&e,e=!(arguments.length<=2||void 0===i)&&i,i=arguments.length<=3||void 0===n?null:n,n=void 0;return null!=document.createEvent?(n=document.createEvent("CustomEvent")).initCustomEvent(t,r,e,i):null!=document.createEventObject?(n=document.createEventObject()).eventType=t:n.eventName=t,n}(this.config.boxClass)}e.default=n,t.exports=e.default}),function(){"use strict";function e(t){if(void 0===t)throw new Error('Pathformer [constructor]: "element" parameter is required');if(t.constructor===String&&!(t=document.getElementById(t)))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(!(t instanceof window.SVGElement||t instanceof window.SVGGElement||/^svg$/i.test(t.nodeName)))throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=t,this.scan(t)}var n,i,t,u;function r(t,e,i){n(),this.isReady=!1,this.setElement(t,e),this.setOptions(e),this.setCallback(i),this.isReady&&this.init()}e.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],e.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],e.prototype.scan=function(t){for(var e,i,n=t.querySelectorAll(this.TYPES.join(",")),r=0;r<n.length;r++)i=(0,this[(e=n[r]).tagName.toLowerCase()+"ToPath"])(this.parseAttr(e.attributes)),i=this.pathMaker(e,i),e.parentNode.replaceChild(i,e)},e.prototype.lineToPath=function(t){var e={},i=t.x1||0,n=t.y1||0,r=t.x2||0,t=t.y2||0;return e.d="M"+i+","+n+"L"+r+","+t,e},e.prototype.rectToPath=function(t){var e,i={},n=parseFloat(t.x)||0,r=parseFloat(t.y)||0,o=parseFloat(t.width)||0,a=parseFloat(t.height)||0;return t.rx||t.ry?(e=parseInt(t.rx,10)||-1,t=parseInt(t.ry,10)||-1,e=Math.min(Math.max(e<0?t:e,0),o/2),t=Math.min(Math.max(t<0?e:t,0),a/2),i.d="M "+(n+e)+","+r+" L "+(n+o-e)+","+r+" A "+e+","+t+",0,0,1,"+(n+o)+","+(r+t)+" L "+(n+o)+","+(r+a-t)+" A "+e+","+t+",0,0,1,"+(n+o-e)+","+(r+a)+" L "+(n+e)+","+(r+a)+" A "+e+","+t+",0,0,1,"+n+","+(r+a-t)+" L "+n+","+(r+t)+" A "+e+","+t+",0,0,1,"+(n+e)+","+r):i.d="M"+n+" "+r+" L"+(n+o)+" "+r+" L"+(n+o)+" "+(r+a)+" L"+n+" "+(r+a)+" Z",i},e.prototype.polylineToPath=function(t){var e,i={},n=t.points.trim().split(" ");if(-1===t.points.indexOf(",")){for(var r=[],o=0;o<n.length;o+=2)r.push(n[o]+","+n[o+1]);n=r}for(e="M"+n[0],o=1;o<n.length;o++)-1!==n[o].indexOf(",")&&(e+="L"+n[o]);return i.d=e,i},e.prototype.polygonToPath=function(t){t=e.prototype.polylineToPath(t);return t.d+="Z",t},e.prototype.ellipseToPath=function(t){var e={},i=parseFloat(t.rx)||0,n=parseFloat(t.ry)||0,r=parseFloat(t.cx)||0,o=parseFloat(t.cy)||0,a=r-i,t=o,r=parseFloat(r)+parseFloat(i);return e.d="M"+a+","+t+"A"+i+","+n+" 0,1,1 "+r+","+o+"A"+i+","+n+" 0,1,1 "+a+","+o,e},e.prototype.circleToPath=function(t){var e={},i=parseFloat(t.r)||0,n=parseFloat(t.cx)||0,r=parseFloat(t.cy)||0,o=n-i,t=r,n=parseFloat(n)+parseFloat(i);return e.d="M"+o+","+t+"A"+i+","+i+" 0,1,1 "+n+","+r+"A"+i+","+i+" 0,1,1 "+o+","+r,e},e.prototype.pathMaker=function(t,e){for(var i,n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=0;r<t.attributes.length;r++)i=t.attributes[r],-1===this.ATTR_WATCH.indexOf(i.name)&&n.setAttribute(i.name,i.value);for(r in e)n.setAttribute(r,e[r]);return n},e.prototype.parseAttr=function(t){for(var e,i={},n=0;n<t.length;n++){if(e=t[n],-1!==this.ATTR_WATCH.indexOf(e.name)&&-1!==e.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");i[e.name]=e.value}return i},r.LINEAR=function(t){return t},r.EASE=function(t){return-Math.cos(t*Math.PI)/2+.5},r.EASE_OUT=function(t){return 1-Math.pow(1-t,3)},r.EASE_IN=function(t){return Math.pow(t,3)},r.EASE_OUT_BOUNCE=function(t){var e=1-Math.cos(t*(.5*Math.PI)),e=Math.pow(e,1.5),t=Math.pow(1-t,2);return 1-t+(1-Math.abs(Math.cos(e*(2.5*Math.PI))))*t},r.prototype.setElement=function(e,i){if(void 0===e)throw new Error('Vivus [constructor]: "element" parameter is required');if(e.constructor===String&&!(e=document.getElementById(e)))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(this.parentEl=e,i&&i.file){var n=this,t=function(){var t=document.createElement("div");t.innerHTML=this.responseText;t=t.querySelector("svg");if(!t)throw new Error("Vivus [load]: Cannot find the SVG in the loaded file : "+i.file);n.el=t,n.el.setAttribute("width","100%"),n.el.setAttribute("height","100%"),n.parentEl.appendChild(n.el),n.isReady=!0,n.init(),n=null},r=new window.XMLHttpRequest;return r.addEventListener("load",t),r.open("GET",i.file),void r.send()}switch(e.constructor){case window.SVGSVGElement:case window.SVGElement:case window.SVGGElement:this.el=e,this.isReady=!0;break;case window.HTMLObjectElement:n=this,(t=function(t){if(!n.isReady){if(n.el=e.contentDocument&&e.contentDocument.querySelector("svg"),!n.el&&t)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");n.el&&(e.getAttribute("built-by-vivus")&&(n.parentEl.insertBefore(n.el,e),n.parentEl.removeChild(e),n.el.setAttribute("width","100%"),n.el.setAttribute("height","100%")),n.isReady=!0,n.init(),n=null)}})()||e.addEventListener("load",t);break;default:throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')}},r.prototype.setOptions=function(t){var e=["delayed","sync","async","nsync","oneByOne","scenario","scenario-sync"],i=["inViewport","manual","autostart"];if(void 0!==t&&t.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if((t=t||{}).type&&-1===e.indexOf(t.type))throw new Error("Vivus [constructor]: "+t.type+" is not an existing animation `type`");if(this.type=t.type||e[0],t.start&&-1===i.indexOf(t.start))throw new Error("Vivus [constructor]: "+t.start+" is not an existing `start` option");if(this.start=t.start||i[0],this.isIE=-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident/")||-1!==window.navigator.userAgent.indexOf("Edge/"),this.duration=u(t.duration,120),this.delay=u(t.delay,null),this.dashGap=u(t.dashGap,1),this.forceRender=t.hasOwnProperty("forceRender")?!!t.forceRender:this.isIE,this.reverseStack=!!t.reverseStack,this.selfDestroy=!!t.selfDestroy,this.onReady=t.onReady,this.map=[],this.frameLength=this.currentFrame=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!t.hasOwnProperty("ignoreInvisible")&&!!t.ignoreInvisible,this.animTimingFunction=t.animTimingFunction||r.LINEAR,this.pathTimingFunction=t.pathTimingFunction||r.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},r.prototype.setCallback=function(t){if(t&&t.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=t||function(){}},r.prototype.mapping=function(){var t,e,i,n,r=i=n=0,o=this.el.querySelectorAll("path");for(l=!1,t=0;t<o.length;t++){var a,s,l,c,h=o[t];this.isInvisible(h)||(c={el:h,length:0,startAt:0,duration:0,isResizeSensitive:!1},"non-scaling-stroke"===h.getAttribute("vector-effect")?(a=h.getBoundingClientRect(),s=h.getBBox(),s=Math.max(a.width/s.width,a.height/s.height),l=c.isResizeSensitive=!0):s=1,c.length=Math.ceil(h.getTotalLength()*s),isNaN(c.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",h):(this.map.push(c),h.style.strokeDasharray=c.length+" "+(c.length+2*this.dashGap),h.style.strokeDashoffset=c.length+this.dashGap,c.length+=this.dashGap,i+=c.length,this.renderPath(t)))}for(l&&console.warn("Vivus: this SVG contains non-scaling-strokes. You should call instance.recalc() when the SVG is resized or you will encounter unwanted behaviour. See https://github.com/maxwellito/vivus#non-scaling for more info."),i=0===i?1:i,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(1<o.length?o.length-1:1),this.reverseStack&&this.map.reverse(),t=0;t<this.map.length;t++){switch(c=this.map[t],this.type){case"delayed":c.startAt=this.delayUnit*t,c.duration=this.duration-this.delay;break;case"oneByOne":c.startAt=n/i*this.duration,c.duration=c.length/i*this.duration;break;case"sync":case"async":case"nsync":c.startAt=0,c.duration=this.duration;break;case"scenario-sync":h=c.el,e=this.parseAttr(h),c.startAt=r+(u(e["data-delay"],this.delayUnit)||0),c.duration=u(e["data-duration"],this.duration),r=void 0!==e["data-async"]?c.startAt:c.startAt+c.duration,this.frameLength=Math.max(this.frameLength,c.startAt+c.duration);break;case"scenario":h=c.el,e=this.parseAttr(h),c.startAt=u(e["data-start"],this.delayUnit)||0,c.duration=u(e["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,c.startAt+c.duration)}n+=c.length,this.frameLength=this.frameLength||this.duration}},r.prototype.recalc=function(){this.mustRecalcScale||(this.mustRecalcScale=i(function(){this.performLineRecalc()}.bind(this)))},r.prototype.performLineRecalc=function(){for(var t,e,i,n,r=0;r<this.map.length;r++)(t=this.map[r]).isResizeSensitive&&(i=(e=t.el).getBoundingClientRect(),n=e.getBBox(),n=Math.max(i.width/n.width,i.height/n.height),t.length=Math.ceil(e.getTotalLength()*n),e.style.strokeDasharray=t.length+" "+(t.length+2*this.dashGap));this.trace(),this.mustRecalcScale=null},r.prototype.draw=function(){var t=this;if(this.currentFrame+=this.speed,this.currentFrame<=0)this.stop(),this.reset();else{if(!(this.currentFrame>=this.frameLength))return this.trace(),void(this.handle=i(function(){t.draw()}));this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy()}this.callback(this),this.instanceCallback&&(this.instanceCallback(this),this.instanceCallback=null)},r.prototype.trace=function(){for(var t,e,i=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,n=0;n<this.map.length;n++)t=(i-(e=this.map[n]).startAt)/e.duration,t=this.pathTimingFunction(Math.max(0,Math.min(1,t))),e.progress!==t&&(e.progress=t,e.el.style.strokeDashoffset=Math.floor(e.length*(1-t)),this.renderPath(n))},r.prototype.renderPath=function(t){var e;this.forceRender&&this.map&&this.map[t]&&(t=(e=this.map[t]).el.cloneNode(!0),e.el.parentNode.replaceChild(t,e.el),e.el=t)},r.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new e(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},r.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var t=this,e=function(){t.isInViewport(t.parentEl,1)&&(t.play(),window.removeEventListener("scroll",e))};window.addEventListener("scroll",e),e()}},r.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},r.prototype.reset=function(){return this.setFrameProgress(0)},r.prototype.finish=function(){return this.setFrameProgress(1)},r.prototype.setFrameProgress=function(t){return t=Math.min(1,Math.max(0,t)),this.currentFrame=Math.round(this.frameLength*t),this.trace(),this},r.prototype.play=function(t,e){if(this.instanceCallback=null,t&&"function"==typeof t)this.instanceCallback=t,t=null;else if(t&&"number"!=typeof t)throw new Error("Vivus [play]: invalid speed");return e&&"function"==typeof e&&!this.instanceCallback&&(this.instanceCallback=e),this.speed=t||1,this.handle||this.draw(),this},r.prototype.stop=function(){return this.handle&&(t(this.handle),this.handle=null),this},r.prototype.destroy=function(){var t,e;for(this.stop(),t=0;t<this.map.length;t++)(e=this.map[t]).el.style.strokeDashoffset=null,e.el.style.strokeDasharray=null,this.renderPath(t)},r.prototype.isInvisible=function(t){var e=t.getAttribute("data-ignore");return null!==e?"false"!==e:!!this.ignoreInvisible&&(!(t=t.getBoundingClientRect()).width&&!t.height)},r.prototype.parseAttr=function(t){var e,i={};if(t&&t.attributes)for(var n=0;n<t.attributes.length;n++)i[(e=t.attributes[n]).name]=e.value;return i},r.prototype.isInViewport=function(t,e){var i=this.scrollY(),n=i+this.getViewportH(),r=t.getBoundingClientRect(),t=r.height,r=i+r.top;return r+t*(e=e||0)<=n&&i<=r+t},r.prototype.getViewportH=function(){var t=this.docElem.clientHeight,e=window.innerHeight;return t<e?e:t},r.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},n=function(){r.prototype.docElem||(r.prototype.docElem=window.document.documentElement,i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)})},u=function(t,e){t=parseInt(t,10);return 0<=t?t:e},"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof exports?module.exports=r:window.Vivus=r}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,function(t){function e(){}function wt(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}function g(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function d(t,e,i,n,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:No++}),this.uuid=Do.generateUUID(),this.name="",this.image=void 0!==t?t:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:d.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:1001,this.wrapT=void 0!==n?n:1001,this.magFilter=void 0!==r?r:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:1023,this.internalFormat=null,this.type=void 0!==s?s:1009,this.offset=new wt(0,0),this.repeat=new wt(1,1),this.center=new wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new g,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:3e3,this.version=0,this.onUpdate=null}function _t(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.x=t=void 0===t?0:t,this.y=e,this.z=i,this.w=n}function E(t,e,i){this.width=t,this.height=e,this.scissor=new _t(0,0,t,e),this.scissorTest=!1,this.viewport=new _t(0,0,t,e),this.texture=new d(void 0,(i=i||{}).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function i(t,e,i){E.call(this,t,e,i),this.samples=4}function p(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this._x=t=void 0===t?0:t,this._y=e,this._z=i,this._w=n}function St(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.z=i}function Mt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function r(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=r.DefaultOrder),this._x=t=void 0===t?0:t,this._y=e,this._z=i,this._order=n}function o(){this.mask=1}function f(){Object.defineProperty(this,"id",{value:Xo++}),this.uuid=Do.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=f.DefaultUp.clone();var t=new St,e=new r,i=new p,n=new St(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Mt},normalMatrix:{value:new g}}),this.matrix=new Mt,this.matrixWorld=new Mt,this.matrixAutoUpdate=f.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new o,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function c(){f.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function n(t,e){this.min=void 0!==t?t:new St(1/0,1/0,1/0),this.max=void 0!==e?e:new St(-1/0,-1/0,-1/0)}function a(t,e,i,n,r){for(var o=0,a=t.length-3;o<=a;o+=3){ba.fromArray(t,o);var s=r.x*Math.abs(ba.x)+r.y*Math.abs(ba.y)+r.z*Math.abs(ba.z),l=e.dot(ba),c=i.dot(ba),h=n.dot(ba);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}function m(t,e){this.center=void 0!==t?t:new St,this.radius=void 0!==e?e:-1}function s(t,e){this.origin=void 0!==t?t:new St,this.direction=void 0!==e?e:new St(0,0,-1)}function v(t,e){this.normal=void 0!==t?t:new St(1,0,0),this.constant=void 0!==e?e:0}function x(t,e,i){this.a=void 0!==t?t:new St,this.b=void 0!==e?e:new St,this.c=void 0!==i?i:new St}function y(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function l(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function h(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function u(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function b(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new St,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function w(){Object.defineProperty(this,"id",{value:Va++}),this.uuid=Do.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function _(t){w.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(t)}function C(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function S(t,e,i){C.call(this,new Int8Array(t),e,i)}function M(t,e,i){C.call(this,new Uint8Array(t),e,i)}function T(t,e,i){C.call(this,new Uint8ClampedArray(t),e,i)}function A(t,e,i){C.call(this,new Int16Array(t),e,i)}function P(t,e,i){C.call(this,new Uint16Array(t),e,i)}function L(t,e,i){C.call(this,new Int32Array(t),e,i)}function R(t,e,i){C.call(this,new Uint32Array(t),e,i)}function O(t,e,i){C.call(this,new Float32Array(t),e,i)}function D(t,e,i){C.call(this,new Float64Array(t),e,i)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function k(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function N(){Object.defineProperty(this,"id",{value:qa+=2}),this.uuid=Do.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function F(t,e){f.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new N,this.material=void 0!==e?e:new _,this.updateMorphTargets()}function B(t,e,i,n,r,o,a,s){return null===(1===e.side?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,2!==e.side,s))?null:(gs.copy(s),gs.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(gs))<i.near||e>i.far?null:{distance:e,point:gs.clone(),object:t})}function z(t,e,i,n,r,o,a,s,l,c,h,u){if(ns.fromBufferAttribute(r,c),rs.fromBufferAttribute(r,h),os.fromBufferAttribute(r,u),r=t.morphTargetInfluences,e.morphTargets&&o&&r){cs.set(0,0,0),hs.set(0,0,0),us.set(0,0,0);for(var d=0,p=o.length;d<p;d++){var f=r[d],m=o[d];0!==f&&(as.fromBufferAttribute(m,c),ss.fromBufferAttribute(m,h),ls.fromBufferAttribute(m,u),a?(cs.addScaledVector(as,f),hs.addScaledVector(ss,f),us.addScaledVector(ls,f)):(cs.addScaledVector(as.sub(ns),f),hs.addScaledVector(ss.sub(rs),f),us.addScaledVector(ls.sub(os),f)))}ns.add(cs),rs.add(hs),os.add(us)}return t.isSkinnedMesh&&(t.boneTransform(c,ns),t.boneTransform(h,rs),t.boneTransform(u,os)),(t=B(t,e,i,n,ns,rs,os,ms))&&(s&&(ds.fromBufferAttribute(s,c),ps.fromBufferAttribute(s,h),fs.fromBufferAttribute(s,u),t.uv=x.getUV(ms,ns,rs,os,ds,ps,fs,new wt)),l&&(ds.fromBufferAttribute(l,c),ps.fromBufferAttribute(l,h),fs.fromBufferAttribute(l,u),t.uv2=x.getUV(ms,ns,rs,os,ds,ps,fs,new wt)),s=new b(c,h,u),x.getNormal(ns,rs,os,s.normal),t.face=s),t}function H(){Object.defineProperty(this,"id",{value:vs+=2}),this.uuid=Do.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function U(t,e,i,n,r,o){H.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new j(t,e,i,n,r,o)),this.mergeVertices()}function j(t,e,i,n,r,o){function a(t,e,i,n,r,o,a,s,l,c,h){var u=o/l,d=a/c,p=o/2,f=a/2,m=s/2;a=l+1;for(var g=c+1,v=o=0,y=new St,b=0;b<g;b++)for(var x=b*d-f,w=0;w<a;w++)y[t]=(w*u-p)*n,y[e]=x*r,y[i]=m,M.push(y.x,y.y,y.z),y[t]=0,y[e]=0,y[i]=0<s?1:-1,T.push(y.x,y.y,y.z),E.push(w/l),E.push(1-b/c),o+=1;for(t=0;t<c;t++)for(e=0;e<l;e++)n=C+(e+1)+a*(t+1),S.push(C+e+a*t,i=C+e+a*(t+1),r=C+(e+1)+a*t),S.push(i,n,r),v+=6;_.addGroup(A,v,h),A+=v,C+=o}void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=1),N.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var _=this;n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);var S=[],M=[],T=[],E=[],C=0,A=0;a("z","y","x",-1,-1,i,e,t,o,r,0),a("z","y","x",1,-1,i,e,-t,o,r,1),a("x","z","y",1,1,t,i,e,n,o,2),a("x","z","y",1,-1,t,i,-e,n,o,3),a("x","y","z",1,-1,t,e,i,n,r,4),a("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(S),this.setAttribute("position",new O(M,3)),this.setAttribute("normal",new O(T,3)),this.setAttribute("uv",new O(E,2))}function G(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var r=t[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[e][n]=r.clone():Array.isArray(r)?i[e][n]=r.slice():i[e][n]=r}return i}function V(t){for(var e={},i=0;i<t.length;i++){var n,r=G(t[i]);for(n in r)e[n]=r[n]}return e}function W(t){w.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function $(){f.call(this),this.type="Camera",this.matrixWorldInverse=new Mt,this.projectionMatrix=new Mt,this.projectionMatrixInverse=new Mt}function q(t,e,i,n){$.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function X(t,e,a){var o,s,l,c,h,u;f.call(this),this.type="CubeCamera",!0!==a.isWebGLCubeRenderTarget?console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."):(this.renderTarget=a,(o=new q(90,1,t,e)).layers=this.layers,o.up.set(0,-1,0),o.lookAt(new St(1,0,0)),this.add(o),(s=new q(90,1,t,e)).layers=this.layers,s.up.set(0,-1,0),s.lookAt(new St(-1,0,0)),this.add(s),(l=new q(90,1,t,e)).layers=this.layers,l.up.set(0,0,1),l.lookAt(new St(0,1,0)),this.add(l),(c=new q(90,1,t,e)).layers=this.layers,c.up.set(0,0,-1),c.lookAt(new St(0,-1,0)),this.add(c),(h=new q(90,1,t,e)).layers=this.layers,h.up.set(0,-1,0),h.lookAt(new St(0,0,1)),this.add(h),(u=new q(90,1,t,e)).layers=this.layers,u.up.set(0,-1,0),u.lookAt(new St(0,0,-1)),this.add(u),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.xr.enabled,n=t.getRenderTarget();t.xr.enabled=!1;var r=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,t.setRenderTarget(a,0),t.render(e,o),t.setRenderTarget(a,1),t.render(e,s),t.setRenderTarget(a,2),t.render(e,l),t.setRenderTarget(a,3),t.render(e,c),t.setRenderTarget(a,4),t.render(e,h),a.texture.generateMipmaps=r,t.setRenderTarget(a,5),t.render(e,u),t.setRenderTarget(n),t.xr.enabled=i},this.clear=function(t,e,i,n){for(var r=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,i,n);t.setRenderTarget(r)})}function Y(t,e,i){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=i),E.call(this,t,t,e)}function Tt(t,e,i,n,r,o,a,s,l,c,h,u){d.call(this,null,o,a,s,l,c,n,r,h,u),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Et(t,e,i,n,r,o){this.planes=[void 0!==t?t:new v,void 0!==e?e:new v,void 0!==i?i:new v,void 0!==n?n:new v,void 0!==r?r:new v,void 0!==o?o:new v]}function Ct(){function i(t,e){r(t,e),o=n.requestAnimationFrame(i)}var n=null,t=!1,r=null,o=null;return{start:function(){!0!==t&&null!==r&&(o=n.requestAnimationFrame(i),t=!0)},stop:function(){n.cancelAnimationFrame(o),t=!1},setAnimationLoop:function(t){r=t},setContext:function(t){n=t}}}function At(l,t){var c=t.isWebGL2,h=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),h.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=h.get(t);e&&(l.deleteBuffer(e.buffer),h.delete(t))},update:function(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var i,n,r,o,a,s=h.get(t);void 0===s?h.set(t,(n=e,r=(i=t).array,o=i.usage,a=l.createBuffer(),l.bindBuffer(n,a),l.bufferData(n,r,o),i.onUploadCallback(),n=5126,r instanceof Float32Array?n=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?n=5123:r instanceof Int16Array?n=5122:r instanceof Uint32Array?n=5125:r instanceof Int32Array?n=5124:r instanceof Int8Array?n=5120:r instanceof Uint8Array&&(n=5121),{buffer:a,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:i.version})):s.version<t.version&&(r=t.array,i=t.updateRange,l.bindBuffer(e,s.buffer),-1===i.count?l.bufferSubData(e,0,r):(c?l.bufferSubData(e,i.offset*r.BYTES_PER_ELEMENT,r,i.offset,i.count):l.bufferSubData(e,i.offset*r.BYTES_PER_ELEMENT,r.subarray(i.offset,i.offset+i.count)),i.count=-1),s.version=t.version)}}}function Z(t,e,i,n){H.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new J(t,e,i,n)),this.mergeVertices()}function J(t,e,i,n){N.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r=(t=t||1)/2,o=(e=e||1)/2,a=(i=Math.floor(i)||1)+1,s=(n=Math.floor(n)||1)+1,l=t/i,c=e/n;e=[],t=[];for(var h=[],u=[],d=0;d<s;d++)for(var p=d*c-o,f=0;f<a;f++)t.push(f*l-r,-p,0),h.push(0,0,1),u.push(f/i),u.push(1-d/n);for(r=0;r<n;r++)for(o=0;o<i;o++)l=o+1+a*(r+1),e.push(o+a*r,s=o+a*(r+1),c=o+1+a*r),e.push(s,l,c);this.setIndex(e),this.setAttribute("position",new O(t,3)),this.setAttribute("normal",new O(h,3)),this.setAttribute("uv",new O(u,2))}function Pt(r,i,o,n){function a(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,n)}var s,l,c=new y(0),h=0,u=null,d=0,p=null;return{getClearColor:function(){return c},setClearColor:function(t,e){c.set(t),a(c,h=void 0!==e?e:1)},getClearAlpha:function(){return h},setClearAlpha:function(t){a(c,h=t)},render:function(t,e,i,n){e=!0===e.isScene?e.background:null,null===(e=(i=(i=r.xr).getSession&&i.getSession())&&"additive"===i.environmentBlendMode?null:e)?a(c,h):e&&e.isColor&&(a(e,1),n=!0),(r.autoClear||n)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),e&&(e.isCubeTexture||e.isWebGLCubeRenderTarget||306===e.mapping)?(void 0===l&&((l=new F(new j(1,1,1),new W({name:"BackgroundCubeMaterial",uniforms:G(Es.cube.uniforms),vertexShader:Es.cube.vertexShader,fragmentShader:Es.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(l)),n=e.isWebGLCubeRenderTarget?e.texture:e,l.material.uniforms.envMap.value=n,l.material.uniforms.flipEnvMap.value=n.isCubeTexture?-1:1,u===e&&d===n.version&&p===r.toneMapping||(l.material.needsUpdate=!0,u=e,d=n.version,p=r.toneMapping),t.unshift(l,l.geometry,l.material,0,0,null)):e&&e.isTexture&&(void 0===s&&((s=new F(new J(2,2),new W({name:"BackgroundMaterial",uniforms:G(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(s)),!0===(s.material.uniforms.t2D.value=e).matrixAutoUpdate&&e.updateMatrix(),s.material.uniforms.uvTransform.value.copy(e.matrix),u===e&&d===e.version&&p===r.toneMapping||(s.material.needsUpdate=!0,d=(u=e).version,p=r.toneMapping),t.unshift(s,s.geometry,s.material,0,0,null))}}}function Lt(g,v,y,b){function x(t){return b.isWebGL2?g.bindVertexArray(t):E.bindVertexArrayOES(t)}function o(t){return b.isWebGL2?g.deleteVertexArray(t):E.deleteVertexArrayOES(t)}function w(t){for(var e=[],i=[],n=[],r=0;r<s;r++)e[r]=0,i[r]=0,n[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{}}}function _(){for(var t=P.newAttributes,e=0,i=t.length;e<i;e++)t[e]=0}function S(t){M(t,0)}function M(t,e){var i=P.enabledAttributes,n=P.attributeDivisors;P.newAttributes[t]=1,0===i[t]&&(g.enableVertexAttribArray(t),i[t]=1),n[t]!==e&&((b.isWebGL2?g:v.get("ANGLE_instanced_arrays"))[b.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](t,e),n[t]=e)}function T(){for(var t=P.newAttributes,e=P.enabledAttributes,i=0,n=e.length;i<n;i++)e[i]!==t[i]&&(g.disableVertexAttribArray(i),e[i]=0)}function a(){t(),P!==e&&x((P=e).object)}function t(){e.geometry=null,e.program=null,e.wireframe=!1}var s=g.getParameter(34921),E=b.isWebGL2?null:v.get("OES_vertex_array_object"),C=b.isWebGL2||null!==E,A={},e=w(null),P=e;return{setup:function(t,e,i,n,r){var o=!1;if(C){o=!0===e.wireframe;void 0===(l=A[n.id])&&(A[n.id]=l={});var a=l[i.id];void 0===a&&(l[i.id]=a={}),void 0===(l=a[o])&&(l=w(b.isWebGL2?g.createVertexArray():E.createVertexArrayOES()),a[o]=l),P!==(o=l)&&x((P=o).object);t:if(o=P.attributes,a=n.attributes,Object.keys(o).length!==Object.keys(a).length)o=!0;else{for(var s in a){var l=o[s],c=a[s];if(l.attribute!==c||l.data!==c.data){o=!0;break t}}o=!1}if(o){for(var h in s={},a=n.attributes)l=a[h],c={},c.attribute=l,l.data&&(c.data=l.data),s[h]=c;P.attributes=s}}else h=!0===e.wireframe,P.geometry===n.id&&P.program===i.id&&P.wireframe===h||(P.geometry=n.id,P.program=i.id,P.wireframe=h,o=!0);if(!0===t.isInstancedMesh&&(o=!0),null!==r&&y.update(r,34963),o){if(!1!==b.isWebGL2||!t.isInstancedMesh&&!n.isInstancedBufferGeometry||null!==v.get("ANGLE_instanced_arrays")){for(var u in _(),h=n.attributes,i=i.getAttributes(),e=e.defaultAttributeValues,i)if(o=i[u],0<=o)if(void 0!==(m=h[u])){var d,p,f,m,s=m.normalized,c=m.itemSize;void 0!==(l=y.get(m))&&(d=l.buffer,a=l.type,l=l.bytesPerElement,m.isInterleavedBufferAttribute?(f=(p=m.data).stride,m=m.offset,p&&p.isInstancedInterleavedBuffer?(M(o,p.meshPerAttribute),void 0===n._maxInstanceCount&&(n._maxInstanceCount=p.meshPerAttribute*p.count)):S(o),g.bindBuffer(34962,d),f*=l,l*=m,!0!==b.isWebGL2||5124!==a&&5125!==a?g.vertexAttribPointer(o,c,a,s,f,l):g.vertexAttribIPointer(o,c,a,f,l)):(m.isInstancedBufferAttribute?(M(o,m.meshPerAttribute),void 0===n._maxInstanceCount&&(n._maxInstanceCount=m.meshPerAttribute*m.count)):S(o),g.bindBuffer(34962,d),l=c,!0!==b.isWebGL2||5124!==a&&5125!==a?g.vertexAttribPointer(o,l,a,s,0,0):g.vertexAttribIPointer(o,l,a,0,0)))}else if("instanceMatrix"===u)void 0!==(a=y.get(t.instanceMatrix))&&(s=a.buffer,a=a.type,M(o+0,1),M(o+1,1),M(o+2,1),M(o+3,1),g.bindBuffer(34962,s),g.vertexAttribPointer(o+0,4,a,!1,64,0),g.vertexAttribPointer(o+1,4,a,!1,64,16),g.vertexAttribPointer(o+2,4,a,!1,64,32),g.vertexAttribPointer(o+3,4,a,!1,64,48));else if(void 0!==e&&void 0!==(s=e[u]))switch(s.length){case 2:g.vertexAttrib2fv(o,s);break;case 3:g.vertexAttrib3fv(o,s);break;case 4:g.vertexAttrib4fv(o,s);break;default:g.vertexAttrib1fv(o,s)}T()}null!==r&&g.bindBuffer(34963,y.get(r).buffer)}},reset:a,resetDefaultState:t,dispose:function(){for(var t in a(),A){var e,i=A[t];for(e in i){var n,r=i[e];for(n in r)o(r[n].object),delete r[n];delete i[e]}delete A[t]}},releaseStatesOfGeometry:function(t){if(void 0!==A[t.id]){var e,i=A[t.id];for(e in i){var n,r=i[e];for(n in r)o(r[n].object),delete r[n];delete i[e]}delete A[t.id]}},releaseStatesOfProgram:function(t){for(var e in A){e=A[e];if(void 0!==e[t.id]){var i,n=e[t.id];for(i in n)o(n[i].object),delete n[i];delete e[t.id]}}},initAttributes:_,enableAttribute:S,disableUnusedAttributes:T}}function Rt(o,a,s,t){var l,c=t.isWebGL2;this.setMode=function(t){l=t},this.render=function(t,e){o.drawArrays(l,t,e),s.update(e,l,1)},this.renderInstances=function(t,e,i){if(0!==i){if(c)var n=o,r="drawArraysInstanced";else if(r="drawArraysInstancedANGLE",null===(n=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");n[r](l,t,e,i),s.update(e,l,i)}}}function Ot(e,i,t){function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==t.precision?t.precision:"highp";(s=n(a))!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s),t=!0===t.logarithmicDepthBuffer;var s=e.getParameter(34930),l=e.getParameter(35660),c=e.getParameter(3379),h=e.getParameter(34076),u=e.getParameter(34921),d=e.getParameter(36347),p=e.getParameter(36348),f=e.getParameter(36349),m=0<l,g=o||!!i.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var t=i.get("EXT_texture_filter_anisotropic");return r=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:t,maxTextures:s,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:o?e.getParameter(36183):0}}function Dt(){function l(){m.value!==h&&(m.value=h,m.needsUpdate=0<u),a.numPlanes=u,a.numIntersection=0}function c(t,e,i,n){var r=null!==t?t.length:0,o=null;if(0!==r){if(o=m.value,!0!==n||null===o)for(n=i+4*r,e=e.matrixWorldInverse,f.getNormalMatrix(e),(null===o||o.length<n)&&(o=new Float32Array(n)),n=0;n!==r;++n,i+=4)s.copy(t[n]).applyMatrix4(e,f),s.normal.toArray(o,i),o[i+3]=s.constant;m.value=o,m.needsUpdate=!0}return a.numPlanes=r,a.numIntersection=0,o}var a=this,h=null,u=0,d=!1,p=!1,s=new v,f=new g,m={value:null,needsUpdate:!1};this.uniform=m,this.numIntersection=this.numPlanes=0,this.init=function(t,e,i){var n=0!==t.length||e||0!==u||d;return d=e,h=c(t,i,0),u=t.length,n},this.beginShadows=function(){p=!0,c(null)},this.endShadows=function(){p=!1,l()},this.setState=function(t,e,i,n,r,o){if(!d||null===t||0===t.length||p&&!i)p?c(null):l();else{var a=4*(i=p?0:u),s=r.clippingState||null;for(m.value=s,s=c(t,n,a,o),t=0;t!==a;++t)s[t]=h[t];r.clippingState=s,this.numIntersection=e?this.numPlanes:0,this.numPlanes+=i}}}function It(i){var n={};return{has:function(t){if(void 0!==n[t])return n[t];switch(t){case"WEBGL_depth_texture":var e=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:e=i.getExtension(t)}return!!(n[t]=e)},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),n[t]}}}function kt(t,c,n,r){function o(t){t=t.target;var e,i=s.get(t);for(e in null!==i.index&&c.remove(i.index),i.attributes)c.remove(i.attributes[e]);t.removeEventListener("dispose",o),s.delete(t),(e=h.get(i))&&(c.remove(e),h.delete(i)),r.releaseStatesOfGeometry(t),!0===t.isInstancedBufferGeometry&&delete t._maxInstanceCount,n.memory.geometries--}function a(t){var e=[],i=t.index,n=t.attributes.position;if(null!==i)for(var n=i.array,i=i.version,r=0,o=n.length;r<o;r+=3){var a=n[r+0],s=n[r+1],l=n[r+2];e.push(a,s,s,l,l,a)}else for(r=n.array,i=n.version,n=0,r=r.length/3-1;n<r;n+=3)e.push(o=n+0,a=n+1,a,s=n+2,s,o);(e=new(65535<k(e)?R:P)(e,1)).version=i,(i=h.get(t))&&c.remove(i),h.set(t,e)}var s=new WeakMap,h=new WeakMap;return{get:function(t,e){var i=s.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new N).setFromObject(t)),i=e._bufferGeometry),s.set(e,i),n.memory.geometries++,i)},update:function(t){var e,i=t.attributes;for(n in i)c.update(i[n],34962);for(e in t=t.morphAttributes)for(var n=0,r=(i=t[e]).length;n<r;n++)c.update(i[n],34962)},getWireframeAttribute:function(t){var e,i=h.get(t);return(!i||null!==(e=t.index)&&i.version<e.version)&&a(t),h.get(t)}}}function Nt(o,a,s,t){var l,c,h,u=t.isWebGL2;this.setMode=function(t){l=t},this.setIndex=function(t){c=t.type,h=t.bytesPerElement},this.render=function(t,e){o.drawElements(l,e,c,t*h),s.update(e,l,1)},this.renderInstances=function(t,e,i){if(0!==i){if(u)var n=o,r="drawElementsInstanced";else if(r="drawElementsInstancedANGLE",null===(n=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");n[r](l,e,c,t*h,i),s.update(e,l,i)}}}function Ft(t){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(t,e,i){switch(n.calls++,e){case 4:n.triangles+=t/3*i;break;case 1:n.lines+=t/2*i;break;case 3:n.lines+=i*(t-1);break;case 2:n.lines+=i*t;break;case 0:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}}}function K(t,e){return t[0]-e[0]}function Q(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Bt(l){for(var c={},h=new Float32Array(8),u=[],t=0;t<8;t++)u[t]=[t,0];return{update:function(t,e,i,n){var r=t.morphTargetInfluences;if(t=void 0===r?0:r.length,void 0===(o=c[e.id])){for(var o=[],a=0;a<t;a++)o[a]=[a,0];c[e.id]=o}for(a=0;a<t;a++){var s=o[a];s[0]=a,s[1]=r[a]}for(o.sort(Q),r=0;r<8;r++)r<t&&o[r][1]?(u[r][0]=o[r][0],u[r][1]=o[r][1]):(u[r][0]=Number.MAX_SAFE_INTEGER,u[r][1]=0);for(u.sort(K),t=i.morphTargets&&e.morphAttributes.position,i=i.morphNormals&&e.morphAttributes.normal,r=o=0;r<8;r++)a=(s=u[r])[0],s=s[1],a!==Number.MAX_SAFE_INTEGER&&s?(t&&e.getAttribute("morphTarget"+r)!==t[a]&&e.setAttribute("morphTarget"+r,t[a]),i&&e.getAttribute("morphNormal"+r)!==i[a]&&e.setAttribute("morphNormal"+r,i[a]),o+=h[r]=s):(t&&void 0!==e.getAttribute("morphTarget"+r)&&e.deleteAttribute("morphTarget"+r),i&&void 0!==e.getAttribute("morphNormal"+r)&&e.deleteAttribute("morphNormal"+r),h[r]=0);e=e.morphTargetsRelative?1:1-o,n.getUniforms().setValue(l,"morphTargetBaseInfluence",e),n.getUniforms().setValue(l,"morphTargetInfluences",h)}}}function zt(t,r,o,a){var s=new WeakMap;return{update:function(t){var e=a.render.frame,i=t.geometry,n=r.get(t,i);return s.get(n)!==e&&(i.isGeometry&&n.updateFromObject(t),r.update(n),s.set(n,e)),t.isInstancedMesh&&o.update(t.instanceMatrix,34962),n},dispose:function(){s=new WeakMap}}}function tt(t,e,i,n,r,o,a,s,l,c){d.call(this,t=void 0!==t?t:[],void 0!==e?e:301,i,n,r,o,void 0!==a?a:1022,s,l,c),this.flipY=!1}function et(t,e,i,n){d.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:n||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function it(t,e,i,n){d.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:n||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function nt(t,e,i){var n=t[0];if(n<=0||0<n)return t;var r=e*i,o=Rs[r];if(void 0===o&&(o=new Float32Array(r),Rs[r]=o),0!==e)for(n.toArray(o,0),n=1,r=0;n!==e;++n)t[n].toArray(o,r+=i);return o}function rt(t,e){if(t.length===e.length){for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return;return 1}}function ot(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function at(t,e){var i=Os[e];void 0===i&&(i=new Int32Array(e),Os[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function st(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function lt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):rt(i,e)||(t.uniform2fv(this.addr,e),ot(i,e))}function ct(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):rt(i,e)||(t.uniform3fv(this.addr,e),ot(i,e))}function ht(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):rt(i,e)||(t.uniform4fv(this.addr,e),ot(i,e))}function ut(t,e){var i=this.cache,n=e.elements;void 0===n?rt(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),ot(i,e)):rt(i,n)||(ks.set(n),t.uniformMatrix2fv(this.addr,!1,ks),ot(i,n))}function dt(t,e){var i=this.cache,n=e.elements;void 0===n?rt(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),ot(i,e)):rt(i,n)||(Is.set(n),t.uniformMatrix3fv(this.addr,!1,Is),ot(i,n))}function pt(t,e){var i=this.cache,n=e.elements;void 0===n?rt(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),ot(i,e)):rt(i,n)||(Ds.set(n),t.uniformMatrix4fv(this.addr,!1,Ds),ot(i,n))}function ft(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||Cs,r)}function mt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||As,r)}function gt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Ps,r)}function vt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||Ls,r)}function yt(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function bt(t,e){var i=this.cache;rt(i,e)||(t.uniform2iv(this.addr,e),ot(i,e))}function xt(t,e){var i=this.cache;rt(i,e)||(t.uniform3iv(this.addr,e),ot(i,e))}function Ht(t,e){var i=this.cache;rt(i,e)||(t.uniform4iv(this.addr,e),ot(i,e))}function Ut(t,e){var i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function jt(t,e){t.uniform1fv(this.addr,e)}function Gt(t,e){t.uniform1iv(this.addr,e)}function Vt(t,e){t.uniform2iv(this.addr,e)}function Wt(t,e){t.uniform3iv(this.addr,e)}function $t(t,e){t.uniform4iv(this.addr,e)}function qt(t,e){e=nt(e,this.size,2),t.uniform2fv(this.addr,e)}function Xt(t,e){e=nt(e,this.size,3),t.uniform3fv(this.addr,e)}function Yt(t,e){e=nt(e,this.size,4),t.uniform4fv(this.addr,e)}function Zt(t,e){e=nt(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Jt(t,e){e=nt(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Kt(t,e){e=nt(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Qt(t,e,i){var n=e.length,r=at(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTexture2D(e[t]||Cs,r[t])}function te(t,e,i){var n=e.length,r=at(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTextureCube(e[t]||Ls,r[t])}function ee(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return st;case 35664:return lt;case 35665:return ct;case 35666:return ht;case 35674:return ut;case 35675:return dt;case 35676:return pt;case 5124:case 35670:return yt;case 35667:case 35671:return bt;case 35668:case 35672:return xt;case 35669:case 35673:return Ht;case 5125:return Ut;case 35678:case 36198:case 36298:case 36306:case 35682:return ft;case 35679:case 36299:case 36307:return gt;case 35680:case 36300:case 36308:case 36293:return vt;case 36289:case 36303:case 36311:case 36292:return mt}}(e.type)}function ie(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return jt;case 35664:return qt;case 35665:return Xt;case 35666:return Yt;case 35674:return Zt;case 35675:return Jt;case 35676:return Kt;case 5124:case 35670:return Gt;case 35667:case 35671:return Vt;case 35668:case 35672:return Wt;case 35669:case 35673:return $t;case 35678:case 36198:case 36298:case 36306:case 35682:return Qt;case 35680:case 36300:case 36308:case 36293:return te}}(e.type)}function ne(t){this.id=t,this.seq=[],this.map={}}function re(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),n=0;n<i;++n){var r=t.getActiveUniform(e,n),o=t.getUniformLocation(e,r.name),a=this,s=r.name,l=s.length;for(Ns.lastIndex=0;;){var c=Ns.exec(s),h=Ns.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){s=a,r=new(void 0===d?ee:ie)(u,r,o),s.seq.push(r),s.map[r.id]=r;break}void 0===(d=a.map[u])&&(d=new ne(u),(u=a).seq.push(a=d),u.map[a.id]=a),a=d}}}function oe(t,e,i){return e=t.createShader(e),t.shaderSource(e,i),t.compileShader(e),e}function ae(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function se(t,e,i){var n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";for(t=t.getShaderSource(e).split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+r+(t=t.join("\n"))}function le(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=ae(e))[0]+"ToLinear"+e[1]+"; }"}function ce(t){return""!==t}function he(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ue(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function de(t,e){if(void 0===(t=Ts[e]))throw Error("Can not resolve #include <"+e+">");return t.replace(Bs,de)}function pe(t,e,i,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),fe(t,e,i,n)}function fe(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return t}function me(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ge(t,e,i,n){var r,o,a,s,l=t.getContext(),c=i.defines,h=i.vertexShader,u=i.fragmentShader,d=(o="SHADOWMAP_TYPE_BASIC",1===(r=i).shadowMapType?o="SHADOWMAP_TYPE_PCF":2===r.shadowMapType?o="SHADOWMAP_TYPE_PCF_SOFT":3===r.shadowMapType&&(o="SHADOWMAP_TYPE_VSM"),o),p=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:e="ENVMAP_TYPE_EQUIREC"}return e}(i),f=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 304:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(i),m=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(i),g=0<t.gammaFactor?t.gammaFactor:1,v=i.isWebGL2?"":[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ce).join("\n"),y=function(t){var e,i=[];for(e in t){var n=t[e];!1!==n&&i.push("#define "+e+" "+n)}return i.join("\n")}(c),b=l.createProgram();return i.isRawShaderMaterial?(0<(c=[y].filter(ce).join("\n")).length&&(c+="\n"),0<(d=[v,y].filter(ce).join("\n")).length&&(d+="\n")):(c=[me(i),"#define SHADER_NAME "+i.shaderName,y,i.instancing?"#define USE_INSTANCING":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+d:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ce).join("\n"),d=[v,me(i),"#define SHADER_NAME "+i.shaderName,y,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.envMap?"#define "+f:"",i.envMap?"#define "+m:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+d:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?Ts.tonemapping_pars_fragment:"",0!==i.toneMapping?function(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),e="Linear"}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",Ts.encodings_pars_fragment,i.map?le("mapTexelToLinear",i.mapEncoding):"",i.matcap?le("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?le("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?le("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?le("lightMapTexelToLinear",i.lightMapEncoding):"",(r="linearToOutputTexel",o=i.outputEncoding,"vec4 "+r+"( vec4 value ) { return LinearTo"+(o=ae(o))[0]+o[1]+"; }"),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ce).join("\n")),h=ue(h=he(h=h.replace(Bs,de),i),i),u=ue(u=he(u=u.replace(Bs,de),i),i),h=h.replace(Hs,fe).replace(zs,pe),u=u.replace(Hs,fe).replace(zs,pe),i.isWebGL2&&!i.isRawShaderMaterial&&(c="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+c,d="#version 300 es\n\n#define varying in\nout highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n"+d),u=d+u,h=oe(l,35633,c+h),u=oe(l,35632,u),l.attachShader(b,h),l.attachShader(b,u),void 0!==i.index0AttributeName?l.bindAttribLocation(b,0,i.index0AttributeName):!0===i.morphTargets&&l.bindAttribLocation(b,0,"position"),l.linkProgram(b),t.debug.checkShaderErrors&&(t=l.getProgramInfoLog(b).trim(),p=l.getShaderInfoLog(h).trim(),f=l.getShaderInfoLog(u).trim(),!(g=m=!0)===l.getProgramParameter(b,35714)?(m=!1,v=se(l,h,"vertex"),y=se(l,u,"fragment"),console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(b,35715),"gl.getProgramInfoLog",t,v,y)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==p&&""!==f||(g=!1),g&&(this.diagnostics={runnable:m,programLog:t,vertexShader:{log:p,prefix:c},fragmentShader:{log:f,prefix:d}})),l.deleteShader(h),l.deleteShader(u),this.getUniforms=function(){return a=void 0===a?new re(l,b):a},this.getAttributes=function(){if(void 0===s){for(var t={},e=l.getProgramParameter(b,35721),i=0;i<e;i++){var n=l.getActiveAttrib(b,i).name;t[n]=l.getAttribLocation(b,n)}s=t}return s},this.destroy=function(){n.releaseStatesOfProgram(this),l.deleteProgram(b),this.program=void 0},this.name=i.shaderName,this.id=Fs++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=h,this.fragmentShader=u,this}function ve(p,f,m,a){function g(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,e}var s=[],v=m.isWebGL2,y=m.logarithmicDepthBuffer,b=m.floatVertexTextures,x=m.maxVertexUniforms,w=m.vertexTextures,_=m.precision,S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},n="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");return{getParameters:function(t,e,i,n,r,o,a){var s=n.fog;n=t.isMeshStandardMaterial?n.environment:null,n=t.envMap||n;var l,c,h,u=S[t.type];l=a.isSkinnedMesh?(l=a.skeleton.bones,b?1024:(c=Math.min(Math.floor((x-20)/4),l.length))<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+c+"."),0):c):0,null===t.precision||(_=m.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",_,"instead."),h=u?(c=(h=Es[u]).vertexShader,h.fragmentShader):(c=t.vertexShader,t.fragmentShader);var d=p.getRenderTarget();return{isWebGL2:v,shaderID:u,shaderName:t.type,vertexShader:c,fragmentShader:h,defines:t.defines,isRawShaderMaterial:t.isRawShaderMaterial,isShaderMaterial:t.isShaderMaterial,precision:_,instancing:!0===a.isInstancedMesh,supportsVertexTextures:w,outputEncoding:null!==d?g(d.texture):p.outputEncoding,map:!!t.map,mapEncoding:g(t.map),matcap:!!t.matcap,matcapEncoding:g(t.matcap),envMap:!!n,envMapMode:n&&n.mapping,envMapEncoding:g(n),envMapCubeUV:!!n&&(306===n.mapping||307===n.mapping),lightMap:!!t.lightMap,lightMapEncoding:g(t.lightMap),aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:g(t.emissiveMap),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,tangentSpaceNormalMap:0===t.normalMapType,clearcoatMap:!!t.clearcoatMap,clearcoatRoughnessMap:!!t.clearcoatRoughnessMap,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,transmissionMap:!!t.transmissionMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatMap||t.clearcoatRoughnessMap||t.clearcoatNormalMap||t.displacementMap||t.transmissionMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.transmissionMap||!t.displacementMap),fog:!!s,useFog:t.fog,fogExp2:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:y,skinning:t.skinning&&0<l,maxBones:l,useVertexTexture:b,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:p.maxMorphTargets,maxMorphNormals:p.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numDirLightShadows:e.directionalShadowMap.length,numPointLightShadows:e.pointShadowMap.length,numSpotLightShadows:e.spotShadowMap.length,numClippingPlanes:r,numClipIntersection:o,dithering:t.dithering,shadowMapEnabled:p.shadowMap.enabled&&0<i.length,shadowMapType:p.shadowMap.type,toneMapping:t.toneMapped?p.toneMapping:0,physicallyCorrectLights:p.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking,index0AttributeName:t.index0AttributeName,extensionDerivatives:t.extensions&&t.extensions.derivatives,extensionFragDepth:t.extensions&&t.extensions.fragDepth,extensionDrawBuffers:t.extensions&&t.extensions.drawBuffers,extensionShaderTextureLOD:t.extensions&&t.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||null!==f.get("EXT_frag_depth"),rendererExtensionDrawBuffers:v||null!==f.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||null!==f.get("EXT_shader_texture_lod"),customProgramCacheKey:t.customProgramCacheKey()}},getProgramCacheKey:function(t){var e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.fragmentShader),e.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)e.push(i),e.push(t.defines[i]);if(void 0===t.isRawShaderMaterial){for(i=0;i<n.length;i++)e.push(t[n[i]]);e.push(p.outputEncoding),e.push(p.gammaFactor)}return e.push(t.customProgramCacheKey),e.join()},getUniforms:function(t){var e=S[t.type];return e?ws.clone(Es[e].uniforms):t.uniforms},acquireProgram:function(t,e){for(var i,n=0,r=s.length;n<r;n++){var o=s[n];if(o.cacheKey===e){++(i=o).usedTimes;break}}return void 0===i&&(i=new ge(p,e,t,a),s.push(i)),i},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=s.indexOf(t),s[e]=s[s.length-1],s.pop(),t.destroy())},programs:s}}function ye(){var n=new WeakMap;return{get:function(t){var e=n.get(t);return void 0===e&&n.set(t,e={}),e},remove:function(t){n.delete(t)},update:function(t,e,i){n.get(t)[e]=i},dispose:function(){n=new WeakMap}}}function be(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function xe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function we(l){function a(t,e,i,n,r,o){var a=c[h],s=l.get(i);return void 0===a?(a={id:t.id,object:t,geometry:e,material:i,program:s.program||d,groupOrder:n,renderOrder:t.renderOrder,z:r,group:o},c[h]=a):(a.id=t.id,a.object=t,a.geometry=e,a.material=i,a.program=s.program||d,a.groupOrder=n,a.renderOrder=t.renderOrder,a.z=r,a.group=o),h++,a}var c=[],h=0,s=[],u=[],d={id:-1};return{opaque:s,transparent:u,init:function(){h=0,s.length=0,u.length=0},push:function(t,e,i,n,r,o){t=a(t,e,i,n,r,o),(!0===i.transparent?u:s).push(t)},unshift:function(t,e,i,n,r,o){t=a(t,e,i,n,r,o),(!0===i.transparent?u:s).unshift(t)},finish:function(){for(var t=h,e=c.length;t<e;t++){var i=c[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){1<s.length&&s.sort(t||be),1<u.length&&u.sort(e||xe)}}}function _e(r){function o(t){(t=t.target).removeEventListener("dispose",o),a.delete(t)}var a=new WeakMap;return{get:function(t,e){var i,n=a.get(t);return void 0===n?(i=new we(r),a.set(t,new WeakMap),a.get(t).set(e,i),t.addEventListener("dispose",o)):void 0===(i=n.get(e))&&(i=new we(r),n.set(e,i)),i},dispose:function(){a=new WeakMap}}}function Se(){var i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];switch(t.type){case"DirectionalLight":var e={direction:new St,color:new y};break;case"SpotLight":e={position:new St,direction:new St,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new St,color:new y,distance:0,decay:0};break;case"HemisphereLight":e={direction:new St,skyColor:new y,groundColor:new y};break;case"RectAreaLight":e={color:new y,position:new St,halfWidth:new St,halfHeight:new St}}return i[t.id]=e}}}function Me(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Te(){for(var i,w=new Se,_=(i={},{get:function(t){if(void 0!==i[t.id])return i[t.id];switch(t.type){case"DirectionalLight":var e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e}}),S={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},t=0;t<9;t++)S.probe.push(new St);var M=new St,T=new Mt,E=new Mt;return{setup:function(t,e,i){for(var n=e=0,r=0,o=0;o<9;o++)S.probe[o].set(0,0,0);var a=o=0,s=0,l=0,c=0,h=0,u=0,d=0;i=i.matrixWorldInverse,t.sort(Me);for(var p=0,f=t.length;p<f;p++){var m,g=t[p],v=g.color,y=g.intensity,b=g.distance,x=g.shadow&&g.shadow.map?g.shadow.map.texture:null;if(g.isAmbientLight)e+=v.r*y,n+=v.g*y,r+=v.b*y;else if(g.isLightProbe)for(x=0;x<9;x++)S.probe[x].addScaledVector(g.sh.coefficients[x],y);else g.isDirectionalLight?((y=w.get(g)).color.copy(g.color).multiplyScalar(g.intensity),y.direction.setFromMatrixPosition(g.matrixWorld),M.setFromMatrixPosition(g.target.matrixWorld),y.direction.sub(M),y.direction.transformDirection(i),g.castShadow&&(m=g.shadow,(v=_.get(g)).shadowBias=m.bias,v.shadowNormalBias=m.normalBias,v.shadowRadius=m.radius,v.shadowMapSize=m.mapSize,S.directionalShadow[o]=v,S.directionalShadowMap[o]=x,S.directionalShadowMatrix[o]=g.shadow.matrix,h++),S.directional[o]=y,o++):g.isSpotLight?((m=w.get(g)).position.setFromMatrixPosition(g.matrixWorld),m.position.applyMatrix4(i),m.color.copy(v).multiplyScalar(y),m.distance=b,m.direction.setFromMatrixPosition(g.matrixWorld),M.setFromMatrixPosition(g.target.matrixWorld),m.direction.sub(M),m.direction.transformDirection(i),m.coneCos=Math.cos(g.angle),m.penumbraCos=Math.cos(g.angle*(1-g.penumbra)),m.decay=g.decay,g.castShadow&&(y=g.shadow,(v=_.get(g)).shadowBias=y.bias,v.shadowNormalBias=y.normalBias,v.shadowRadius=y.radius,v.shadowMapSize=y.mapSize,S.spotShadow[s]=v,S.spotShadowMap[s]=x,S.spotShadowMatrix[s]=g.shadow.matrix,d++),S.spot[s]=m,s++):g.isRectAreaLight?((x=w.get(g)).color.copy(v).multiplyScalar(y),x.position.setFromMatrixPosition(g.matrixWorld),x.position.applyMatrix4(i),E.identity(),T.copy(g.matrixWorld),T.premultiply(i),E.extractRotation(T),x.halfWidth.set(.5*g.width,0,0),x.halfHeight.set(0,.5*g.height,0),x.halfWidth.applyMatrix4(E),x.halfHeight.applyMatrix4(E),S.rectArea[l]=x,l++):g.isPointLight?((y=w.get(g)).position.setFromMatrixPosition(g.matrixWorld),y.position.applyMatrix4(i),y.color.copy(g.color).multiplyScalar(g.intensity),y.distance=g.distance,y.decay=g.decay,g.castShadow&&(m=g.shadow,(v=_.get(g)).shadowBias=m.bias,v.shadowNormalBias=m.normalBias,v.shadowRadius=m.radius,v.shadowMapSize=m.mapSize,v.shadowCameraNear=m.camera.near,v.shadowCameraFar=m.camera.far,S.pointShadow[a]=v,S.pointShadowMap[a]=x,S.pointShadowMatrix[a]=g.shadow.matrix,u++),S.point[a]=y,a++):g.isHemisphereLight&&((x=w.get(g)).direction.setFromMatrixPosition(g.matrixWorld),x.direction.transformDirection(i),x.direction.normalize(),x.skyColor.copy(g.color).multiplyScalar(y),x.groundColor.copy(g.groundColor).multiplyScalar(y),S.hemi[c]=x,c++)}S.ambient[0]=e,S.ambient[1]=n,S.ambient[2]=r,(t=S.hash).directionalLength===o&&t.pointLength===a&&t.spotLength===s&&t.rectAreaLength===l&&t.hemiLength===c&&t.numDirectionalShadows===h&&t.numPointShadows===u&&t.numSpotShadows===d||(S.directional.length=o,S.spot.length=s,S.rectArea.length=l,S.point.length=a,S.hemi.length=c,S.directionalShadow.length=h,S.directionalShadowMap.length=h,S.pointShadow.length=u,S.pointShadowMap.length=u,S.spotShadow.length=d,S.spotShadowMap.length=d,S.directionalShadowMatrix.length=h,S.pointShadowMatrix.length=u,S.spotShadowMatrix.length=d,t.directionalLength=o,t.pointLength=a,t.spotLength=s,t.rectAreaLength=l,t.hemiLength=c,t.numDirectionalShadows=h,t.numPointShadows=u,t.numSpotShadows=d,S.version=Us++)},state:S}}function Ee(){var e=new Te,i=[],n=[];return{init:function(){i.length=0,n.length=0},state:{lightsArray:i,shadowsArray:n,lights:e},setupLights:function(t){e.setup(i,n,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){n.push(t)}}}function Ce(){function n(t){(t=t.target).removeEventListener("dispose",n),r.delete(t)}var r=new WeakMap;return{get:function(t,e){var i;return!1===r.has(t)?(i=new Ee,r.set(t,new WeakMap),r.get(t).set(e,i),t.addEventListener("dispose",n)):!1===r.get(t).has(e)?(i=new Ee,r.get(t).set(e,i)):i=r.get(t).get(e),i},dispose:function(){r=new WeakMap}}}function Ae(t){w.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Pe(t){w.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new St,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Le(f,m,g){function c(t,e,i){var n=r[i=t<<0|e<<1|i<<2];return void 0===n&&(n=new Ae({depthPacking:3201,morphTargets:t,skinning:e}),r[i]=n),n}function h(t,e,i){var n=o[i=t<<0|e<<1|i<<2];return void 0===n&&(n=new Pe({morphTargets:t,skinning:e}),o[i]=n),n}function v(t,e,i,n,r,o,a){var s=c,l=t.customDepthMaterial;return!0===n.isPointLight&&(s=h,l=t.customDistanceMaterial),t=void 0===l?(!(l=!1)===i.morphTargets&&(l=e.morphAttributes&&e.morphAttributes.position&&0<e.morphAttributes.position.length),!(e=!1)===t.isSkinnedMesh&&(!0===i.skinning?e=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),s(l,e,!0===t.isInstancedMesh)):l,f.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(l=t.uuid,s=i.uuid,void 0===(e=u[l])&&(u[l]=e={}),void 0===(l=e[s])&&(l=t.clone(),e[s]=l),t=l),t.visible=i.visible,t.wireframe=i.wireframe,t.side=3===a?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],t.clipShadows=i.clipShadows,t.clippingPlanes=i.clippingPlanes,t.clipIntersection=i.clipIntersection,t.wireframeLinewidth=i.wireframeLinewidth,t.linewidth=i.linewidth,!0===n.isPointLight&&!0===t.isMeshDistanceMaterial&&(t.referencePosition.setFromMatrixPosition(n.matrixWorld),t.nearDistance=r,t.farDistance=o),t}var y=new Et,b=new wt,x=new wt,w=new _t,r=[],o=[],u={},d={0:1,1:0,2:2},_=new W({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new wt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=_.clone();S.defines.HORIZONAL_PASS=1;var t=new N;t.setAttribute("position",new C(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var M=new F(t,_),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,e,i){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==t.length){var n=f.getRenderTarget(),r=f.getActiveCubeFace(),o=f.getActiveMipmapLevel(),a=f.state;a.setBlending(0),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var s=0,l=t.length;s<l;s++){var c=t[s],h=c.shadow;if(!1!==h.autoUpdate||!1!==h.needsUpdate)if(void 0===h)console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");else{b.copy(h.mapSize);var u=h.getFrameExtents();b.multiply(u),x.copy(h.mapSize),(b.x>g||b.y>g)&&(b.x>g&&(x.x=Math.floor(g/u.x),b.x=x.x*u.x,h.mapSize.x=x.x),b.y>g&&(x.y=Math.floor(g/u.y),b.y=x.y*u.y,h.mapSize.y=x.y)),null!==h.map||h.isPointLightShadow||3!==this.type||(h.map=new E(b.x,b.y,u={minFilter:1006,magFilter:1006,format:1023,stencilBuffer:!1}),h.map.texture.name=c.name+".shadowMap",h.mapPass=new E(b.x,b.y,u),h.camera.updateProjectionMatrix()),null===h.map&&(h.map=new E(b.x,b.y,{minFilter:1003,magFilter:1003,format:1023,stencilBuffer:!1}),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()),f.setRenderTarget(h.map),f.clear();for(var u=h.getViewportCount(),d=0;d<u;d++){var p=h.getViewport(d);w.set(x.x*p.x,x.y*p.y,x.x*p.z,x.y*p.w),a.viewport(w),h.updateMatrices(c,d),y=h.getFrustum(),function t(e,i,n,r,o){if(!1!==e.visible){if(e.layers.test(i.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&3===o)&&(!e.frustumCulled||y.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld);var a=m.update(e),s=e.material;if(Array.isArray(s))for(var l=a.groups,c=0,h=l.length;c<h;c++){var u=l[c],d=s[u.materialIndex];d&&d.visible&&(d=v(e,a,d,r,n.near,n.far,o),f.renderBufferDirect(n,null,a,d,e,u))}else s.visible&&(s=v(e,a,s,r,n.near,n.far,o),f.renderBufferDirect(n,null,a,s,e,null))}for(a=0,s=(e=e.children).length;a<s;a++)t(e[a],i,n,r,o)}}(e,i,h.camera,c,this.type)}h.isPointLightShadow||3!==this.type||(c=h,u=i,d=m.update(M),_.uniforms.shadow_pass.value=c.map.texture,_.uniforms.resolution.value=c.mapSize,_.uniforms.radius.value=c.radius,f.setRenderTarget(c.mapPass),f.clear(),f.renderBufferDirect(u,null,d,_,M,null),S.uniforms.shadow_pass.value=c.mapPass.texture,S.uniforms.resolution.value=c.mapSize,S.uniforms.radius.value=c.radius,f.setRenderTarget(c.map),f.clear(),f.renderBufferDirect(u,null,d,S,M,null)),h.needsUpdate=!1}}T.needsUpdate=!1,f.setRenderTarget(n,r,o)}}}function Re(h,t,e){function i(t,e,i){var n=new Uint8Array(4),r=h.createTexture();for(h.bindTexture(t,r),h.texParameteri(t,10241,9728),h.texParameteri(t,10240,9728),t=0;t<i;t++)h.texImage2D(e+t,0,6408,1,1,0,6408,5121,n);return r}function u(t){!0!==f[t]&&(h.enable(t),f[t]=!0)}function d(t){!1!==f[t]&&(h.disable(t),f[t]=!1)}function n(t,e,i,n,r,o,a,s){if(0===t)g&&(d(3042),g=!1);else if(g||(u(3042),g=!0),5!==t){if(t!==v||s!==M){if(100===y&&100===w||(h.blendEquation(32774),w=y=100),s)switch(t){case 1:h.blendFuncSeparate(1,771,1,771);break;case 2:h.blendFunc(1,1);break;case 3:h.blendFuncSeparate(0,0,769,771);break;case 4:h.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:h.blendFuncSeparate(770,771,1,771);break;case 2:h.blendFunc(770,1);break;case 3:h.blendFunc(0,769);break;case 4:h.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}S=_=x=b=null,v=t,M=s}}else r=r||e,o=o||i,a=a||n,e===y&&r===w||(h.blendEquationSeparate(B[e],B[r]),y=e,w=r),i===b&&n===x&&o===_&&a===S||(h.blendFuncSeparate(z[i],z[n],z[o],z[a]),b=i,x=n,_=o,S=a),v=t,M=null}function r(t){T!==t&&(t?h.frontFace(2304):h.frontFace(2305),T=t)}function o(t){0!==t?(u(2884),t!==E&&(1===t?h.cullFace(1029):2===t?h.cullFace(1028):h.cullFace(1032))):d(2884),E=t}function a(t,e,i){t?(u(32823),A===e&&P===i||(h.polygonOffset(e,i),A=e,P=i)):d(32823)}function s(t){D!==(t=void 0===t?33984+L-1:t)&&(h.activeTexture(t),D=t)}e=e.isWebGL2;var l=new function(){var e=!1,o=new _t,i=null,a=new _t(0,0,0,0);return{setMask:function(t){i===t||e||(h.colorMask(t,t,t,t),i=t)},setLocked:function(t){e=t},setClear:function(t,e,i,n,r){!0===r&&(t*=n,e*=n,i*=n),o.set(t,e,i,n),!1===a.equals(o)&&(h.clearColor(t,e,i,n),a.copy(o))},reset:function(){e=!1,i=null,a.set(-1,0,0,0)}}},c=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(t){(t?u:d)(2929)},setMask:function(t){i===t||e||(h.depthMask(t),i=t)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:h.depthFunc(512);break;case 1:h.depthFunc(519);break;case 2:h.depthFunc(513);break;case 3:h.depthFunc(515);break;case 4:h.depthFunc(514);break;case 5:h.depthFunc(518);break;case 6:h.depthFunc(516);break;case 7:h.depthFunc(517);break;default:h.depthFunc(515)}else h.depthFunc(515);n=t}},setLocked:function(t){e=t},setClear:function(t){r!==t&&(h.clearDepth(t),r=t)},reset:function(){e=!1,r=n=i=null}}},p=new function(){var e=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?u:d)(2960)},setMask:function(t){i===t||e||(h.stencilMask(t),i=t)},setFunc:function(t,e,i){n===t&&r===e&&o===i||(h.stencilFunc(t,e,i),n=t,r=e,o=i)},setOp:function(t,e,i){a===t&&s===e&&l===i||(h.stencilOp(t,e,i),a=t,s=e,l=i)},setLocked:function(t){e=t},setClear:function(t){c!==t&&(h.clearStencil(t),c=t)},reset:function(){e=!1,c=l=s=a=o=r=n=i=null}}},f={},m=null,g=null,v=null,y=null,b=null,x=null,w=null,_=null,S=null,M=!1,T=null,E=null,C=null,A=null,P=null,L=h.getParameter(35661),R=!1,O=0;-1!==(O=h.getParameter(7938)).indexOf("WebGL")?(O=parseFloat(/^WebGL ([0-9])/.exec(O)[1]),R=1<=O):-1!==O.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL ES ([0-9])/.exec(O)[1]),R=2<=O);var D=null,I={},k=new _t,N=new _t,F={};F[3553]=i(3553,3553,1),F[34067]=i(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),p.setClear(0),u(2929),c.setFunc(3),r(!1),o(1),u(2884),n(0);var B={100:32774,101:32778,102:32779};e?(B[103]=32775,B[104]=32776):null!==(t=t.get("EXT_blend_minmax"))&&(B[103]=t.MIN_EXT,B[104]=t.MAX_EXT);var z={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:l,depth:c,stencil:p},enable:u,disable:d,useProgram:function(t){return m!==t&&(h.useProgram(t),m=t,!0)},setBlending:n,setMaterial:function(t,e){(2===t.side?d:u)(2884);var i=1===t.side;r(i=e?!i:i),1===t.blending&&!1===t.transparent?n(0):n(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),l.setMask(t.colorWrite),e=t.stencilWrite,p.setTest(e),e&&(p.setMask(t.stencilWriteMask),p.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),p.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),a(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:r,setCullFace:o,setLineWidth:function(t){t!==C&&(R&&h.lineWidth(t),C=t)},setPolygonOffset:a,setScissorTest:function(t){(t?u:d)(3089)},activeTexture:s,bindTexture:function(t,e){null===D&&s();var i=I[D];void 0===i&&(I[D]=i={type:void 0,texture:void 0}),i.type===t&&i.texture===e||(h.bindTexture(t,e||F[t]),i.type=t,i.texture=e)},unbindTexture:function(){var t=I[D];void 0!==t&&void 0!==t.type&&(h.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{h.compressedTexImage2D.apply(h,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{h.texImage2D.apply(h,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{h.texImage3D.apply(h,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===k.equals(t)&&(h.scissor(t.x,t.y,t.z,t.w),k.copy(t))},viewport:function(t){!1===N.equals(t)&&(h.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){f={},I={},E=T=v=m=D=null,l.reset(),c.reset(),p.reset()}}}function Oe(p,n,f,m,r,g,s){function o(t,e){return D?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(t,e,i,n){var r=1;if((r=t.width>n||t.height>n?n/Math.max(t.width,t.height):r)<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(n=e?Do.floorPowerOfTwo:Math.floor)(r*t.width),r=n(r*t.height),void 0===C&&(C=o(e,r)),(i=i?o(e,r):C).width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),i;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function y(t){return Do.isPowerOfTwo(t.width)&&Do.isPowerOfTwo(t.height)}function b(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function x(t,e,i,n){p.generateMipmap(t),m.get(e).__maxMipLevel=Math.log(Math.max(i,n))*Math.LOG2E}function w(t,e,i){if(!1===A)return e;if(null!==t){if(void 0!==p[t])return p[t];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+t+"'")}return 6403===(t=e)&&(5126===i&&(t=33326),5131===i&&(t=33325),5121===i&&(t=33321)),6407===e&&(5126===i&&(t=34837),5131===i&&(t=34843),5121===i&&(t=32849)),6408===e&&(5126===i&&(t=34836),5131===i&&(t=34842),5121===i&&(t=32856)),33325!==t&&33326!==t&&34842!==t&&34836!==t||n.get("EXT_color_buffer_float"),t}function a(t){return 1003===t||1004===t||1005===t?9728:9729}function i(t){(t=t.target).removeEventListener("dispose",i);var e=m.get(t);void 0!==e.__webglInit&&(p.deleteTexture(e.__webglTexture),m.remove(t)),t.isVideoTexture&&O.delete(t),s.memory.textures--}function l(t){(t=t.target).removeEventListener("dispose",l);var e=m.get(t),i=m.get(t.texture);if(t){if(void 0!==i.__webglTexture&&p.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(i=0;i<6;i++)p.deleteFramebuffer(e.__webglFramebuffer[i]),e.__webglDepthbuffer&&p.deleteRenderbuffer(e.__webglDepthbuffer[i]);else p.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&p.deleteRenderbuffer(e.__webglDepthbuffer),e.__webglMultisampledFramebuffer&&p.deleteFramebuffer(e.__webglMultisampledFramebuffer),e.__webglColorRenderbuffer&&p.deleteRenderbuffer(e.__webglColorRenderbuffer),e.__webglDepthRenderbuffer&&p.deleteRenderbuffer(e.__webglDepthRenderbuffer);m.remove(t.texture),m.remove(t)}s.memory.textures--}function c(t,e){var i,n=m.get(t);if(t.isVideoTexture&&(i=s.render.frame,O.get(t)!==i&&(O.set(t,i),t.update())),0<t.version&&n.__version!==t.version)if(void 0===(i=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void d(n,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}f.activeTexture(33984+e),f.bindTexture(3553,n.__webglTexture)}function h(t,e){if(6===t.image.length){var i=m.get(t);if(0<t.version&&i.__version!==t.version){S(i,t),f.activeTexture(33984+e),f.bindTexture(34067,i.__webglTexture),p.pixelStorei(37440,t.flipY);var n=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),r=t.image[0]&&t.image[0].isDataTexture;e=[];for(var o=0;o<6;o++)e[o]=n||r?r?t.image[o].image:t.image[o]:v(t.image[o],!1,!0,P);var a=y(o=e[0])||A,s=g.convert(t.format),l=g.convert(t.type),c=w(t.internalFormat,s,l);if(_(34067,t,a),n){for(r=0;r<6;r++)for(var h=e[r].mipmaps,n=0;n<h.length;n++){var u=h[n];1023!==t.format&&1022!==t.format?null!==s?f.compressedTexImage2D(34069+r,n,c,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):f.texImage2D(34069+r,n,c,u.width,u.height,0,s,l,u.data)}i.__maxMipLevel=h.length-1}else{for(h=t.mipmaps,n=0;n<6;n++)if(r)for(f.texImage2D(34069+n,0,c,e[n].width,e[n].height,0,s,l,e[n].data),u=0;u<h.length;u++){var d=h[u].image[n].image;f.texImage2D(34069+n,u+1,c,d.width,d.height,0,s,l,d.data)}else for(f.texImage2D(34069+n,0,c,s,l,e[n]),u=0;u<h.length;u++)f.texImage2D(34069+n,u+1,c,s,l,h[u].image[n]);i.__maxMipLevel=h.length}b(t,a)&&x(34067,t,o.width,o.height),i.__version=t.version,t.onUpdate&&t.onUpdate(t)}else f.activeTexture(33984+e),f.bindTexture(34067,i.__webglTexture)}}function u(t,e){f.activeTexture(33984+e),f.bindTexture(34067,m.get(t).__webglTexture)}function _(t,e,i){i?(p.texParameteri(t,10242,k[e.wrapS]),p.texParameteri(t,10243,k[e.wrapT]),32879!==t&&35866!==t||p.texParameteri(t,32882,k[e.wrapR]),p.texParameteri(t,10240,N[e.magFilter]),p.texParameteri(t,10241,N[e.minFilter])):(p.texParameteri(t,10242,33071),p.texParameteri(t,10243,33071),32879!==t&&35866!==t||p.texParameteri(t,32882,33071),1001===e.wrapS&&1001===e.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),p.texParameteri(t,10240,a(e.magFilter)),p.texParameteri(t,10241,a(e.minFilter)),1003!==e.minFilter&&1006!==e.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(i=n.get("EXT_texture_filter_anisotropic"))||1015===e.type&&null===n.get("OES_texture_float_linear")||1016===e.type&&null===(A||n.get("OES_texture_half_float_linear"))||!(1<e.anisotropy||m.get(e).__currentAnisotropy)||(p.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,r.getMaxAnisotropy())),m.get(e).__currentAnisotropy=e.anisotropy)}function S(t,e){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",i),t.__webglTexture=p.createTexture(),s.memory.textures++)}function d(t,e,i){var n=3553;e.isDataTexture2DArray&&(n=35866),e.isDataTexture3D&&(n=32879),S(t,e),f.activeTexture(33984+i),f.bindTexture(n,t.__webglTexture),p.pixelStorei(37440,e.flipY),p.pixelStorei(37441,e.premultiplyAlpha),p.pixelStorei(3317,e.unpackAlignment),i=(i=!A&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter))&&!1===y(e.image);var r=y(i=v(e.image,i,!1,L))||A,o=g.convert(e.format),a=g.convert(e.type),s=w(e.internalFormat,o,a);_(n,e,r);var l=e.mipmaps;if(e.isDepthTexture)s=6402,A?s=1015===e.type?36012:1014===e.type?33190:1020===e.type?35056:33189:1015===e.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===e.format&&6402===s&&1012!==e.type&&1014!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=1012,a=g.convert(e.type)),1027===e.format&&6402===s&&(s=34041,1020!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=1020,a=g.convert(e.type))),f.texImage2D(3553,0,s,i.width,i.height,0,o,a,null);else if(e.isDataTexture)if(0<l.length&&r){for(var c=0,h=l.length;c<h;c++){var u=l[c];f.texImage2D(3553,c,s,u.width,u.height,0,o,a,u.data)}e.generateMipmaps=!1,t.__maxMipLevel=l.length-1}else f.texImage2D(3553,0,s,i.width,i.height,0,o,a,i.data),t.__maxMipLevel=0;else if(e.isCompressedTexture){for(c=0,h=l.length;c<h;c++)u=l[c],1023!==e.format&&1022!==e.format?null!==o?f.compressedTexImage2D(3553,c,s,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):f.texImage2D(3553,c,s,u.width,u.height,0,o,a,u.data);t.__maxMipLevel=l.length-1}else if(e.isDataTexture2DArray)f.texImage3D(35866,0,s,i.width,i.height,i.depth,0,o,a,i.data),t.__maxMipLevel=0;else if(e.isDataTexture3D)f.texImage3D(32879,0,s,i.width,i.height,i.depth,0,o,a,i.data),t.__maxMipLevel=0;else if(0<l.length&&r){for(c=0,h=l.length;c<h;c++)u=l[c],f.texImage2D(3553,c,s,o,a,u);e.generateMipmaps=!1,t.__maxMipLevel=l.length-1}else f.texImage2D(3553,0,s,o,a,i),t.__maxMipLevel=0;b(e,r)&&x(n,e,i.width,i.height),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function M(t,e,i,n){var r=g.convert(e.texture.format),o=g.convert(e.texture.type),a=w(e.texture.internalFormat,r,o);f.texImage2D(n,0,a,e.width,e.height,0,r,o,null),p.bindFramebuffer(36160,t),p.framebufferTexture2D(36160,i,n,m.get(e.texture).__webglTexture,0),p.bindFramebuffer(36160,null)}function T(t,e,i){var n;p.bindRenderbuffer(36161,t),e.depthBuffer&&!e.stencilBuffer?(n=33189,i?((i=e.depthTexture)&&i.isDepthTexture&&(1015===i.type?n=36012:1014===i.type&&(n=33190)),i=E(e),p.renderbufferStorageMultisample(36161,i,n,e.width,e.height)):p.renderbufferStorage(36161,n,e.width,e.height),p.framebufferRenderbuffer(36160,36096,36161,t)):e.depthBuffer&&e.stencilBuffer?(i?(i=E(e),p.renderbufferStorageMultisample(36161,i,35056,e.width,e.height)):p.renderbufferStorage(36161,34041,e.width,e.height),p.framebufferRenderbuffer(36160,33306,36161,t)):(t=g.convert(e.texture.format),n=g.convert(e.texture.type),t=w(e.texture.internalFormat,t,n),i?(i=E(e),p.renderbufferStorageMultisample(36161,i,t,e.width,e.height)):p.renderbufferStorage(36161,t,e.width,e.height)),p.bindRenderbuffer(36161,null)}function E(t){return A&&t.isWebGLMultisampleRenderTarget?Math.min(R,t.samples):0}var C,A=r.isWebGL2,e=r.maxTextures,P=r.maxCubemapSize,L=r.maxTextureSize,R=r.maxSamples,O=new WeakMap,D=!1;try{D="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}var I=0,k={1e3:10497,1001:33071,1002:33648},N={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},F=!1,B=!1;this.allocateTextureUnit=function(){var t=I;return e<=t&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+e),I+=1,t},this.resetTextureUnits=function(){I=0},this.setTexture2D=c,this.setTexture2DArray=function(t,e){var i=m.get(t);0<t.version&&i.__version!==t.version?d(i,t,e):(f.activeTexture(33984+e),f.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=m.get(t);0<t.version&&i.__version!==t.version?d(i,t,e):(f.activeTexture(33984+e),f.bindTexture(32879,i.__webglTexture))},this.setTextureCube=h,this.setTextureCubeDynamic=u,this.setupRenderTarget=function(t){var e=m.get(t),i=m.get(t.texture);t.addEventListener("dispose",l),i.__webglTexture=p.createTexture(),s.memory.textures++;var n,r=!0===t.isWebGLCubeRenderTarget,o=!0===t.isWebGLMultisampleRenderTarget,a=y(t)||A;if(!A||1022!==t.texture.format||1015!==t.texture.type&&1016!==t.texture.type||(t.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),r)for(e.__webglFramebuffer=[],o=0;o<6;o++)e.__webglFramebuffer[o]=p.createFramebuffer();else e.__webglFramebuffer=p.createFramebuffer(),o&&(A?(e.__webglMultisampledFramebuffer=p.createFramebuffer(),e.__webglColorRenderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(36161,e.__webglColorRenderbuffer),o=g.convert(t.texture.format),n=g.convert(t.texture.type),o=w(t.texture.internalFormat,o,n),n=E(t),p.renderbufferStorageMultisample(36161,n,o,t.width,t.height),p.bindFramebuffer(36160,e.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(36160,36064,36161,e.__webglColorRenderbuffer),p.bindRenderbuffer(36161,null),t.depthBuffer&&(e.__webglDepthRenderbuffer=p.createRenderbuffer(),T(e.__webglDepthRenderbuffer,t,!0)),p.bindFramebuffer(36160,null)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."));if(r){for(f.bindTexture(34067,i.__webglTexture),_(34067,t.texture,a),i=0;i<6;i++)M(e.__webglFramebuffer[i],t,36064,34069+i);b(t.texture,a)&&x(34067,t.texture,t.width,t.height),f.bindTexture(34067,null)}else f.bindTexture(3553,i.__webglTexture),_(3553,t.texture,a),M(e.__webglFramebuffer,t,36064,3553),b(t.texture,a)&&x(3553,t.texture,t.width,t.height),f.bindTexture(3553,null);if(t.depthBuffer){if(e=m.get(t),a=!0===t.isWebGLCubeRenderTarget,t.depthTexture){if(a)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(p.bindFramebuffer(36160,e.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(m.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),c(t.depthTexture,0),e=m.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)p.framebufferTexture2D(36160,36096,3553,e,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");p.framebufferTexture2D(36160,33306,3553,e,0)}}else if(a)for(e.__webglDepthbuffer=[],a=0;a<6;a++)p.bindFramebuffer(36160,e.__webglFramebuffer[a]),e.__webglDepthbuffer[a]=p.createRenderbuffer(),T(e.__webglDepthbuffer[a],t,!1);else p.bindFramebuffer(36160,e.__webglFramebuffer),e.__webglDepthbuffer=p.createRenderbuffer(),T(e.__webglDepthbuffer,t,!1);p.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e,i=t.texture,n=y(t)||A;b(i,n)&&(n=t.isWebGLCubeRenderTarget?34067:3553,e=m.get(i).__webglTexture,f.bindTexture(n,e),x(n,i,t.width,t.height),f.bindTexture(n,null))},this.updateMultisampleRenderTarget=function(t){var e,i,n,r;t.isWebGLMultisampleRenderTarget&&(A?(e=m.get(t),p.bindFramebuffer(36008,e.__webglMultisampledFramebuffer),p.bindFramebuffer(36009,e.__webglFramebuffer),i=t.width,n=t.height,r=16384,t.depthBuffer&&(r|=256),t.stencilBuffer&&(r|=1024),p.blitFramebuffer(0,0,i,n,0,0,i,n,r,9728),p.bindFramebuffer(36160,e.__webglMultisampledFramebuffer)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."))},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),c(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),(t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?h:u)(t,e)}}function De(t,i,e){var n=e.isWebGL2;return{convert:function(t){if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(n)return 5131;var e=i.get("OES_texture_half_float");return null!==e?e.HALF_FLOAT_OES:null}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(e=i.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(e=i.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(e=i.get("WEBGL_compressed_texture_etc1"))?e.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(e=i.get("WEBGL_compressed_texture_etc"))){if(37492===t)return e.COMPRESSED_RGB8_ETC2;if(37496===t)return e.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(e=i.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(e=i.get("EXT_texture_compression_bptc"))?t:null:1020===t?n?34042:null!==(e=i.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Ie(t){q.call(this),this.cameras=t||[]}function ke(){f.call(this),this.type="Group"}function Ne(){this._hand=this._grip=this._targetRay=null}function Fe(c,e){function i(t){var e=m.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function n(){m.forEach(function(t,e){t.disconnect(e)}),m.clear(),c.setFramebuffer(null),c.setRenderTarget(c.getRenderTarget()),T.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function r(t){p=t,T.setContext(d),T.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}function o(t){for(var e=d.inputSources,i=0;i<f.length;i++)m.set(e[i],f[i]);for(e=0;e<t.removed.length;e++){var i=t.removed[e],n=m.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),m.delete(i))}for(e=0;e<t.added.length;e++)i=t.added[e],(n=m.get(i))&&n.dispatchEvent({type:"connected",data:i})}function h(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var u,a=this,d=null,s=1,p=null,l="local-floor",f=[],m=new Map,g=new q;g.layers.enable(1),g.viewport=new _t;var v=new q;v.layers.enable(2),v.viewport=new _t;var y=[g,v],b=new Ie;b.layers.enable(1),b.layers.enable(2);var x=null,w=null;this.isPresenting=this.enabled=!1,this.getController=function(t){var e=f[t];return void 0===e&&(e=new Ne,f[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=f[t];return void 0===e&&(e=new Ne,f[t]=e),e.getGripSpace()},this.getHand=function(t){var e=f[t];return void 0===e&&(e=new Ne,f[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){s=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){l=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p},this.getSession=function(){return d},this.setSession=function(t){null!==(d=t)&&(d.addEventListener("select",i),d.addEventListener("selectstart",i),d.addEventListener("selectend",i),d.addEventListener("squeeze",i),d.addEventListener("squeezestart",i),d.addEventListener("squeezeend",i),d.addEventListener("end",n),!0!==(t=e.getContextAttributes()).xrCompatible&&e.makeXRCompatible(),t=new XRWebGLLayer(d,e,{antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:s}),d.updateRenderState({baseLayer:t}),d.requestReferenceSpace(l).then(r),d.addEventListener("inputsourceschange",o))};var _=new St,S=new St;this.getCamera=function(t){b.near=v.near=g.near=t.near,b.far=v.far=g.far=t.far,x===b.near&&w===b.far||(d.updateRenderState({depthNear:b.near,depthFar:b.far}),x=b.near,w=b.far);var e=t.parent,i=b.cameras;h(b,e);for(var n,r,o,a,s,l=0;l<i.length;l++)h(i[l],e);for(t.matrixWorld.copy(b.matrixWorld),e=0,l=(t=t.children).length;e<l;e++)t[e].updateMatrixWorld(!0);return 2===i.length?(_.setFromMatrixPosition(g.matrixWorld),S.setFromMatrixPosition(v.matrixWorld),i=_.distanceTo(S),o=g.projectionMatrix.elements,r=v.projectionMatrix.elements,n=o[14]/(o[10]-1),t=o[14]/(o[10]+1),e=(o[9]+1)/o[5],l=(o[9]-1)/o[5],s=(o[8]-1)/o[0],a=(r[8]+1)/r[0],r=n*s,o=n*a,s=(a=i/(a-s))*-s,g.matrixWorld.decompose(b.position,b.quaternion,b.scale),b.translateX(s),b.translateZ(a),b.matrixWorld.compose(b.position,b.quaternion,b.scale),b.matrixWorldInverse.getInverse(b.matrixWorld),n+=a,b.projectionMatrix.makePerspective(r-s,i-s+o,e*t/(a=t+a)*n,l*t/a*n,n,a)):b.projectionMatrix.copy(g.projectionMatrix),b};var M=null,T=new Ct;T.setAnimationLoop(function(t,e){if(null!==(u=e.getViewerPose(p))){var i=u.views,n=d.renderState.baseLayer;c.setFramebuffer(n.framebuffer);var r=!1;i.length!==b.cameras.length&&(r=!(b.cameras.length=0));for(var o=0;o<i.length;o++){var a=i[o],s=n.getViewport(a),l=y[o];l.matrix.fromArray(a.transform.matrix),l.projectionMatrix.fromArray(a.projectionMatrix),l.viewport.set(s.x,s.y,s.width,s.height),0===o&&b.matrix.copy(l.matrix),!0===r&&b.cameras.push(l)}}for(i=d.inputSources,n=0;n<f.length;n++)f[n].update(i[n],e,p);M&&M(t,e)}),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}function Be(o){function s(t,e,i){var n,r;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),(i=e.envMap||i)&&(t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,void 0!==(i=o.get(i).__maxMipLevel)&&(t.maxMipLevel.value=i)),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(!0===(n=n.isWebGLRenderTarget?n.texture:n).matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),e.aoMap?r=e.aoMap:e.lightMap&&(r=e.lightMap),void 0!==r&&(!0===(r=r.isWebGLRenderTarget?r.texture:r).matrixAutoUpdate&&r.updateMatrix(),t.uv2Transform.value.copy(r.matrix))}function l(t,e,i){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||i)&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,e,i,n,r){var o,a;e.isMeshBasicMaterial?s(t,e):e.isMeshLambertMaterial?(s(t,e),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)):e.isMeshToonMaterial?(s(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)):e.isMeshPhongMaterial?(s(t,e),t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)):e.isMeshStandardMaterial?(s(t,e,i),e.isMeshPhysicalMaterial?(l(t,e,i),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)):l(t,e,i)):e.isMeshMatcapMaterial?(s(t,e),e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)):e.isMeshDepthMaterial?(s(t,e),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)):e.isMeshDistanceMaterial?(s(t,e),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance):e.isMeshNormalMaterial?(s(t,e),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)):e.isLineBasicMaterial?(t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.isLineDashedMaterial&&(t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale)):e.isPointsMaterial?(t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?o=e.map:e.alphaMap&&(o=e.alphaMap),void 0!==o&&(!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uvTransform.value.copy(o.matrix))):e.isSpriteMaterial?(t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?a=e.map:e.alphaMap&&(a=e.alphaMap),void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uvTransform.value.copy(a.matrix))):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function ze(t){function e(t,e){for(var i=0;i<t.length;i++){var n=o.getContext(t[i],e);if(null!==n)return n}return null}function i(){S=new It(gt),!1===(M=new Ot(gt,S,t)).isWebGL2&&(S.get("WEBGL_depth_texture"),S.get("OES_texture_float"),S.get("OES_texture_half_float"),S.get("OES_texture_half_float_linear"),S.get("OES_standard_derivatives"),S.get("OES_element_index_uint"),S.get("OES_vertex_array_object"),S.get("ANGLE_instanced_arrays")),S.get("OES_texture_float_linear"),H=new De(0,S,M),(T=new Re(gt,S,M)).scissor(Q.copy(st).multiplyScalar(nt).floor()),T.viewport(K.copy(at).multiplyScalar(nt).floor()),E=new Ft,C=new ye,A=new Oe(gt,S,T,C,M,H,E),P=new At(gt,M),U=new Lt(gt,S,P,M),L=new kt(0,P,E,U),R=new zt(0,L,P,E),F=new Bt(gt),O=new ve(j,S,M,U),D=new Be(C),I=new _e(C),k=new Ce,N=new Pt(j,T,R,v),B=new Rt(gt,S,E,M),z=new Nt(gt,S,E,M),E.programs=O.programs,j.capabilities=M,j.extensions=S,j.properties=C,j.renderLists=I,j.state=T,j.info=E}function n(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),G=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),G=!1,i()}function c(t){(t=t.target).removeEventListener("dispose",c),h(t),C.remove(t)}function h(t){void 0!==(t=C.get(t).program)&&O.releaseProgram(t)}function a(t,e,i){for(var n=!0===e.isScene?e.overrideMaterial:null,r=0,o=t.length;r<o;r++){var a=(c=t[r]).object,s=c.geometry,l=null===n?c.material:n,c=c.group;if(i.isArrayCamera)for(var h=(J=i).cameras,u=0,d=h.length;u<d;u++){var p=h[u];a.layers.test(p.layers)&&(T.viewport(K.copy(p.viewport)),_.setupLights(p),f(a,e,p,s,l,c))}else J=null,f(a,e,i,s,l,c)}}function f(t,e,i,n,r,o){var a,s;t.onBeforeRender(j,e,i,n,r,o),_=k.get(e,J||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject?(a=u(i,e,r,t),T.setMaterial(r),U.reset(),s=a,t.render(function(t){j.renderBufferImmediate(t,s)})):j.renderBufferDirect(i,e,n,r,t,o),t.onAfterRender(j,e,i,n,r,o),_=k.get(e,J||i)}function m(t,e,i){!0!==e.isScene&&(e=mt);var n=C.get(t),r=_.state.lights,o=r.state.version;i=O.getParameters(t,r.state,_.state.shadowsArray,e,ht.numPlanes,ht.numIntersection,i);var a=O.getProgramCacheKey(i),s=n.program,l=!0;if(void 0===s)t.addEventListener("dispose",c);else if(s.cacheKey!==a)h(t);else{if(n.lightsStateVersion!==o)n.lightsStateVersion=o;else if(void 0!==i.shaderID)return;l=!1}if(l&&(i.uniforms=O.getUniforms(t,i),t.onBeforeCompile(i,j),s=O.acquireProgram(i,a),n.program=s,n.uniforms=i.uniforms,n.outputEncoding=i.outputEncoding),i=s.getAttributes(),t.morphTargets)for(a=t.numSupportedMorphTargets=0;a<j.maxMorphTargets;a++)0<=i["morphTarget"+a]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(a=t.numSupportedMorphNormals=0;a<j.maxMorphNormals;a++)0<=i["morphNormal"+a]&&t.numSupportedMorphNormals++;i=n.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=ht.numPlanes,n.numIntersection=ht.numIntersection,i.clippingPlanes=ht.uniform),n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.needsLights=t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,n.lightsStateVersion=o,n.needsLights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.directionalLightShadows.value=r.state.directionalShadow,i.spotLights.value=r.state.spot,i.spotLightShadows.value=r.state.spotShadow,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.pointLightShadows.value=r.state.pointShadow,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),t=n.program.getUniforms(),t=re.seqWithValue(t.seq,i),n.uniformsList=t}function u(t,e,i,n){!0!==e.isScene&&(e=mt),A.resetTextureUnits();var r=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===q?j.outputEncoding:q.texture.encoding,s=C.get(i),l=_.state.lights;!0!==ut||!0!==dt&&t===Z||ht.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,s,t===Z&&i.id===Y),i.version===s.__version?(void 0===s.program||i.fog&&s.fog!==r||s.environment!==o||s.needsLights&&s.lightsStateVersion!==l.state.version||void 0!==s.numClippingPlanes&&(s.numClippingPlanes!==ht.numPlanes||s.numIntersection!==ht.numIntersection)||s.outputEncoding!==a)&&m(i,e,n):(m(i,e,n),s.__version=i.version);var c,h,u=!1,d=!1,p=!1,a=(e=s.program).getUniforms(),l=s.uniforms;return T.useProgram(e.program)&&(p=d=u=!0),i.id!==Y&&(Y=i.id,d=!0),!u&&Z===t||(a.setValue(gt,"projectionMatrix",t.projectionMatrix),M.logarithmicDepthBuffer&&a.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),Z!==t&&(Z=t,p=d=!0),!(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap)||void 0!==(u=a.map.cameraPosition)&&u.setValue(gt,ft.setFromMatrixPosition(t.matrixWorld)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&a.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&a.setValue(gt,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(a.setOptional(gt,n,"bindMatrix"),a.setOptional(gt,n,"bindMatrixInverse"),t=n.skeleton)&&(u=t.bones,M.floatVertexTextures?(void 0===t.boneTexture&&(u=Math.sqrt(4*u.length),u=Do.ceilPowerOfTwo(u),u=Math.max(u,4),(c=new Float32Array(u*u*4)).set(t.boneMatrices),h=new Tt(c,u,u,1023,1015),t.boneMatrices=c,t.boneTexture=h,t.boneTextureSize=u),a.setValue(gt,"boneTexture",t.boneTexture,A),a.setValue(gt,"boneTextureSize",t.boneTextureSize)):a.setOptional(gt,t,"boneMatrices")),!d&&s.receiveShadow===n.receiveShadow||(s.receiveShadow=n.receiveShadow,a.setValue(gt,"receiveShadow",n.receiveShadow)),d&&(a.setValue(gt,"toneMappingExposure",j.toneMappingExposure),s.needsLights&&(l.ambientLightColor.needsUpdate=d=p,l.lightProbe.needsUpdate=d,l.directionalLights.needsUpdate=d,l.directionalLightShadows.needsUpdate=d,l.pointLights.needsUpdate=d,l.pointLightShadows.needsUpdate=d,l.spotLights.needsUpdate=d,l.spotLightShadows.needsUpdate=d,l.rectAreaLights.needsUpdate=d,l.hemisphereLights.needsUpdate=d),r&&i.fog&&D.refreshFogUniforms(l,r),D.refreshMaterialUniforms(l,i,o,nt,it),void 0!==l.ltc_1&&(l.ltc_1.value=Ms.LTC_1),void 0!==l.ltc_2&&(l.ltc_2.value=Ms.LTC_2),re.upload(gt,s.uniformsList,l,A)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(re.upload(gt,s.uniformsList,l,A),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&a.setValue(gt,"center",n.center),a.setValue(gt,"modelViewMatrix",n.modelViewMatrix),a.setValue(gt,"normalMatrix",n.normalMatrix),a.setValue(gt,"modelMatrix",n.matrixWorld),e}var o=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s=void 0!==t.context?t.context:null,l=void 0!==t.alpha&&t.alpha,d=void 0===t.depth||t.depth,p=void 0===t.stencil||t.stencil,g=void 0!==t.antialias&&t.antialias,v=void 0===t.premultipliedAlpha||t.premultipliedAlpha,y=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,b=void 0!==t.powerPreference?t.powerPreference:"default",x=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,w=null,_=null;this.domElement=o,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var S,M,T,E,C,A,P,L,R,O,D,I,k,N,F,B,z,H,U,j=this,G=!1,V=null,W=0,$=0,q=null,X=null,Y=-1,Z=null,J=null,K=new _t,Q=new _t,tt=null,et=o.width,it=o.height,nt=1,rt=null,ot=null,at=new _t(0,0,et,it),st=new _t(0,0,et,it),lt=!1,ct=new Et,ht=new Dt,ut=!1,dt=!1,pt=new Mt,ft=new St,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},gt=s;try{if(s={alpha:l,depth:d,stencil:p,antialias:g,premultipliedAlpha:v,preserveDrawingBuffer:y,powerPreference:b,failIfMajorPerformanceCaveat:x},o.addEventListener("webglcontextlost",n,!1),o.addEventListener("webglcontextrestored",r,!1),null===gt&&(l=["webgl2","webgl","experimental-webgl"],!0===j.isWebGL1Renderer&&l.shift(),null===(gt=e(l,s)))){if(e(l))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}i();var vt=new Fe(j,gt);this.xr=vt;var yt=new Le(j,R,M.maxTextureSize);this.shadowMap=yt,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){var t=S.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=S.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(t){void 0!==t&&(nt=t,this.setSize(et,it,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new wt),t.set(et,it)},this.setSize=function(t,e,i){vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(et=t,it=e,o.width=Math.floor(t*nt),o.height=Math.floor(e*nt),!1!==i&&(o.style.width=t+"px",o.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new wt),t.set(et*nt,it*nt).floor()},this.setDrawingBufferSize=function(t,e,i){et=t,it=e,nt=i,o.width=Math.floor(t*i),o.height=Math.floor(e*i),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new _t),t.copy(K)},this.getViewport=function(t){return t.copy(at)},this.setViewport=function(t,e,i,n){t.isVector4?at.set(t.x,t.y,t.z,t.w):at.set(t,e,i,n),T.viewport(K.copy(at).multiplyScalar(nt).floor())},this.getScissor=function(t){return t.copy(st)},this.setScissor=function(t,e,i,n){t.isVector4?st.set(t.x,t.y,t.z,t.w):st.set(t,e,i,n),T.scissor(Q.copy(st).multiplyScalar(nt).floor())},this.getScissorTest=function(){return lt},this.setScissorTest=function(t){T.setScissorTest(lt=t)},this.setOpaqueSort=function(t){rt=t},this.setTransparentSort=function(t){ot=t},this.getClearColor=function(){return N.getClearColor()},this.setClearColor=function(){N.setClearColor.apply(N,arguments)},this.getClearAlpha=function(){return N.getClearAlpha()},this.setClearAlpha=function(){N.setClearAlpha.apply(N,arguments)},this.clear=function(t,e,i){var n=0;void 0!==t&&!t||(n|=16384),void 0!==e&&!e||(n|=256),void 0!==i&&!i||(n|=1024),gt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",n,!1),o.removeEventListener("webglcontextrestored",r,!1),I.dispose(),k.dispose(),C.dispose(),R.dispose(),U.dispose(),vt.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){U.initAttributes();var i=C.get(t);t.hasPositions&&!i.position&&(i.position=gt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=gt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=gt.createBuffer()),t.hasColors&&!i.color&&(i.color=gt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(gt.bindBuffer(34962,i.position),gt.bufferData(34962,t.positionArray,35048),U.enableAttribute(e.position),gt.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(gt.bindBuffer(34962,i.normal),gt.bufferData(34962,t.normalArray,35048),U.enableAttribute(e.normal),gt.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(gt.bindBuffer(34962,i.uv),gt.bufferData(34962,t.uvArray,35048),U.enableAttribute(e.uv),gt.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(gt.bindBuffer(34962,i.color),gt.bufferData(34962,t.colorArray,35048),U.enableAttribute(e.color),gt.vertexAttribPointer(e.color,3,5126,!1,0,0)),U.disableUnusedAttributes(),gt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,o){null===e&&(e=mt);var a=r.isMesh&&r.matrixWorld.determinant()<0;if(t=u(t,e,n,r),T.setMaterial(n,a),a=i.index,e=i.attributes.position,null===a){if(void 0===e||0===e.count)return}else if(0===a.count)return;var s=1;!0===n.wireframe&&(a=L.getWireframeAttribute(i),s=2),(n.morphTargets||n.morphNormals)&&F.update(r,i,n,t),U.setup(r,n,t,i,a),t=B,null!==a&&(h=P.get(a),(t=z).setIndex(h));var l=i.drawRange.start*s,c=null!==o?o.start*s:0,h=Math.max(l,c);0!==(o=Math.max(0,Math.min((null!==a?a:e).count,l+i.drawRange.count*s,c+(null!==o?o.count*s:1/0))-1-h+1))&&(r.isMesh?!0===n.wireframe?(T.setLineWidth(n.wireframeLinewidth*(null===q?nt:1)),t.setMode(1)):t.setMode(4):r.isLine?(n=n.linewidth,T.setLineWidth((n=void 0===n?1:n)*(null===q?nt:1)),r.isLineSegments?t.setMode(1):r.isLineLoop?t.setMode(2):t.setMode(3)):r.isPoints?t.setMode(0):r.isSprite&&t.setMode(4),r.isInstancedMesh?t.renderInstances(h,o,r.count):i.isInstancedBufferGeometry?t.renderInstances(h,o,Math.min(i.instanceCount,i._maxInstanceCount)):t.render(h,o))},this.compile=function(r,t){(_=k.get(r,t)).init(),r.traverse(function(t){t.isLight&&(_.pushLight(t),t.castShadow&&_.pushShadow(t))}),_.setupLights(t);var o=new WeakMap;r.traverse(function(t){var e=t.material;if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++){var n=e[i];!1===o.has(n)&&(m(n,r,t),o.set(n))}else!1===o.has(e)&&(m(e,r,t),o.set(e))})};var bt=null,xt=new Ct;xt.setAnimationLoop(function(t){vt.isPresenting||bt&&bt(t)}),"undefined"!=typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){bt=t,vt.setAnimationLoop(t),null===t?xt.stop():xt.start()},this.render=function(t,e,i,n){var r,o;void 0!==i&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),r=i),void 0!==n&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),o=n),void 0!==e&&!0!==e.isCamera?console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."):!0!==G&&(U.resetDefaultState(),Y=-1,!(Z=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(e=vt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(j,t,e,r||q),(_=k.get(t,e)).init(),pt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),ct.setFromProjectionMatrix(pt),dt=this.localClippingEnabled,ut=ht.init(this.clippingPlanes,dt,e),(w=I.get(t,e)).init(),function t(e,i,n,r){if(!1!==e.visible){if(e.layers.test(i.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(i);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){var o,a;e.frustumCulled&&!ct.intersectsSprite(e)||(r&&ft.setFromMatrixPosition(e.matrixWorld).applyMatrix4(pt),o=R.update(e),(a=e.material).visible&&w.push(e,o,a,n,ft.z,null))}else if(e.isImmediateRenderObject)r&&ft.setFromMatrixPosition(e.matrixWorld).applyMatrix4(pt),w.push(e,null,e.material,n,ft.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==E.render.frame&&(e.skeleton.update(),e.skeleton.frame=E.render.frame),!e.frustumCulled||ct.intersectsObject(e)))if(r&&ft.setFromMatrixPosition(e.matrixWorld).applyMatrix4(pt),o=R.update(e),a=e.material,Array.isArray(a))for(var s=o.groups,l=0,c=s.length;l<c;l++){var h=s[l],u=a[h.materialIndex];u&&u.visible&&w.push(e,o,u,n,ft.z,h)}else a.visible&&w.push(e,o,a,n,ft.z,null);for(o=0,a=(e=e.children).length;o<a;o++)t(e[o],i,n,r)}}(t,e,0,j.sortObjects),w.finish(),!0===j.sortObjects&&w.sort(rt,ot),!0===ut&&ht.beginShadows(),yt.render(_.state.shadowsArray,t,e),_.setupLights(e),!0===ut&&ht.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),N.render(w,t,e,o),i=w.opaque,n=w.transparent,0<i.length&&a(i,t,e),0<n.length&&a(n,t,e),!0===t.isScene&&t.onAfterRender(j,t,e),null!==q&&(A.updateRenderTargetMipmap(q),A.updateMultisampleRenderTarget(q)),T.buffers.depth.setTest(!0),T.buffers.depth.setMask(!0),T.buffers.color.setMask(!0),T.setPolygonOffset(!1),_=w=null)},this.setFramebuffer=function(t){V!==t&&null===q&&gt.bindFramebuffer(36160,t),V=t},this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return $},this.getRenderTarget=function(){return q},this.setRenderTarget=function(t,e,i){W=e,$=i,(q=t)&&void 0===C.get(t).__webglFramebuffer&&A.setupRenderTarget(t);var n=V,r=!1;tt=t?(n=C.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(n=n[e||0],r=!0):n=t.isWebGLMultisampleRenderTarget?C.get(t).__webglMultisampledFramebuffer:n,K.copy(t.viewport),Q.copy(t.scissor),t.scissorTest):(K.copy(at).multiplyScalar(nt).floor(),Q.copy(st).multiplyScalar(nt).floor(),lt),X!==n&&(gt.bindFramebuffer(36160,n),X=n),T.viewport(K),T.scissor(Q),T.setScissorTest(tt),r&&(t=C.get(t.texture),gt.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,i||0))},this.readRenderTargetPixels=function(t,e,i,n,r,o,a){if(t&&t.isWebGLRenderTarget){var s=C.get(t).__webglFramebuffer;if(s=t.isWebGLCubeRenderTarget&&void 0!==a?s[a]:s){a=!1,s!==X&&(gt.bindFramebuffer(36160,s),a=!0);try{var l=t.texture,c=l.format,h=l.type;1023!==c&&H.convert(c)!==gt.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||H.convert(h)===gt.getParameter(35738)||1015===h&&(M.isWebGL2||S.get("OES_texture_float")||S.get("WEBGL_color_buffer_float"))||1016===h&&(M.isWebGL2?S.get("EXT_color_buffer_float"):S.get("EXT_color_buffer_half_float"))?36053===gt.checkFramebufferStatus(36160)?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-r&&gt.readPixels(e,i,n,r,H.convert(c),H.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{a&&gt.bindFramebuffer(36160,X)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){void 0===i&&(i=0);var n=Math.pow(2,-i),r=Math.floor(e.image.width*n),n=Math.floor(e.image.height*n),o=H.convert(e.format);A.setTexture2D(e,0),gt.copyTexImage2D(3553,i,o,t.x,t.y,r,n,0),T.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n){void 0===n&&(n=0);var r=e.image.width,o=e.image.height,a=H.convert(i.format),s=H.convert(i.type);A.setTexture2D(i,0),gt.pixelStorei(37440,i.flipY),gt.pixelStorei(37441,i.premultiplyAlpha),gt.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?gt.texSubImage2D(3553,n,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):gt.texSubImage2D(3553,n,t.x,t.y,a,s,e.image),0===n&&i.generateMipmaps&&gt.generateMipmap(3553),T.unbindTexture()},this.initTexture=function(t){A.setTexture2D(t,0),T.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function He(t){ze.call(this,t)}function Ue(t,e){this.name="",this.color=new y(t),this.density=void 0!==e?e:25e-5}function je(t,e,i){this.name="",this.color=new y(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Ge(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Do.generateUUID()}function Ve(t,e,i,n){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function We(t){w.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(t)}function $e(t){var e;f.call(this),this.type="Sprite",void 0===Gs&&(Gs=new N,e=new Ge(e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),Gs.setIndex([0,1,2,0,2,3]),Gs.setAttribute("position",new Ve(e,3,0,!1)),Gs.setAttribute("uv",new Ve(e,2,3,!1))),this.geometry=Gs,this.material=void 0!==t?t:new We,this.center=new wt(.5,.5)}function qe(t,e,i,n,r,o){qs.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(Xs.x=o*qs.x-r*qs.y,Xs.y=r*qs.x+o*qs.y):Xs.copy(qs),t.copy(e),t.x+=Xs.x,t.y+=Xs.y,t.applyMatrix4(Ys)}function Xe(){f.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ye(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),F.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Mt,this.bindMatrixInverse=new Mt}function Ze(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Mt)}function Je(){f.call(this),this.type="Bone"}function Ke(t,e,i){F.call(this,t,e),this.instanceMatrix=new C(new Float32Array(16*i),16),this.count=i,this.frustumCulled=!1}function Qe(t){w.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(t)}function ti(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),f.call(this),this.type="Line",this.geometry=void 0!==t?t:new N,this.material=void 0!==e?e:new Qe,this.updateMorphTargets()}function ei(t,e){ti.call(this,t,e),this.type="LineSegments"}function ii(t,e){ti.call(this,t,e),this.type="LineLoop"}function ni(t){w.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function ri(t,e){f.call(this),this.type="Points",this.geometry=void 0!==t?t:new N,this.material=void 0!==e?e:new ni,this.updateMorphTargets()}function oi(t,e,i,n,r,o,a){var s=Sl.distanceSqToPoint(t);s<i&&(i=new St,Sl.closestPointToPoint(t,i),i.applyMatrix4(n),(t=r.ray.origin.distanceTo(i))<r.near||t>r.far||o.push({distance:t,distanceToRay:Math.sqrt(s),point:i,index:e,face:null,object:a}))}function ai(e,t,i,n,r,o,a,s,l){d.call(this,e,t,i,n,r,o,a,s,l),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1;var c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}function si(t,e,i,n,r,o,a,s,l,c,h,u){d.call(this,null,o,a,s,l,c,n,r,h,u),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function li(t,e,i,n,r,o,a,s,l){d.call(this,t,e,i,n,r,o,a,s,l),this.needsUpdate=!0}function ci(t,e,i,n,r,o,a,s,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");d.call(this,null,n,r,o,a,s,c,i=void 0===(i=void 0===i&&1026===c?1012:i)&&1027===c?1020:i,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.generateMipmaps=this.flipY=!1}function hi(t){N.call(this),this.type="WireframeGeometry";var e=[],i=[0,0],n={},r=["a","b","c"];if(t&&t.isGeometry){for(var o,a=t.faces,s=0,l=a.length;s<l;s++)for(var c=a[s],h=0;h<3;h++){var u=c[r[h]],d=c[r[(h+1)%3]];i[0]=Math.min(u,d),i[1]=Math.max(u,d),void 0===n[u=i[0]+","+i[1]]&&(n[u]={index1:i[0],index2:i[1]})}for(o in n)i=n[o],a=t.vertices[i.index1],e.push(a.x,a.y,a.z),a=t.vertices[i.index2],e.push(a.x,a.y,a.z)}else if(t&&t.isBufferGeometry)if(o=new St,null!==t.index){for(r=t.attributes.position,s=t.index,c=(t=(l=0)===(t=t.groups).length?[{start:0,count:s.count,materialIndex:0}]:t).length;l<c;++l)for(h=d=(u=t[l]).start,u=d+u.count;h<u;h+=3)for(d=0;d<3;d++){var p=s.getX(h+d),f=s.getX(h+(d+1)%3);i[0]=Math.min(p,f),i[1]=Math.max(p,f),void 0===n[p=i[0]+","+i[1]]&&(n[p]={index1:i[0],index2:i[1]})}for(a in n)i=n[a],o.fromBufferAttribute(r,i.index1),e.push(o.x,o.y,o.z),o.fromBufferAttribute(r,i.index2),e.push(o.x,o.y,o.z)}else for(i=0,a=(n=t.attributes.position).count/3;i<a;i++)for(t=0;t<3;t++)o.fromBufferAttribute(n,3*i+t),e.push(o.x,o.y,o.z),o.fromBufferAttribute(n,3*i+(t+1)%3),e.push(o.x,o.y,o.z);this.setAttribute("position",new O(e,3))}function ui(t,e,i){H.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new di(t,e,i)),this.mergeVertices()}function di(t,e,i){N.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n=[],r=[],o=[],a=[],s=new St,l=new St,c=new St,h=new St,u=new St;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var d=e+1,p=0;p<=i;p++)for(var f=p/i,m=0;m<=e;m++){var g=m/e;t(g,f,l),r.push(l.x,l.y,l.z),0<=g-1e-5?(t(g-1e-5,f,c),h.subVectors(l,c)):(t(1e-5+g,f,c),h.subVectors(c,l)),0<=f-1e-5?(t(g,f-1e-5,c),u.subVectors(l,c)):(t(g,1e-5+f,c),u.subVectors(c,l)),s.crossVectors(h,u).normalize(),o.push(s.x,s.y,s.z),a.push(g,f)}for(t=0;t<i;t++)for(s=0;s<e;s++)c=(t+1)*d+s+1,n.push(t*d+s,l=t*d+s+1,h=(t+1)*d+s),n.push(l,c,h);this.setIndex(n),this.setAttribute("position",new O(r,3)),this.setAttribute("normal",new O(o,3)),this.setAttribute("uv",new O(a,2))}function pi(t,e,i,n){H.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new fi(t,e,i,n)),this.mergeVertices()}function fi(i,m,t,e){function g(t){u.push(t.x,t.y,t.z)}function v(t,e){e.x=i[(t*=3)+0],e.y=i[t+1],e.z=i[t+2]}function h(t,e,i,n){n<0&&1===t.x&&(d[e]=t.x-1),0===i.x&&0===i.z&&(d[e]=n/2/Math.PI+.5)}N.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:m,radius:t,detail:e},t=t||1;var u=[],d=[];!function(t){for(var e=new St,i=new St,n=new St,r=0;r<m.length;r+=3){v(m[r+0],e),v(m[r+1],i),v(m[r+2],n);for(var o=e,a=i,s=n,l=Math.pow(2,t),c=[],h=0;h<=l;h++){c[h]=[];for(var u=o.clone().lerp(s,h/l),d=a.clone().lerp(s,h/l),p=l-h,f=0;f<=p;f++)c[h][f]=0===f&&h===l?u:u.clone().lerp(d,f/p)}for(o=0;o<l;o++)for(a=0;a<2*(l-o)-1;a++)s=Math.floor(a/2),0==a%2?(g(c[o][s+1]),g(c[o+1][s]),g(c[o][s])):(g(c[o][s+1]),g(c[o+1][s+1]),g(c[o+1][s]))}}(e=e||0),function(t){for(var e=new St,i=0;i<u.length;i+=3)e.x=u[i+0],e.y=u[i+1],e.z=u[i+2],e.normalize().multiplyScalar(t),u[i+0]=e.x,u[i+1]=e.y,u[i+2]=e.z}(t),function(){for(var t=new St,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],d.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));for(var t=new St,e=new St,i=new St,n=new St,r=new wt,o=new wt,a=new wt,s=0,l=0;s<u.length;s+=9,l+=6){t.set(u[s+0],u[s+1],u[s+2]),e.set(u[s+3],u[s+4],u[s+5]),i.set(u[s+6],u[s+7],u[s+8]),r.set(d[l+0],d[l+1]),o.set(d[l+2],d[l+3]),a.set(d[l+4],d[l+5]),n.copy(t).add(e).add(i).divideScalar(3);var c=Math.atan2(n.z,-n.x);h(r,l+0,t,c),h(o,l+2,e,c),h(a,l+4,i,c)}for(t=0;t<d.length;t+=6)e=d[t+0],i=d[t+2],n=d[t+4],r=Math.min(e,i,n),.9<Math.max(e,i,n)&&r<.1&&(e<.2&&(d[t+0]+=1),i<.2&&(d[t+2]+=1),n<.2&&(d[t+4]+=1))}(),this.setAttribute("position",new O(u,3)),this.setAttribute("normal",new O(u.slice(),3)),this.setAttribute("uv",new O(d,2)),0===e?this.computeVertexNormals():this.normalizeNormals()}function mi(t,e){H.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new gi(t,e)),this.mergeVertices()}function gi(t,e){fi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function vi(t,e){H.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new yi(t,e)),this.mergeVertices()}function yi(t,e){fi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function bi(t,e){H.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new xi(t,e)),this.mergeVertices()}function xi(t,e){var i=(1+Math.sqrt(5))/2;fi.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function wi(t,e){H.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new _i(t,e)),this.mergeVertices()}function _i(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;fi.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Si(t,e,i,n,r,o){H.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new Mi(t,e,i,n,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function Mi(o,a,s,l,c){function h(t){m=o.getPointAt(t/a,m);var e=u.normals[t];t=u.binormals[t];for(var i=0;i<=l;i++){var n=i/l*Math.PI*2,r=Math.sin(n),n=-Math.cos(n);p.x=n*e.x+r*t.x,p.y=n*e.y+r*t.y,p.z=n*e.z+r*t.z,p.normalize(),v.push(p.x,p.y,p.z),d.x=m.x+s*p.x,d.y=m.y+s*p.y,d.z=m.z+s*p.z,g.push(d.x,d.y,d.z)}}N.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:a,radius:s,radialSegments:l,closed:c},s=s||1,l=l||8;var u=o.computeFrenetFrames(a=a||64,c=c||!1);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var d=new St,p=new St,f=new wt,m=new St,g=[],v=[],y=[],b=[];!function(){for(var t=0;t<a;t++)h(t);for(h(!1===c?a:0),t=0;t<=a;t++)for(var e=0;e<=l;e++)f.x=t/a,f.y=e/l,y.push(f.x,f.y);for(t=1;t<=a;t++)for(e=1;e<=l;e++){var i=(l+1)*t+(e-1),n=(l+1)*t+e,r=(l+1)*(t-1)+e;b.push((l+1)*(t-1)+(e-1),i,r),b.push(i,n,r)}}(),this.setIndex(b),this.setAttribute("position",new O(g,3)),this.setAttribute("normal",new O(v,3)),this.setAttribute("uv",new O(y,2))}function Ti(t,e,i,n,r,o,a){H.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ei(t,e,i,n,r,o)),this.mergeVertices()}function Ei(t,e,i,n,r,o){function a(t,e,i,n,r){var o=Math.sin(t);e=i/e*t,i=Math.cos(e),r.x=n*(2+i)*.5*Math.cos(t),r.y=n*(2+i)*o*.5,r.z=n*Math.sin(e)*.5}N.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,o=o||3;for(var s=[],l=[],c=[],h=[],u=new St,d=new St,p=new St,f=new St,m=new St,g=new St,v=new St,y=0;y<=i;++y){var b=y/i*r*Math.PI*2;for(a(b,r,o,t,p),a(b+.01,r,o,t,f),g.subVectors(f,p),v.addVectors(f,p),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize(),b=0;b<=n;++b){var x=b/n*Math.PI*2,w=-e*Math.cos(x),x=e*Math.sin(x);u.x=p.x+(w*v.x+x*m.x),u.y=p.y+(w*v.y+x*m.y),u.z=p.z+(w*v.z+x*m.z),l.push(u.x,u.y,u.z),d.subVectors(u,p).normalize(),c.push(d.x,d.y,d.z),h.push(y/i),h.push(b/n)}}for(t=1;t<=i;t++)for(e=1;e<=n;e++)o=(n+1)*t+e,s.push((n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),u=(n+1)*(t-1)+e),s.push(r,o,u);this.setIndex(s),this.setAttribute("position",new O(l,3)),this.setAttribute("normal",new O(c,3)),this.setAttribute("uv",new O(h,2))}function Ci(t,e,i,n,r){H.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new Ai(t,e,i,n,r)),this.mergeVertices()}function Ai(t,e,i,n,r){N.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;for(var o=[],a=[],s=[],l=[],c=new St,h=new St,u=new St,d=0;d<=i;d++)for(var p=0;p<=n;p++){var f=p/n*r,m=d/i*Math.PI*2;h.x=(t+e*Math.cos(m))*Math.cos(f),h.y=(t+e*Math.cos(m))*Math.sin(f),h.z=e*Math.sin(m),a.push(h.x,h.y,h.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),u.subVectors(h,c).normalize(),s.push(u.x,u.y,u.z),l.push(p/n),l.push(d/i)}for(t=1;t<=i;t++)for(e=1;e<=n;e++)o.push((h=(n+1)*t+e)-1,r=(c=(n+1)*(t-1)+e)-1,h),o.push(r,c,h);this.setIndex(o),this.setAttribute("position",new O(a,3)),this.setAttribute("normal",new O(s,3)),this.setAttribute("uv",new O(l,2))}function Pi(t,e,i,n,r){for(var o,a=0,s=e,l=i-n;s<i;s+=n)a+=(t[l]-t[s])*(t[s+1]+t[l+1]),l=s;if(r===0<a)for(r=e;r<i;r+=n)o=ji(r,t[r],t[r+1],o);else for(r=i-n;e<=r;r-=n)o=ji(r,t[r],t[r+1],o);return o&&Ni(o,o.next)&&(Gi(o),o=o.next),o}function Li(t,e){if(!t)return t;e=e||t;do{var i=!1;if(t.steiner||!Ni(t,t.next)&&0!==ki(t.prev,t,t.next))t=t.next;else{if(Gi(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function Ri(t,e,i,n,r,o,a){if(t){if(!a&&o){for(var s=h=t;null===s.z&&(s.z=Di(s.x,s.y,n,r,o)),s.prevZ=s.prev,(s=s.nextZ=s.next)!==h;);s.prevZ.nextZ=null,s.prevZ=null;var l,c,h=s,u=1;do{for(var s=h,d=h=null,p=0;s;){p++;for(var f=s,m=l=0;m<u&&(l++,f=f.nextZ);m++);for(c=u;0<l||0<c&&f;)0!==l&&(0===c||!f||s.z<=f.z)?(s=(m=s).nextZ,l--):(f=(m=f).nextZ,c--),d?d.nextZ=m:h=m,m.prevZ=d,d=m;s=f}}while(d.nextZ=null,u*=2,1<p)}for(h=t;t.prev!==t.next;){if(s=t.prev,f=t.next,o)d=function(t,e,i,n){var r=t.prev,o=t.next;if(0<=ki(r,t,o))return!1;var a=(r.x>t.x?r.x>o.x?r:o:t.x>o.x?t:o).x,s=(r.y>t.y?r.y>o.y?r:o:t.y>o.y?t:o).y,l=Di((r.x<t.x?r.x<o.x?r:o:t.x<o.x?t:o).x,(r.y<t.y?r.y<o.y?r:o:t.y<o.y?t:o).y,e,i,n);for(e=Di(a,s,e,i,n),i=t.prevZ,n=t.nextZ;i&&i.z>=l&&n&&n.z<=e;){if(i!==t.prev&&i!==t.next&&Ii(r.x,r.y,t.x,t.y,o.x,o.y,i.x,i.y)&&0<=ki(i.prev,i,i.next))return!1;if(i=i.prevZ,n!==t.prev&&n!==t.next&&Ii(r.x,r.y,t.x,t.y,o.x,o.y,n.x,n.y)&&0<=ki(n.prev,n,n.next))return!1;n=n.nextZ}for(;i&&i.z>=l;){if(i!==t.prev&&i!==t.next&&Ii(r.x,r.y,t.x,t.y,o.x,o.y,i.x,i.y)&&0<=ki(i.prev,i,i.next))return!1;i=i.prevZ}for(;n&&n.z<=e;){if(n!==t.prev&&n!==t.next&&Ii(r.x,r.y,t.x,t.y,o.x,o.y,n.x,n.y)&&0<=ki(n.prev,n,n.next))return!1;n=n.nextZ}return!0}(t,n,r,o);else t:if(d=t,p=d.prev,l=d,u=d.next,0<=ki(p,l,u))d=!1;else{for(m=d.next.next;m!==d.prev;){if(Ii(p.x,p.y,l.x,l.y,u.x,u.y,m.x,m.y)&&0<=ki(m.prev,m,m.next)){d=!1;break t}m=m.next}d=!0}if(d)e.push(s.i/i),e.push(t.i/i),e.push(f.i/i),Gi(t),h=t=f.next;else if((t=f)===h){if(a){if(1===a){for(a=e,h=i,s=t=Li(t);!Ni(f=s.prev,d=s.next.next)&&Fi(f,s,s.next,d)&&Hi(f,d)&&Hi(d,f)&&(a.push(f.i/h),a.push(s.i/h),a.push(d.i/h),Gi(s),Gi(s.next),s=t=d),(s=s.next)!==t;);Ri(t=Li(s),e,i,n,r,o,2)}else if(2===a)t:{a=t;do{for(h=a.next.next;h!==a.prev;){if(s=a.i!==h.i){if(d=(s=a).next.i!==(f=h).i&&s.prev.i!==f.i){e:{d=s;do{if(d.i!==s.i&&d.next.i!==s.i&&d.i!==f.i&&d.next.i!==f.i&&Fi(d,d.next,s,f)){d=!0;break e}}while((d=d.next)!==s);d=!1}d=!d}if(d){if(d=Hi(s,f)&&Hi(f,s)){for(p=!1,l=((d=s).x+f.x)/2,u=(s.y+f.y)/2;d.y>u!=d.next.y>u&&d.next.y!==d.y&&l<(d.next.x-d.x)*(u-d.y)/(d.next.y-d.y)+d.x&&(p=!p),(d=d.next)!==s;);d=p}d=d&&(ki(s.prev,s,f.prev)||ki(s,f.prev,f))||Ni(s,f)&&0<ki(s.prev,s,s.next)&&0<ki(f.prev,f,f.next)}s=d}if(s){t=Ui(a,h),a=Li(a,a.next),t=Li(t,t.next),Ri(a,e,i,n,r,o),Ri(t,e,i,n,r,o);break t}h=h.next}}while((a=a.next)!==t)}}else Ri(Li(t),e,i,n,r,o,1);break}}}}function Oi(t,e){return t.x-e.x}function Di(t,e,i,n,r){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ii(t,e,i,n,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(n-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)}function ki(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ni(t,e){return t.x===e.x&&t.y===e.y}function Fi(t,e,i,n){var r=zi(ki(t,e,i)),o=zi(ki(t,e,n)),a=zi(ki(i,n,t)),s=zi(ki(i,n,e));return!!(r!==o&&a!==s||0===r&&Bi(t,i,e)||0===o&&Bi(t,n,e)||0===a&&Bi(i,t,n)||0===s&&Bi(i,e,n))}function Bi(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function zi(t){return 0<t?1:t<0?-1:0}function Hi(t,e){return ki(t.prev,t,t.next)<0?0<=ki(t,e,t.next)&&0<=ki(t,t.prev,e):ki(t,e,t.prev)<0||ki(t,t.next,e)<0}function Ui(t,e){var i=new Vi(t.i,t.x,t.y),n=new Vi(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function ji(t,e,i,n){return t=new Vi(t,e,i),n?(t.next=n.next,(t.prev=n).next.prev=t,n.next=t):(t.prev=t).next=t,t}function Gi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Vi(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Wi(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function $i(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function qi(t,e){H.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Xi(t,e)),this.mergeVertices()}function Xi(t,U){function e(t){function e(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function i(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=i.x-t.x,a=i.y-t.y,s=n*n+r*r;if(Math.abs(n*a-r*o)>Number.EPSILON){var l=Math.sqrt(s),c=Math.sqrt(o*o+a*a),s=e.x-r/l;if(e=e.y+n/l,(r=(o=s+n*(a=((i.x-a/c-s)*a-(i.y+o/c-e)*o)/(n*a-r*o))-t.x)*o+(n=e+r*a-t.y)*n)<=2)return new wt(o,n);r=Math.sqrt(r/2)}else t=!1,n>Number.EPSILON?o>Number.EPSILON&&(t=!0):n<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(r)===Math.sign(a)&&(t=!0),r=t?(o=-r,Math.sqrt(s)):(o=n,n=r,Math.sqrt(s/2));return new wt(o/r,n/r)}function o(t,e){for(var i=t.length;0<=--i;){var n=i,r=i-1;r<0&&(r=t.length-1);for(var o=0,a=p+2*g;o<a;o++){var s=P*o,l=e+r+s,c=e+r+(h=P*(o+1)),h=e+n+h;u(e+n+s),u(l),u(h),u(l),u(c),u(h),s=G.length/3,d((s=y.generateSideWallUV(j,G,s-6,s-3,s-2,s-1))[0]),d(s[1]),d(s[3]),d(s[1]),d(s[2]),d(s[3])}}}function n(t,e,i){a.push(t),a.push(e),a.push(i)}function r(t,e,i){u(t),u(e),u(i),t=G.length/3,d((t=y.generateTopUV(j,G,t-3,t-2,t-1))[0]),d(t[1]),d(t[2])}function u(t){G.push(a[3*t]),G.push(a[3*t+1]),G.push(a[3*t+2])}function d(t){V.push(t.x),V.push(t.y)}var a=[],s=void 0!==U.curveSegments?U.curveSegments:12,p=void 0!==U.steps?U.steps:1,l=void 0!==U.depth?U.depth:100,c=void 0===U.bevelEnabled||U.bevelEnabled,h=void 0!==U.bevelThickness?U.bevelThickness:6,f=void 0!==U.bevelSize?U.bevelSize:h-2,m=void 0!==U.bevelOffset?U.bevelOffset:0,g=void 0!==U.bevelSegments?U.bevelSegments:3,v=U.extrudePath,y=void 0!==U.UVGenerator?U.UVGenerator:Al;void 0!==U.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=U.amount);var b,x,w,_,S,M=!1;v&&(b=v.getSpacedPoints(p),x=v.computeFrenetFrames(p,c=!(M=!0)),w=new St,_=new St,S=new St),c||(m=f=h=g=0);var v=(t=t.extractPoints(s)).shape,T=t.holes;if(!Cl.isClockWise(v))for(v=v.reverse(),t=0,s=T.length;t<s;t++){var E=T[t];Cl.isClockWise(E)&&(T[t]=E.reverse())}var C=Cl.triangulateShape(v,T),A=v;for(t=0,s=T.length;t<s;t++)v=v.concat(T[t]);var P=v.length,L=C.length;t=[];for(var R=(E=A.length)-1,O=(s=0)+1;s<E;s++,R++,O++)t[s]=i(A[s],A[R=R===E?0:R],A[O=O===E?0:O]);s=[],E=t.concat();for(var O=0,D=T.length;O<D;O++){for(var I=T[O],R=[],k=0,N=I.length,F=N-1,B=k+1;k<N;k++,F++,B++)F===N&&(F=0),B===N&&(B=0),R[k]=i(I[k],I[F],I[B]);s.push(R),E=E.concat(R)}for(O=0;O<g;O++){for(R=O/g,D=h*Math.cos(R*Math.PI/2),I=f*Math.sin(R*Math.PI/2)+m,R=0,k=A.length;R<k;R++)n((N=e(A[R],t[R],I)).x,N.y,-D);for(k=0,N=T.length;k<N;k++){F=T[k],R=s[k];for(var B=0,z=F.length;B<z;B++){var H=e(F[B],R[B],I);n(H.x,H.y,-D)}}}for(R=f+m,O=0;O<P;O++)D=c?e(v[O],E[O],R):v[O],M?(_.copy(x.normals[0]).multiplyScalar(D.x),w.copy(x.binormals[0]).multiplyScalar(D.y),S.copy(b[0]).add(_).add(w),n(S.x,S.y,S.z)):n(D.x,D.y,0);for(O=1;O<=p;O++)for(D=0;D<P;D++)I=c?e(v[D],E[D],R):v[D],M?(_.copy(x.normals[O]).multiplyScalar(I.x),w.copy(x.binormals[O]).multiplyScalar(I.y),S.copy(b[O]).add(_).add(w),n(S.x,S.y,S.z)):n(I.x,I.y,l/p*O);for(x=g-1;0<=x;x--){for(_=x/g,w=h*Math.cos(_*Math.PI/2),_=f*Math.sin(_*Math.PI/2)+m,S=0,v=A.length;S<v;S++)n((E=e(A[S],t[S],_)).x,E.y,l+w);for(S=0,v=T.length;S<v;S++)for(E=T[S],R=s[S],O=0,D=E.length;O<D;O++)I=e(E[O],R[O],_),M?n(I.x,I.y+b[p-1].y,b[p-1].x+w):n(I.x,I.y,l+w)}!function(){var t=G.length/3;if(c){for(var e=0*P,i=0;i<L;i++){var n=C[i];r(n[2]+e,n[1]+e,n[0]+e)}for(e=P*(p+2*g),i=0;i<L;i++)r((n=C[i])[0]+e,n[1]+e,n[2]+e)}else{for(e=0;e<L;e++)r((i=C[e])[2],i[1],i[0]);for(e=0;e<L;e++)r((i=C[e])[0]+P*p,i[1]+P*p,i[2]+P*p)}j.addGroup(t,G.length/3-t,0)}(),function(){var t=G.length/3,e=0;o(A,e),e+=A.length;for(var i=0,n=T.length;i<n;i++){var r=T[i];o(r,e),e+=r.length}j.addGroup(t,G.length/3-t,1)}()}N.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:U},t=Array.isArray(t)?t:[t];for(var j=this,G=[],V=[],i=0,n=t.length;i<n;i++)e(t[i]);this.setAttribute("position",new O(G,3)),this.setAttribute("uv",new O(V,2)),this.computeVertexNormals()}function Yi(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.shapes.push(t[n].uuid);else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function Zi(t,e){H.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Ji(t,e)),this.mergeVertices()}function Ji(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new H;t=i.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Xi.call(this,t,e),this.type="TextBufferGeometry"}function Ki(t,e,i,n,r,o,a){H.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Qi(t,e,i,n,r,o,a)),this.mergeVertices()}function Qi(t,e,i,n,r,o,a){N.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;for(var s=Math.min(o+a,Math.PI),l=0,c=[],h=new St,u=new St,d=[],p=[],f=[],m=[],g=0;g<=i;g++){var v=[],y=g/i,b=0;0==g&&0==o?b=.5/e:g==i&&s==Math.PI&&(b=-.5/e);for(var x=0;x<=e;x++){var w=x/e;h.x=-t*Math.cos(n+w*r)*Math.sin(o+y*a),h.y=t*Math.cos(o+y*a),h.z=t*Math.sin(n+w*r)*Math.sin(o+y*a),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(w+b,1-y),v.push(l++)}c.push(v)}for(t=0;t<i;t++)for(n=0;n<e;n++)r=c[t][n+1],a=c[t][n],l=c[t+1][n],h=c[t+1][n+1],(0!==t||0<o)&&d.push(r,a,h),(t!==i-1||s<Math.PI)&&d.push(a,l,h);this.setIndex(d),this.setAttribute("position",new O(p,3)),this.setAttribute("normal",new O(f,3)),this.setAttribute("uv",new O(m,2))}function tn(t,e,i,n,r,o){H.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new en(t,e,i,n,r,o)),this.mergeVertices()}function en(t,e,i,n,r,o){N.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a=[],s=[],l=[],c=[],h=t;t=(e-t)/(n=void 0!==n?Math.max(1,n):1);for(var u=new St,d=new wt,p=0;p<=n;p++){for(var f=0;f<=i;f++){var m=r+f/i*o;u.x=h*Math.cos(m),u.y=h*Math.sin(m),s.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(u.x/e+1)/2,d.y=(u.y/e+1)/2,c.push(d.x,d.y)}h+=t}for(e=0;e<n;e++)for(r=e*(i+1),o=0;o<i;o++)u=(h=o+r)+i+2,a.push(h,t=h+i+1,d=h+1),a.push(t,u,d);this.setIndex(a),this.setAttribute("position",new O(s,3)),this.setAttribute("normal",new O(l,3)),this.setAttribute("uv",new O(c,2))}function nn(t,e,i,n){H.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new rn(t,e,i,n)),this.mergeVertices()}function rn(t,e,i,n){N.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=Do.clamp(n,0,2*Math.PI);for(var r=[],o=[],a=[],s=1/e,l=new St,c=new wt,h=0;h<=e;h++)for(var u=i+h*s*n,d=Math.sin(u),u=Math.cos(u),p=0;p<=t.length-1;p++)l.x=t[p].x*d,l.y=t[p].y,l.z=t[p].x*u,o.push(l.x,l.y,l.z),c.x=h/e,c.y=p/(t.length-1),a.push(c.x,c.y);for(i=0;i<e;i++)for(s=0;s<t.length-1;s++)c=(l=s+i*t.length)+t.length,h=l+t.length+1,r.push(l,c,d=l+1),r.push(c,h,d);if(this.setIndex(r),this.setAttribute("position",new O(o,3)),this.setAttribute("uv",new O(a,2)),this.computeVertexNormals(),n===2*Math.PI)for(n=this.attributes.normal.array,r=new St,o=new St,a=new St,e=e*t.length*3,s=i=0;i<t.length;i++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],o.x=n[e+s+0],o.y=n[e+s+1],o.z=n[e+s+2],a.addVectors(r,o).normalize(),n[s+0]=n[e+s+0]=a.x,n[s+1]=n[e+s+1]=a.y,n[s+2]=n[e+s+2]=a.z}function on(t,e){H.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new an(t,e)),this.mergeVertices()}function an(t,a){function e(t){var e=l.length/3;t=(n=t.extractPoints(a)).shape;var i=n.holes;!1===Cl.isClockWise(t)&&(t=t.reverse());for(var n=0,r=i.length;n<r;n++){var o=i[n];!0===Cl.isClockWise(o)&&(i[n]=o.reverse())}for(n=Cl.triangulateShape(t,i),r=0,o=i.length;r<o;r++)t=t.concat(i[r]);for(i=0,r=t.length;i<r;i++)o=t[i],l.push(o.x,o.y,0),c.push(0,0,1),h.push(o.x,o.y);for(t=0,i=n.length;t<i;t++)r=n[t],s.push(r[0]+e,r[1]+e,r[2]+e),u+=3}N.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:a},a=a||12;var s=[],l=[],c=[],h=[],i=0,u=0;if(!1===Array.isArray(t))e(t);else for(var n=0;n<t.length;n++)e(t[n]),this.addGroup(i,u,n),i+=u,u=0;this.setIndex(s),this.setAttribute("position",new O(l,3)),this.setAttribute("normal",new O(c,3)),this.setAttribute("uv",new O(h,2))}function sn(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function ln(t,e){N.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(Do.DEG2RAD*(void 0!==e?e:1));var n=[0,0],r={},o=["a","b","c"];t.isBufferGeometry?(a=new H).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals(),t=a.vertices;for(var a,s=0,l=(a=a.faces).length;s<l;s++)for(var c=a[s],h=0;h<3;h++){var u=c[o[h]],d=c[o[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[u].face2=s}for(u in r)(void 0===(n=r[u]).face2||a[n.face1].normal.dot(a[n.face2].normal)<=e)&&(o=t[n.index1],i.push(o.x,o.y,o.z),o=t[n.index2],i.push(o.x,o.y,o.z));this.setAttribute("position",new O(i,3))}function cn(t,e,i,n,r,o,a,s){H.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new hn(t,e,i,n,r,o,a,s)),this.mergeVertices()}function hn(d,p,f,m,g,t,v,y){function e(t){for(var e=new wt,i=new St,n=0,r=!0===t?d:p,o=!0===t?1:-1,a=M,s=1;s<=m;s++)w.push(0,E*o,0),_.push(0,o,0),S.push(.5,.5),M++;s=M;for(var l=0;l<=m;l++){var c=l/m*y+v,h=Math.cos(c),c=Math.sin(c);i.x=r*c,i.y=E*o,i.z=r*h,w.push(i.x,i.y,i.z),_.push(0,o,0),e.x=.5*h+.5,e.y=.5*c*o+.5,S.push(e.x,e.y),M++}for(e=0;e<m;e++)i=a+e,r=s+e,!0===t?x.push(r,r+1,i):x.push(r+1,r,i),n+=3;b.addGroup(C,n,!0===t?1:2),C+=n}N.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:d,radiusBottom:p,height:f,radialSegments:m,heightSegments:g,openEnded:t,thetaStart:v,thetaLength:y};var b=this;d=void 0!==d?d:1,p=void 0!==p?p:1,f=f||1,m=Math.floor(m)||8,g=Math.floor(g)||1,t=void 0!==t&&t,v=void 0!==v?v:0,y=void 0!==y?y:2*Math.PI;var x=[],w=[],_=[],S=[],M=0,T=[],E=f/2,C=0;!function(){for(var t=new St,e=new St,i=0,n=(p-d)/f,r=0;r<=g;r++){for(var o=[],a=r/g,s=a*(p-d)+d,l=0;l<=m;l++){var c=l/m,h=c*y+v,u=Math.sin(h),h=Math.cos(h);e.x=s*u,e.y=-a*f+E,e.z=s*h,w.push(e.x,e.y,e.z),t.set(u,n,h).normalize(),_.push(t.x,t.y,t.z),S.push(c,1-a),o.push(M++)}T.push(o)}for(t=0;t<m;t++)for(e=0;e<g;e++)n=T[e+1][t],r=T[e+1][t+1],o=T[e][t+1],x.push(T[e][t],n,o),x.push(n,r,o),i+=6;b.addGroup(C,i,0),C+=i}(),!1===t&&(0<d&&e(!0),0<p&&e(!1)),this.setIndex(x),this.setAttribute("position",new O(w,3)),this.setAttribute("normal",new O(_,3)),this.setAttribute("uv",new O(S,2))}function un(t,e,i,n,r,o,a){cn.call(this,0,t,e,i,n,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function dn(t,e,i,n,r,o,a){hn.call(this,0,t,e,i,n,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function pn(t,e,i,n){H.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new fn(t,e,i,n)),this.mergeVertices()}function fn(t,e,i,n){N.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r=[],o=[],a=[],s=[],l=new St,c=new wt;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(var h=0,u=3;h<=e;h++,u+=3){var d=i+h/e*n;l.x=t*Math.cos(d),l.y=t*Math.sin(d),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/t+1)/2,c.y=(o[u+1]/t+1)/2,s.push(c.x,c.y)}for(t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new O(o,3)),this.setAttribute("normal",new O(a,3)),this.setAttribute("uv",new O(s,2))}function mn(t){w.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(t)}function gn(t){W.call(this,t),this.type="RawShaderMaterial"}function vn(t){w.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function yn(t){vn.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new wt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function bn(t){w.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function xn(t){w.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new y(16777215),this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function wn(t){w.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(t)}function _n(t){w.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Sn(t){w.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new y(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Mn(t){Qe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Tn(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function En(t,e,i,n){Tn.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Cn(t,e,i,n){Tn.call(this,t,e,i,n)}function An(t,e,i,n){Tn.call(this,t,e,i,n)}function Pn(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Rl.convertArray(e,this.TimeBufferType),this.values=Rl.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Ln(t,e,i){Pn.call(this,t,e,i)}function Rn(t,e,i,n){Pn.call(this,t,e,i,n)}function On(t,e,i,n){Pn.call(this,t,e,i,n)}function Dn(t,e,i,n){Tn.call(this,t,e,i,n)}function In(t,e,i,n){Pn.call(this,t,e,i,n)}function kn(t,e,i,n){Pn.call(this,t,e,i,n)}function Nn(t,e,i,n){Pn.call(this,t,e,i,n)}function Fn(t,e,i,n){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==n?n:2500,this.uuid=Do.generateUUID(),this.duration<0&&this.resetDuration()}function Bn(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e,i,n=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return On;case"vector":case"vector2":case"vector3":case"vector4":return Nn;case"color":return Rn;case"quaternion":return In;case"bool":case"boolean":return Ln;case"string":return kn}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);return void 0===t.times&&(Rl.flattenJSON(t.keys,e=[],i=[],"value"),t.times=e,t.values=i),void 0!==n.parse?n.parse(t):new n(t.name,t.times,t.values,t.interpolation)}function zn(t,e,i){var n=this,r=!1,o=0,a=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===r&&void 0!==n.onStart&&n.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,a),o===a&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){return-1!==(t=l.indexOf(t))&&l.splice(t,2),this},this.getHandler=function(t){for(var e=0,i=l.length;e<i;e+=2){var n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}function Hn(t){this.manager=void 0!==t?t:Dl,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function Un(t){Hn.call(this,t)}function jn(t){Hn.call(this,t)}function Gn(t){Hn.call(this,t)}function Vn(t){Hn.call(this,t)}function Wn(t){Hn.call(this,t)}function $n(t){Hn.call(this,t)}function qn(t){Hn.call(this,t)}function Xn(){this.type="Curve",this.arcLengthDivisions=200}function Yn(t,e,i,n,r,o,a,s){Xn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Zn(t,e,i,n,r,o){Yn.call(this,t,e,i,i,n,r,o),this.type="ArcCurve"}function Jn(){var s=0,l=0,c=0,h=0;return{initCatmullRom:function(t,e,i,n,r){c=-3*(s=e)+3*i-2*(l=t=r*(i-t))-(n=r*(n-e)),h=2*e-2*i+t+n},initNonuniformCatmullRom:function(t,e,i,n,r,o,a){c=-3*(s=e)+3*i-2*(l=t=((e-t)/r-(i-t)/(r+o)+(i-e)/o)*o)-(n=((i-e)/o-(n-e)/(o+a)+(n-i)/a)*o),h=2*e-2*i+t+n},calc:function(t){var e=t*t;return s+l*t+c*e+h*e*t}}}function Kn(t,e,i,n){Xn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=void 0!==n?n:.5}function Qn(t,e,i,n,r){var o=t*t;return(2*i-2*n+(e=.5*(n-e))+(r=.5*(r-i)))*t*o+(-3*i+3*n-2*e-r)*o+e*t+i}function tr(t,e,i,n){var r=1-t;return r*r*e+2*(1-t)*t*i+t*t*n}function er(t,e,i,n,r){var o=1-t,a=1-t;return o*o*o*e+3*a*a*t*i+3*(1-t)*t*t*n+t*t*t*r}function ir(t,e,i,n){Xn.call(this),this.type="CubicBezierCurve",this.v0=t||new wt,this.v1=e||new wt,this.v2=i||new wt,this.v3=n||new wt}function nr(t,e,i,n){Xn.call(this),this.type="CubicBezierCurve3",this.v0=t||new St,this.v1=e||new St,this.v2=i||new St,this.v3=n||new St}function rr(t,e){Xn.call(this),this.type="LineCurve",this.v1=t||new wt,this.v2=e||new wt}function or(t,e){Xn.call(this),this.type="LineCurve3",this.v1=t||new St,this.v2=e||new St}function ar(t,e,i){Xn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new wt,this.v1=e||new wt,this.v2=i||new wt}function sr(t,e,i){Xn.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new St,this.v1=e||new St,this.v2=i||new St}function lr(t){Xn.call(this),this.type="SplineCurve",this.points=t||[]}function cr(){Xn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function hr(t){cr.call(this),this.type="Path",this.currentPoint=new wt,t&&this.setFromPoints(t)}function ur(t){hr.call(this,t),this.uuid=Do.generateUUID(),this.type="Shape",this.holes=[]}function dr(t,e){f.call(this),this.type="Light",this.color=new y(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function pr(t,e,i){dr.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(f.DefaultUp),this.updateMatrix(),this.groundColor=new y(e)}function fr(t){this.camera=t,this.normalBias=this.bias=0,this.radius=1,this.mapSize=new wt(512,512),this.mapPass=this.map=null,this.matrix=new Mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Et,this._frameExtents=new wt(1,1),this._viewportCount=1,this._viewports=[new _t(0,0,1,1)]}function mr(){fr.call(this,new q(50,1,.5,500))}function gr(t,e,i,n,r,o){dr.call(this,t,e),this.type="SpotLight",this.position.copy(f.DefaultUp),this.updateMatrix(),this.target=new f,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new mr}function vr(){fr.call(this,new q(90,1,.5,500)),this._frameExtents=new wt(4,2),this._viewportCount=6,this._viewports=[new _t(2,1,1,1),new _t(0,1,1,1),new _t(3,1,1,1),new _t(1,1,1,1),new _t(3,0,1,1),new _t(1,0,1,1)],this._cubeDirections=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],this._cubeUps=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)]}function yr(t,e,i,n){dr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new vr}function br(t,e,i,n,r,o){$.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function xr(){fr.call(this,new br(-5,5,5,-5,.5,500))}function wr(t,e){dr.call(this,t,e),this.type="DirectionalLight",this.position.copy(f.DefaultUp),this.updateMatrix(),this.target=new f,this.shadow=new xr}function _r(t,e){dr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Sr(t,e,i,n){dr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Mr(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new St)}function Tr(t,e){dr.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Mr}function Er(t){Hn.call(this,t),this.textures={}}function Cr(){N.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Ar(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),C.call(this,t,e,i),this.meshPerAttribute=n||1}function Pr(t){Hn.call(this,t)}function Lr(t){Hn.call(this,t)}function Rr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Hn.call(this,t),this.options={premultiplyAlpha:"none"}}function Or(){this.type="ShapePath",this.color=new y,this.subPaths=[],this.currentPath=null}function Dr(t){this.type="Font",this.data=t}function Ir(t){Hn.call(this,t)}function kr(t){Hn.call(this,t)}function Nr(t,e,i){Tr.call(this,void 0,i),t=(new y).set(t),i=(new y).set(e),e=new St(t.r,t.g,t.b),t=new St(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(i),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(n)}function Fr(t,e){Tr.call(this,void 0,e),t=(new y).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Br(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new q,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new q,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function zr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Hr(){f.call(this),this.type="AudioListener",this.context=$l.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zr}function Ur(t){f.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function jr(t){Ur.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Gr(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Vr(t,e,i){switch(this.binding=t,this.valueSize=i,e){case"quaternion":t=this._slerp,e=this._slerpAdditive;var n=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":e=t=this._select,n=this._setAdditiveIdentityOther,this.buffer=Array(5*i);break;default:t=this._lerp,e=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=t,this._mixBufferRegionAdditive=e,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function Wr(t,e,i){i=i||$r.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function $r(t,e,i){this.path=e,this.parsedPath=i||$r.parseTrackName(e),this.node=$r.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function qr(){this.uuid=Do.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Xr(t,e,i,n){this._mixer=t,this._clip=e,this._localRoot=i||null,this.blendMode=n||e.blendMode,e=(t=e.tracks).length,i=Array(e),n={endingStart:2400,endingEnd:2400};for(var r=0;r!==e;++r){var o=t[r].createInterpolant(null);(i[r]=o).settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Yr(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Zr(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Jr(t,e,i){Ge.call(this,t,e),this.meshPerAttribute=i||1}function Kr(t,e,i,n){this.ray=new s(t,e),this.near=i||0,this.far=n||1/0,this.camera=null,this.layers=new o,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Qr(t,e){return t.distance-e.distance}function to(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){n=0;for(var r=(t=t.children).length;n<r;n++)to(t[n],e,i,!0)}}function eo(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function io(t,e){this.min=void 0!==t?t:new wt(1/0,1/0),this.max=void 0!==e?e:new wt(-1/0,-1/0)}function no(t,e){this.start=void 0!==t?t:new St,this.end=void 0!==e?e:new St}function ro(t){f.call(this),this.material=t,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function oo(t,e){f.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new N,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;i<32;i++,n++){var r=i/32*Math.PI*2,o=n/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}t.setAttribute("position",new O(e,3)),e=new Qe({fog:!1,toneMapped:!1}),this.cone=new ei(t,e),this.add(this.cone),this.update()}function ao(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new N,n=[],r=[],o=new y(0,0,1),a=new y(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new O(n,3)),i.setAttribute("color",new O(r,3)),n=new Qe({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),ei.call(this,i,n),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function so(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new Qi(e,4,2),e=new _({wireframe:!0,fog:!1,toneMapped:!1}),F.call(this,t,e),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function lo(t,e,i){f.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new yi(e)).rotateY(.5*Math.PI),this.material=new _({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.setAttribute("color",new C(e,3)),this.add(new F(t,this.material)),this.update()}function co(t,e,i,n){t=t||10,e=e||10,i=new y(void 0!==i?i:4473924),n=new y(void 0!==n?n:8947848);var r=e/2,o=t/e,a=t/2;t=[];for(var s=[],l=0,c=0,h=-a;l<=e;l++,h+=o){t.push(-a,0,h,a,0,h),t.push(h,0,-a,h,0,a);var u=l===r?i:n;u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3}(e=new N).setAttribute("position",new O(t,3)),e.setAttribute("color",new O(s,3)),i=new Qe({vertexColors:!0,toneMapped:!1}),ei.call(this,e,i),this.type="GridHelper"}function ho(t,e,i,n,r,o){t=t||10,e=e||16,i=i||8,n=n||64,r=new y(void 0!==r?r:4473924),o=new y(void 0!==o?o:8947848);for(var a=[],s=[],l=0;l<=e;l++){var c=l/e*2*Math.PI,h=Math.sin(c)*t,c=Math.cos(c)*t;a.push(0,0,0),a.push(h,0,c),s.push((h=1&l?r:o).r,h.g,h.b),s.push(h.r,h.g,h.b)}for(e=0;e<=i;e++)for(l=1&e?r:o,h=t-t/i*e,c=0;c<n;c++){var u=c/n*2*Math.PI,d=Math.sin(u)*h,u=Math.cos(u)*h;a.push(d,0,u),s.push(l.r,l.g,l.b),u=(c+1)/n*2*Math.PI,d=Math.sin(u)*h,u=Math.cos(u)*h,a.push(d,0,u),s.push(l.r,l.g,l.b)}(t=new N).setAttribute("position",new O(a,3)),t.setAttribute("color",new O(s,3)),a=new Qe({vertexColors:!0,toneMapped:!1}),ei.call(this,t,a),this.type="PolarGridHelper"}function uo(t,e,i){f.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new N).setAttribute("position",new O([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Qe({fog:!1,toneMapped:!1}),this.lightPlane=new ti(t,e),this.add(this.lightPlane),(t=new N).setAttribute("position",new O([0,0,0,0,0,1],3)),this.targetLine=new ti(t,e),this.add(this.targetLine),this.update()}function po(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var i=new N,r=new Qe({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],s={},l=new y(16755200),c=new y(16711680),h=new y(43775),u=new y(16777215),d=new y(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),i.setAttribute("position",new O(o,3)),i.setAttribute("color",new O(a,3)),ei.call(this,i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function fo(t,e,i,n,r,o,a){if(Sc.set(r,o,a).unproject(n),void 0!==(t=e[t]))for(i=i.getAttribute("position"),e=0,n=t.length;e<n;e++)i.setXYZ(t[e],Sc.x,Sc.y,Sc.z)}function mo(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new N;n.setIndex(new C(t,1)),n.setAttribute("position",new C(i,3)),ei.call(this,n,new Qe({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function go(t,e){this.type="Box3Helper",this.box=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new N;i.setIndex(new C(t,1)),i.setAttribute("position",new O([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ei.call(this,i,new Qe({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function vo(t,e,i){this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new N).setAttribute("position",new O([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),ti.call(this,e,new Qe({color:t,toneMapped:!1})),this.type="PlaneHelper",(e=new N).setAttribute("position",new O([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new F(e,new _({color:t,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function yo(t,e,i,n,r,o){f.call(this),this.type="ArrowHelper",void 0===t&&(t=new St(0,0,1)),void 0===e&&(e=new St(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===Ec&&((Ec=new N).setAttribute("position",new O([0,0,0,0,1,0],3)),(Cc=new hn(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ti(Ec,new Qe({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new F(Cc,new _({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,o)}function bo(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new N).setAttribute("position",new O(e,3)),t.setAttribute("color",new O([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Qe({vertexColors:!0,toneMapped:!1}),ei.call(this,t,e),this.type="AxesHelper"}function xo(t){this._renderer=t,this._pingPongRenderTarget=null,t=new Float32Array(20);var e=new St(0,1,0);this._blurMaterial=new gn({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:Oc[3e3]},outputEncoding:{value:Oc[3e3]}},vertexShader:To(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+Eo()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}),this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)}function wo(t){return(t=new E(3*Pc,3*Pc,t)).texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function _o(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function So(){return new gn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new wt(1,1)},inputEncoding:{value:Oc[3e3]},outputEncoding:{value:Oc[3e3]}},vertexShader:To(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+Eo()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Mo(){return new gn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Oc[3e3]},outputEncoding:{value:Oc[3e3]}},vertexShader:To(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+Eo()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function To(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Eo(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Co(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Kn.call(this,t),this.type="catmullrom",this.closed=!0}function Ao(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Kn.call(this,t),this.type="catmullrom"}function Po(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Kn.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0!==(t=this._listeners[t])&&(-1!==(e=t.indexOf(e))&&t.splice(e,1)))},dispatchEvent:function(t){if(void 0!==this._listeners&&void 0!==(e=this._listeners[t.type])){t.target=this;for(var e,i=0,n=(e=e.slice(0)).length;i<n;i++)e[i].call(this,t)}}});for(var Lo=[],Ro=0;Ro<256;Ro++)Lo[Ro]=(Ro<16?"0":"")+Ro.toString(16);var Oo=1234567,Do={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Lo[255&t]+Lo[t>>8&255]+Lo[t>>16&255]+Lo[t>>24&255]+"-"+Lo[255&e]+Lo[e>>8&255]+"-"+Lo[e>>16&15|64]+Lo[e>>24&255]+"-"+Lo[63&i|128]+Lo[i>>8&255]+"-"+Lo[i>>16&255]+Lo[i>>24&255]+Lo[255&n]+Lo[n>>8&255]+Lo[n>>16&255]+Lo[n>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((Oo=16807*(Oo=void 0!==t?t%2147483647:Oo)%2147483647)-1)/2147483646},degToRad:function(t){return t*Do.DEG2RAD},radToDeg:function(t){return t*Do.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,n,r){var o=Math.cos,a=Math.sin,s=o(i/2);i=a(i/2);var l=o((e+n)/2),c=a((e+n)/2),h=o((e-n)/2),u=a((e-n)/2),o=o((n-e)/2);switch(e=a((n-e)/2),r){case"XYX":t.set(s*c,i*h,i*u,s*l);break;case"YZY":t.set(i*u,s*c,i*h,s*l);break;case"ZXZ":t.set(i*h,i*u,s*c,s*l);break;case"XZX":t.set(s*c,i*e,i*o,s*l);break;case"YXY":t.set(i*o,s*c,i*e,s*l);break;case"ZYZ":t.set(i*e,i*o,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};Object.defineProperties(wt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(wt.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(g.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,o,a,s,l){var c=this.elements;return c[0]=t,c[1]=n,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=i,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[3],o=i[6],a=i[1],s=i[4],l=i[7],c=i[2],h=i[5],i=i[8],u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5],n=n[8];return e[0]=t*u+r*f+o*v,e[3]=t*d+r*m+o*y,e[6]=t*p+r*g+o*n,e[1]=a*u+s*f+l*v,e[4]=a*d+s*m+l*y,e[7]=a*p+s*g+l*n,e[2]=c*u+h*f+i*v,e[5]=c*d+h*m+i*y,e[8]=c*p+h*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7];return e*o*(t=t[8])-e*a*l-i*r*t+i*a*s+n*r*l-n*o*s},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var i=t.elements;t=this.elements,e=i[0];var n=i[1],r=i[2],o=i[3],a=i[4],s=i[5],l=i[6],c=i[7],h=(i=i[8])*a-s*c,u=s*l-i*o,d=c*o-a*l,p=e*h+n*u+r*d;return 0==p?this.set(0,0,0,0,0,0,0,0,0):(t[0]=h*(p=1/p),t[1]=(r*c-i*n)*p,t[2]=(s*n-r*a)*p,t[3]=u*p,t[4]=(i*e-r*l)*p,t[5]=(r*o-s*e)*p,t[6]=d*p,t[7]=(n*l-c*e)*p,t[8]=(a*e-n*o)*p,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,o,a){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*o+r*a)+o+t,-n*r,n*s,-n*(-r*o+s*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],r=i[3],o=i[6],a=i[1],s=i[4],l=i[7];return i[0]=e*n+t*a,i[3]=e*r+t*s,i[6]=e*o+t*l,i[1]=-t*n+e*a,i[4]=-t*r+e*s,i[7]=-t*o+e*l,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;i<9;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var Io,ko={getDataURL:function(t){return/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement?t.src:(t instanceof HTMLCanvasElement||((Io=void 0===Io?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):Io).width=t.width,Io.height=t.height,e=Io.getContext("2d"),t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=Io),2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png"));var e}},No=0;d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=Object.assign(Object.create(e.prototype),{constructor:d,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Do.generateUUID()),!e&&void 0===t.images[n.uuid]){if(Array.isArray(n))for(var r=[],o=0,a=n.length;o<a;o++)r.push(ko.getDataURL(n[o]));else r=ko.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(_t.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(_t.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],r=t[1],o=t[5],a=t[9],s=t[2],l=t[6],c=t[10];return Math.abs(i-r)<.01&&Math.abs(n-s)<.01&&Math.abs(a-l)<.01?Math.abs(i+r)<.1&&Math.abs(n+s)<.1&&Math.abs(a+l)<.1&&Math.abs(e+o+c-3)<.1?this.set(1,0,0,0):(t=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+s)/4,a=(a+l)/4,(o=(o+1)/2)<(e=(e+1)/2)&&c<e?i=e<.01?(l=0,s=.707106781):(s=i/(l=Math.sqrt(e)),n/l):c<o?i=o<.01?(s=0,l=.707106781):(l=i/(s=Math.sqrt(o)),a/s):c<.01?(s=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),s=a/i),this.set(l,s,i,t)):(t=Math.sqrt((l-a)*(l-a)+(n-s)*(n-s)+(r-i)*(r-i)),Math.abs(t)<.001&&(t=1),this.x=(l-a)/t,this.y=(n-s)/t,this.z=(r-i)/t,this.w=Math.acos((e+o+c-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),E.prototype=Object.assign(Object.create(e.prototype),{constructor:E,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.prototype=Object.assign(Object.create(E.prototype),{constructor:i,isWebGLMultisampleRenderTarget:!0,copy:function(t){return E.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(p,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,o,a){var s=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[o+0];var h,u,d,p=r[o+1],f=r[o+2];i===(r=r[o+3])&&s===n&&l===p&&c===f||(o=1-a,u=0<=(h=s*n+l*p+c*f+i*r)?1:-1,(d=1-h*h)>Number.EPSILON&&(d=Math.sqrt(d),h=Math.atan2(d,h*u),o=Math.sin(o*h)/d,a=Math.sin(a*h)/d),s=s*o+n*(u*=a),l=l*o+p*u,c=c*o+f*u,i=i*o+r*u,o===1-a&&(s*=a=1/Math.sqrt(s*s+l*l+c*c+i*i),l*=a,c*=a,i*=a)),t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=i},multiplyQuaternionsFlat:function(t,e,i,n,r,o){var a=i[n],s=i[n+1],l=i[n+2];i=i[n+3],n=r[o];var c=r[o+1],h=r[o+2];return r=r[o+3],t[e]=a*r+i*n+s*h-l*c,t[e+1]=s*r+i*c+l*n-a*h,t[e+2]=l*r+i*h+a*c-s*n,t[e+3]=i*r-a*n-s*c-l*h,t}}),Object.defineProperties(p.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(p.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z;t=t.order;var o=Math.cos,a=Math.sin,s=o(i/2),l=o(n/2),o=o(r/2),i=a(i/2),n=a(n/2),r=a(r/2);switch(t){case"XYZ":this._x=i*l*o+s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o-i*n*r;break;case"YXZ":this._x=i*l*o+s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o+i*n*r;break;case"ZXY":this._x=i*l*o-s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o-i*n*r;break;case"ZYX":this._x=i*l*o-s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o+i*n*r;break;case"YZX":this._x=i*l*o+s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o-i*n*r;break;case"XZY":this._x=i*l*o-s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o+i*n*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],r=e[1],o=e[5],a=e[9],s=e[2],l=e[6],c=i+o+(e=e[10]);return 0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-a)*i,this._y=(n-s)*i,this._z=(r-t)*i):o<i&&e<i?(i=2*Math.sqrt(1+i-o-e),this._w=(l-a)/i,this._x=.25*i,this._y=(t+r)/i,this._z=(n+s)/i):e<o?(i=2*Math.sqrt(1+o-i-e),this._w=(n-s)/i,this._x=(t+r)/i,this._y=.25*i,this._z=(a+l)/i):(i=2*Math.sqrt(1+e-i-o),this._w=(r-t)/i,this._x=(n+s)/i,this._y=(a+l)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Do.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(this._x*=t=1/t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z;t=t._w;var o=e._x,a=e._y,s=e._z;return e=e._w,this._x=i*e+t*o+n*s-r*a,this._y=n*e+t*a+r*o-i*s,this._z=r*e+t*s+i*a-n*o,this._w=t*e-i*o-n*a-r*s,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w;if((s=o*t._w+i*t._x+n*t._y+r*t._z)<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),1<=s)return this._w=o,this._x=i,this._y=n,this._z=r,this;if((t=1-s*s)<=Number.EPSILON)return this._w=(s=1-e)*o+e*this._w,this._x=s*i+e*this._x,this._y=s*n+e*this._y,this._z=s*r+e*this._z,this.normalize(),this._onChangeCallback(),this;t=Math.sqrt(t);var a=Math.atan2(t,s),s=Math.sin((1-e)*a)/t;return e=Math.sin(e*a)/t,this._w=o*s+this._w*e,this._x=i*s+this._x*e,this._y=n*s+this._y*e,this._z=r*s+this._z*e,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return this._x=t[e=void 0===e?0:e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Fo=new St,Bo=new p;Object.assign(St.prototype,{isVector3:!0,set:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bo.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(Bo.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,a=t.z,s=(t=t.w)*e+o*n-a*i,l=t*i+a*e-r*n,c=t*n+r*i-o*e;return this.x=s*t+(e=-r*e-o*i-a*n)*-r+l*-a-c*-o,this.y=l*t+e*-o+c*-r-s*-a,this.z=c*t+e*-a+s*-o-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var r=e.x,o=e.y;return e=e.z,this.x=n*e-t*o,this.y=t*r-i*e,this.z=i*o-n*r,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return Fo.copy(this).projectOnVector(t),this.sub(Fo)},reflect:function(t){return this.sub(Fo.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(Do.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var zo=new St,Ho=new Mt,Uo=new St(0,0,0),jo=new St(1,1,1),Go=new St,Vo=new St,Wo=new St;Object.assign(Mt.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,o,a,s,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Mt).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,n=1/zo.setFromMatrixColumn(t,0).length(),r=1/zo.setFromMatrixColumn(t,1).length();return t=1/zo.setFromMatrixColumn(t,2).length(),e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e,i,n,r=this.elements,o=t.x,a=t.y,s=t.z,l=Math.cos(o),o=Math.sin(o),c=Math.cos(a),a=Math.sin(a),h=Math.cos(s),s=Math.sin(s);return"XYZ"===t.order?(t=l*h,e=l*s,i=o*h,n=o*s,r[0]=c*h,r[4]=-c*s,r[8]=a,r[1]=e+i*a,r[5]=t-n*a,r[9]=-o*c,r[2]=n-t*a,r[6]=i+e*a,r[10]=l*c):"YXZ"===t.order?(e=c*s,i=a*h,r[0]=(t=c*h)+(n=a*s)*o,r[4]=i*o-e,r[8]=l*a,r[1]=l*s,r[5]=l*h,r[9]=-o,r[2]=e*o-i,r[6]=n+t*o,r[10]=l*c):"ZXY"===t.order?(e=c*s,i=a*h,r[0]=(t=c*h)-(n=a*s)*o,r[4]=-l*s,r[8]=i+e*o,r[1]=e+i*o,r[5]=l*h,r[9]=n-t*o,r[2]=-l*a,r[6]=o,r[10]=l*c):"ZYX"===t.order?(t=l*h,e=l*s,i=o*h,n=o*s,r[0]=c*h,r[4]=i*a-e,r[8]=t*a+n,r[1]=c*s,r[5]=n*a+t,r[9]=e*a-i,r[2]=-a,r[6]=o*c,r[10]=l*c):"YZX"===t.order?(t=l*c,e=l*a,i=o*c,n=o*a,r[0]=c*h,r[4]=n-t*s,r[8]=i*s+e,r[1]=s,r[5]=l*h,r[9]=-o*h,r[2]=-a*h,r[6]=e*s+i,r[10]=t-n*s):"XZY"===t.order&&(t=l*c,e=l*a,i=o*c,n=o*a,r[0]=c*h,r[4]=-s,r[8]=a*h,r[1]=t*s+n,r[5]=l*h,r[9]=e*s-i,r[2]=i*s-e,r[6]=o*h,r[10]=n*s+t),r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Uo,t,jo)},lookAt:function(t,e,i){var n=this.elements;return Wo.subVectors(t,e),0===Wo.lengthSq()&&(Wo.z=1),Wo.normalize(),Go.crossVectors(i,Wo),0===Go.lengthSq()&&(1===Math.abs(i.z)?Wo.x+=1e-4:Wo.z+=1e-4,Wo.normalize(),Go.crossVectors(i,Wo)),Go.normalize(),Vo.crossVectors(Wo,Go),n[0]=Go.x,n[4]=Vo.x,n[8]=Wo.x,n[1]=Go.y,n[5]=Vo.y,n[9]=Wo.y,n[2]=Go.z,n[6]=Vo.z,n[10]=Wo.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[4],o=i[8],a=i[12],s=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11],i=i[15],y=n[0],b=n[4],x=n[8],w=n[12],_=n[1],S=n[5],M=n[9],T=n[13],E=n[2],C=n[6],A=n[10],P=n[14],L=n[3],R=n[7],O=n[11],n=n[15];return e[0]=t*y+r*_+o*E+a*L,e[4]=t*b+r*S+o*C+a*R,e[8]=t*x+r*M+o*A+a*O,e[12]=t*w+r*T+o*P+a*n,e[1]=s*y+l*_+c*E+h*L,e[5]=s*b+l*S+c*C+h*R,e[9]=s*x+l*M+c*A+h*O,e[13]=s*w+l*T+c*P+h*n,e[2]=u*y+d*_+p*E+f*L,e[6]=u*b+d*S+p*C+f*R,e[10]=u*x+d*M+p*A+f*O,e[14]=u*w+d*T+p*P+f*n,e[3]=m*y+g*_+v*E+i*L,e[7]=m*b+g*S+v*C+i*R,e[11]=m*x+g*M+v*A+i*O,e[15]=m*w+g*T+v*P+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*s*h-n*l*h-r*a*u+i*l*u+n*a*d-i*s*d)+t[7]*(+e*s*d-e*l*u+r*o*u-n*o*d+n*l*c-r*s*c)+t[11]*(+e*l*h-e*a*d-r*o*h+i*o*d+r*a*c-i*l*c)+t[15]*(-n*a*c-e*s*h+e*a*u+n*o*h-i*o*u+i*s*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),e=this.elements;var i=t.elements;t=i[0];var n=i[1],r=i[2],o=i[3],a=i[4],s=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14],v=u*g*c-m*d*c+m*l*p-s*g*p-u*l*(i=i[15])+s*d*i,y=f*d*c-h*g*c-f*l*p+a*g*p+h*l*i-a*d*i,b=h*m*c-f*u*c+f*s*p-a*m*p-h*s*i+a*u*i,x=f*u*l-h*m*l-f*s*d+a*m*d+h*s*g-a*u*g,w=t*v+n*y+r*b+o*x;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=v*(w=1/w),e[1]=(m*d*o-u*g*o-m*r*p+n*g*p+u*r*i-n*d*i)*w,e[2]=(s*g*o-m*l*o+m*r*c-n*g*c-s*r*i+n*l*i)*w,e[3]=(u*l*o-s*d*o-u*r*c+n*d*c+s*r*p-n*l*p)*w,e[4]=y*w,e[5]=(h*g*o-f*d*o+f*r*p-t*g*p-h*r*i+t*d*i)*w,e[6]=(f*l*o-a*g*o-f*r*c+t*g*c+a*r*i-t*l*i)*w,e[7]=(a*d*o-h*l*o+h*r*c-t*d*c-a*r*p+t*l*p)*w,e[8]=b*w,e[9]=(f*u*o-h*m*o-f*n*p+t*m*p+h*n*i-t*u*i)*w,e[10]=(a*m*o-f*s*o+f*n*c-t*m*c-a*n*i+t*s*i)*w,e[11]=(h*s*o-a*u*o-h*n*c+t*u*c+a*n*p-t*s*p)*w,e[12]=x*w,e[13]=(h*m*r-f*u*r+f*n*d-t*m*d-h*n*g+t*u*g)*w,e[14]=(f*s*r-a*m*r-f*n*l+t*m*l+a*n*g-t*s*g)*w,e[15]=(a*u*r-h*s*r+h*n*l-t*u*l-a*n*d+t*s*d)*w,this)},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,r=t.x,o=t.y;t=t.z;var a=n*r,s=n*o;return this.set(a*r+i,a*o-e*t,a*t+e*o,0,a*o+e*t,s*o+i,s*t-e*r,0,a*t-e*o,s*t+e*r,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o;e=r*l;var h=r*c;r*=d=a+a;var u=o*c;o*=d,a*=d,l*=s,c*=s,s*=d;var d=i.x,p=i.y;return i=i.z,n[0]=(1-(u+a))*d,n[1]=(h+s)*d,n[2]=(r-c)*d,n[3]=0,n[4]=(h-s)*p,n[5]=(1-(e+a))*p,n[6]=(o+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(o-l)*i,n[10]=(1-(e+u))*i,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:function(t,e,i){var n=this.elements,r=zo.set(n[0],n[1],n[2]).length(),o=zo.set(n[4],n[5],n[6]).length(),a=zo.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],Ho.copy(this);var n=1/o,s=1/a;return Ho.elements[0]*=t=1/r,Ho.elements[1]*=t,Ho.elements[2]*=t,Ho.elements[4]*=n,Ho.elements[5]*=n,Ho.elements[6]*=n,Ho.elements[8]*=s,Ho.elements[9]*=s,Ho.elements[10]*=s,e.setFromRotationMatrix(Ho),i.x=r,i.y=o,i.z=a,this},makePerspective:function(t,e,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*r/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*r/(i-n),a[9]=(i+n)/(i-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+r)/(o-r),a[14]=-2*o*r/(o-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,n,r,o){var a=this.elements,s=1/(e-t),l=1/(i-n),c=1/(o-r);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(e+t)*s,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-(i+n)*l,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-(o+r)*c,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;i<16;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var $o=new Mt,qo=new p;r.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),r.DefaultOrder="XYZ",Object.defineProperties(r.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(r.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=Do.clamp;t=(u=t.elements)[0];var r=u[4],o=u[8],a=u[1],s=u[5],l=u[9],c=u[2],h=u[6],u=u[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,u),this._z=Math.atan2(-r,t)):(this._x=Math.atan2(h,s),this._z=0);break;case"YXZ":this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(a,s)):(this._y=Math.atan2(-c,t),this._z=0);break;case"ZXY":this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,u),this._z=Math.atan2(-r,s)):(this._y=0,this._z=Math.atan2(a,t));break;case"ZYX":this._y=Math.asin(-n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,u),this._z=Math.atan2(a,t)):(this._x=0,this._z=Math.atan2(-r,s));break;case"YZX":this._z=Math.asin(n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,s),this._y=Math.atan2(-c,t)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-n(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(h,s),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-l,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,i){return $o.makeRotationFromQuaternion(t),this.setFromRotationMatrix($o,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return qo.setFromEuler(this),this.setFromQuaternion(qo,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new St(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(o.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var Xo=0,Yo=new St,Zo=new p,Jo=new Mt,Ko=new St,Qo=new St,ta=new St,ea=new p,ia=new St(1,0,0),na=new St(0,1,0),ra=new St(0,0,1),oa={type:"added"},aa={type:"removed"};f.DefaultUp=new St(0,1,0),f.DefaultMatrixAutoUpdate=!0,f.prototype=Object.assign(Object.create(e.prototype),{constructor:f,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Zo.setFromAxisAngle(t,e),this.quaternion.multiply(Zo),this},rotateOnWorldAxis:function(t,e){return Zo.setFromAxisAngle(t,e),this.quaternion.premultiply(Zo),this},rotateX:function(t){return this.rotateOnAxis(ia,t)},rotateY:function(t){return this.rotateOnAxis(na,t)},rotateZ:function(t){return this.rotateOnAxis(ra,t)},translateOnAxis:function(t,e){return Yo.copy(t).applyQuaternion(this.quaternion),this.position.add(Yo.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(ia,t)},translateY:function(t){return this.translateOnAxis(na,t)},translateZ:function(t){return this.translateOnAxis(ra,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Jo.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?Ko.copy(t):Ko.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),Qo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jo.lookAt(Qo,Ko,this.up):Jo.lookAt(Ko,Qo,this.up),this.quaternion.setFromRotationMatrix(Jo),t&&(Jo.extractRotation(t.matrixWorld),Zo.setFromRotationMatrix(Jo),this.quaternion.premultiply(Zo.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(oa)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(aa)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Jo.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Jo.multiply(t.parent.matrixWorld)),t.applyMatrix4(Jo),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new St),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new p),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qo,t,ta),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new St),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qo,ea,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new St),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(e=0,i=(t=this.children).length;e<i;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(i){function t(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(i)),e.uuid}function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===i||"string"==typeof i,r={};n&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o,a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=t(i.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var l=0,c=s.length;l<c;l++)t(i.shapes,s[l]);else t(i.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],l=0,c=this.material.length;l<c;l++)s.push(t(i.materials,this.material[l]));a.material=s}else a.material=t(i.materials,this.material);if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(i).object);return n&&(n=e(i.geometries),s=e(i.materials),l=e(i.textures),c=e(i.images),o=e(i.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<o.length&&(r.shapes=o)),r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),c.prototype=Object.assign(Object.create(f.prototype),{constructor:c,isScene:!0,copy:function(t,e){return f.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=f.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var sa=[new St,new St,new St,new St,new St,new St,new St,new St],la=new St,ca=new n,ha=new St,ua=new St,da=new St,pa=new St,fa=new St,ma=new St,ga=new St,va=new St,ya=new St,ba=new St;Object.assign(n.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],h=t[s+1],u=t[s+2];c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),o<h&&(o=h),a<u&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),h=t.getY(s),u=t.getZ(s);c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),o<h&&(o=h),a<u&&(a=u)}return this.min.set(e,i,n),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=la.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new St),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new St),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1),void 0!==(e=t.geometry)&&(null===e.boundingBox&&e.computeBoundingBox(),ca.copy(e.boundingBox),ca.applyMatrix4(t.matrixWorld),this.union(ca));for(var e=0,i=(t=t.children).length;e<i;e++)this.expandByObject(t[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new St),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,la),la.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(ga),va.subVectors(this.max,ga),ha.subVectors(t.a,ga),ua.subVectors(t.b,ga),da.subVectors(t.c,ga),pa.subVectors(ua,ha),fa.subVectors(da,ua),ma.subVectors(ha,da),!!a(t=[0,-pa.z,pa.y,0,-fa.z,fa.y,0,-ma.z,ma.y,pa.z,0,-pa.x,fa.z,0,-fa.x,ma.z,0,-ma.x,-pa.y,pa.x,0,-fa.y,fa.x,0,-ma.y,ma.x,0],ha,ua,da,va)&&(!!a(t=[1,0,0,0,1,0,0,0,1],ha,ua,da,va)&&(ya.crossVectors(pa,fa),a(t=[ya.x,ya.y,ya.z],ha,ua,da,va))))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new St),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return la.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(la).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(sa)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var xa=new n;Object.assign(m.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var i=this.center;void 0!==e?i.copy(e):xa.setFromPoints(t).getCenter(i);for(var n=e=0,r=t.length;n<r;n++)e=Math.max(e,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new St),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new n),this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var wa=new St,_a=new St,Sa=new St,Ma=new St,Ta=new St,Ea=new St,Ca=new St;Object.assign(s.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new St),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,wa)),this},closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new St),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=wa.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(wa.copy(this.direction).multiplyScalar(e).add(this.origin),wa.distanceToSquared(t))},distanceSqToSegment:function(t,e,i,n){_a.copy(t).add(e).multiplyScalar(.5),Sa.copy(e).sub(t).normalize(),Ma.copy(this.origin).sub(_a);var r,o=.5*t.distanceTo(e),a=-this.direction.dot(Sa),s=Ma.dot(this.direction),l=-Ma.dot(Sa),c=Ma.lengthSq(),h=Math.abs(1-a*a);return a=0<h?(e=a*s-l,r=o*h,0<=(t=a*l-s)?-r<=e?e<=r?(t*=o=1/h)*(t+a*(e*=o)+2*s)+e*(a*t+e+2*l)+c:(e=o,-(t=Math.max(0,-(a*e+s)))*t+e*(e+2*l)+c):(e=-o,-(t=Math.max(0,-(a*e+s)))*t+e*(e+2*l)+c):e<=-r?-(t=Math.max(0,-(-a*o+s)))*t+(e=0<t?-o:Math.min(Math.max(-o,-l),o))*(e+2*l)+c:e<=r?(t=0,(e=Math.min(Math.max(-o,-l),o))*(e+2*l)+c):-(t=Math.max(0,-(a*o+s)))*t+(e=0<t?o:Math.min(Math.max(-o,-l),o))*(e+2*l)+c):(e=0<a?-o:o,-(t=Math.max(0,-(a*e+s)))*t+e*(e+2*l)+c),i&&i.copy(this.direction).multiplyScalar(t).add(this.origin),n&&n.copy(Sa).multiplyScalar(e).add(_a),a},intersectSphere:function(t,e){wa.subVectors(t.center,this.origin);var i=wa.dot(this.direction),n=wa.dot(wa)-i*i;return(t=t.radius*t.radius)<n?null:(n=i-(t=Math.sqrt(t-n)),i+=t,n<0&&i<0?null:n<0?this.at(i,e):this.at(n,e))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r=1/this.direction.x,o=1/this.direction.y,a=1/this.direction.z,s=this.origin;return 0<=r?(i=(t.min.x-s.x)*r,r*=t.max.x-s.x):(i=(t.max.x-s.x)*r,r*=t.min.x-s.x),0<=o?(n=(t.min.y-s.y)*o,o*=t.max.y-s.y):(n=(t.max.y-s.y)*o,o*=t.min.y-s.y),o<i||r<n?null:((i<n||i!=i)&&(i=n),(o<r||r!=r)&&(r=o),(t=0<=a?(n=(t.min.z-s.z)*a,(t.max.z-s.z)*a):(n=(t.max.z-s.z)*a,(t.min.z-s.z)*a))<i||r<n?null:((i<n||i!=i)&&(i=n),(r=t<r||r!=r?t:r)<0?null:this.at(0<=i?i:r,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,wa)},intersectTriangle:function(t,e,i,n,r){if(Ta.subVectors(e,t),Ea.subVectors(i,t),Ca.crossVectors(Ta,Ea),0<(e=this.direction.dot(Ca))){if(n)return null;n=1}else{if(!(e<0))return null;n=-1,e=-e}return Ma.subVectors(this.origin,t),(t=n*this.direction.dot(Ea.crossVectors(Ma,Ea)))<0||(i=n*this.direction.dot(Ta.cross(Ma)))<0||e<t+i||(t=-n*Ma.dot(Ca))<0?null:this.at(t/e,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Aa=new St,Pa=new St,La=new g;Object.assign(v.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,i){return e=Aa.subVectors(i,e).cross(Pa.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new St),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new St);var i=t.delta(Aa),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!((n=-(t.start.dot(this.normal)+this.constant)/n)<0||1<n))return e.copy(i).multiplyScalar(n).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new St),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||La.getNormalMatrix(t),t=this.coplanarPoint(Aa).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Ra=new St,Oa=new St,Da=new St,Ia=new St,ka=new St,Na=new St,Fa=new St,Ba=new St,za=new St,Ha=new St;Object.assign(x,{getNormal:function(t,e,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new St),n.subVectors(i,e),Ra.subVectors(t,e),n.cross(Ra),0<(t=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(t)):n.set(0,0,0)},getBarycoord:function(t,e,i,n,r){Ra.subVectors(n,e),Oa.subVectors(i,e),Da.subVectors(t,e),t=Ra.dot(Ra),e=Ra.dot(Oa),i=Ra.dot(Da);var o=Oa.dot(Oa);n=Oa.dot(Da);var a=t*o-e*e;return void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new St),0==a?r.set(-2,-1,-1):r.set(1-(o=(o*i-e*n)*(a=1/a))-(t=(t*n-e*i)*a),t,o)},containsPoint:function(t,e,i,n){return x.getBarycoord(t,e,i,n,Ia),0<=Ia.x&&0<=Ia.y&&Ia.x+Ia.y<=1},getUV:function(t,e,i,n,r,o,a,s){return this.getBarycoord(t,e,i,n,Ia),s.set(0,0),s.addScaledVector(r,Ia.x),s.addScaledVector(o,Ia.y),s.addScaledVector(a,Ia.z),s},isFrontFacing:function(t,e,i,n){return Ra.subVectors(i,e),Oa.subVectors(t,e),Ra.cross(Oa).dot(n)<0}}),Object.assign(x.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Ra.subVectors(this.c,this.b),Oa.subVectors(this.a,this.b),.5*Ra.cross(Oa).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new St),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return x.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new v),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return x.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,n,r){return x.getUV(t,this.a,this.b,this.c,e,i,n,r)},containsPoint:function(t){return x.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return x.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new St);var i=this.a,n=this.b,r=this.c;ka.subVectors(n,i),Na.subVectors(r,i),Ba.subVectors(t,i);var o=ka.dot(Ba),a=Na.dot(Ba);if(o<=0&&a<=0)return e.copy(i);za.subVectors(t,n);var s=ka.dot(za),l=Na.dot(za);if(0<=s&&l<=s)return e.copy(n);var c=o*l-s*a;if(c<=0&&0<=o&&s<=0)return n=o/(o-s),e.copy(i).addScaledVector(ka,n);Ha.subVectors(t,r),t=ka.dot(Ha);var h=Na.dot(Ha);return 0<=h&&t<=h?e.copy(r):(o=t*a-o*h)<=0&&0<=a&&h<=0?(c=a/(a-h),e.copy(i).addScaledVector(Na,c)):(a=s*h-t*l)<=0&&0<=l-s&&0<=t-h?(Fa.subVectors(r,n),c=(l-s)/(l-s+(t-h)),e.copy(n).addScaledVector(Fa,c)):(n=o*(r=1/(a+o+c)),c*=r,e.copy(i).addScaledVector(ka,n).addScaledVector(Na,c))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Ua={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ja={h:0,s:0,l:0},Ga={h:0,s:0,l:0};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=Do.euclideanModulo(t,1),e=Do.clamp(e,0,1),i=Do.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=l(i=2*i-(e=i<=.5?i*(1+e):i+e-i*e),e,t+1/3),this.g=l(i,e,t),this.b=l(i,e,t-1/3)),this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var n=parseFloat(i[1])/360,r=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(n,r,o)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(e)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(t){var e=Ua[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=h(t.r),this.g=h(t.g),this.b=h(t.b),this},copyLinearToSRGB:function(t){return this.r=u(t.r),this.g=u(t.g),this.b=u(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,r=this.b,o=Math.max(i,n,r),a=((l=Math.min(i,n,r))+o)/2;if(l===o)l=e=0;else{var s=o-l,l=a<=.5?s/(o+l):s/(2-o-l);switch(o){case i:e=(n-r)/s+(n<r?6:0);break;case n:e=(r-i)/s+2;break;case r:e=(i-n)/s+4}e/=6}return t.h=e,t.s=l,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(ja),ja.h+=t,ja.s+=e,ja.l+=i,this.setHSL(ja.h,ja.s,ja.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(ja),t.getHSL(Ga),t=Do.lerp(ja.h,Ga.h,e);var i=Do.lerp(ja.s,Ga.s,e);return e=Do.lerp(ja.l,Ga.l,e),this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},fromBufferAttribute:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),y.NAMES=Ua,Object.assign(b.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Va=0;w.prototype=Object.assign(Object.create(e.prototype),{constructor:w,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var i,n=t[e];void 0===n?console.warn("THREE.Material: '"+e+"' parameter is undefined."):"shading"===e?(console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n):void 0===(i=this[e])?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e)for(var n=e.length,i=Array(n),r=0;r!==n;++r)i[r]=e[r].clone();return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(w.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),((_.prototype=Object.create(w.prototype)).constructor=_).prototype.isMeshBasicMaterial=!0,_.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Wa=new St,$a=new wt;Object.defineProperty(C.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(C.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new y),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new wt),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new St),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new _t),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,i=this.count;e<i;e++)$a.fromBufferAttribute(this,e),$a.applyMatrix3(t),this.setXY(e,$a.x,$a.y);else if(3===this.itemSize)for(e=0,i=this.count;e<i;e++)Wa.fromBufferAttribute(this,e),Wa.applyMatrix3(t),this.setXYZ(e,Wa.x,Wa.y,Wa.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)Wa.x=this.getX(e),Wa.y=this.getY(e),Wa.z=this.getZ(e),Wa.applyMatrix4(t),this.setXYZ(e,Wa.x,Wa.y,Wa.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)Wa.x=this.getX(e),Wa.y=this.getY(e),Wa.z=this.getZ(e),Wa.applyNormalMatrix(t),this.setXYZ(e,Wa.x,Wa.y,Wa.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)Wa.x=this.getX(e),Wa.y=this.getY(e),Wa.z=this.getZ(e),Wa.transformDirection(t),this.setXYZ(e,Wa.x,Wa.y,Wa.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(S.prototype=Object.create(C.prototype)).constructor=S,(M.prototype=Object.create(C.prototype)).constructor=M,(T.prototype=Object.create(C.prototype)).constructor=T,(A.prototype=Object.create(C.prototype)).constructor=A,P.prototype=Object.create(C.prototype),P.prototype.constructor=P,(L.prototype=Object.create(C.prototype)).constructor=L,R.prototype=Object.create(C.prototype),R.prototype.constructor=R,(O.prototype=Object.create(C.prototype)).constructor=O,(D.prototype=Object.create(C.prototype)).constructor=D,Object.assign(I.prototype,{computeGroups:function(t){var e=[],i=void 0,n=t.faces;for(t=0;t<n.length;t++){var r,o=n[t];o.materialIndex!==i&&(i=o.materialIndex,void 0!==r&&(r.count=3*t-r.start,e.push(r)),r={start:3*t,materialIndex:i})}void 0!==r&&(r.count=3*t-r.start,e.push(r)),this.groups=e},fromGeometry:function(t){var e=t.faces,i=t.vertices,n=t.faceVertexUvs,r=n[0]&&0<n[0].length,o=n[1]&&0<n[1].length,a=t.morphTargets,s=a.length;if(0<s){for(var l=[],c=0;c<s;c++)l[c]={name:a[c].name,data:[]};this.morphTargets.position=l}var h=(c=t.morphNormals).length;if(0<h){for(var u=[],d=0;d<h;d++)u[d]={name:c[d].name,data:[]};this.morphTargets.normal=u}var d=t.skinIndices,p=t.skinWeights,f=d.length===i.length,m=p.length===i.length;0<i.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var g=0;g<e.length;g++){var v=e[g];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;for(3===y.length?this.normals.push(y[0],y[1],y[2]):(y=v.normal,this.normals.push(y,y,y)),3===(y=v.vertexColors).length?this.colors.push(y[0],y[1],y[2]):(y=v.color,this.colors.push(y,y,y)),!0===r&&(void 0!==(y=n[0][g])?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new wt,new wt,new wt))),!0===o&&(void 0!==(y=n[1][g])?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new wt,new wt,new wt))),y=0;y<s;y++){var b=a[y].vertices;l[y].data.push(b[v.a],b[v.b],b[v.c])}for(y=0;y<h;y++)b=c[y].vertexNormals[g],u[y].data.push(b.a,b.b,b.c);f&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var qa=1,Xa=new Mt,Ya=new f,Za=new St,Ja=new n,Ka=new n,Qa=new St;N.prototype=Object.assign(Object.create(e.prototype),{constructor:N,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<k(t)?R:P)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e,i=this.attributes.position;return void 0!==i&&(i.applyMatrix4(t),i.needsUpdate=!0),void 0!==(i=this.attributes.normal)&&(e=(new g).getNormalMatrix(t),i.applyNormalMatrix(e),i.needsUpdate=!0),void 0!==(i=this.attributes.tangent)&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Xa.makeRotationX(t),this.applyMatrix4(Xa),this},rotateY:function(t){return Xa.makeRotationY(t),this.applyMatrix4(Xa),this},rotateZ:function(t){return Xa.makeRotationZ(t),this.applyMatrix4(Xa),this},translate:function(t,e,i){return Xa.makeTranslation(t,e,i),this.applyMatrix4(Xa),this},scale:function(t,e,i){return Xa.makeScale(t,e,i),this.applyMatrix4(Xa),this},lookAt:function(t){return Ya.lookAt(t),Ya.updateMatrix(),this.applyMatrix4(Ya.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Za).negate(),this.translate(Za.x,Za.y,Za.z),this},setFromObject:function(t){var e,i=t.geometry;return t.isPoints||t.isLine?(t=new O(3*i.vertices.length,3),e=new O(3*i.colors.length,3),this.setAttribute("position",t.copyVector3sArray(i.vertices)),this.setAttribute("color",e.copyColorsArray(i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length&&(t=new O(i.lineDistances.length,1),this.setAttribute("lineDistance",t.copyArray(i.lineDistances))),null!==i.boundingSphere&&(this.boundingSphere=i.boundingSphere.clone()),null!==i.boundingBox&&(this.boundingBox=i.boundingBox.clone())):t.isMesh&&i&&i.isGeometry&&this.fromGeometry(i),this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new O(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new I).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e,i=new Float32Array(3*t.vertices.length);for(e in this.setAttribute("position",new C(i,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(i=new Float32Array(3*t.normals.length),this.setAttribute("normal",new C(i,3).copyVector3sArray(t.normals))),0<t.colors.length&&(i=new Float32Array(3*t.colors.length),this.setAttribute("color",new C(i,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new C(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new C(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var i=[],n=t.morphTargets[e],r=0,o=n.length;r<o;r++){var a=n[r],s=new O(3*a.data.length,3);s.name=a.name,i.push(s.copyVector3sArray(a.data))}this.morphAttributes[e]=i}return 0<t.skinIndices.length&&(e=new O(4*t.skinIndices.length,4),this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(e=new O(4*t.skinWeights.length,4),this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var t=0,i=e.length;t<i;t++)Ja.setFromBufferAttribute(e[t]),this.morphTargetsRelative?(Qa.addVectors(this.boundingBox.min,Ja.min),this.boundingBox.expandByPoint(Qa),Qa.addVectors(this.boundingBox.max,Ja.max),this.boundingBox.expandByPoint(Qa)):(this.boundingBox.expandByPoint(Ja.min),this.boundingBox.expandByPoint(Ja.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(Ja.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++)Ka.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Qa.addVectors(Ja.min,Ka.min),Ja.expandByPoint(Qa),Qa.addVectors(Ja.max,Ka.max),Ja.expandByPoint(Qa)):(Ja.expandByPoint(Ka.min),Ja.expandByPoint(Ka.max));Ja.getCenter(i);for(var r=n=0,o=t.count;r<o;r++)Qa.fromBufferAttribute(t,r),n=Math.max(n,i.distanceToSquared(Qa));if(e)for(r=0,o=e.length;r<o;r++)for(var a=e[r],s=this.morphTargetsRelative,l=0,c=a.count;l<c;l++)Qa.fromBufferAttribute(a,l),s&&(Za.fromBufferAttribute(t,l),Qa.add(Za)),n=Math.max(n,i.distanceToSquared(Qa));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var i=this.getAttribute("normal");if(void 0===i)i=new C(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(var n=0,r=i.count;n<r;n++)i.setXYZ(n,0,0,0);var n=new St,r=new St,o=new St,a=new St,s=new St,l=new St,c=new St,h=new St;if(t)for(var u=0,d=t.count;u<d;u+=3){var p=t.getX(u+0),f=t.getX(u+1),m=t.getX(u+2);n.fromBufferAttribute(e,p),r.fromBufferAttribute(e,f),o.fromBufferAttribute(e,m),c.subVectors(o,r),h.subVectors(n,r),c.cross(h),a.fromBufferAttribute(i,p),s.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),a.add(c),s.add(c),l.add(c),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(f,s.x,s.y,s.z),i.setXYZ(m,l.x,l.y,l.z)}else for(t=0,a=e.count;t<a;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,r),h.subVectors(n,r),c.cross(h),i.setXYZ(t+0,c.x,c.y,c.z),i.setXYZ(t+1,c.x,c.y,c.z),i.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,o=(s=t.attributes[i]).array,a=s.itemSize*e,s=Math.min(o.length,r.length-a),l=0;l<s;l++,a++)r[a]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Qa.fromBufferAttribute(t,e),Qa.normalize(),t.setXYZ(e,Qa.x,Qa.y,Qa.z)},toNonIndexed:function(){function t(t,e){var i=t.array,n=t.itemSize;t=t.normalized;for(var r=new i.constructor(e.length*n),o=0,a=0,s=e.length;a<s;a++)for(var l=e[a]*n,c=0;c<n;c++)r[o++]=i[l++];return new C(r,n,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,i=new N,n=this.index.array,r=this.attributes;for(a in r){var o=t(r[a],n);i.setAttribute(a,o)}for(e in r=this.morphAttributes){for(var a=[],s=0,l=(o=r[e]).length;s<l;s++){var c=t(o[s],n);a.push(c)}i.morphAttributes[e]=a}for(i.morphTargetsRelative=this.morphTargetsRelative,e=0,r=(n=this.groups).length;e<r;e++)a=n[e],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i,n=this.index;for(i in null!==n&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)}),n=this.attributes){var r=n[i],o=r.toJSON(t.data);""!==r.name&&(o.name=r.name),t.data.attributes[i]=o}for(e in n=!(i={}),this.morphAttributes){for(var o=[],a=0,s=(r=this.morphAttributes[e]).length;a<s;a++){var l=r[a],c=l.toJSON(t.data);""!==l.name&&(c.name=l.name),o.push(c)}0<o.length&&(i[e]=o,n=!0)}return n&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative),0<(e=this.groups).length&&(t.data.groups=JSON.parse(JSON.stringify(e))),null!==(e=this.boundingSphere)&&(t.data.boundingSphere={center:e.center.toArray(),radius:e.radius}),t},clone:function(){return(new N).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null;var e,i,n={};for(e in this.name=t.name,null!==(r=t.index)&&this.setIndex(r.clone(n)),r=t.attributes)this.setAttribute(e,r[e].clone(n));for(i in e=t.morphAttributes){for(var r=[],o=e[i],a=0,s=o.length;a<s;a++)r.push(o[a].clone(n));this.morphAttributes[i]=r}for(this.morphTargetsRelative=t.morphTargetsRelative,i=0,e=(n=t.groups).length;i<e;i++)r=n[i],this.addGroup(r.start,r.count,r.materialIndex);return null!==(n=t.boundingBox)&&(this.boundingBox=n.clone()),null!==(n=t.boundingSphere)&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ts=new Mt,es=new s,is=new m,ns=new St,rs=new St,os=new St,as=new St,ss=new St,ls=new St,cs=new St,hs=new St,us=new St,ds=new wt,ps=new wt,fs=new wt,ms=new St,gs=new St;F.prototype=Object.assign(Object.create(f.prototype),{constructor:F,isMesh:!0,copy:function(t){return f.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){if((t=this.geometry).isBufferGeometry){var t=t.morphAttributes;if(0<(e=Object.keys(t)).length&&void 0!==(t=t[e[0]])){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++){var n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,e){var i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n&&(null===i.boundingSphere&&i.computeBoundingSphere(),is.copy(i.boundingSphere),is.applyMatrix4(r),!1!==t.ray.intersectsSphere(is)&&(ts.getInverse(r),es.copy(t.ray).applyMatrix4(ts),null===i.boundingBox||!1!==es.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o=i.index,a=i.attributes.position,r=i.morphAttributes.position,s=i.morphTargetsRelative,l=i.attributes.uv,c=i.attributes.uv2,h=i.groups,u=i.drawRange;if(null!==o)if(Array.isArray(n))for(var d=0,p=h.length;d<p;d++)for(var f=h[d],m=n[f.materialIndex],g=Math.max(f.start,u.start),v=Math.min(f.start+f.count,u.start+u.count);g<v;g+=3){var i=o.getX(g),y=o.getX(g+1),b=o.getX(g+2);(i=z(this,m,t,es,a,r,s,l,c,i,y,b))&&(i.faceIndex=Math.floor(g/3),i.face.materialIndex=f.materialIndex,e.push(i))}else for(h=Math.max(0,u.start),u=Math.min(o.count,u.start+u.count);h<u;h+=3)i=o.getX(h),d=o.getX(h+1),p=o.getX(h+2),(i=z(this,n,t,es,a,r,s,l,c,i,d,p))&&(i.faceIndex=Math.floor(h/3),e.push(i));else if(void 0!==a)if(Array.isArray(n))for(o=0,d=h.length;o<d;o++)for(f=n[(p=h[o]).materialIndex],m=Math.max(p.start,u.start),g=Math.min(p.start+p.count,u.start+u.count);m<g;m+=3)(i=z(this,f,t,es,a,r,s,l,c,m,m+1,m+2))&&(i.faceIndex=Math.floor(m/3),i.face.materialIndex=p.materialIndex,e.push(i));else for(h=Math.max(0,u.start),u=Math.min(a.count,u.start+u.count);h<u;h+=3)(i=z(this,n,t,es,a,r,s,l,c,h,h+1,h+2))&&(i.faceIndex=Math.floor(h/3),e.push(i))}else if(i.isGeometry)for(r=Array.isArray(n),s=i.vertices,l=i.faces,0<(i=i.faceVertexUvs[0]).length&&(a=i),c=0,u=l.length;c<u;c++)h=l[c],void 0!==(i=r?n[h.materialIndex]:n)&&(o=s[h.a],d=s[h.b],p=s[h.c],i=B(this,i,t,es,o,d,p,ms))&&(a&&a[c]&&(f=a[c],ds.copy(f[0]),ps.copy(f[1]),fs.copy(f[2]),i.uv=x.getUV(ms,o,d,p,ds,ps,fs,new wt)),i.face=h,i.faceIndex=c,e.push(i))}});var vs=0,ys=new Mt,bs=new f,xs=new St;H.prototype=Object.assign(Object.create(e.prototype),{constructor:H,isGeometry:!0,applyMatrix4:function(t){for(var e=(new g).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(t=0,i=this.faces.length;t<i;t++){(n=this.faces[t]).normal.applyMatrix3(e).normalize();for(var r=0,o=n.vertexNormals.length;r<o;r++)n.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return ys.makeRotationX(t),this.applyMatrix4(ys),this},rotateY:function(t){return ys.makeRotationY(t),this.applyMatrix4(ys),this},rotateZ:function(t){return ys.makeRotationZ(t),this.applyMatrix4(ys),this},translate:function(t,e,i){return ys.makeTranslation(t,e,i),this.applyMatrix4(ys),this},scale:function(t,e,i){return ys.makeScale(t,e,i),this.applyMatrix4(ys),this},lookAt:function(t){return bs.lookAt(t),bs.updateMatrix(),this.applyMatrix4(bs.matrix),this},fromBufferGeometry:function(t){function e(t,e,i,n){var r=void 0===s?[]:[o.colors[t].clone(),o.colors[e].clone(),o.colors[i].clone()];n=new b(t,e,i,void 0===a?[]:[(new St).fromBufferAttribute(a,t),(new St).fromBufferAttribute(a,e),(new St).fromBufferAttribute(a,i)],r,n),o.faces.push(n),void 0!==l&&o.faceVertexUvs[0].push([(new wt).fromBufferAttribute(l,t),(new wt).fromBufferAttribute(l,e),(new wt).fromBufferAttribute(l,i)]),void 0!==c&&o.faceVertexUvs[1].push([(new wt).fromBufferAttribute(c,t),(new wt).fromBufferAttribute(c,e),(new wt).fromBufferAttribute(c,i)])}var o=this,i=null!==t.index?t.index:void 0,n=t.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=n.position,a=n.normal,s=n.color,l=n.uv,c=n.uv2;for(void 0!==c&&(this.faceVertexUvs[1]=[]),n=0;n<r.count;n++)o.vertices.push((new St).fromBufferAttribute(r,n)),void 0!==s&&o.colors.push((new y).fromBufferAttribute(s,n));if(0<(n=t.groups).length)for(r=0;r<n.length;r++){var h=n[r],u=h.start,d=u;for(u+=h.count;d<u;d+=3)void 0!==i?e(i.getX(d),i.getX(d+1),i.getX(d+2),h.materialIndex):e(d,d+1,d+2,h.materialIndex)}else if(void 0!==i)for(n=0;n<i.count;n+=3)e(i.getX(n),i.getX(n+1),i.getX(n+2));else for(i=0;i<r.count;i+=3)e(i,i+1,i+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(xs).negate(),this.translate(xs.x,xs.y,xs.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=0===(e=this.boundingSphere.radius)?1:1/e,i=new Mt;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new St,e=new St,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b];t.subVectors(this.vertices[r.c],a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=Array(this.vertices.length),i=0,n=this.vertices.length;i<n;i++)e[i]=new St;if(t){t=new St;for(var i=new St,n=0,r=this.faces.length;n<r;n++){var o=this.faces[n],a=this.vertices[o.a],s=this.vertices[o.b];t.subVectors(this.vertices[o.c],s),i.subVectors(a,s),t.cross(i),e[o.a].add(t),e[o.b].add(t),e[o.c].add(t)}}else for(this.computeFaceNormals(),t=0,i=this.faces.length;t<i;t++)e[(n=this.faces[t]).a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal);for(t=0,i=this.vertices.length;t<i;t++)e[t].normalize();for(t=0,i=this.faces.length;t<i;t++)3===(r=(n=this.faces[t]).vertexNormals).length?(r[0].copy(e[n.a]),r[1].copy(e[n.b]),r[2].copy(e[n.c])):(r[0]=e[n.a].clone(),r[1]=e[n.b].clone(),r[2]=e[n.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(var n=0,r=i.vertexNormals.length;n<r;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}for((t=new H).faces=this.faces,e=0,i=this.morphTargets.length;e<i;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];for(var n=this.morphNormals[e].faceNormals,r=this.morphNormals[e].vertexNormals,o=0,a=this.faces.length;o<a;o++){var s=new St,l={a:new St,b:new St,c:new St};n.push(s),r.push(l)}}for(n=this.morphNormals[e],t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals(),r=0,o=this.faces.length;r<o;r++)a=this.faces[r],s=n.vertexNormals[r],n.faceNormals[r].copy(a.normal),s.a.copy(a.vertexNormals[0]),s.b.copy(a.vertexNormals[1]),s.c.copy(a.vertexNormals[2])}for(t=0,e=this.faces.length;t<e;t++)(i=this.faces[t]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new m),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new g).getNormalMatrix(e));for(var u=0,d=a.length;u<d;u++){var p=a[u].clone();void 0!==e&&p.applyMatrix4(e),o.push(p)}for(e=0,o=h.length;e<o;e++)c.push(h[e].clone());for(c=0,h=l.length;c<h;c++){d=(e=l[c]).vertexNormals,a=e.vertexColors,(o=new b(e.a+r,e.b+r,e.c+r)).normal.copy(e.normal),void 0!==n&&o.normal.applyMatrix3(n).normalize();for(var p=0,f=d.length;p<f;p++)u=d[p].clone(),void 0!==n&&u.applyMatrix3(n).normalize(),o.vertexNormals.push(u);for(o.color.copy(e.color),d=0,p=a.length;d<p;d++)u=a[d],o.vertexColors.push(u.clone());o.materialIndex=e.materialIndex+i,s.push(o)}for(i=0,n=t.faceVertexUvs.length;i<n;i++)for(r=t.faceVertexUvs[i],void 0===this.faceVertexUvs[i]&&(this.faceVertexUvs[i]=[]),s=0,l=r.length;s<l;s++){for(h=[],e=0,o=(c=r[s]).length;e<o;e++)h.push(c[e].clone());this.faceVertexUvs[i].push(h)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){for(var t={},e=[],i=[],n=Math.pow(10,4),r=0,o=this.vertices.length;r<o;r++){var a=this.vertices[r];void 0===t[a=Math.round(a.x*n)+"_"+Math.round(a.y*n)+"_"+Math.round(a.z*n)]?(t[a]=r,e.push(this.vertices[r]),i[r]=e.length-1):i[r]=i[t[a]]}for(t=[],n=0,r=this.faces.length;n<r;n++)for((o=this.faces[n]).a=i[o.a],o.b=i[o.b],o.c=i[o.c],o=[o.a,o.b,o.c],a=0;a<3;a++)if(o[a]===o[(a+1)%3]){t.push(n);break}for(i=t.length-1;0<=i;i--)for(n=t[i],this.faces.splice(n,1),r=0,o=this.faceVertexUvs.length;r<o;r++)this.faceVertexUvs[r].splice(n,1);return i=this.vertices.length-e.length,this.vertices=e,i},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new St(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,r,i=this.faceVertexUvs[0],o=this.faceVertexUvs[1];i&&i.length===e&&(n=[]),o&&o.length===e&&(r=[]);for(var a=0;a<e;a++){var s=t[a]._id;n&&n.push(i[s]),r&&r.push(o[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=l.length/3,l.push(t.x,t.y,t.z)),c[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=h.length,h.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=d.length/2,d.push(t.x,t.y)),p[e]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(o=[],s=0;s<this.vertices.length;s++){var a=this.vertices[s];o.push(a.x,a.y,a.z)}for(var s=[],l=[],c={},h=[],u={},d=[],p={},a=0;a<this.faces.length;a++){var f,m=this.faces[a],g=void 0!==this.faceVertexUvs[0][a],v=0<m.normal.length(),y=0<m.vertexNormals.length,b=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=0<m.vertexColors.length;f=t(2,3,g),f=t(f,4,v),f=t(f,5,y),f=t(f,6,b),f=t(f,7,x),s.push(f),s.push(m.a,m.b,m.c),s.push(m.materialIndex),g&&(g=this.faceVertexUvs[0][a],s.push(n(g[0]),n(g[1]),n(g[2]))),v&&s.push(e(m.normal)),y&&(v=m.vertexNormals,s.push(e(v[0]),e(v[1]),e(v[2]))),b&&s.push(i(m.color)),x&&(m=m.vertexColors,s.push(i(m[0]),i(m[1]),i(m[2])))}return r.data={},r.data.vertices=o,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=s,r},clone:function(){return(new H).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;for(var e=t.vertices,i=0,n=e.length;i<n;i++)this.vertices.push(e[i].clone());for(i=0,n=(e=t.colors).length;i<n;i++)this.colors.push(e[i].clone());for(i=0,n=(e=t.faces).length;i<n;i++)this.faces.push(e[i].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){n=t.faceVertexUvs[e],void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(var r=0,o=n.length;r<o;r++){for(var a=n[r],s=[],l=0,c=a.length;l<c;l++)s.push(a[l].clone());this.faceVertexUvs[e].push(s)}}for(i=0,n=(e=t.morphTargets).length;i<n;i++){if((r={}).name=e[i].name,void 0!==e[i].vertices)for(r.vertices=[],o=0,a=e[i].vertices.length;o<a;o++)r.vertices.push(e[i].vertices[o].clone());if(void 0!==e[i].normals)for(r.normals=[],o=0,a=e[i].normals.length;o<a;o++)r.normals.push(e[i].normals[o].clone());this.morphTargets.push(r)}for(i=0,n=(e=t.morphNormals).length;i<n;i++){if(r={},void 0!==e[i].vertexNormals)for(r.vertexNormals=[],o=0,a=e[i].vertexNormals.length;o<a;o++)s=e[i].vertexNormals[o],(l={}).a=s.a.clone(),l.b=s.b.clone(),l.c=s.c.clone(),r.vertexNormals.push(l);if(void 0!==e[i].faceNormals)for(r.faceNormals=[],o=0,a=e[i].faceNormals.length;o<a;o++)r.faceNormals.push(e[i].faceNormals[o].clone());this.morphNormals.push(r)}for(i=0,n=(e=t.skinWeights).length;i<n;i++)this.skinWeights.push(e[i].clone());for(i=0,n=(e=t.skinIndices).length;i<n;i++)this.skinIndices.push(e[i].clone());for(i=0,n=(e=t.lineDistances).length;i<n;i++)this.lineDistances.push(e[i]);return null!==(e=t.boundingBox)&&(this.boundingBox=e.clone()),null!==(e=t.boundingSphere)&&(this.boundingSphere=e.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(U.prototype=Object.create(H.prototype)).constructor=U,(j.prototype=Object.create(N.prototype)).constructor=j;var ws={clone:G,merge:V};((W.prototype=Object.create(w.prototype)).constructor=W).prototype.isShaderMaterial=!0,W.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=G(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},W.prototype.toJSON=function(t){var e,i,n=w.prototype.toJSON.call(this,t);for(e in n.uniforms={},this.uniforms){var r=this.uniforms[e].value;n.uniforms[e]=r&&r.isTexture?{type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?{type:"c",value:r.getHex()}:r&&r.isVector2?{type:"v2",value:r.toArray()}:r&&r.isVector3?{type:"v3",value:r.toArray()}:r&&r.isVector4?{type:"v4",value:r.toArray()}:r&&r.isMatrix3?{type:"m3",value:r.toArray()}:r&&r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}for(i in 0<Object.keys(this.defines).length&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[i]&&(t[i]=!0);return 0<Object.keys(t).length&&(n.extensions=t),n},$.prototype=Object.assign(Object.create(f.prototype),{constructor:$,isCamera:!0,copy:function(t,e){return f.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new St),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){f.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){f.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),q.prototype=Object.assign(Object.create($.prototype),{constructor:q,isPerspectiveCamera:!0,copy:function(t,e){return $.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Do.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Do.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Do.RAD2DEG*Math.atan(Math.tan(.5*Do.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e,i=this.near,n=i*Math.tan(.5*Do.DEG2RAD*this.fov)/this.zoom,r=2*n,o=this.aspect*r,a=-.5*o,s=this.view;null!==this.view&&this.view.enabled&&(t=s.fullWidth,e=s.fullHeight,a+=s.offsetX*o/t,n-=s.offsetY*r/e,o*=s.width/t,r*=s.height/e),0!==(s=this.filmOffset)&&(a+=i*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,n,n-r,i,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=f.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),(X.prototype=Object.create(f.prototype)).constructor=X,((Y.prototype=Object.create(E.prototype)).constructor=Y).prototype.isWebGLCubeRenderTarget=!0,Y.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var i=new c,n=new W({name:"CubemapFromEquirect",uniforms:G({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:1,blending:0});return n.uniforms.tEquirect.value=e,e=new F(new j(5,5,5),n),i.add(e),new X(1,10,this).update(t,i),e.geometry.dispose(),e.material.dispose(),this},((Tt.prototype=Object.create(d.prototype)).constructor=Tt).prototype.isDataTexture=!0;var _s=new m,Ss=new St;Object.assign(Et.prototype,{set:function(t,e,i,n,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromProjectionMatrix:function(t){var e=this.planes;t=(g=t.elements)[0];var i=g[1],n=g[2],r=g[3],o=g[4],a=g[5],s=g[6],l=g[7],c=g[8],h=g[9],u=g[10],d=g[11],p=g[12],f=g[13],m=g[14],g=g[15];return e[0].setComponents(r-t,l-o,d-c,g-p).normalize(),e[1].setComponents(r+t,l+o,d+c,g+p).normalize(),e[2].setComponents(r+i,l+a,d+h,g+f).normalize(),e[3].setComponents(r-i,l-a,d-h,g-f).normalize(),e[4].setComponents(r-n,l-s,d-u,g-m).normalize(),e[5].setComponents(r+n,l+s,d+u,g+m).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),_s.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(_s)},intersectsSprite:function(t){return _s.center.set(0,0,0),_s.radius=.7071067811865476,_s.applyMatrix4(t.matrixWorld),this.intersectsSphere(_s)},intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;n<6;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,i=0;i<6;i++){var n=e[i];if(Ss.x=(0<n.normal.x?t.max:t.min).x,Ss.y=(0<n.normal.y?t.max:t.min).y,Ss.z=(0<n.normal.z?t.max:t.min).z,n.distanceToPoint(Ss)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}});var Ms={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new g},uv2Transform:{value:new g},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new g}},sprite:{diffuse:{value:new y(15658734)},opacity:{value:1},center:{value:new wt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new g}}};(Z.prototype=Object.create(H.prototype)).constructor=Z,(J.prototype=Object.create(N.prototype)).constructor=J;var Ts={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Es={basic:{uniforms:V([Ms.common,Ms.specularmap,Ms.envmap,Ms.aomap,Ms.lightmap,Ms.fog]),vertexShader:Ts.meshbasic_vert,fragmentShader:Ts.meshbasic_frag},lambert:{uniforms:V([Ms.common,Ms.specularmap,Ms.envmap,Ms.aomap,Ms.lightmap,Ms.emissivemap,Ms.fog,Ms.lights,{emissive:{value:new y(0)}}]),vertexShader:Ts.meshlambert_vert,fragmentShader:Ts.meshlambert_frag},phong:{uniforms:V([Ms.common,Ms.specularmap,Ms.envmap,Ms.aomap,Ms.lightmap,Ms.emissivemap,Ms.bumpmap,Ms.normalmap,Ms.displacementmap,Ms.fog,Ms.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Ts.meshphong_vert,fragmentShader:Ts.meshphong_frag},standard:{uniforms:V([Ms.common,Ms.envmap,Ms.aomap,Ms.lightmap,Ms.emissivemap,Ms.bumpmap,Ms.normalmap,Ms.displacementmap,Ms.roughnessmap,Ms.metalnessmap,Ms.fog,Ms.lights,{emissive:{value:new y(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ts.meshphysical_vert,fragmentShader:Ts.meshphysical_frag},toon:{uniforms:V([Ms.common,Ms.aomap,Ms.lightmap,Ms.emissivemap,Ms.bumpmap,Ms.normalmap,Ms.displacementmap,Ms.gradientmap,Ms.fog,Ms.lights,{emissive:{value:new y(0)}}]),vertexShader:Ts.meshtoon_vert,fragmentShader:Ts.meshtoon_frag},matcap:{uniforms:V([Ms.common,Ms.bumpmap,Ms.normalmap,Ms.displacementmap,Ms.fog,{matcap:{value:null}}]),vertexShader:Ts.meshmatcap_vert,fragmentShader:Ts.meshmatcap_frag},points:{uniforms:V([Ms.points,Ms.fog]),vertexShader:Ts.points_vert,fragmentShader:Ts.points_frag},dashed:{uniforms:V([Ms.common,Ms.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ts.linedashed_vert,fragmentShader:Ts.linedashed_frag},depth:{uniforms:V([Ms.common,Ms.displacementmap]),vertexShader:Ts.depth_vert,fragmentShader:Ts.depth_frag},normal:{uniforms:V([Ms.common,Ms.bumpmap,Ms.normalmap,Ms.displacementmap,{opacity:{value:1}}]),vertexShader:Ts.normal_vert,fragmentShader:Ts.normal_frag},sprite:{uniforms:V([Ms.sprite,Ms.fog]),vertexShader:Ts.sprite_vert,fragmentShader:Ts.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null}},vertexShader:Ts.background_vert,fragmentShader:Ts.background_frag},cube:{uniforms:V([Ms.envmap,{opacity:{value:1}}]),vertexShader:Ts.cube_vert,fragmentShader:Ts.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ts.equirect_vert,fragmentShader:Ts.equirect_frag},distanceRGBA:{uniforms:V([Ms.common,Ms.displacementmap,{referencePosition:{value:new St},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ts.distanceRGBA_vert,fragmentShader:Ts.distanceRGBA_frag},shadow:{uniforms:V([Ms.lights,Ms.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Ts.shadow_vert,fragmentShader:Ts.shadow_frag}};Es.physical={uniforms:V([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new wt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new y(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Ts.meshphysical_vert,fragmentShader:Ts.meshphysical_frag},((tt.prototype=Object.create(d.prototype)).constructor=tt).prototype.isCubeTexture=!0,Object.defineProperty(tt.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),((et.prototype=Object.create(d.prototype)).constructor=et).prototype.isDataTexture2DArray=!0,((it.prototype=Object.create(d.prototype)).constructor=it).prototype.isDataTexture3D=!0;var Cs=new d,As=new et,Ps=new it,Ls=new tt,Rs=[],Os=[],Ds=new Float32Array(16),Is=new Float32Array(9),ks=new Float32Array(4);ie.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ot(e,t)},ne.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,o=n.length;r!==o;++r){var a=n[r];a.setValue(t,e[a.id],i)}};var Ns=/([\w\d_]+)(\])?(\[|\.)?/g;re.prototype.setValue=function(t,e,i,n){void 0!==(e=this.map[e])&&e.setValue(t,i,n)},re.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},re.upload=function(t,e,i,n){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,n)}},re.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var o=t[n];o.id in e&&i.push(o)}return i};var Fs=0,Bs=/^[ \t]*#include +<([\w\d./]+)>/gm,zs=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Hs=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,Us=0;((Ae.prototype=Object.create(w.prototype)).constructor=Ae).prototype.isMeshDepthMaterial=!0,Ae.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((Pe.prototype=Object.create(w.prototype)).constructor=Pe).prototype.isMeshDistanceMaterial=!0,Pe.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Ie.prototype=Object.assign(Object.create(q.prototype),{constructor:Ie,isArrayCamera:!0}),ke.prototype=Object.assign(Object.create(f.prototype),{constructor:ke,isGroup:!0}),Object.assign(Ne.prototype,{constructor:Ne,getHandSpace:function(){if(null===this._hand&&(this._hand=new ke,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new ke;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new ke,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new ke,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,i){var n=null,r=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(t)if(t.hand)for(var c,h,o=!0,u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++)t.hand[u]&&(c=e.getJointPose(t.hand[u],i),h=l.joints[u],null!==c&&(h.matrix.fromArray(c.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=c.radius),h.visible=null!==c,c=l.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(l.joints[window.XRHand.THUMB_PHALANX_TIP].position),l.inputState.pinching&&.025<c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&c<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this})));else null!==a&&(null!==(n=e.getPose(t.targetRaySpace,i))&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,i))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==n),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(Fe.prototype,e.prototype),He.prototype=Object.assign(Object.create(ze.prototype),{constructor:He,isWebGL1Renderer:!0}),Object.assign(Ue.prototype,{isFogExp2:!0,clone:function(){return new Ue(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(je.prototype,{isFog:!0,clone:function(){return new je(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ge.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ge.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},clone:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Do.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer),(t=new Ge(t=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride)).setUsage(this.usage),t},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Do.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var js=new St;Object.defineProperties(Ve.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Ve.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,i=this.data.count;e<i;e++)js.x=this.getX(e),js.y=this.getY(e),js.z=this.getZ(e),js.applyMatrix4(t),this.setXYZ(e,js.x,js.y,js.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this},clone:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ve(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data."),t=[];for(var e=0;e<this.count;e++)for(var i=e*this.data.stride+this.offset,n=0;n<this.itemSize;n++)t.push(this.data.array[i+n]);return new C(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data."),t=[];for(var e=0;e<this.count;e++)for(var i=e*this.data.stride+this.offset,n=0;n<this.itemSize;n++)t.push(this.data.array[i+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),((We.prototype=Object.create(w.prototype)).constructor=We).prototype.isSpriteMaterial=!0,We.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Gs,Vs=new St,Ws=new St,$s=new St,qs=new wt,Xs=new wt,Ys=new Mt,Zs=new St,Js=new St,Ks=new St,Qs=new wt,tl=new wt,el=new wt;$e.prototype=Object.assign(Object.create(f.prototype),{constructor:$e,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ws.setFromMatrixScale(this.matrixWorld),Ys.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),$s.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ws.multiplyScalar(-$s.z);var i,n,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r)),r=this.center,qe(Zs.set(-.5,-.5,0),$s,r,Ws,n,i),qe(Js.set(.5,-.5,0),$s,r,Ws,n,i),qe(Ks.set(.5,.5,0),$s,r,Ws,n,i),Qs.set(0,0),tl.set(1,0),el.set(1,1),null===t.ray.intersectTriangle(Zs,Js,Ks,!1,Vs)&&(qe(Js.set(-.5,.5,0),$s,r,Ws,n,i),tl.set(0,1),null===t.ray.intersectTriangle(Zs,Ks,Js,!1,Vs))||(n=t.ray.origin.distanceTo(Vs))<t.near||n>t.far||e.push({distance:n,point:Vs.clone(),uv:x.getUV(Vs,Zs,Js,Ks,Qs,tl,el,new wt),face:null,object:this})},copy:function(t){return f.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var il,nl,rl,ol,al,sl=new St,ll=new St;Xe.prototype=Object.assign(Object.create(f.prototype),{constructor:Xe,isLOD:!0,copy:function(t){f.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object}return null},raycast:function(t,e){var i;0<this.levels.length&&(sl.setFromMatrixPosition(this.matrixWorld),i=t.ray.origin.distanceTo(sl),this.getObjectForDistance(i).raycast(t,e))},update:function(t){var e=this.levels;if(1<e.length){sl.setFromMatrixPosition(t.matrixWorld),ll.setFromMatrixPosition(this.matrixWorld),t=sl.distanceTo(ll)/t.zoom,e[0].object.visible=!0;for(var i=1,n=e.length;i<n&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<n;i++)e[i].object.visible=!1}},toJSON:function(t){t=f.prototype.toJSON.call(this,t),!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var r=e[i];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),Ye.prototype=Object.assign(Object.create(F.prototype),{constructor:Ye,isSkinnedMesh:!0,copy:function(t){return F.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new _t,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var r=1/t.manhattanLength();1/0!=r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){F.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:(il=new St,nl=new _t,rl=new _t,ol=new St,al=new Mt,function(t,e){var i,n=this.skeleton,r=this.geometry;for(nl.fromBufferAttribute(r.attributes.skinIndex,t),rl.fromBufferAttribute(r.attributes.skinWeight,t),il.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0),t=0;t<4;t++)0!==(r=rl.getComponent(t))&&(i=nl.getComponent(t),al.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(ol.copy(il).applyMatrix4(al),r));return e.applyMatrix4(this.bindMatrixInverse)})});var cl=new Mt,hl=new Mt;Object.assign(Ze.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new Mt;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var i=this.bones[t];i&&i.matrixWorld.getInverse(this.boneInverses[t])}for(t=0,e=this.bones.length;t<e;t++)(i=this.bones[t])&&(i.parent&&i.parent.isBone?(i.matrix.getInverse(i.parent.matrixWorld),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,o=t.length;r<o;r++)cl.multiplyMatrices(t[r]?t[r].matrixWorld:hl,e[r]),cl.toArray(i,16*r);void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new Ze(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Je.prototype=Object.assign(Object.create(f.prototype),{constructor:Je,isBone:!0});var ul=new Mt,dl=new Mt,pl=[],fl=new F;Ke.prototype=Object.assign(Object.create(F.prototype),{constructor:Ke,isInstancedMesh:!0,copy:function(t){return F.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var i=this.matrixWorld,n=this.count;if(fl.geometry=this.geometry,fl.material=this.material,void 0!==fl.material)for(var r=0;r<n;r++){this.getMatrixAt(r,ul),dl.multiplyMatrices(i,ul),fl.matrixWorld=dl,fl.raycast(t,pl);for(var o=0,a=pl.length;o<a;o++){var s=pl[o];s.instanceId=r,s.object=this,e.push(s)}pl.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),((Qe.prototype=Object.create(w.prototype)).constructor=Qe).prototype.isLineBasicMaterial=!0,Qe.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var ml=new St,gl=new St,vl=new Mt,yl=new s,bl=new m;ti.prototype=Object.assign(Object.create(f.prototype),{constructor:ti,isLine:!0,copy:function(t){return f.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,r=e.count;n<r;n++)ml.fromBufferAttribute(e,n-1),gl.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=ml.distanceTo(gl);t.setAttribute("lineDistance",new O(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,(t=t.lineDistances)[0]=0,i=1,n=e.length;i<n;i++)t[i]=t[i-1],t[i]+=e[i-1].distanceTo(e[i]);return this},raycast:function(t,e){var i=this.geometry,n=this.matrixWorld,r=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),bl.copy(i.boundingSphere),bl.applyMatrix4(n),bl.radius+=r,!1!==t.ray.intersectsSphere(bl)){vl.getInverse(n),yl.copy(t.ray).applyMatrix4(vl),n=r/((this.scale.x+this.scale.y+this.scale.z)/3),n*=n;var o=new St,a=new St,r=new St,s=new St,l=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var c=i.index,i=i.attributes.position.array;if(null!==c)for(var h=0,u=(c=c.array).length-1;h<u;h+=l){var d=c[h+1];o.fromArray(i,3*c[h]),a.fromArray(i,3*d),yl.distanceSqToSegment(o,a,s,r)>n||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else for(c=0,h=i.length/3-1;c<h;c+=l)o.fromArray(i,3*c),a.fromArray(i,3*c+3),yl.distanceSqToSegment(o,a,s,r)>n||(s.applyMatrix4(this.matrixWorld),(u=t.ray.origin.distanceTo(s))<t.near||u>t.far||e.push({distance:u,point:r.clone().applyMatrix4(this.matrixWorld),index:c,face:null,faceIndex:null,object:this}))}else if(i.isGeometry)for(a=(o=i.vertices).length,i=0;i<a-1;i+=l)yl.distanceSqToSegment(o[i],o[i+1],s,r)>n||(s.applyMatrix4(this.matrixWorld),(c=t.ray.origin.distanceTo(s))<t.near||c>t.far||e.push({distance:c,point:r.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){if((t=this.geometry).isBufferGeometry){var t=t.morphAttributes;if(0<(e=Object.keys(t)).length&&void 0!==(t=t[e[0]])){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++){var n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var xl=new St,wl=new St;ei.prototype=Object.assign(Object.create(ti.prototype),{constructor:ei,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,i=[],n=0,r=e.count;n<r;n+=2)xl.fromBufferAttribute(e,n),wl.fromBufferAttribute(e,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+xl.distanceTo(wl);t.setAttribute("lineDistance",new O(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,t=t.lineDistances,i=0,n=e.length;i<n;i+=2)xl.copy(e[i]),wl.copy(e[i+1]),t[i]=0===i?0:t[i-1],t[i+1]=t[i]+xl.distanceTo(wl);return this}}),ii.prototype=Object.assign(Object.create(ti.prototype),{constructor:ii,isLineLoop:!0}),((ni.prototype=Object.create(w.prototype)).constructor=ni).prototype.isPointsMaterial=!0,ni.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var _l=new Mt,Sl=new s,Ml=new m,Tl=new St;ri.prototype=Object.assign(Object.create(f.prototype),{constructor:ri,isPoints:!0,copy:function(t){return f.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var i=this.geometry,n=this.matrixWorld,r=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ml.copy(i.boundingSphere),Ml.applyMatrix4(n),Ml.radius+=r,!1!==t.ray.intersectsSphere(Ml))if(_l.getInverse(n),Sl.copy(t.ray).applyMatrix4(_l),r/=(this.scale.x+this.scale.y+this.scale.z)/3,r*=r,i.isBufferGeometry){var o=i.index,i=i.attributes.position.array;if(null!==o)for(var a=0,s=(o=o.array).length;a<s;a++){var l=o[a];Tl.fromArray(i,3*l),oi(Tl,l,r,n,t,e,this)}else for(o=0,a=i.length/3;o<a;o++)Tl.fromArray(i,3*o),oi(Tl,o,r,n,t,e,this)}else for(o=0,a=(i=i.vertices).length;o<a;o++)oi(i[o],o,r,n,t,e,this)},updateMorphTargets:function(){if((t=this.geometry).isBufferGeometry){var t=t.morphAttributes;if(0<(e=Object.keys(t)).length&&void 0!==(t=t[e[0]])){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++){var n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}),ai.prototype=Object.assign(Object.create(d.prototype),{constructor:ai,isVideoTexture:!0,update:function(){var t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((si.prototype=Object.create(d.prototype)).constructor=si).prototype.isCompressedTexture=!0,((li.prototype=Object.create(d.prototype)).constructor=li).prototype.isCanvasTexture=!0,((ci.prototype=Object.create(d.prototype)).constructor=ci).prototype.isDepthTexture=!0,(hi.prototype=Object.create(N.prototype)).constructor=hi,(ui.prototype=Object.create(H.prototype)).constructor=ui,(di.prototype=Object.create(N.prototype)).constructor=di,(pi.prototype=Object.create(H.prototype)).constructor=pi,(fi.prototype=Object.create(N.prototype)).constructor=fi,(mi.prototype=Object.create(H.prototype)).constructor=mi,(gi.prototype=Object.create(fi.prototype)).constructor=gi,(vi.prototype=Object.create(H.prototype)).constructor=vi,(yi.prototype=Object.create(fi.prototype)).constructor=yi,(bi.prototype=Object.create(H.prototype)).constructor=bi,(xi.prototype=Object.create(fi.prototype)).constructor=xi,(wi.prototype=Object.create(H.prototype)).constructor=wi,(_i.prototype=Object.create(fi.prototype)).constructor=_i,(Si.prototype=Object.create(H.prototype)).constructor=Si,((Mi.prototype=Object.create(N.prototype)).constructor=Mi).prototype.toJSON=function(){var t=N.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},(Ti.prototype=Object.create(H.prototype)).constructor=Ti,(Ei.prototype=Object.create(N.prototype)).constructor=Ei,(Ci.prototype=Object.create(H.prototype)).constructor=Ci,(Ai.prototype=Object.create(N.prototype)).constructor=Ai;var El=function(t,e,i){i=i||2;var n,r=(l=e&&e.length)?e[0]*i:t.length,o=Pi(t,0,r,i,!0),a=[];if(!o||o.next===o.prev)return a;if(l){for(var s=i,l=[],c=0,h=e.length;c<h;c++){var u=e[c]*s;(u=Pi(t,u,c<h-1?e[c+1]*s:t.length,s,!1))===u.next&&(u.steiner=!0),l.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(u))}for(l.sort(Oi),c=0;c<l.length;c++)(e=function(t,e){var i=e,n=t.x,r=t.y,o=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var a=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&o<a){if((o=a)===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}}while((i=i.next)!==e);if(!s)return null;if(n===o)return s;var l,c,a=(e=s).x,h=s.y,u=1/0,i=s;do{}while(n>=i.x&&i.x>=a&&n!==i.x&&Ii(r<h?n:o,r,a,h,r<h?o:n,r,i.x,i.y)&&(l=Math.abs(r-i.y)/(n-i.x),(c=(c=Hi(i,t))&&!(c=l<u)&&(c=l===u)&&!(c=i.x>s.x)&&(c=i.x===s.x)?ki((c=s).prev,c,i.prev)<0&&ki(i.next,c,c.next)<0:c)&&(s=i,u=l)),(i=i.next)!==e);return s}(s=l[c],e=o))&&(s=Ui(e,s),Li(e,e.next),Li(s,s.next)),o=Li(o,o.next)}if(t.length>80*i){for(var d=n=t[0],p=l=t[1],s=i;s<r;s+=i)(c=t[s])<d&&(d=c),(e=t[s+1])<p&&(p=e),n<c&&(n=c),l<e&&(l=e);n=0!==(n=Math.max(n-d,l-p))?1/n:0}return Ri(o,a,i,d,p,n),a},Cl={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return Cl.area(t)<0},triangulateShape:function(t,e){var i=[],n=[],r=[];Wi(t),$i(i,t),t=t.length,e.forEach(Wi);for(var o=0;o<e.length;o++)n.push(t),t+=e[o].length,$i(i,e[o]);for(e=El(i,n),i=0;i<e.length;i+=3)r.push(e.slice(i,i+3));return r}};((qi.prototype=Object.create(H.prototype)).constructor=qi).prototype.toJSON=function(){var t=H.prototype.toJSON.call(this);return Yi(this.parameters.shapes,this.parameters.options,t)},((Xi.prototype=Object.create(N.prototype)).constructor=Xi).prototype.toJSON=function(){var t=N.prototype.toJSON.call(this);return Yi(this.parameters.shapes,this.parameters.options,t)};var Al={generateTopUV:function(t,e,i,n,r){t=e[3*n],n=e[3*n+1];var o=e[3*r];return r=e[3*r+1],[new wt(e[3*i],e[3*i+1]),new wt(t,n),new wt(o,r)]},generateSideWallUV:function(t,e,i,n,r,o){t=e[3*i];var a=e[3*i+1];i=e[3*i+2];var s=e[3*n],l=e[3*n+1];n=e[3*n+2];var c=e[3*r],h=e[3*r+1];r=e[3*r+2];var u=e[3*o],d=e[3*o+1];return e=e[3*o+2],Math.abs(a-l)<.01?[new wt(t,1-i),new wt(s,1-n),new wt(c,1-r),new wt(u,1-e)]:[new wt(a,1-i),new wt(l,1-n),new wt(h,1-r),new wt(d,1-e)]}};(Zi.prototype=Object.create(H.prototype)).constructor=Zi,(Ji.prototype=Object.create(Xi.prototype)).constructor=Ji,(Ki.prototype=Object.create(H.prototype)).constructor=Ki,(Qi.prototype=Object.create(N.prototype)).constructor=Qi,(tn.prototype=Object.create(H.prototype)).constructor=tn,(en.prototype=Object.create(N.prototype)).constructor=en,(nn.prototype=Object.create(H.prototype)).constructor=nn,(rn.prototype=Object.create(N.prototype)).constructor=rn,((on.prototype=Object.create(H.prototype)).constructor=on).prototype.toJSON=function(){var t=H.prototype.toJSON.call(this);return sn(this.parameters.shapes,t)},((an.prototype=Object.create(N.prototype)).constructor=an).prototype.toJSON=function(){var t=N.prototype.toJSON.call(this);return sn(this.parameters.shapes,t)},(ln.prototype=Object.create(N.prototype)).constructor=ln,(cn.prototype=Object.create(H.prototype)).constructor=cn,(hn.prototype=Object.create(N.prototype)).constructor=hn,(un.prototype=Object.create(cn.prototype)).constructor=un,(dn.prototype=Object.create(hn.prototype)).constructor=dn,(pn.prototype=Object.create(H.prototype)).constructor=pn,(fn.prototype=Object.create(N.prototype)).constructor=fn;var Pl=Object.freeze({__proto__:null,WireframeGeometry:hi,ParametricGeometry:ui,ParametricBufferGeometry:di,TetrahedronGeometry:mi,TetrahedronBufferGeometry:gi,OctahedronGeometry:vi,OctahedronBufferGeometry:yi,IcosahedronGeometry:bi,IcosahedronBufferGeometry:xi,DodecahedronGeometry:wi,DodecahedronBufferGeometry:_i,PolyhedronGeometry:pi,PolyhedronBufferGeometry:fi,TubeGeometry:Si,TubeBufferGeometry:Mi,TorusKnotGeometry:Ti,TorusKnotBufferGeometry:Ei,TorusGeometry:Ci,TorusBufferGeometry:Ai,TextGeometry:Zi,TextBufferGeometry:Ji,SphereGeometry:Ki,SphereBufferGeometry:Qi,RingGeometry:tn,RingBufferGeometry:en,PlaneGeometry:Z,PlaneBufferGeometry:J,LatheGeometry:nn,LatheBufferGeometry:rn,ShapeGeometry:on,ShapeBufferGeometry:an,ExtrudeGeometry:qi,ExtrudeBufferGeometry:Xi,EdgesGeometry:ln,ConeGeometry:un,ConeBufferGeometry:dn,CylinderGeometry:cn,CylinderBufferGeometry:hn,CircleGeometry:pn,CircleBufferGeometry:fn,BoxGeometry:U,BoxBufferGeometry:j});((mn.prototype=Object.create(w.prototype)).constructor=mn).prototype.isShadowMaterial=!0,mn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this},((gn.prototype=Object.create(W.prototype)).constructor=gn).prototype.isRawShaderMaterial=!0,((vn.prototype=Object.create(w.prototype)).constructor=vn).prototype.isMeshStandardMaterial=!0,vn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((yn.prototype=Object.create(vn.prototype)).constructor=yn).prototype.isMeshPhysicalMaterial=!0,yn.prototype.copy=function(t){return vn.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new y).copy(t.sheen):null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},((bn.prototype=Object.create(w.prototype)).constructor=bn).prototype.isMeshPhongMaterial=!0,bn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((xn.prototype=Object.create(w.prototype)).constructor=xn).prototype.isMeshToonMaterial=!0,xn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((wn.prototype=Object.create(w.prototype)).constructor=wn).prototype.isMeshNormalMaterial=!0,wn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((_n.prototype=Object.create(w.prototype)).constructor=_n).prototype.isMeshLambertMaterial=!0,_n.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Sn.prototype=Object.create(w.prototype)).constructor=Sn).prototype.isMeshMatcapMaterial=!0,Sn.prototype.copy=function(t){return w.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Mn.prototype=Object.create(Qe.prototype)).constructor=Mn).prototype.isLineDashedMaterial=!0,Mn.prototype.copy=function(t){return Qe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ll=Object.freeze({__proto__:null,ShadowMaterial:mn,SpriteMaterial:We,RawShaderMaterial:gn,ShaderMaterial:W,PointsMaterial:ni,MeshPhysicalMaterial:yn,MeshStandardMaterial:vn,MeshPhongMaterial:bn,MeshToonMaterial:xn,MeshNormalMaterial:wn,MeshLambertMaterial:_n,MeshDepthMaterial:Ae,MeshDistanceMaterial:Pe,MeshBasicMaterial:_,MeshMatcapMaterial:Sn,LineDashedMaterial:Mn,LineBasicMaterial:Qe,Material:w}),Rl={arraySlice:function(t,e,i){return Rl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(i){for(var t=i.length,e=Array(t),n=0;n!==t;++n)e[n]=n;return e.sort(function(t,e){return i[t]-i[e]}),e},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*e,l=0;l!==e;++l)r[a++]=t[s+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))for(;void 0!==(a=o[n])&&(e.push(o.time),i.push.apply(i,a)),void 0!==(o=t[r++]););else if(void 0!==a.toArray)for(;void 0!==(a=o[n])&&(e.push(o.time),a.toArray(i,i.length)),void 0!==(o=t[r++]););else for(;void 0!==(a=o[n])&&(e.push(o.time),i.push(a)),void 0!==(o=t[r++]););}},subclip:function(t,e,i,n,r){r=r||30,(t=t.clone()).name=e,e=[];for(var o=0;o<t.tracks.length;++o){for(var a=t.tracks[o],s=a.getValueSize(),l=[],c=[],h=0;h<a.times.length;++h){var u=a.times[h]*r;if(!(u<i||n<=u))for(l.push(a.times[h]),u=0;u<s;++u)c.push(a.values[h*s+u])}0!==l.length&&(a.times=Rl.convertArray(l,a.times.constructor),a.values=Rl.convertArray(c,a.values.constructor),e.push(a))}for(t.tracks=e,i=1/0,n=0;n<t.tracks.length;++n)i>t.tracks[n].times[0]&&(i=t.tracks[n].times[0]);for(n=0;n<t.tracks.length;++n)t.tracks[n].shift(-1*i);return t.resetDuration(),t},makeClipAdditive:function(c,t,h,e){void 0===h&&(h=c);var i=c.tracks.length,u=(t=void 0===t?0:t)/(e=void 0===e||e<=0?30:e);for(t=function(t){var e=h.tracks[t],i=e.ValueTypeName;if("bool"!==i&&"string"!==i&&void 0!==(t=c.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===i}))){var n=e.getValueSize(),r=e.times.length-1,o=void 0,o=u<=e.times[0]?Rl.arraySlice(e.values,0,e.valueSize):u>=e.times[r]?Rl.arraySlice(e.values,r*n):((o=e.createInterpolant()).evaluate(u),o.resultBuffer);"quaternion"===i&&new p(o[0],o[1],o[2],o[3]).normalize().conjugate().toArray(o);for(var r=t.times.length,a=0;a<r;++a){var s=a*n;if("quaternion"===i)p.multiplyQuaternionsFlat(t.values,s,o,0,t.values,s);else for(var l=0;l<n;++l)t.values[s+l]-=o[l]}}},e=0;e<i;++e)t(e);return c.blendMode=2501,c}};Object.assign(Tn.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{i:{n:if(!(t<n)){for(var o=i+2;;){if(void 0===n){if(t<r)break n;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,r)}if(i===o)break;if(r=n,t<(n=e[++i]))break e}n=e.length;break i}if(r<=t)break t;for(t<(o=e[1])&&(i=2,r=o),o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===o)break;if(n=r,(r=e[--i-1])<=t)break e}n=i,i=0}for(;i<n;)t<e[r=i+n>>>1]?n=r:i=r+1;if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var r=0;r!==n;++r)e[r]=i[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Tn.prototype,{beforeStart_:Tn.prototype.copySampleValue_,afterEnd_:Tn.prototype.copySampleValue_}),En.prototype=Object.assign(Object.create(Tn.prototype),{constructor:En,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,o=t+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-i;break;case 2402:a=e+n[r=n.length-2]-n[r+1];break;default:r=t,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*i-e;break;case 2402:s=i+n[o=1]-n[0];break;default:o=t-1,s=e}n=this.valueSize,this._weightPrev=(t=.5*(i-e))/(e-a),this._weightNext=t/(s-i),this._offsetPrev=r*n,this._offsetNext=o*n},interpolate_:function(t,e,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(t*=a)-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-e)/(n-e);for(e=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==a;++i)r[i]=e*o[l+i]+h*o[s+i]+d*o[t+i]+u*o[c+i];return r}}),Cn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Cn,interpolate_:function(t,e,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(t*=a)-a;for(i=1-(e=(i-e)/(n-e)),n=0;n!==a;++n)r[n]=o[s+n]*i+o[t+n]*e;return r}}),An.prototype=Object.assign(Object.create(Tn.prototype),{constructor:An,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Pn,{toJSON:function(t){var e,i=t.constructor;return void 0!==i.toJSON?i=i.toJSON(t):(i={name:t.name,times:Rl.convertArray(t.times,Array),values:Rl.convertArray(t.values,Array)},(e=t.getInterpolation())!==t.DefaultInterpolation&&(i.interpolation=e)),i.type=t.ValueTypeName,i}}),Object.assign(Pn.prototype,{constructor:Pn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new An(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Cn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new En(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;return++o,0===r&&o===n||(o<=r&&(r=(o=Math.max(o,1))-1),t=this.getValueSize(),this.times=Rl.arraySlice(i,r,o),this.values=Rl.arraySlice(this.values,r*t,o*t)),this},validate:function(){var t=!0;0!=(i=this.getValueSize())-Math.floor(i)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var e=this.times,i=this.values,n=e.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,o=0;o!==n;o++){var a=e[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(null!==r&&a<r){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,r),t=!1;break}r=a}if(void 0!==i&&Rl.isTypedArray(i))for(e=0,n=i.length;e!==n;++e)if(r=i[e],isNaN(r)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,r),t=!1;break}return t},optimize:function(){for(var t=Rl.arraySlice(this.times),e=Rl.arraySlice(this.values),i=this.getValueSize(),n=2302===this.getInterpolation(),r=t.length-1,o=1,a=1;a<r;++a){var s=!1,l=t[a];if(l!==t[a+1]&&(1!==a||l!==l[0]))if(n)s=!0;else for(var c=(l=a*i)-i,h=l+i,u=0;u!==i;++u){var d=e[l+u];if(d!==e[c+u]||d!==e[h+u]){s=!0;break}}if(s){if(a!==o)for(t[o]=t[a],s=a*i,l=o*i,c=0;c!==i;++c)e[l+c]=e[s+c];++o}}if(0<r){for(t[o]=t[r],n=r*i,r=o*i,a=0;a!==i;++a)e[r+a]=e[n+a];++o}return o!==t.length?(this.times=Rl.arraySlice(t,0,o),this.values=Rl.arraySlice(e,0,o*i)):(this.times=t,this.values=e),this},clone:function(){var t=Rl.arraySlice(this.times,0),e=Rl.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),Ln.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Ln,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Rn.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Rn,ValueTypeName:"color"}),On.prototype=Object.assign(Object.create(Pn.prototype),{constructor:On,ValueTypeName:"number"}),Dn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Dn,interpolate_:function(t,e,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;for(e=(i-e)/(n-e),i=(t*=a)+a;t!==i;t+=4)p.slerpFlat(r,0,o,t-a,o,t,e);return r}}),In.prototype=Object.assign(Object.create(Pn.prototype),{constructor:In,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Dn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),kn.prototype=Object.assign(Object.create(Pn.prototype),{constructor:kn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nn.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Nn,ValueTypeName:"vector"}),Object.assign(Fn,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,o=i.length;r!==o;++r)e.push(Bn(i[r]).scale(n));return new Fn(t.name,t.duration,e,t.blendMode)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(var n=0,r=i.length;n!==r;++n)e.push(Pn.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,o=[],a=0;a<r;a++){var s=[];(c=[]).push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);var l=Rl.getKeyframeOrder(c),c=Rl.sortedArray(c,1,l),s=Rl.sortedArray(s,1,l);n||0!==c[0]||(c.push(r),s.push(s[0])),o.push(new On(".morphTargetInfluences["+e[a].name+"]",c,s).scale(1/i))}return new Fn(t,-1,o)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n,r={},o=/^([\w-]*?)([\d]+)$/,a=0,s=t.length;a<s;a++){var l,c=t[a],h=c.name.match(o);h&&1<h.length&&((l=r[h=h[1]])||(r[h]=l=[]),l.push(c))}for(n in t=[],r)t.push(Fn.CreateFromMorphTargetSequence(n,r[n],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;function i(t,e,i,n,r){var o;0!==i.length&&(Rl.flattenJSON(i,o=[],i=[],n),0!==o.length&&r.push(new t(e,o,i)))}var n=[],r=t.name||"default",o=t.fps||30,a=t.blendMode,s=t.length||-1;t=t.hierarchy||[];for(var l=0;l<t.length;l++){var c=t[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h,s={},u=void 0,u=0;u<c.length;u++)if(c[u].morphTargets)for(var d=0;d<c[u].morphTargets.length;d++)s[c[u].morphTargets[d]]=-1;for(h in s){for(var d=[],p=[],f=0;f!==c[u].morphTargets.length;++f){var m=c[u];d.push(m.time),p.push(m.morphTarget===h?1:0)}n.push(new On(".morphTargetInfluence["+h+"]",d,p))}s=s.length*(o||1)}else i(Nn,(u=".bones["+e[l].name+"]")+".position",c,"pos",n),i(In,u+".quaternion",c,"rot",n),i(Nn,u+".scale",c,"scl",n)}return 0===n.length?null:new Fn(r,s,n,a)}}),Object.assign(Fn.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e)var n=this.tracks[e],t=Math.max(t,n.times[n.times.length-1]);return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Fn(this.name,this.duration,t,this.blendMode)}});var Ol={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Dl=new zn;Object.assign(Hn.prototype,{load:function(){},loadAsync:function(i,n){var r=this;return new Promise(function(t,e){r.load(i,t,n,e)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Il={};Un.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Un,load:function(o,t,e,i){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var a=this,n=Ol.get(o);if(void 0!==n)return a.manager.itemStart(o),setTimeout(function(){t&&t(n),a.manager.itemEnd(o)},0),n;if(void 0===Il[o]){if(s=o.match(/^data:(.*?)(;base64)?,(.*)$/)){e=s[1];var r=!!s[2],s=s[3];s=decodeURIComponent(s),r&&(s=atob(s));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":for(var c=new Uint8Array(s.length),r=0;r<s.length;r++)c[r]=s.charCodeAt(r);var h="blob"===l?new Blob([c.buffer],{type:e}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(s,e);break;case"json":h=JSON.parse(s);break;default:h=s}setTimeout(function(){t&&t(h),a.manager.itemEnd(o)},0)}catch(t){setTimeout(function(){i&&i(t),a.manager.itemError(o),a.manager.itemEnd(o)},0)}}else{Il[o]=[],Il[o].push({onLoad:t,onProgress:e,onError:i});var u=new XMLHttpRequest;for(r in u.open("GET",o,!0),u.addEventListener("load",function(t){var e=this.response,i=Il[o];if(delete Il[o],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ol.add(o,e),t=0;for(var n=i.length;t<n;t++){var r=i[t];r.onLoad&&r.onLoad(e)}}else{for(e=0,n=i.length;e<n;e++)(r=i[e]).onError&&r.onError(t);a.manager.itemError(o)}a.manager.itemEnd(o)},!1),u.addEventListener("progress",function(t){for(var e=Il[o],i=0,n=e.length;i<n;i++){var r=e[i];r.onProgress&&r.onProgress(t)}},!1),u.addEventListener("error",function(t){var e=Il[o];delete Il[o];for(var i=0,n=e.length;i<n;i++){var r=e[i];r.onError&&r.onError(t)}a.manager.itemError(o),a.manager.itemEnd(o)},!1),u.addEventListener("abort",function(t){var e=Il[o];delete Il[o];for(var i=0,n=e.length;i<n;i++){var r=e[i];r.onError&&r.onError(t)}a.manager.itemError(o),a.manager.itemEnd(o)},!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(r,this.requestHeader[r]);u.send(null)}return a.manager.itemStart(o),u}Il[o].push({onLoad:t,onProgress:e,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),jn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:jn,load:function(e,i,t,n){var r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,function(t){try{i(r.parse(JSON.parse(t)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}},t,n)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var n=Fn.parse(t[i]);e.push(n)}return e}}),Gn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Gn,load:function(t,r,i,n){var o=this,a=[],s=new si;s.image=a;var l=new Un(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader);var c=0;if(Array.isArray(t))for(var e=0,h=t.length;e<h;++e)!function(e){l.load(t[e],function(t){t=o.parse(t,!0),a[e]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,r&&r(s))},i,n)}(e);else l.load(t,function(t){if((t=o.parse(t,!0)).isCubemap)for(var e=t.mipmaps.length/t.mipmapCount,i=0;i<e;i++){a[i]={mipmaps:[]};for(var n=0;n<t.mipmapCount;n++)a[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+n]),a[i].format=t.format,a[i].width=t.width,a[i].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,r&&r(s)},i,n);return s}}),Vn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Vn,load:function(t,e,i,n){var r=this,o=new Tt,a=new Un(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.load(t,function(t){(t=r.parse(t))&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:1001,o.wrapT=void 0!==t.wrapT?t.wrapT:1001,o.magFilter=void 0!==t.magFilter?t.magFilter:1006,o.minFilter=void 0!==t.minFilter?t.minFilter:1006,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps,o.minFilter=1008),1===t.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,e&&e(o,t))},i,n),o}}),Wn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Wn,load:function(e,t,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",o,!1),Ol.add(e,this),t&&t(this),a.manager.itemEnd(e)}function o(t){l.removeEventListener("load",r,!1),l.removeEventListener("error",o,!1),n&&n(t),a.manager.itemError(e),a.manager.itemEnd(e)}void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=Ol.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",o,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}),$n.prototype=Object.assign(Object.create(Hn.prototype),{constructor:$n,load:function(t,i,e,n){var r=new tt,o=new Wn(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;for(e=0;e<t.length;++e)!function(e){o.load(t[e],function(t){r.images[e]=t,6===++a&&(r.needsUpdate=!0,i&&i(r))},void 0,n)}(e);return r}}),qn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:qn,load:function(e,i,t,n){var r=new d,o=new Wn(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(t){r.image=t,t=0<e.search(/\.jpe?g($|\?)/i)||0===e.search(/^data:image\/jpeg/),r.format=t?1022:1023,r.needsUpdate=!0,void 0!==i&&i(r)},t,n),r}}),Object.assign(Xn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],i=this.getPoint(0),n=0;e.push(0);for(var r=1;r<=t;r++){var o=this.getPoint(r/t);n+=o.distanceTo(i),e.push(n),i=o}return this.cacheArcLengths=e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var r,o=0,a=n-1;o<=a;)if((r=i[t=Math.floor(o+(a-o)/2)]-e)<0)o=t+1;else{if(!(0<r)){a=t;break}a=t-1}return i[t=a]===e?t/(n-1):(t+(e-(o=i[t]))/(i[t+1]-o))/(n-1)},getTangent:function(t,e){var i=t-1e-4;return 1<(t+=1e-4)&&(t=1),i=this.getPoint(i=i<0?0:i),t=this.getPoint(t),(e=e||new(i.isVector2?wt:St)).copy(t).sub(i).normalize(),e},getTangentAt:function(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)},computeFrenetFrames:function(t,e){for(var i=new St,n=[],r=[],o=[],a=new St,s=new Mt,l=0;l<=t;l++)n[l]=this.getTangentAt(l/t,new St),n[l].normalize();r[0]=new St,o[0]=new St;var l=Number.MAX_VALUE,c=Math.abs(n[0].x),h=Math.abs(n[0].y),u=Math.abs(n[0].z);for(c<=l&&(l=c,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),u<=l&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],a),o[0].crossVectors(n[0],r[0]),i=1;i<=t;i++)r[i]=r[i-1].clone(),o[i]=o[i-1].clone(),a.crossVectors(n[i-1],n[i]),a.length()>Number.EPSILON&&(a.normalize(),l=Math.acos(Do.clamp(n[i-1].dot(n[i]),-1,1)),r[i].applyMatrix4(s.makeRotationAxis(a,l))),o[i].crossVectors(n[i],r[i]);if(!0===e)for(e=Math.acos(Do.clamp(r[0].dot(r[t]),-1,1)),e/=t,0<n[0].dot(a.crossVectors(r[0],r[t]))&&(e=-e),a=1;a<=t;a++)r[a].applyMatrix4(s.makeRotationAxis(n[a],e*a)),o[a].crossVectors(n[a],r[a]);return{tangents:n,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),((Yn.prototype=Object.create(Xn.prototype)).constructor=Yn).prototype.isEllipseCurve=!0,Yn.prototype.getPoint=function(t,e){e=e||new wt;for(var i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=r?0:i),!0!==this.aClockwise||r||(n=n===i?-i:n-i),i=this.aStartAngle+t*n,t=this.aX+this.xRadius*Math.cos(i);var o=this.aY+this.yRadius*Math.sin(i);return 0!==this.aRotation&&(i=Math.cos(this.aRotation),n=Math.sin(this.aRotation),t=(r=t-this.aX)*i-(o-=this.aY)*n+this.aX,o=r*n+o*i+this.aY),e.set(t,o)},Yn.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Yn.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Yn.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},((Zn.prototype=Object.create(Yn.prototype)).constructor=Zn).prototype.isArcCurve=!0;var kl=new St,Nl=new Jn,Fl=new Jn,Bl=new Jn;((Kn.prototype=Object.create(Xn.prototype)).constructor=Kn).prototype.isCatmullRomCurve3=!0,Kn.prototype.getPoint=function(t,e){e=e||new St;var i=(l=this.points).length;t*=i-(this.closed?0:1);var n=Math.floor(t);t-=n,this.closed?n+=0<n?0:(Math.floor(Math.abs(n)/i)+1)*i:0===t&&n===i-1&&(n=i-2,t=1);var r,o=this.closed||0<n?l[(n-1)%i]:(kl.subVectors(l[0],l[1]).add(l[0]),kl),a=l[n%i],s=l[(n+1)%i],l=this.closed||n+2<i?l[(n+2)%i]:(kl.subVectors(l[i-1],l[i-2]).add(l[i-1]),kl);return"centripetal"===this.curveType||"chordal"===this.curveType?(r="chordal"===this.curveType?.5:.25,i=Math.pow(o.distanceToSquared(a),r),n=Math.pow(a.distanceToSquared(s),r),r=Math.pow(s.distanceToSquared(l),r),n<1e-4&&(n=1),Nl.initNonuniformCatmullRom(o.x,a.x,s.x,l.x,i=i<1e-4?n:i,n,r=r<1e-4?n:r),Fl.initNonuniformCatmullRom(o.y,a.y,s.y,l.y,i,n,r),Bl.initNonuniformCatmullRom(o.z,a.z,s.z,l.z,i,n,r)):"catmullrom"===this.curveType&&(Nl.initCatmullRom(o.x,a.x,s.x,l.x,this.tension),Fl.initCatmullRom(o.y,a.y,s.y,l.y,this.tension),Bl.initCatmullRom(o.z,a.z,s.z,l.z,this.tension)),e.set(Nl.calc(t),Fl.calc(t),Bl.calc(t)),e},Kn.prototype.copy=function(t){Xn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Kn.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Kn.prototype.fromJSON=function(t){Xn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new St).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},((ir.prototype=Object.create(Xn.prototype)).constructor=ir).prototype.isCubicBezierCurve=!0,ir.prototype.getPoint=function(t,e){e=e||new wt;var i=this.v0,n=this.v1,r=this.v2,o=this.v3;return e.set(er(t,i.x,n.x,r.x,o.x),er(t,i.y,n.y,r.y,o.y)),e},ir.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ir.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ir.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((nr.prototype=Object.create(Xn.prototype)).constructor=nr).prototype.isCubicBezierCurve3=!0,nr.prototype.getPoint=function(t,e){e=e||new St;var i=this.v0,n=this.v1,r=this.v2,o=this.v3;return e.set(er(t,i.x,n.x,r.x,o.x),er(t,i.y,n.y,r.y,o.y),er(t,i.z,n.z,r.z,o.z)),e},nr.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},nr.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},nr.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((rr.prototype=Object.create(Xn.prototype)).constructor=rr).prototype.isLineCurve=!0,rr.prototype.getPoint=function(t,e){return e=e||new wt,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},rr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},rr.prototype.getTangent=function(t,e){return(t=e||new wt).copy(this.v2).sub(this.v1).normalize(),t},rr.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},rr.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},rr.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((or.prototype=Object.create(Xn.prototype)).constructor=or).prototype.isLineCurve3=!0,or.prototype.getPoint=function(t,e){return e=e||new St,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},or.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},or.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},or.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},or.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((ar.prototype=Object.create(Xn.prototype)).constructor=ar).prototype.isQuadraticBezierCurve=!0,ar.prototype.getPoint=function(t,e){e=e||new wt;var i=this.v0,n=this.v1,r=this.v2;return e.set(tr(t,i.x,n.x,r.x),tr(t,i.y,n.y,r.y)),e},ar.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ar.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ar.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((sr.prototype=Object.create(Xn.prototype)).constructor=sr).prototype.isQuadraticBezierCurve3=!0,sr.prototype.getPoint=function(t,e){e=e||new St;var i=this.v0,n=this.v1,r=this.v2;return e.set(tr(t,i.x,n.x,r.x),tr(t,i.y,n.y,r.y),tr(t,i.z,n.z,r.z)),e},sr.prototype.copy=function(t){return Xn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},sr.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},sr.prototype.fromJSON=function(t){return Xn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((lr.prototype=Object.create(Xn.prototype)).constructor=lr).prototype.isSplineCurve=!0,lr.prototype.getPoint=function(t,e){e=e||new wt;var i=((a=this.points).length-1)*t,n=a[0===(t=Math.floor(i))?t:t-1],r=a[t],o=a[t>a.length-2?a.length-1:t+1],a=a[t>a.length-3?a.length-1:t+2];return e.set(Qn(i-=t,n.x,r.x,o.x,a.x),Qn(i,n.y,r.y,o.y,a.y)),e},lr.prototype.copy=function(t){Xn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},lr.prototype.toJSON=function(){var t=Xn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},lr.prototype.fromJSON=function(t){Xn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new wt).fromArray(n))}return this};var zl=Object.freeze({__proto__:null,ArcCurve:Zn,CatmullRomCurve3:Kn,CubicBezierCurve:ir,CubicBezierCurve3:nr,EllipseCurve:Yn,LineCurve:rr,LineCurve3:or,QuadraticBezierCurve:ar,QuadraticBezierCurve3:sr,SplineCurve:lr});cr.prototype=Object.assign(Object.create(Xn.prototype),{constructor:cr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new rr(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=(o=r[n]).getPoints(o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t),a=0;a<o.length;a++){var s=o[a];e&&e.equals(s)||(i.push(s),e=s)}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Xn.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Xn.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Xn.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new zl[n.type]).fromJSON(n))}return this}}),hr.prototype=Object.assign(Object.create(cr.prototype),{constructor:hr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var i=new rr(this.currentPoint.clone(),new wt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,n){return t=new ar(this.currentPoint.clone(),new wt(t,e),new wt(i,n)),this.curves.push(t),this.currentPoint.set(i,n),this},bezierCurveTo:function(t,e,i,n,r,o){return t=new ir(this.currentPoint.clone(),new wt(t,e),new wt(i,n),new wt(r,o)),this.curves.push(t),this.currentPoint.set(r,o),this},splineThru:function(t){var e=new lr(e=[this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,i,n,r,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,o),this},absarc:function(t,e,i,n,r,o){return this.absellipse(t,e,i,i,n,r,o),this},ellipse:function(t,e,i,n,r,o,a,s){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,o,a,s),this},absellipse:function(t,e,i,n,r,o,a,s){return t=new Yn(t,e,i,n,r,o,a,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t),this},copy:function(t){return cr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=cr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return cr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),ur.prototype=Object.assign(Object.create(hr.prototype),{constructor:ur,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){hr.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=hr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){hr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new hr).fromJSON(n))}return this}}),dr.prototype=Object.assign(Object.create(f.prototype),{constructor:dr,isLight:!0,copy:function(t){return f.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=f.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),pr.prototype=Object.assign(Object.create(dr.prototype),{constructor:pr,isHemisphereLight:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(fr.prototype,{_projScreenMatrix:new Mt,_lightPositionWorld:new St,_lookTarget:new St,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,i=this.matrix,n=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),n.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),mr.prototype=Object.assign(Object.create(fr.prototype),{constructor:mr,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,i=2*Do.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix()),fr.prototype.updateMatrices.call(this,t)}}),gr.prototype=Object.assign(Object.create(dr.prototype),{constructor:gr,isSpotLight:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),vr.prototype=Object.assign(Object.create(fr.prototype),{constructor:vr,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var i=this.camera,n=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),i.position.copy(r),o.copy(i.position),o.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(o),i.updateMatrixWorld(),n.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),yr.prototype=Object.assign(Object.create(dr.prototype),{constructor:yr,isPointLight:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),br.prototype=Object.assign(Object.create($.prototype),{constructor:br,isOrthographicCamera:!0,copy:function(t,e){return $.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t;i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled&&(n=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,i=(r+=n*this.view.offsetX)+n*this.view.width,e=(t-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(r,i,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=f.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),xr.prototype=Object.assign(Object.create(fr.prototype),{constructor:xr,isDirectionalLightShadow:!0,updateMatrices:function(t){fr.prototype.updateMatrices.call(this,t)}}),wr.prototype=Object.assign(Object.create(dr.prototype),{constructor:wr,isDirectionalLight:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),_r.prototype=Object.assign(Object.create(dr.prototype),{constructor:_r,isAmbientLight:!0}),Sr.prototype=Object.assign(Object.create(dr.prototype),{constructor:Sr,isRectAreaLight:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=dr.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),Object.assign(Mr.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScaledVector(r[1],.488603*n),e.addScaledVector(r[2],.488603*t),e.addScaledVector(r[3],.488603*i),e.addScaledVector(r[4],1.092548*i*n),e.addScaledVector(r[5],1.092548*n*t),e.addScaledVector(r[6],.315392*(3*t*t-1)),e.addScaledVector(r[7],1.092548*i*t),e.addScaledVector(r[8],.546274*(i*i-n*n)),e},getIrradianceAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScaledVector(r[1],1.023328*n),e.addScaledVector(r[2],1.023328*t),e.addScaledVector(r[3],1.023328*i),e.addScaledVector(r[4],.858086*i*n),e.addScaledVector(r[5],.858086*n*t),e.addScaledVector(r[6],.743125*t*t-.247708),e.addScaledVector(r[7],.858086*i*t),e.addScaledVector(r[8],.429043*(i*i-n*n)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var i=this.coefficients,n=0;n<9;n++)i[n].fromArray(t,e+3*n);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var i=this.coefficients,n=0;n<9;n++)i[n].toArray(t,e+3*n);return t}}),Object.assign(Mr,{getBasisAt:function(t,e){var i=t.x,n=t.y;t=t.z,e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}),Tr.prototype=Object.assign(Object.create(dr.prototype),{constructor:Tr,isLightProbe:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){return(t=dr.prototype.toJSON.call(this,t)).object.sh=this.sh.toArray(),t}}),Er.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Er,load:function(e,i,t,n){var r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,function(t){try{i(r.parse(JSON.parse(t)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}},t,n)},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,n=new Ll[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.sheen&&(n.sheen=(new y).setHex(t.sheen)),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearcoat&&(n.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(n.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(n.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(n.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(n.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(n.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(n.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(n.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(n.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(n.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(n.morphNormals=t.morphNormals),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.vertexTangents&&(n.vertexTangents=t.vertexTangents),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.toneMapped&&(n.toneMapped=t.toneMapped),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.vertexColors&&(n.vertexColors="number"==typeof t.vertexColors?0<t.vertexColors:t.vertexColors),void 0!==t.uniforms)for(var r in t.uniforms){var o=t.uniforms[r];switch(n.uniforms[r]={},o.type){case"t":n.uniforms[r].value=e(o.value);break;case"c":n.uniforms[r].value=(new y).setHex(o.value);break;case"v2":n.uniforms[r].value=(new wt).fromArray(o.value);break;case"v3":n.uniforms[r].value=(new St).fromArray(o.value);break;case"v4":n.uniforms[r].value=(new _t).fromArray(o.value);break;case"m3":n.uniforms[r].value=(new g).fromArray(o.value);case"m4":n.uniforms[r].value=(new Mt).fromArray(o.value);break;default:n.uniforms[r].value=o.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)n.extensions[a]=t.extensions[a];return void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=e(t.map)),void 0!==t.matcap&&(n.matcap=e(t.matcap)),void 0!==t.alphaMap&&(n.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(n.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale&&(r=t.normalScale,!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new wt).fromArray(r)),void 0!==t.displacementMap&&(n.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=e(t.specularMap)),void 0!==t.envMap&&(n.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(n.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(n.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(n.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(n.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(n.clearcoatNormalScale=(new wt).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(n.transmission=t.transmission),void 0!==t.transmissionMap&&(n.transmissionMap=e(t.transmissionMap)),n},setTextures:function(t){return this.textures=t,this}});var Hl={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};Cr.prototype=Object.assign(Object.create(N.prototype),{constructor:Cr,isInstancedBufferGeometry:!0,copy:function(t){return N.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=N.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Ar.prototype=Object.assign(Object.create(C.prototype),{constructor:Ar,isInstancedBufferAttribute:!0,copy:function(t){return C.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=C.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Pr.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Pr,load:function(e,i,t,n){var r=this,o=new Un(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,function(t){try{i(r.parse(JSON.parse(t)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}},t,n)},parse:function(t){function e(t,e){if(void 0!==r[e])return r[e];var i=t.interleavedBuffers[e],n=i.buffer,n=void 0!==o[n]?o[n]:(t=new Uint32Array(t.arrayBuffers[n]).buffer,o[n]=t);return(n=new Ge(n=new Ul[i.type](n),i.stride)).uuid=i.uuid,r[e]=n}var i,r={},o={},n=new(t.isInstancedBufferGeometry?Cr:N),a=t.data.index;for(i in void 0!==a&&(a=new Ul[a.type](a.array),n.setIndex(new C(a,1))),a=t.data.attributes){var s=a[i],l=void 0,l=s.isInterleavedBufferAttribute?new Ve(l=e(t.data,s.data),s.itemSize,s.offset,s.normalized):(l=new Ul[s.type](s.array),new(s.isInstancedBufferAttribute?Ar:C)(l,s.itemSize,s.normalized));void 0!==s.name&&(l.name=s.name),n.setAttribute(i,l)}if(i=t.data.morphAttributes)for(var c in i){s=[],l=0;for(var h=(a=i[c]).length;l<h;l++){var u=a[l],d=void 0,d=u.isInterleavedBufferAttribute?new Ve(d=e(t.data,u.data),u.itemSize,u.offset,u.normalized):new C(d=new Ul[u.type](u.array),u.itemSize,u.normalized);void 0!==u.name&&(d.name=u.name),s.push(d)}n.morphAttributes[c]=s}if(t.data.morphTargetsRelative&&(n.morphTargetsRelative=!0),void 0!==(c=t.data.groups||t.data.drawcalls||t.data.offsets))for(i=0,a=c.length;i!==a;++i)s=c[i],n.addGroup(s.start,s.count,s.materialIndex);return void 0!==(c=t.data.boundingSphere)&&(i=new St,void 0!==c.center&&i.fromArray(c.center),n.boundingSphere=new m(i,c.radius)),t.name&&(n.name=t.name),t.userData&&(n.userData=t.userData),n}});var Ul={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Lr.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Lr,load:function(i,n,t,r){var o=this,e=""===this.path?Hl.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||e,(e=new Un(o.manager)).setPath(this.path),e.setRequestHeader(this.requestHeader),e.load(i,function(t){var e=null;try{e=JSON.parse(t)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+i+".",t.message)}void 0===(t=e.metadata)||void 0===t.type||"geometry"===t.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+i):o.parse(e,n)},t,r)},parse:function(t,e){var i=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,i),n=this.parseImages(t.images,function(){void 0!==e&&e(r)}),n=this.parseTextures(t.textures,n);n=this.parseMaterials(t.materials,n);var r=this.parseObject(t.object,i,n);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new ur).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new Pr,r=0,o=t.length;r<o;r++){var a=void 0,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Pl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Pl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Pl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Pl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Pl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Pl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Pl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Pl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Pl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Pl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Pl[s.type]((new zl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Pl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Pl[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var a=[],l=0,c=s.shapes.length;l<c;l++)a.push(e[s.shapes[l]]);a=new Pl[s.type](a,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(a=[],l=0,c=s.shapes.length;l<c;l++)a.push(e[s.shapes[l]]);void 0!==(l=s.options.extrudePath)&&(s.options.extrudePath=(new zl[l.type]).fromJSON(l)),a=new Pl[s.type](a,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),i[s.uuid]=a}return i},parseMaterials:function(t,e){var i={},n={};if(void 0!==t){var r=new Er;r.setTextures(e),e=0;for(var o=t.length;e<o;e++){var a=t[e];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++){var c=a.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),s.push(i[c.uuid])}n[a.uuid]=s}else void 0===i[a.uuid]&&(i[a.uuid]=r.parse(a)),n[a.uuid]=i[a.uuid]}}return n},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=Fn.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}var n=this,r={};if(void 0!==t&&0<t.length){var o=new Wn(e=new zn(e));o.setCrossOrigin(this.crossOrigin),e=0;for(var a=t.length;e<a;e++){var s=t[e],l=s.url;if(Array.isArray(l)){r[s.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;r[s.uuid].push(i(u))}}else l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,r[s.uuid]=i(l)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=t[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=void 0;(s=new(Array.isArray(e[a.image])?tt:d)(e[a.image])).needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=i(a.mapping,jl)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=i(a.wrap[0],Gl),s.wrapT=i(a.wrap[1],Gl)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=i(a.minFilter,Vl)),void 0!==a.magFilter&&(s.magFilter=i(a.magFilter,Vl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),n[a.uuid]=s}return n},parseObject:function(t,e,o){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function n(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];void 0===o[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(o[r])}return e}return void 0===o[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),o[t]}}switch(t.type){case"Scene":var r=new c;void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new y(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new je(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new Ue(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new q(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new br(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new _r(t.color,t.intensity);break;case"DirectionalLight":r=new wr(t.color,t.intensity);break;case"PointLight":r=new yr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new Sr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new gr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new pr(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=(new Tr).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var r=i(t.geometry),a=n(t.material);r=new F(r,a);break;case"InstancedMesh":r=i(t.geometry);var a=n(t.material),s=t.instanceMatrix;(r=new Ke(r,a,t.count)).instanceMatrix=new C(new Float32Array(s.array),16);break;case"LOD":r=new Xe;break;case"Line":r=new ti(i(t.geometry),n(t.material),t.mode);break;case"LineLoop":r=new ii(i(t.geometry),n(t.material));break;case"LineSegments":r=new ei(i(t.geometry),n(t.material));break;case"PointCloud":case"Points":r=new ri(i(t.geometry),n(t.material));break;case"Sprite":r=new $e(n(t.material));break;case"Group":r=new ke;break;default:r=new f}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(r.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(s=t.children,a=0;a<s.length;a++)r.add(this.parseObject(s[a],e,o));if("LOD"===t.type)for(void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate),t=t.levels,s=0;s<t.length;s++){a=t[s];var l=r.getObjectByProperty("uuid",a.object);void 0!==l&&r.addLevel(l,a.distance)}return r}});var jl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Gl={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Vl={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};Rr.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Rr,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,i,t,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Ol.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){i&&i(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(t){Ol.add(e,t),i&&i(t),r.manager.itemEnd(e)}).catch(function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}),Object.assign(Or.prototype,{moveTo:function(t,e){return this.currentPath=new hr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this},bezierCurveTo:function(t,e,i,n,r,o){return this.currentPath.bezierCurveTo(t,e,i,n,r,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new ur;o.curves=r.curves,e.push(o)}return e}var n=Cl.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return i(r);if(e=[],1===r.length){var o=r[0],a=new ur;return a.curves=o.curves,e.push(a),e}var s=!n(r[0].getPoints()),s=t?!s:s,a=[],l=[],c=[],h=0;l[h]=void 0,c[h]=[];for(var u=0,d=r.length;u<d;u++){var p=(o=r[u]).getPoints(),f=n(p);(f=t?!f:f)?(!s&&l[h]&&h++,l[h]={s:new ur,p:p},l[h].s.curves=o.curves,s&&h++,c[h]=[]):c[h].push({h:o,p:p[0]})}if(!l[0])return i(r);if(1<l.length){for(t=!1,n=[],r=0,o=l.length;r<o;r++)a[r]=[];for(r=0,o=l.length;r<o;r++)for(f=c[r],s=0;s<f.length;s++){for(h=f[s],p=!0,u=0;u<l.length;u++)!function(t,e){for(var i=e.length,n=!1,r=i-1,o=0;o<i;r=o++){var a=e[r],s=e[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],l=-l,s=e[r],c=-c),!(t.y<a.y||t.y>s.y))if(t.y===a.y){if(t.x===a.x)return 1}else{if(0===(r=c*(t.x-a.x)-l*(t.y-a.y)))return 1;r<0||(n=!n)}}else if(t.y===a.y&&(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x))return 1}return n}(h.p,l[u].p)||(r!==u&&n.push({froms:r,tos:u,hole:s}),p?(p=!1,a[u].push(h)):t=!0);p&&a[r].push(h)}0<n.length&&(t||(c=a))}for(n=0,r=l.length;n<r;n++)for(a=l[n].s,e.push(a),o=0,f=(t=c[n]).length;o<f;o++)a.holes.push(t[o].h);return e}}),Object.assign(Dr.prototype,{isFont:!0,generateShapes:function(t,e){var i=[],n=e=void 0===e?100:e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");n/=e.resolution;var o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var a=0,s=0,l=0;l<r.length;l++)if("\n"===(h=r[l]))a=0,s-=o;else{var c=h,h=n,u=a,d=s,p=(f=e).glyphs[c]||f.glyphs["?"];if(p){if(c=new Or,p.o)for(var f,m=0,g=(f=p._cachedOutline||(p._cachedOutline=p.o.split(" "))).length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;c.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,c.lineTo(v,y);break;case"q":var b=f[m++]*h+u,x=f[m++]*h+d,w=f[m++]*h+u,_=f[m++]*h+d;c.quadraticCurveTo(w,_,b,x);break;case"b":b=f[m++]*h+u,x=f[m++]*h+d,w=f[m++]*h+u,_=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,c.bezierCurveTo(w,_,v,y,b,x)}h={offsetX:p.ha*h,path:c}}else console.error('THREE.Font: character "'+c+'" does not exists in font family '+f.familyName+"."),h=void 0;a+=h.offsetX,t.push(h.path)}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Ir.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Ir,load:function(t,n,e,i){var r=this,o=new Un(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(e){try{var i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}e=r.parse(i),n&&n(e)},e,i)},parse:function(t){return new Dr(t)}});var Wl,$l={getContext:function(){return Wl=void 0===Wl?new(window.AudioContext||window.webkitAudioContext):Wl},setContext:function(t){Wl=t}};kr.prototype=Object.assign(Object.create(Hn.prototype),{constructor:kr,load:function(i,n,t,r){var o=this,e=new Un(o.manager);e.setResponseType("arraybuffer"),e.setPath(o.path),e.setRequestHeader(o.requestHeader),e.load(i,function(t){try{var e=t.slice(0);$l.getContext().decodeAudioData(e,function(t){n(t)})}catch(t){r?r(t):console.error(t),o.manager.itemError(i)}},t,r)}}),Nr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Nr,isHemisphereLightProbe:!0,copy:function(t){return Tr.prototype.copy.call(this,t),this},toJSON:function(t){return Tr.prototype.toJSON.call(this,t)}}),Fr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Fr,isAmbientLightProbe:!0,copy:function(t){return Tr.prototype.copy.call(this,t),this},toJSON:function(t){return Tr.prototype.toJSON.call(this,t)}});var ql=new Mt,Xl=new Mt;Object.assign(Br.prototype,{update:function(t){var e,i,n,r,o,a=this._cache;a.focus===t.focus&&a.fov===t.fov&&a.aspect===t.aspect*this.aspect&&a.near===t.near&&a.far===t.far&&a.zoom===t.zoom&&a.eyeSep===this.eyeSep||(a.focus=t.focus,a.fov=t.fov,a.aspect=t.aspect*this.aspect,a.near=t.near,a.far=t.far,a.zoom=t.zoom,a.eyeSep=this.eyeSep,e=t.projectionMatrix.clone(),i=(r=a.eyeSep/2)*a.near/a.focus,n=a.near*Math.tan(Do.DEG2RAD*a.fov*.5)/a.zoom,Xl.elements[12]=-r,ql.elements[12]=r,r=-n*a.aspect+i,o=n*a.aspect+i,e.elements[0]=2*a.near/(o-r),e.elements[8]=(o+r)/(o-r),this.cameraL.projectionMatrix.copy(e),r=-n*a.aspect-i,o=n*a.aspect-i,e.elements[0]=2*a.near/(o-r),e.elements[8]=(o+r)/(o-r),this.cameraR.projectionMatrix.copy(e)),this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Xl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(ql)}}),Object.assign(zr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=("undefined"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}});var Yl=new St,Zl=new p,Jl=new St,Kl=new St;Hr.prototype=Object.assign(Object.create(f.prototype),{constructor:Hr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){f.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var e,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yl,Zl,Jl),Kl.set(0,0,-1).applyQuaternion(Zl),t.positionX?(e=this.context.currentTime+this.timeDelta,t.positionX.linearRampToValueAtTime(Yl.x,e),t.positionY.linearRampToValueAtTime(Yl.y,e),t.positionZ.linearRampToValueAtTime(Yl.z,e),t.forwardX.linearRampToValueAtTime(Kl.x,e),t.forwardY.linearRampToValueAtTime(Kl.y,e),t.forwardZ.linearRampToValueAtTime(Kl.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)):(t.setPosition(Yl.x,Yl.y,Yl.z),t.setOrientation(Kl.x,Kl.y,Kl.z,i.x,i.y,i.z))}}),Ur.prototype=Object.assign(Object.create(f.prototype),{constructor:Ur,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+t,(t=this.context.createBufferSource()).buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t=t||[],!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var Ql=new St,tc=new p,ec=new St,ic=new St;jr.prototype=Object.assign(Object.create(Ur.prototype),{constructor:jr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(t){var e;f.prototype.updateMatrixWorld.call(this,t),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(Ql,tc,ec),ic.set(0,0,1).applyQuaternion(tc),(t=this.panner).positionX?(e=this.context.currentTime+this.listener.timeDelta,t.positionX.linearRampToValueAtTime(Ql.x,e),t.positionY.linearRampToValueAtTime(Ql.y,e),t.positionZ.linearRampToValueAtTime(Ql.z,e),t.orientationX.linearRampToValueAtTime(ic.x,e),t.orientationY.linearRampToValueAtTime(ic.y,e),t.orientationZ.linearRampToValueAtTime(ic.z,e)):(t.setPosition(Ql.x,Ql.y,Ql.z),t.setOrientation(ic.x,ic.y,ic.z)))}}),Object.assign(Gr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Vr.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[t+r]=i[r];r=e}else this._mixBufferRegion(i,t,0,e/(r+=e),n);this.cumulativeWeight=r},accumulateAdditive:function(t){var e=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,n,0,t,i),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,r=this.cumulativeWeightAdditive,o=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,n<1&&this._mixBufferRegion(i,t,e*this._origIndex,1-n,e),0<r&&this._mixBufferRegionAdditive(i,t,this._addIndex*e,1,e),r=(n=e)+e;n!==r;++n)if(i[n]!==i[n+e]){o.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=e*this._origIndex;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize;t<e;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]},_select:function(t,e,i,n,r){if(.5<=n)for(n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,n){p.slerpFlat(t,e,t,e,t,i,n)},_slerpAdditive:function(t,e,i,n,r){r*=this._workIndex,p.multiplyQuaternionsFlat(t,r,t,e,t,i),p.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[i+a]*n}},_lerpAdditive:function(t,e,i,n,r){for(var o=0;o!==r;++o)t[e+o]+=t[i+o]*n}});var nc=/[\[\]\.:\/]/g,rc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",oc=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),ac=/(WCOD+)?/.source.replace("WCOD",rc),sc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),rc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),lc=new RegExp("^"+oc+ac+sc+rc+"$"),cc=["material","materials","bones"];Object.assign(Wr.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign($r,{Composite:Wr,create:function(t,e,i){return new(t&&t.isAnimationObjectGroup?$r.Composite:$r)(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(nc,"")},parseTrackName:function(t){var e=lc.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i,n=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n&&(i=e.nodeName.substring(n+1),-1!==cc.indexOf(i)&&(e.nodeName=e.nodeName.substring(0,n),e.objectName=i)),null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e},findNode:function(t,n){if(!n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(n);if(void 0!==e)return e}if(t.children){var r=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.name===n||i.uuid===n||(i=r(i.children)))return i}return null};if(t=r(t.children))return t}return null}}),Object.assign($r.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=$r.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,i=0;i<t.length;i++)if(t[i].name===o){o=i;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}if(void 0===(o=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,void 0!==(this.targetObject=t).needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}i=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(i=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign($r.prototype,{_getValue_unbound:$r.prototype.getValue,_setValue_unbound:$r.prototype.setValue}),Object.assign(qr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,o=r.length,a=void 0,s=t.length,l=this.nCachedObjects_,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid;if(void 0===(p=e[d])){p=s++,e[d]=p,t.push(u);for(var p=0,f=o;p!==f;++p)r[p].push(new $r(u,i[p],n[p]))}else if(p<l){var a=t[p],m=t[f=--l];for(t[e[m.uuid]=p]=m,t[e[d]=f]=u,d=0,m=o;d!==m;++d){var g=r[d],v=g[p];g[p]=g[f],void 0===v&&(v=new $r(u,i[d],n[d])),g[f]=v}}else t[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length,r=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=e[l];if(void 0!==c&&r<=c){var h=r++;for(t[e[(u=t[h]).uuid]=c]=u,t[e[l]=h]=s,s=0,l=n;s!==l;++s){var u,d=(u=i[s])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length,r=this.nCachedObjects_,o=t.length,a=0,s=arguments.length;a!==s;++a){var l=e[c=arguments[a].uuid];if(void 0!==l)if(delete e[c],l<r){var c,h=t[c=--r],u=--o,d=t[u];for(t[e[h.uuid]=l]=h,t[e[d.uuid]=c]=d,t.pop(),h=0,d=n;h!==d;++h){var p=i[h],f=p[u];p[l]=p[c],p[c]=f,p.pop()}}else for(t[e[(u=t[c=--o]).uuid]=l]=u,t.pop(),u=0,h=n;u!==h;++u)(d=i[u])[l]=d[c],d.pop()}this.nCachedObjects_=r},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,l=this.nCachedObjects_,c=Array(s.length),n=r.length;for(i[t]=n,o.push(t),a.push(e),r.push(c),i=l,n=s.length;i!==n;++i)c[i]=new $r(s[i],t,e);return c},unsubscribe_:function(t){var e,i,n,r,o,a=this._bindingsIndicesByPath,s=a[t];void 0!==s&&(e=this._paths,i=this._parsedPaths,o=(n=this._bindings)[r=n.length-1],n[a[t[r]]=s]=o,n.pop(),i[s]=i[r],i.pop(),e[s]=e[r],e.pop())}}),Object.assign(Xr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){var n,r;return t.fadeOut(e),this.fadeIn(e),i&&(r=(i=this._clip.duration)/(n=t._clip.duration),t.warp(1,n/i,e),this.warp(r,1,e)),this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,o=this.timeScale,a=this._timeScaleInterpolant;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=t/o,a[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if((e=(t-r)*i)<0||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t)))if(2501===(e=this._interpolants,r=this._propertyBindings,this.blendMode)){n=0;for(var o=e.length;n!==o;++n)e[n].evaluate(i),r[n].accumulateAdditive(t)}else for(var o=0,a=e.length;o!==a;++o)e[o].evaluate(i),r[o].accumulate(n,t)}else this._updateWeight(t)},_updateWeight:function(t){var e,i,n=0;return this.enabled&&(n=this.weight,null!==(e=this._weightInterpolant)&&(n*=i=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1)))),this._effectiveWeight=n},_updateTimeScale:function(t){var e,i=0;return this.paused||(i=this.timeScale,null!==(e=this._timeScaleInterpolant)&&(i*=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopWarping(),0===i?this.paused=!0:this.timeScale=i))),this._effectiveTimeScale=i},_updateTime:function(t){var e,i=this._clip.duration,n=this.loop,r=this.time+t,o=this._loopCount,a=2202===n;if(0===t)return-1!==o&&a&&1==(1&o)?i-r:r;if(2200===n)t:{if(-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1)),i<=r)r=i;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}else if(-1===o&&(0<=t?this._setEndings(!(o=0),0===this.repetitions,a):this._setEndings(0===this.repetitions,!0,a)),i<=r||r<0?(r-=i*(n=Math.floor(r/i)),o+=Math.abs(n),(e=this.repetitions-o)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1==e?this._setEndings(t=t<0,!t,a):this._setEndings(!1,!1,a),this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))):this.time=r,a&&1==(1&o))return i-r;return r},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=n._lendControlInterpolant()),n=o.parameterPositions,o=o.sampleValues,n[0]=r,o[0]=e,n[1]=r+t,o[1]=i,this}}),Yr.prototype=Object.assign(Object.create(e.prototype),{constructor:Yr,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,o=t._propertyBindings;t=t._interpolants;var a=i.uuid,s=this._bindingsByRootAndName,l=s[a];for(void 0===l&&(s[a]=l={}),s=0;s!==r;++s){var c=n[s],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=o[s])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,h));continue}++(u=new Vr($r.create(i,h,e&&e._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,a,h)}o[s]=u,t[s].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){var e,i,n;for(null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i],this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)),i=0,n=(e=t._propertyBindings).length;i!==n;++i){var r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,o=r[e];void 0===o?(o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o):(e=o.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=(n=this._actions)[n.length-1],i=t._cacheIndex;n[e._cacheIndex=i]=e,n.pop(),t._cacheIndex=null;var n=t._clip.uuid,r=(i=(e=this._actionsByClip)[n]).knownActions,o=r[r.length-1],a=t._byClipCacheIndex;r[o._byClipCacheIndex=a]=o,r.pop(),t._byClipCacheIndex=null,delete i.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete e[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,i=(t=t._propertyBindings).length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];e[t._cacheIndex=n]=t,e[r._cacheIndex=i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];e[t._cacheIndex=n]=t,e[r._cacheIndex=i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=this._bindings,o=n[e];void 0===o&&(n[e]=o={}),(o[i]=t)._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=(n=t.binding).rootNode.uuid,n=n.path,r=this._bindingsByRootAndName,o=r[i],a=e[e.length-1];t=t._cacheIndex,e[a._cacheIndex=t]=a,e.pop(),delete o[n],0===Object.keys(o).length&&delete r[i]},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];e[t._cacheIndex=n]=t,e[r._cacheIndex=i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];e[t._cacheIndex=n]=t,e[r._cacheIndex=i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(t[(i=new Cn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];e[t.__cacheIndex=n]=t,e[r.__cacheIndex=i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,i){var n=e||this._root,r=n.uuid;t=null!==(n="string"==typeof t?Fn.findByName(n,t):t)?n.uuid:t;var o=this._actionsByClip[t],a=null;if(void 0===i&&(i=null!==n?n.blendMode:2500),void 0!==o){if(void 0!==(a=o.actionByRoot[r])&&a.blendMode===i)return a;a=o.knownActions[0],null===n&&(n=a._clip)}return null===n?null:(e=new Xr(this,n,e,i),this._bindAction(e,a),this._addInactiveAction(e,t,r),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?Fn.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==i;++a)e[a]._update(n,t,r,o);for(t=this._bindings,e=this._nActiveBindings,i=0;i!==e;++i)t[i].apply(o);return this},setTime:function(t){for(var e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip;if(void 0!==(n=i[t])){for(var n,r=0,o=(n=n.knownActions).length;r!==o;++r){var a=n[r];this._deactivateAction(a);var s=a._cacheIndex,l=e[e.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,e[l._cacheIndex=s]=l,e.pop(),this._removeInactiveBindingsForAction(a)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var r in n)t=n[r],t.restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Zr.prototype.clone=function(){return new Zr(void 0===this.value.clone?this.value:this.value.clone())},Jr.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Jr,isInstancedInterleavedBuffer:!0,copy:function(t){return Ge.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){return(t=Ge.prototype.clone.call(this,t)).meshPerAttribute=this.meshPerAttribute,t},toJSON:function(t){return(t=Ge.prototype.toJSON.call(this,t)).isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.assign(Kr.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return to(t,this,i=i||[],e),i.sort(Qr),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)to(t[n],this,i,e);return i.sort(Qr),i}});ac=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.radius=t=void 0===t?1:t,this.phi=e,this.theta=i,this};ac.prototype.set=function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},ac.prototype.clone=function(){return(new this.constructor).copy(this)},ac.prototype.copy=function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},ac.prototype.makeSafe=function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},ac.prototype.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},ac.prototype.setFromCartesianCoords=function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t,i),this.phi=Math.acos(Do.clamp(e/this.radius,-1,1))),this},Object.assign(eo.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}});var hc=new wt;Object.assign(io.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=hc.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new wt),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new wt),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new wt),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new wt),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return hc.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var uc=new St,dc=new St;Object.assign(no.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new St),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new St),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new St),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){return uc.subVectors(t,this.start),dc.subVectors(this.end,this.start),t=dc.dot(dc),t=dc.dot(uc)/t,t=e?Do.clamp(t,0,1):t},closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new St),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),((ro.prototype=Object.create(f.prototype)).constructor=ro).prototype.isImmediateRenderObject=!0;var pc=new St;((oo.prototype=Object.create(f.prototype)).constructor=oo).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},oo.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance||1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),pc.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pc),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var fc=new St,mc=new Mt,gc=new Mt;((ao.prototype=Object.create(ei.prototype)).constructor=ao).prototype.isSkeletonHelper=!0,ao.prototype.updateMatrixWorld=function(t){var e=this.bones,i=this.geometry,n=i.getAttribute("position");gc.getInverse(this.root.matrixWorld);for(var r=0,o=0;r<e.length;r++){var a=e[r];a.parent&&a.parent.isBone&&(mc.multiplyMatrices(gc,a.matrixWorld),fc.setFromMatrixPosition(mc),n.setXYZ(o,fc.x,fc.y,fc.z),mc.multiplyMatrices(gc,a.parent.matrixWorld),fc.setFromMatrixPosition(mc),n.setXYZ(o+1,fc.x,fc.y,fc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,f.prototype.updateMatrixWorld.call(this,t)},((so.prototype=Object.create(F.prototype)).constructor=so).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},so.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var vc=new St,yc=new y,bc=new y;((lo.prototype=Object.create(f.prototype)).constructor=lo).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},lo.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");yc.copy(this.light.color),bc.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var r=i<n/2?yc:bc;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(vc.setFromMatrixPosition(this.light.matrixWorld).negate())},(co.prototype=Object.create(ei.prototype)).constructor=co,(ho.prototype=Object.create(ei.prototype)).constructor=ho;var xc=new St,wc=new St,_c=new St;((uo.prototype=Object.create(f.prototype)).constructor=uo).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},uo.prototype.update=function(){xc.setFromMatrixPosition(this.light.matrixWorld),wc.setFromMatrixPosition(this.light.target.matrixWorld),_c.subVectors(wc,xc),this.lightPlane.lookAt(wc),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wc),this.targetLine.scale.z=_c.length()};var Sc=new St,Mc=new $;((po.prototype=Object.create(ei.prototype)).constructor=po).prototype.update=function(){var t=this.geometry,e=this.pointMap;Mc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fo("c",e,t,Mc,0,0,-1),fo("t",e,t,Mc,0,0,1),fo("n1",e,t,Mc,-1,-1,-1),fo("n2",e,t,Mc,1,-1,-1),fo("n3",e,t,Mc,-1,1,-1),fo("n4",e,t,Mc,1,1,-1),fo("f1",e,t,Mc,-1,-1,1),fo("f2",e,t,Mc,1,-1,1),fo("f3",e,t,Mc,-1,1,1),fo("f4",e,t,Mc,1,1,1),fo("u1",e,t,Mc,.7,1.1,-1),fo("u2",e,t,Mc,-.7,1.1,-1),fo("u3",e,t,Mc,0,2,-1),fo("cf1",e,t,Mc,-1,0,1),fo("cf2",e,t,Mc,1,0,1),fo("cf3",e,t,Mc,0,-1,1),fo("cf4",e,t,Mc,0,1,1),fo("cn1",e,t,Mc,-1,0,-1),fo("cn2",e,t,Mc,1,0,-1),fo("cn3",e,t,Mc,0,-1,-1),fo("cn4",e,t,Mc,0,1,-1),t.getAttribute("position").needsUpdate=!0};var Tc=new n;((mo.prototype=Object.create(ei.prototype)).constructor=mo).prototype.update=function(t){var e,i,n;void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Tc.setFromObject(this.object),Tc.isEmpty()||(t=Tc.min,e=Tc.max,(n=(i=this.geometry.attributes.position).array)[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=t.x,n[4]=e.y,n[5]=e.z,n[6]=t.x,n[7]=t.y,n[8]=e.z,n[9]=e.x,n[10]=t.y,n[11]=e.z,n[12]=e.x,n[13]=e.y,n[14]=t.z,n[15]=t.x,n[16]=e.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=e.x,n[22]=t.y,n[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere())},mo.prototype.setFromObject=function(t){return this.object=t,this.update(),this},mo.prototype.copy=function(t){return ei.prototype.copy.call(this,t),this.object=t.object,this},((go.prototype=Object.create(ei.prototype)).constructor=go).prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),f.prototype.updateMatrixWorld.call(this,t))},((vo.prototype=Object.create(ti.prototype)).constructor=vo).prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),f.prototype.updateMatrixWorld.call(this,t)};var Ec,Cc,Ac=new St;((yo.prototype=Object.create(f.prototype)).constructor=yo).prototype.setDirection=function(t){.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Ac.set(t.z,0,-t.x).normalize(),this.quaternion.setFromAxisAngle(Ac,Math.acos(t.y)))},yo.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},yo.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},yo.prototype.copy=function(t){return f.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},(bo.prototype=Object.create(ei.prototype)).constructor=bo;var Pc=Math.pow(2,8),Lc=[.125,.215,.35,.446,.526,.582],Rc=5+Lc.length,Oc={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},Dc=new br,sc=function(){for(var t=[],e=[],i=[],n=8,r=0;r<Rc;r++){var o=Math.pow(2,n);e.push(o);var a=1/o;4<r?a=Lc[r-8+4-1]:0==r&&(a=0),i.push(a);var s=[o=-(a=1/(o-1))/2,o,a=1+a/2,o,a,a,o,o,a,a,o,a];o=new Float32Array(108),a=new Float32Array(72);for(var l=new Float32Array(36),c=0;c<6;c++){var h=c%3*2/3-1,u=2<c?0:-1;o.set([h,u,0,h+2/3,u,0,h+2/3,1+u,0,h,u,0,h+2/3,1+u,0,h,1+u,0],18*c),a.set(s,12*c),l.set([c,c,c,c,c,c],6*c)}(s=new N).setAttribute("position",new C(o,3)),s.setAttribute("uv",new C(a,2)),s.setAttribute("faceIndex",new C(l,1)),t.push(s),4<n&&n--}return{_lodPlanes:t,_sizeLods:e,_sigmas:i}}(),Ic=sc._lodPlanes,kc=sc._sizeLods,Nc=sc._sigmas,Fc=null,rc=(1+Math.sqrt(5))/2,sc=1/rc,Bc=[new St(1,1,1),new St(-1,1,1),new St(1,1,-1),new St(-1,1,-1),new St(0,rc,sc),new St(0,rc,-sc),new St(sc,0,rc),new St(-sc,0,rc),new St(rc,sc,0),new St(-rc,sc,0)];xo.prototype={constructor:xo,fromScene:function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=.1),void 0===n&&(n=100),Fc=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,i,n,r),0<e&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(t){return this._fromTexture(t)},fromCubemap:function(t){return this._fromTexture(t)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=Mo(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=So(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<Ic.length;t++)Ic[t].dispose()},_cleanup:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Fc),t.scissorTest=!1,_o(t,0,0,t.width,t.height)},_fromTexture:function(t){Fc=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},_allocateTargets:function(t){var e,i=wo(e={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:(e=void 0!==t&&1009===t.type&&(3e3===t.encoding||3001===t.encoding||3007===t.encoding))?t.encoding:3002,depthBuffer:!1,stencilBuffer:!1});return i.depthBuffer=!t,this._pingPongRenderTarget=wo(e),i},_compileMaterial:function(t){t=new F(Ic[0],t),this._renderer.compile(t,Dc)},_sceneToCubeUV:function(t,e,i,n){e=new q(90,1,e,i),i=[1,-1,1,1,1,1];var r=[1,1,1,-1,-1,-1],o=this._renderer,a=o.outputEncoding,s=o.toneMapping,l=o.getClearColor(),c=o.getClearAlpha();o.toneMapping=0,o.outputEncoding=3e3;var h,u=t.background;for(u&&u.isColor&&(u.convertSRGBToLinear(),h=Math.min(Math.max(Math.ceil(Math.log2(Math.max(u.r,u.g,u.b))),-128),127),u=u.multiplyScalar(Math.pow(2,-h)),o.setClearColor(u,(h+128)/255),t.background=null),u=0;u<6;u++)0==(h=u%3)?(e.up.set(0,i[u],0),e.lookAt(r[u],0,0)):1==h?(e.up.set(0,0,i[u]),e.lookAt(0,r[u],0)):(e.up.set(0,i[u],0),e.lookAt(0,0,r[u])),_o(n,h*Pc,2<u?Pc:0,Pc,Pc),o.setRenderTarget(n),o.render(t,e);o.toneMapping=s,o.outputEncoding=a,o.setClearColor(l,c)},_textureToCubeUV:function(t,e){var i=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Mo()):null==this._equirectShader&&(this._equirectShader=So());var n=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new F(Ic[0],n);((n=n.uniforms).envMap.value=t).isCubeTexture||n.texelSize.value.set(1/t.image.width,1/t.image.height),n.inputEncoding.value=Oc[t.encoding],n.outputEncoding.value=Oc[e.texture.encoding],_o(e,0,0,3*Pc,2*Pc),i.setRenderTarget(e),i.render(r,Dc)},_applyPMREM:function(t){var e=this._renderer,i=e.autoClear;e.autoClear=!1;for(var n=1;n<Rc;n++)this._blur(t,n-1,n,Math.sqrt(Nc[n]*Nc[n]-Nc[n-1]*Nc[n-1]),Bc[(n-1)%Bc.length]);e.autoClear=i},_blur:function(t,e,i,n,r){var o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,n,"latitudinal",r),this._halfBlur(o,t,i,i,n,"longitudinal",r)},_halfBlur:function(t,e,i,n,r,o,a){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new F(Ic[n],l),l=l.uniforms,h=kc[i]-1,u=r/(h=isFinite(r)?Math.PI/(2*h):2*Math.PI/39),d=isFinite(r)?1+Math.floor(3*u):20;20<d&&console.warn("sigmaRadians, "+r+", is too large and will clip, as it requested "+d+" samples when the maximum is set to 20"),r=[];for(var p=0,f=0;f<20;++f){var m=f/u,m=Math.exp(-m*m/2);r.push(m),0==f?p+=m:f<d&&(p+=2*m)}for(u=0;u<r.length;u++)r[u]/=p;l.envMap.value=t.texture,l.samples.value=d,l.weights.value=r,l.latitudinal.value="latitudinal"===o,a&&(l.poleAxis.value=a),l.dTheta.value=h,l.mipInt.value=8-i,l.inputEncoding.value=Oc[t.texture.encoding],l.outputEncoding.value=Oc[t.texture.encoding],t=kc[n],_o(e,3*Math.max(0,Pc-2*t),(0===n?0:2*Pc)+2*t*(4<n?n-8+4:0),3*t,2*t),s.setRenderTarget(e),s.render(c,Dc)}},Xn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Xn.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Object.assign(cr.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new H,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new St(r.x,r.y,r.z||0))}return e}}),Object.assign(hr.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Co.prototype=Object.create(Kn.prototype),Ao.prototype=Object.create(Kn.prototype),Po.prototype=Object.create(Kn.prototype),Object.assign(Po.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),co.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ao.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Hn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Hl.extractUrlBase(t)}}),Hn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Lr.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(io.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(n.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(m.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Et.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},no.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Do,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Do.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Do.ceilPowerOfTwo(t)}}),Object.assign(g.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Mt.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new St).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,o)}}),v.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},p.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(s.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(x.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(x,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),x.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),x.getNormal(t,e,i,n)}}),Object.assign(ur.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qi(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new on(this,t)}}),Object.assign(wt.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(St.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(_t.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(H.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(f.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(f.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(F.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(F.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Xe.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ze.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ye.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Xn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),q.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(dr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(C.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(C.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(N.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e,i){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new C(e,i)))},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(N.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Cr.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Kr.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Ge.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Ge.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Xi.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Zr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(w.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(bn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(yn.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(W.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(ze.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(ze.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Le.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(E.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ur.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new kr).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Gr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},X.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},ko.crossOrigin=void 0,ko.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new qn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},ko.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new $n;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},ko.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ko.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"119"}})),t.ACESFilmicToneMapping=4,t.AddEquation=100,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=_r,t.AmbientLightProbe=Fr,t.AnimationClip=Fn,t.AnimationLoader=jn,t.AnimationMixer=Yr,t.AnimationObjectGroup=qr,t.AnimationUtils=Rl,t.ArcCurve=Zn,t.ArrayCamera=Ie,t.ArrowHelper=yo,t.Audio=Ur,t.AudioAnalyser=Gr,t.AudioContext=$l,t.AudioListener=Hr,t.AudioLoader=kr,t.AxesHelper=bo,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new bo(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Vn(t)},t.Bone=Je,t.BooleanKeyframeTrack=Ln,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new mo(t,e)},t.Box2=io,t.Box3=n,t.Box3Helper=go,t.BoxBufferGeometry=j,t.BoxGeometry=U,t.BoxHelper=mo,t.BufferAttribute=C,t.BufferGeometry=N,t.BufferGeometryLoader=Pr,t.ByteType=1010,t.Cache=Ol,t.Camera=$,t.CameraHelper=po,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=li,t.CatmullRomCurve3=Kn,t.CineonToneMapping=3,t.CircleBufferGeometry=fn,t.CircleGeometry=pn,t.ClampToEdgeWrapping=1001,t.Clock=zr,t.ClosedSplineCurve3=Co,t.Color=y,t.ColorKeyframeTrack=Rn,t.CompressedTexture=si,t.CompressedTextureLoader=Gn,t.ConeBufferGeometry=dn,t.ConeGeometry=un,t.CubeCamera=X,t.CubeGeometry=U,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=tt,t.CubeTextureLoader=$n,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=ir,t.CubicBezierCurve3=nr,t.CubicInterpolant=En,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Xn,t.CurvePath=cr,t.CustomBlending=5,t.CustomToneMapping=5,t.CylinderBufferGeometry=hn,t.CylinderGeometry=cn,t.Cylindrical=eo,t.DataTexture=Tt,t.DataTexture2DArray=et,t.DataTexture3D=it,t.DataTextureLoader=Vn,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Dl,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=ci,t.DirectionalLight=wr,t.DirectionalLightHelper=uo,t.DirectionalLightShadow=xr,t.DiscreteInterpolant=An,t.DodecahedronBufferGeometry=_i,t.DodecahedronGeometry=wi,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new C(t,e).setUsage(35048)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=ln,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ei(new ln(t.geometry),new Qe({color:void 0!==e?e:16777215}))},t.EllipseCurve=Yn,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=r,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Xi,t.ExtrudeGeometry=qi,t.Face3=b,t.Face4=function(t,e,i,n,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new b(t,e,i,r,o,a)},t.FaceColors=1,t.FileLoader=Un,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new O(t,e)},t.Float32BufferAttribute=O,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new D(t,e)},t.Float64BufferAttribute=D,t.FloatType=1015,t.Fog=je,t.FogExp2=Ue,t.Font=Dr,t.FontLoader=Ir,t.FrontSide=0,t.Frustum=Et,t.GammaEncoding=3007,t.Geometry=H,t.GeometryUtils={merge:function(t,e,i){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=co,t.Group=ke,t.HalfFloatType=1016,t.HemisphereLight=pr,t.HemisphereLightHelper=lo,t.HemisphereLightProbe=Nr,t.IcosahedronBufferGeometry=xi,t.IcosahedronGeometry=bi,t.ImageBitmapLoader=Rr,t.ImageLoader=Wn,t.ImageUtils=ko,t.ImmediateRenderObject=ro,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Ar,t.InstancedBufferGeometry=Cr,t.InstancedInterleavedBuffer=Jr,t.InstancedMesh=Ke,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new A(t,e)},t.Int16BufferAttribute=A,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new L(t,e)},t.Int32BufferAttribute=L,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new S(t,e)},t.Int8BufferAttribute=S,t.IntType=1013,t.InterleavedBuffer=Ge,t.InterleavedBufferAttribute=Ve,t.Interpolant=Tn,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=7680,t.KeyframeTrack=Pn,t.LOD=Xe,t.LatheBufferGeometry=rn,t.LatheGeometry=nn,t.Layers=o,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=dr,t.LightProbe=Tr,t.LightShadow=fr,t.Line=ti,t.Line3=no,t.LineBasicMaterial=Qe,t.LineCurve=rr,t.LineCurve3=or,t.LineDashedMaterial=Mn,t.LineLoop=ii,t.LinePieces=1,t.LineSegments=ei,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=Cn,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=Hn,t.LoaderUtils=Hl,t.LoadingManager=zn,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=w,t.MaterialLoader=Er,t.Math=Do,t.MathUtils=Do,t.Matrix3=g,t.Matrix4=Mt,t.MaxEquation=104,t.Mesh=F,t.MeshBasicMaterial=_,t.MeshDepthMaterial=Ae,t.MeshDistanceMaterial=Pe,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=_n,t.MeshMatcapMaterial=Sn,t.MeshNormalMaterial=wn,t.MeshPhongMaterial=bn,t.MeshPhysicalMaterial=yn,t.MeshStandardMaterial=vn,t.MeshToonMaterial=xn,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=On,t.Object3D=f,t.ObjectLoader=Lr,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=yi,t.OctahedronGeometry=vi,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=br,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=xo,t.ParametricBufferGeometry=di,t.ParametricGeometry=ui,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new $e(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ni(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ri(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ni(t)},t.Path=hr,t.PerspectiveCamera=q,t.Plane=v,t.PlaneBufferGeometry=J,t.PlaneGeometry=Z,t.PlaneHelper=vo,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ri(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ni(t)},t.PointLight=yr,t.PointLightHelper=so,t.Points=ri,t.PointsMaterial=ni,t.PolarGridHelper=ho,t.PolyhedronBufferGeometry=fi,t.PolyhedronGeometry=pi,t.PositionalAudio=jr,t.PropertyBinding=$r,t.PropertyMixer=Vr,t.QuadraticBezierCurve=ar,t.QuadraticBezierCurve3=sr,t.Quaternion=p,t.QuaternionKeyframeTrack=In,t.QuaternionLinearInterpolant=Dn,t.REVISION="119",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=37496,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBIntegerFormat=1032,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=37492,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=gn,t.Ray=s,t.Raycaster=Kr,t.RectAreaLight=Sr,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=en,t.RingGeometry=tn,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=c,t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}},t.ShaderChunk=Ts,t.ShaderLib=Es,t.ShaderMaterial=W,t.ShadowMaterial=mn,t.Shape=ur,t.ShapeBufferGeometry=an,t.ShapeGeometry=on,t.ShapePath=Or,t.ShapeUtils=Cl,t.ShortType=1011,t.Skeleton=Ze,t.SkeletonHelper=ao,t.SkinnedMesh=Ye,t.SmoothShading=2,t.Sphere=m,t.SphereBufferGeometry=Qi,t.SphereGeometry=Ki,t.Spherical=ac,t.SphericalHarmonics3=Mr,t.Spline=Po,t.SplineCurve=lr,t.SplineCurve3=Ao,t.SpotLight=gr,t.SpotLightHelper=oo,t.SpotLightShadow=mr,t.Sprite=$e,t.SpriteMaterial=We,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=35044,t.StaticReadUsage=35045,t.StereoCamera=Br,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=kn,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=gi,t.TetrahedronGeometry=mi,t.TextBufferGeometry=Ji,t.TextGeometry=Zi,t.Texture=d,t.TextureLoader=qn,t.TorusBufferGeometry=Ai,t.TorusGeometry=Ci,t.TorusKnotBufferGeometry=Ei,t.TorusKnotGeometry=Ti,t.Triangle=x,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=Mi,t.TubeGeometry=Si,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new P(t,e)},t.Uint16BufferAttribute=P,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(t,e)},t.Uint32BufferAttribute=R,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new M(t,e)},t.Uint8BufferAttribute=M,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new T(t,e)},t.Uint8ClampedBufferAttribute=T,t.Uniform=Zr,t.UniformsLib=Ms,t.UniformsUtils=ws,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector2=wt,t.Vector3=St,t.Vector4=_t,t.VectorKeyframeTrack=Nn,t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new St(t,e,i)},t.VertexColors=2,t.VideoTexture=ai,t.WebGL1Renderer=He,t.WebGLCubeRenderTarget=Y,t.WebGLMultisampleRenderTarget=i,t.WebGLRenderTarget=E,t.WebGLRenderTargetCube=function(t,e,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Y(t,i)},t.WebGLRenderer=ze,t.WebGLUtils=De,t.WireframeGeometry=hi,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ei(new hi(t.geometry),new Qe({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Un(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t.sRGBEncoding=3001,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports._vantaEffect=e():t._vantaEffect=e()}("undefined"!=typeof self?self:this,function(){return n={},r.m=i={0:function(t,e,i){"use strict";function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(){return"undefined"!=typeof navigator?/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<600:null}i.d(e,"c",function(){return n}),i.d(e,"e",function(){return r}),i.d(e,"i",function(){return o}),i.d(e,"h",function(){return a}),i.d(e,"g",function(){return s}),i.d(e,"f",function(){return l}),i.d(e,"a",function(){return c}),i.d(e,"b",function(){return h}),i.d(e,"d",function(){return u}),Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)};const o=t=>t[Math.floor(Math.random()*t.length)];function a(t,e){return null==e&&(e=1),(t=null==t?0:t)+Math.random()*(e-t)}function s(t,e){return null==t&&(t=0),null==e&&(e=1),Math.floor(t+Math.random()*(e-t+1))}const l=t=>document.querySelector(t),c=t=>"number"==typeof t?"#"+("00000"+t.toString(16)).slice(-6):t,h=(t,e=1)=>{t=c(t),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),t=t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null;return"rgba("+t.r+","+t.g+","+t.b+","+e+")"},u=t=>.299*t.r+.587*t.g+.114*t.b},1:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(0);const r="object"==typeof window;let o=r&&window.THREE||{};r&&!window.VANTA&&(window.VANTA={});const a=r&&window.VANTA||{};a.register=(t,e)=>a[t]=t=>new e(t),a.version="0.5.21";const s=function(){return Array.prototype.unshift.call(arguments,"[VANTA]"),console.error.apply(this,arguments)};a.VantaBase=class{constructor(t={}){if(!r)return!1;(a.current=this).windowMouseMoveWrapper=this.windowMouseMoveWrapper.bind(this),this.windowTouchWrapper=this.windowTouchWrapper.bind(this),this.windowGyroWrapper=this.windowGyroWrapper.bind(this),this.resize=this.resize.bind(this),this.animationLoop=this.animationLoop.bind(this),this.restart=this.restart.bind(this);var e="function"==typeof this.getDefaultOptions?this.getDefaultOptions():this.defaultOptions;if(this.options=Object(n.c)({mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1},e),(t instanceof HTMLElement||"string"==typeof t)&&(t={el:t}),Object(n.c)(this.options,t),this.options.THREE&&(o=this.options.THREE),this.el=this.options.el,null==this.el)s('Instance needs "el" param!');else if(!(this.options.el instanceof HTMLElement)){const t=this.el;if(this.el=Object(n.f)(t),!this.el)return void s("Cannot find element",t)}this.prepareEl(),this.initThree(),this.setSize();try{this.init()}catch(t){return s("Init error",t),this.renderer&&this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),void(this.options.backgroundColor&&(console.log("[VANTA] Falling back to backgroundColor"),this.el.style.background=Object(n.a)(this.options.backgroundColor)))}this.initMouse(),this.resize(),this.animationLoop();const i=window.addEventListener;i("resize",this.resize),window.requestAnimationFrame(this.resize),this.options.mouseControls&&(i("scroll",this.windowMouseMoveWrapper),i("mousemove",this.windowMouseMoveWrapper)),this.options.touchControls&&(i("touchstart",this.windowTouchWrapper),i("touchmove",this.windowTouchWrapper)),this.options.gyroControls&&i("deviceorientation",this.windowGyroWrapper)}setOptions(t={}){Object(n.c)(this.options,t),this.triggerMouseMove()}prepareEl(){let t,e;if("undefined"!=typeof Node&&Node.TEXT_NODE)for(t=0;t<this.el.childNodes.length;t++){const e=this.el.childNodes[t];if(e.nodeType===Node.TEXT_NODE){const t=document.createElement("span");t.textContent=e.textContent,e.parentElement.insertBefore(t,e),e.remove()}}for(t=0;t<this.el.children.length;t++)e=this.el.children[t],"static"===getComputedStyle(e).position&&(e.style.position="relative"),"auto"===getComputedStyle(e).zIndex&&(e.style.zIndex=1);"static"===getComputedStyle(this.el).position&&(this.el.style.position="relative")}applyCanvasStyles(t,e={}){Object(n.c)(t.style,{position:"absolute",zIndex:0,top:0,left:0,background:""}),Object(n.c)(t.style,e),t.classList.add("vanta-canvas")}initThree(){o.WebGLRenderer?(this.renderer=new o.WebGLRenderer({alpha:!0,antialias:!0}),this.el.appendChild(this.renderer.domElement),this.applyCanvasStyles(this.renderer.domElement),isNaN(this.options.backgroundAlpha)&&(this.options.backgroundAlpha=1),this.scene=new o.Scene):console.warn("[VANTA] No THREE defined on window")}getCanvasElement(){return this.renderer?this.renderer.domElement:this.p5renderer?this.p5renderer.canvas:void 0}getCanvasRect(){const t=this.getCanvasElement();return!!t&&t.getBoundingClientRect()}windowMouseMoveWrapper(t){var e=this.getCanvasRect();if(!e)return!1;var i=t.clientX-e.left,t=t.clientY-e.top;0<=i&&0<=t&&i<=e.width&&t<=e.height&&(this.mouseX=i,this.mouseY=t,this.options.mouseEase||this.triggerMouseMove(i,t))}windowTouchWrapper(t){var e,i=this.getCanvasRect();if(!i)return!1;1===t.touches.length&&(e=t.touches[0].clientX-i.left,t=t.touches[0].clientY-i.top,0<=e&&0<=t&&e<=i.width&&t<=i.height&&(this.mouseX=e,this.mouseY=t,this.options.mouseEase||this.triggerMouseMove(e,t)))}windowGyroWrapper(t){var e=this.getCanvasRect();if(!e)return!1;var i=Math.round(2*t.alpha)-e.left,t=Math.round(2*t.beta)-e.top;0<=i&&0<=t&&i<=e.width&&t<=e.height&&(this.mouseX=i,this.mouseY=t,this.options.mouseEase||this.triggerMouseMove(i,t))}triggerMouseMove(t,e){void 0===t&&void 0===e&&(e=this.options.mouseEase?(t=this.mouseEaseX,this.mouseEaseY):(t=this.mouseX,this.mouseY)),this.uniforms&&(this.uniforms.iMouse.value.x=t/this.scale,this.uniforms.iMouse.value.y=e/this.scale);t/=this.width,e/=this.height;"function"==typeof this.onMouseMove&&this.onMouseMove(t,e)}setSize(){this.scale||(this.scale=1),Object(n.e)()&&this.options.scaleMobile?this.scale=this.options.scaleMobile:this.options.scale&&(this.scale=this.options.scale),this.width=Math.max(this.el.offsetWidth,this.options.minWidth),this.height=Math.max(this.el.offsetHeight,this.options.minHeight)}initMouse(){(!this.mouseX&&!this.mouseY||this.mouseX===this.options.minWidth/2&&this.mouseY===this.options.minHeight/2)&&(this.mouseX=this.width/2,this.mouseY=this.height/2,this.triggerMouseMove(this.mouseX,this.mouseY))}resize(){this.setSize(),this.camera&&(this.camera.aspect=this.width/this.height,"function"==typeof this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio/this.scale)),"function"==typeof this.onResize&&this.onResize()}isOnScreen(){var t=this.el.offsetHeight,e=this.el.getBoundingClientRect(),i=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,e=e.top+i;return e-window.innerHeight<=i&&i<=e+t}animationLoop(){return this.t||(this.t=0),this.t+=1,this.t2||(this.t2=0),this.t2+=this.options.speed||1,this.uniforms&&(this.uniforms.iTime.value=.016667*this.t2),this.options.mouseEase&&(this.mouseEaseX=this.mouseEaseX||this.mouseX||0,this.mouseEaseY=this.mouseEaseY||this.mouseY||0,.1<Math.abs(this.mouseEaseX-this.mouseX)+Math.abs(this.mouseEaseY-this.mouseY)&&(this.mouseEaseX+=.05*(this.mouseX-this.mouseEaseX),this.mouseEaseY+=.05*(this.mouseY-this.mouseEaseY),this.triggerMouseMove(this.mouseEaseX,this.mouseEaseY))),(this.isOnScreen()||this.options.forceAnimate)&&("function"==typeof this.onUpdate&&this.onUpdate(),this.scene&&this.camera&&(this.renderer.render(this.scene,this.camera),this.renderer.setClearColor(this.options.backgroundColor,this.options.backgroundAlpha)),this.fps&&this.fps.update&&this.fps.update(),"function"==typeof this.afterRender&&this.afterRender()),this.req=window.requestAnimationFrame(this.animationLoop)}restart(){if(this.scene)for(;this.scene.children.length;)this.scene.remove(this.scene.children[0]);"function"==typeof this.onRestart&&this.onRestart(),this.init()}init(){"function"==typeof this.onInit&&this.onInit()}destroy(){"function"==typeof this.onDestroy&&this.onDestroy();const t=window.removeEventListener;t("touchstart",this.windowTouchWrapper),t("touchmove",this.windowTouchWrapper),t("scroll",this.windowMouseMoveWrapper),t("mousemove",this.windowMouseMoveWrapper),t("deviceorientation",this.windowGyroWrapper),t("resize",this.resize),window.cancelAnimationFrame(this.req),this.renderer&&(this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),this.renderer=null,this.scene=null),a.current===this&&(a.current=null)}},e.b=a.VantaBase},18:function(t,e,i){"use strict";i.r(e);var n=i(1),i=i(0);let r="object"==typeof window&&window.THREE,{Camera:d,ClampToEdgeWrapping:p,DataTexture:f,FloatType:m,Mesh:g,NearestFilter:v,PlaneBufferGeometry:y,RGBAFormat:b,Scene:x,ShaderMaterial:w,WebGLRenderTarget:_}=r||{};function o(l,c,h,t){t&&({Camera:d,ClampToEdgeWrapping:p,DataTexture:f,FloatType:m,Mesh:g,NearestFilter:v,PlaneBufferGeometry:y,RGBAFormat:b,Scene:x,ShaderMaterial:w,WebGLRenderTarget:_}=t),this.variables=[],this.currentTextureIndex=0;var a=m,n=new x,r=new d;r.position.z=1;var i={passThruTexture:{value:null}},o=e("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",i),s=new g(new y(2,2),o);function u(t){t.defines.resolution="vec2( "+l.toFixed(1)+", "+c.toFixed(1)+" )"}function e(t,e){t=new w({uniforms:e=e||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:t});return u(t),t}n.add(s),this.setDataType=function(t){return a=t,this},this.addVariable=function(t,e,i){e={name:t,initialValueTexture:i,material:this.createShaderMaterial(e),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:v,magFilter:v};return this.variables.push(e),e},this.setVariableDependencies=function(t,e){t.dependencies=e},this.init=function(){if(!h.capabilities.isWebGL2&&!h.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===h.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var t=0;t<this.variables.length;t++){var e=this.variables[t];e.renderTargets[0]=this.createRenderTarget(l,c,e.wrapS,e.wrapT,e.minFilter,e.magFilter),e.renderTargets[1]=this.createRenderTarget(l,c,e.wrapS,e.wrapT,e.minFilter,e.magFilter),this.renderTexture(e.initialValueTexture,e.renderTargets[0]),this.renderTexture(e.initialValueTexture,e.renderTargets[1]);var i=e.material,n=i.uniforms;if(null!==e.dependencies)for(var r=0;r<e.dependencies.length;r++){var o=e.dependencies[r];if(o.name!==e.name){for(var a=!1,s=0;s<this.variables.length;s++)if(o.name===this.variables[s].name){a=!0;break}if(!a)return"Variable dependency not found. Variable="+e.name+", dependency="+o.name}n[o.name]={value:null},i.fragmentShader="\nuniform sampler2D "+o.name+";\n"+i.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var t=this.currentTextureIndex,e=0===this.currentTextureIndex?1:0,i=0,n=this.variables.length;i<n;i++){var r=this.variables[i];if(null!==r.dependencies)for(var o=r.material.uniforms,a=0,s=r.dependencies.length;a<s;a++){var l=r.dependencies[a];o[l.name].value=l.renderTargets[t].texture}this.doRenderTarget(r.material,r.renderTargets[e])}this.currentTextureIndex=e},this.getCurrentRenderTarget=function(t){return t.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(t){return t.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=u,this.createShaderMaterial=e,this.createRenderTarget=function(t,e,i,n,r,o){return new _(t=t||l,e=e||c,{wrapS:i=i||p,wrapT:n=n||p,minFilter:r=r||v,magFilter:o=o||v,format:b,type:a,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var t=new Float32Array(l*c*4);return new f(t,l,c,b,m)},this.renderTexture=function(t,e){i.passThruTexture.value=t,this.doRenderTarget(o,e),i.passThruTexture.value=null},this.doRenderTarget=function(t,e){var i=h.getRenderTarget();s.material=t,h.setRenderTarget(e),h.render(n,r),s.material=o,h.setRenderTarget(i)}}let u="object"==typeof window&&window.THREE;const S=!Object(i.e)();let M=32,T=M*M;let E,C;class a extends n.b{static initClass(){this.prototype.defaultOptions={backgroundColor:465199,color1:16711680,color2:53759,colorMode:"varianceGradient",birdSize:1,wingSpan:30,speedLimit:5,separation:20,alignment:20,cohesion:20,quantity:5}}constructor(t){var p;u=t.THREE||u,p=u,(E=function(r={}){var o=this;function t(t,e,i){var n=1.5*(r.birdSize||1);o.vertices.push(new p.Vector3(t*n,e*n,i*n))}function e(t,e,i){o.faces.push(new p.Face3(t,e,i))}p.Geometry.call(this),t(5,0,0),t(-5,-1,1),t(-5,0,0),t(-5,-2,-1),t(0,2,-6),t(0,2,6),t(2,0,0),t(-3,0,0),e(0,2,1),e(4,7,6),e(5,6,7),this.computeFaceNormals()}).prototype=Object.create(p.Geometry.prototype),C=function(t){var n,e,i=new p.Vector3,r=500,o=500,a=200,h=t;this.position=new p.Vector3,this.velocity=new p.Vector3,n=new p.Vector3,this.setGoal=function(t){e=t},this.setWorldSize=function(t,e,i){r=t,o=e,a=i},this.run=function(t){i.set(-r,this.position.y,this.position.z),(i=this.avoid(i)).multiplyScalar(5),n.add(i),i.set(r,this.position.y,this.position.z),(i=this.avoid(i)).multiplyScalar(5),n.add(i),i.set(this.position.x,-o,this.position.z),(i=this.avoid(i)).multiplyScalar(5),n.add(i),i.set(this.position.x,o,this.position.z),(i=this.avoid(i)).multiplyScalar(5),n.add(i),i.set(this.position.x,this.position.y,-a),(i=this.avoid(i)).multiplyScalar(5),n.add(i),i.set(this.position.x,this.position.y,a),(i=this.avoid(i)).multiplyScalar(5),n.add(i),.5<Math.random()&&this.flock(t),this.move()},this.flock=function(t){e&&n.add(this.reach(e,.005)),n.add(this.alignment(t)),n.add(this.cohesion(t)),n.add(this.separation(t))},this.move=function(){this.velocity.add(n);var t=this.velocity.length();2.5<t&&this.velocity.divideScalar(t/2.5),this.position.add(this.velocity),n.set(0,0,0)},this.checkBounds=function(){this.position.x>r&&(this.position.x=-r),this.position.x<-r&&(this.position.x=r),this.position.y>o&&(this.position.y=-o),this.position.y<-o&&(this.position.y=o),this.position.z>a&&(this.position.z=-a),this.position.z<-a&&(this.position.z=a)},this.avoid=function(t){var e=new p.Vector3;return e.copy(this.position),e.sub(t),e.multiplyScalar(1/this.position.distanceToSquared(t)),e},this.repulse=function(t){var e,i=this.position.distanceTo(t);i<150&&((e=new p.Vector3).subVectors(this.position,t),e.multiplyScalar(.5/i),n.add(e))},this.reach=function(t,e){var i=new p.Vector3;return i.subVectors(t,this.position),i.multiplyScalar(e),i},this.alignment=function(t){for(var e,i,n,r=new p.Vector3,o=0,a=100*h.alignment/20,s=0,l=t.length;s<l;s++).6<Math.random()||0<(i=(e=t[s]).position.distanceTo(this.position))&&i<=a&&(r.add(e.velocity),o++);return 0<o&&(r.divideScalar(o),.1<(n=r.length())&&r.divideScalar(n/.1)),r},this.cohesion=function(t){for(var e,i,n=new p.Vector3,r=new p.Vector3,o=0,a=100*h.cohesion/20,s=0,l=t.length;s<l;s++).6<Math.random()||0<(i=(e=t[s]).position.distanceTo(this.position))&&i<=a&&(n.add(e.position),o++);0<o&&n.divideScalar(o),r.subVectors(n,this.position);var c=r.length();return.1<c&&r.divideScalar(c/.1),r},this.separation=function(t){for(var e,i,n=new p.Vector3,r=new p.Vector3,o=100*h.separation/20,a=0,s=t.length;a<s;a++).6<Math.random()||0<(i=(e=t[a]).position.distanceTo(this.position))&&i<=o&&(r.subVectors(this.position,e.position),r.normalize(),r.divideScalar(i),n.add(r));return n}},p.BirdGeometry=function(t){t.quantity&&(M=Math.pow(2,t.quantity),T=M*M);const e=3*T,i=3*e;p.BufferGeometry.call(this);const n=new p.BufferAttribute(new Float32Array(3*i),3),r=new p.BufferAttribute(new Float32Array(3*i),3),o=new p.BufferAttribute(new Float32Array(2*i),2),a=new p.BufferAttribute(new Float32Array(i),1);this.setAttribute||(this.setAttribute=this.addAttribute),this.setAttribute("position",n),this.setAttribute("birdColor",r),this.setAttribute("reference",o),this.setAttribute("birdVertex",a);let s=0;const l=function(){for(let t=0;t<arguments.length;t++)n.array[s++]=arguments[t]},c=t.wingSpan||20,h=t.birdSize||1;for(let t=0;t<T;t++)l(0,-0,-20*h,0,4*h,-20*h,0,0,30*h),l(0,0,-15*h,-c*h,0,0,0,0,15*h),l(0,0,15*h,c*h,0,0,0,0,-15*h);const u={};for(s=0;s<3*e;s++){const p=~~(s/3),e=p%M/M,i=~~(p/M)/M,n=~~(s/9)/T,l=n.toString(),c=-1!=t.colorMode.indexOf("Gradient");var d=!c&&u[l]?u[l]:t.effect.getNewCol(n);c||u[l]||(u[l]=d),r.array[3*s+0]=d.r,r.array[3*s+1]=d.g,r.array[3*s+2]=d.b,o.array[2*s]=e,o.array[2*s+1]=i,a.array[s]=s%9}return this.scale(.2,.2,.2)},p.BirdGeometry.prototype=Object.create(p.BufferGeometry.prototype),super(t)}initComputeRenderer(){this.gpuCompute=new o(M,M,this.renderer,u);var t=this.gpuCompute.createTexture(),e=this.gpuCompute.createTexture();(function(t){const n=t.image.data;let r=0;const o=n.length;(()=>{const t=[];for(;r<o;){const o=800*Math.random()-400,e=800*Math.random()-400,i=800*Math.random()-400;n[r+0]=o,n[r+1]=e,n[r+2]=i,n[r+3]=1,t.push(r+=4)}t})()})(t),function(t){const n=t.image.data;let r=0;const o=n.length;(()=>{const t=[];for(;r<o;){const o=Math.random()-.5,e=Math.random()-.5,i=Math.random()-.5;n[r+0]=10*o,n[r+1]=10*e,n[r+2]=10*i,n[r+3]=1,t.push(r+=4)}t})()}(e),this.velocityVariable=this.gpuCompute.addVariable("textureVelocity","uniform float time;\nuniform float testing;\nuniform float delta; // about 0.016\nuniform float separationDistance; // 20\nuniform float alignmentDistance; // 40\nuniform float cohesionDistance;\nuniform float speedLimit;\nuniform float freedomFactor;\nuniform vec3 predator;\n\nconst float width = resolution.x;\nconst float height = resolution.y;\n\nconst float PI = 3.141592653589793;\nconst float PI_2 = PI * 2.0;\n// const float VISION = PI * 0.55;\n\nfloat zoneRadius = 40.0;\nfloat zoneRadiusSquared = 1600.0;\n\nfloat separationThresh = 0.45;\nfloat alignmentThresh = 0.65;\n\nconst float UPPER_BOUNDS = BOUNDS;\nconst float LOWER_BOUNDS = -UPPER_BOUNDS;\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvoid main() {\n\n  zoneRadius = separationDistance + alignmentDistance + cohesionDistance;\n  separationThresh = separationDistance / zoneRadius;\n  alignmentThresh = ( separationDistance + alignmentDistance ) / zoneRadius;\n  zoneRadiusSquared = zoneRadius * zoneRadius;\n\n\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec3 birdPosition, birdVelocity;\n\n  vec3 selfPosition = texture2D( texturePosition, uv ).xyz;\n  vec3 selfVelocity = texture2D( textureVelocity, uv ).xyz;\n\n  float dist;\n  vec3 dir; // direction\n  float distSquared;\n\n  float separationSquared = separationDistance * separationDistance;\n  float cohesionSquared = cohesionDistance * cohesionDistance;\n\n  float f;\n  float percent;\n\n  vec3 velocity = selfVelocity;\n\n  float limit = speedLimit;\n\n  dir = predator * UPPER_BOUNDS - selfPosition;\n  dir.z = 0.;\n  // dir.z *= 0.6;\n  dist = length( dir );\n  distSquared = dist * dist;\n\n  float preyRadius = 150.0;\n  float preyRadiusSq = preyRadius * preyRadius;\n\n  // move birds away from predator\n  if (dist < preyRadius) {\n\n    f = ( distSquared / preyRadiusSq - 1.0 ) * delta * 100.;\n    velocity += normalize( dir ) * f;\n    limit += 5.0;\n  }\n\n  // if (testing == 0.0) {}\n  // if ( rand( uv + time ) < freedomFactor ) {}\n\n  // Attract flocks to the center\n  vec3 central = vec3( 0., 0., 0. );\n  dir = selfPosition - central;\n  dist = length( dir );\n\n  dir.y *= 2.5;\n  velocity -= normalize( dir ) * delta * 5.;\n\n  for (float y=0.0;y<height;y++) {\n    for (float x=0.0;x<width;x++) {\n\n      vec2 ref = vec2( x + 0.5, y + 0.5 ) / resolution.xy;\n      birdPosition = texture2D( texturePosition, ref ).xyz;\n\n      dir = birdPosition - selfPosition;\n      dist = length(dir);\n\n      if (dist < 0.0001) continue;\n\n      distSquared = dist * dist;\n\n      if (distSquared > zoneRadiusSquared ) continue;\n\n      percent = distSquared / zoneRadiusSquared;\n\n      if ( percent < separationThresh ) { // low\n\n        // Separation - Move apart for comfort\n        f = (separationThresh / percent - 1.0) * delta;\n        velocity -= normalize(dir) * f;\n\n      } else if ( percent < alignmentThresh ) { // high\n\n        // Alignment - fly the same direction\n        float threshDelta = alignmentThresh - separationThresh;\n        float adjustedPercent = ( percent - separationThresh ) / threshDelta;\n\n        birdVelocity = texture2D( textureVelocity, ref ).xyz;\n\n        f = ( 0.5 - cos( adjustedPercent * PI_2 ) * 0.5 + 0.5 ) * delta;\n        velocity += normalize(birdVelocity) * f;\n\n      } else {\n\n        // Attraction / Cohesion - move closer\n        float threshDelta = 1.0 - alignmentThresh;\n        float adjustedPercent = ( percent - alignmentThresh ) / threshDelta;\n\n        f = ( 0.5 - ( cos( adjustedPercent * PI_2 ) * -0.5 + 0.5 ) ) * delta;\n\n        velocity += normalize(dir) * f;\n\n      }\n    }\n  }\n\n  // this make tends to fly around than down or up\n  // if (velocity.y > 0.) velocity.y *= (1. - 0.2 * delta);\n\n  // Speed Limits\n  if ( length( velocity ) > limit ) {\n    velocity = normalize( velocity ) * limit;\n  }\n\n  gl_FragColor = vec4( velocity, 1.0 );\n\n}",e),this.positionVariable=this.gpuCompute.addVariable("texturePosition","uniform float time;\nuniform float delta;\n\nvoid main() {\n\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 tmpPos = texture2D( texturePosition, uv );\n  vec3 position = tmpPos.xyz;\n  vec3 velocity = texture2D( textureVelocity, uv ).xyz;\n\n  float phase = tmpPos.w;\n\n  phase = mod( ( phase + delta +\n    length( velocity.xz ) * delta * 3. +\n    max( velocity.y, 0.0 ) * delta * 6. ), 62.83 );\n\n  gl_FragColor = vec4( position + velocity * delta * 15. , phase );\n\n}",t),this.gpuCompute.setVariableDependencies(this.velocityVariable,[this.positionVariable,this.velocityVariable]),this.gpuCompute.setVariableDependencies(this.positionVariable,[this.positionVariable,this.velocityVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.velocityUniforms=this.velocityVariable.material.uniforms,this.positionUniforms.time={value:0},this.positionUniforms.delta={value:0},this.velocityUniforms.time={value:1},this.velocityUniforms.delta={value:0},this.velocityUniforms.testing={value:1},this.velocityUniforms.separationDistance={value:1},this.velocityUniforms.alignmentDistance={value:1},this.velocityUniforms.cohesionDistance={value:1},this.velocityUniforms.speedLimit={value:1},this.velocityUniforms.freedomFactor={value:1},this.velocityUniforms.predator={value:new u.Vector3},this.velocityVariable.material.defines.BOUNDS=800..toFixed(2),this.velocityVariable.wrapS=u.RepeatWrapping,this.velocityVariable.wrapT=u.RepeatWrapping,this.positionVariable.wrapS=u.RepeatWrapping,this.positionVariable.wrapT=u.RepeatWrapping;t=this.gpuCompute.init();null!==t&&console.error(t)}initGpgpuBirds(){var t=Object.assign({},this.options,{effect:this}),t=new u.BirdGeometry(t);this.birdUniforms={color:{value:new u.Color(16720384)},texturePosition:{value:null},textureVelocity:{value:null},time:{value:1},delta:{value:0},birdSize:{value:this.options.birdSize}};const e=new u.ShaderMaterial({uniforms:this.birdUniforms,vertexShader:"attribute vec2 reference;\nattribute float birdVertex;\n\nattribute vec3 birdColor;\n\nuniform sampler2D texturePosition;\nuniform sampler2D textureVelocity;\n\nvarying vec4 vColor;\nvarying float z;\n\nuniform float time;\nuniform float birdSize;\n\nvoid main() {\n\n  vec4 tmpPos = texture2D( texturePosition, reference );\n  vec3 pos = tmpPos.xyz;\n  vec3 velocity = normalize(texture2D( textureVelocity, reference ).xyz);\n\n  vec3 newPosition = position;\n\n  if ( birdVertex == 4.0 || birdVertex == 7.0 ) {\n    // flap wings\n    newPosition.y = sin( tmpPos.w ) * 5. * birdSize;\n  }\n\n  newPosition = mat3( modelMatrix ) * newPosition;\n\n  velocity.z *= -1.;\n  float xz = length( velocity.xz );\n  float xyz = 1.;\n  float x = sqrt( 1. - velocity.y * velocity.y );\n\n  float cosry = velocity.x / xz;\n  float sinry = velocity.z / xz;\n\n  float cosrz = x / xyz;\n  float sinrz = velocity.y / xyz;\n\n  mat3 maty =  mat3(\n    cosry, 0, -sinry,\n    0    , 1, 0     ,\n    sinry, 0, cosry\n  );\n\n  mat3 matz =  mat3(\n    cosrz , sinrz, 0,\n    -sinrz, cosrz, 0,\n    0     , 0    , 1\n  );\n  newPosition =  maty * matz * newPosition;\n  newPosition += pos;\n  z = newPosition.z;\n\n  vColor = vec4( birdColor, 1.0 );\n  gl_Position = projectionMatrix *  viewMatrix  * vec4( newPosition, 1.0 );\n}",fragmentShader:"varying vec4 vColor;\nvarying float z;\nuniform vec3 color;\nvoid main() {\n  // Fake colors for now\n  float rr = 0.2 + ( 1000. - z ) / 1000. * vColor.x;\n  float gg = 0.2 + ( 1000. - z ) / 1000. * vColor.y;\n  float bb = 0.2 + ( 1000. - z ) / 1000. * vColor.z;\n  gl_FragColor = vec4( rr, gg, bb, 1. );\n}",side:u.DoubleSide}),i=new u.Mesh(t,e);return i.rotation.y=Math.PI/2,i.matrixAutoUpdate=!1,i.updateMatrix(),this.scene.add(i)}getNewCol(t){const e=this.options,i=null!=e.color1?e.color1:4456448,n=null!=e.color2?e.color2:6684672,r=new u.Color(i),o=new u.Color(n);let a,s;if(s=-1!=e.colorMode.indexOf("Gradient")?Math.random():t,0==e.colorMode.indexOf("variance")){const t=(r.r+Math.random()*o.r).clamp(0,1),e=(r.g+Math.random()*o.g).clamp(0,1),i=(r.b+Math.random()*o.b).clamp(0,1);a=new u.Color(t,e,i)}else a=0==e.colorMode.indexOf("mix")?new u.Color(i+s*n):r.lerp(o,s);return a}onInit(){this.camera=new u.PerspectiveCamera(75,this.width/this.height,1,3e3),this.camera.position.z=350,this.fog=new u.Fog(16777215,100,1e3),this.mouseX=this.mouseY=0;const t=this.birds=[],e=this.boids=[],i=this.options;let n,r;if(S)try{this.initComputeRenderer(),this.valuesChanger=this.valuesChanger.bind(this),this.valuesChanger(),this.initGpgpuBirds()}catch(t){console.error("[vanta.js] birds init error: ",t)}else for(var o=6*Math.pow(2,i.quantity),a=0;a<o;a++){(n=e[a]=new C(i)).position.x=400*Math.random()-200,n.position.y=400*Math.random()-200,n.position.z=400*Math.random()-200,n.velocity.x=2*Math.random()-1,n.velocity.y=2*Math.random()-1,n.velocity.z=2*Math.random()-1,n.setWorldSize(500,500,300);const c=-1!=i.colorMode.indexOf("Gradient"),h=new E(i);for(var s=0;s<h.faces.length;s++)if(c)for(var l=0;l<3;l++){const t=this.getNewCol();h.faces[s].vertexColors[l]=t}else{const t=this.getNewCol(a/o);h.faces[s].vertexColors[0]=t,h.faces[s].vertexColors[1]=t,h.faces[s].vertexColors[2]=t}(r=t[a]=new u.Mesh(h,new u.MeshBasicMaterial({color:16777215,side:u.DoubleSide,vertexColors:u.VertexColors}))).phase=Math.floor(62.83*Math.random()),r.position.x=e[a].position.x,r.position.y=e[a].position.y,r.position.z=e[a].position.z,this.scene.add(r)}}valuesChanger(){this.velocityUniforms&&(this.velocityUniforms.separationDistance.value=this.options.separation,this.velocityUniforms.alignmentDistance.value=this.options.alignment,this.velocityUniforms.speedLimit.value=this.options.speedLimit,this.velocityUniforms.cohesionDistance.value=this.options.cohesion)}onUpdate(){this.now=performance.now(),this.last||(this.last=this.now);let i=(this.now-this.last)/1e3;if(1<i&&(i=1),this.last=this.now,S)this.positionUniforms.time.value=this.now,this.positionUniforms.delta.value=i,this.velocityUniforms.time.value=this.now,this.velocityUniforms.delta.value=i,this.birdUniforms.time.value=this.now,this.birdUniforms.delta.value=i,this.velocityUniforms.predator.value.set(this.mouseX,-this.mouseY,0),this.mouseX=1e4,this.mouseY=1e4,this.gpuCompute.compute(),this.birdUniforms.texturePosition.value=this.gpuCompute.getCurrentRenderTarget(this.positionVariable).texture,this.birdUniforms.textureVelocity.value=this.gpuCompute.getCurrentRenderTarget(this.velocityVariable).texture;else{const i=this.birds,o=this.boids;let t,e;for(var n=0,r=i.length;n<r;n++)(t=o[n]).run(o),(e=i[n]).rotation.y=Math.atan2(-t.velocity.z,t.velocity.x),e.rotation.z=Math.asin(t.velocity.y/t.velocity.length()),e.phase=(e.phase+(Math.max(0,e.rotation.z)+.1))%62.83,e.geometry.vertices[5].y=e.geometry.vertices[4].y=5*Math.sin(e.phase)*this.options.birdSize,e.geometry.verticesNeedUpdate=!0,e.position.x=o[n].position.x,e.position.y=o[n].position.y,e.position.z=o[n].position.z}}onMouseMove(e,t){if(this.mouseX=e-.5,this.mouseY=t-.5,!S){const e=this.boids;let t;for(var i=new u.Vector3(this.mouseX*this.width,-this.mouseY*this.height,0),n=0,r=e.length;n<r;n++)t=e[n],i.z=t.position.z,t.repulse(i)}}onDestroy(){}onResize(){}}a.initClass(),e.default=n.a.register("BIRDS",a)}},r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=18);function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,n}),$(function(){VANTA.BIRDS({el:"#home-page",mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color1:15859712,color2:461324,wingSpan:21,speedLimit:4})});